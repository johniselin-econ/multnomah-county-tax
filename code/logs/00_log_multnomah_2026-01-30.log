---------------------------------------------------------------
      name:  <unnamed>
       log:  C:/Users/ji252/Documents/GitHub/multnomah-county-t
> ax/code/logs/00_log_multnomah_2026-01-30.log
  log type:  text
 opened on:  30 Jan 2026, 09:36:36

. 
. ** Set Seed 
. set seed 56403

. 
. ** Set scheme
. set scheme plotplainblind

. 
. ** PARALLEL PROCESSING FLAG
. ** Set to 1 to use parallel processing, 0 for sequential proc
> essing
. global use_parallel = 1

. 
. ** Set parameters 
. local overwrite_csv = 0

. global start_year_acs = 2015

. global end_year_acs = 2024

. 
end of do-file

. do "C:\Users\ji252\Documents\GitHub\multnomah-county-tax\code
> \02_flow_analysis.do"

. /************************************************************
> *******************
> File Name:              02_flow_analysis.do
> Creator:                John Iselin
> Date Update:    January 30, 2026
> 
> Called by: 00_multnomah.do
> 
> Purpose: Perform flow-based analysis on IRS data.
> 
> Outputs:
> All outputs are produced twice: once for all counties and onc
> e for ACS counties
> only (with _acs suffix). ACS sample includes property tax rat
> e controls.
> 
> - county_flow_coefficients[_acs].dta/csv: flow coefficients f
> or all counties
>   (b_out, b_in, se_out, se_in, t-stats, p-values, percentile 
> ranks)
> - fig_multnomah_post_*[_acs].png: flow coefficient plots for 
> Multnomah
> - fig_hist_out_*[_acs].png: Histogram of out-migration coeffi
> cients (with percentile)
> - fig_hist_in_*[_acs].png: Histogram of in-migration coeffici
> ents (with percentile)
> - fig_scatter_out_in_*[_acs].png: Scatter plot of out vs in c
> oefficients
> - fig_multnomah_out_*[_acs].png: Event study plots for out-mi
> gration
> - fig_multnomah_in_*[_acs].png: Event study plots for in-migr
> ation
> - fig_multnomah_both_*[_acs].png: Combined event study plots
> 
> Excel output (flow_analysis_stats.xlsx):
> - all/acs: Summary statistics for Multnomah and distribution
> - larger_out_all/acs: Counties with larger out-migration coef
> ficients
> - smaller_in_all/acs: Counties with smaller in-migration coef
> ficients
> - worse_both_all/acs: Counties worse on both dimensions
> - larger_t_out_all/acs: Counties with larger out-migration t-
> statistics
> - smaller_t_in_all/acs: Counties with smaller in-migration t-
> statistics
> 
> Authors: John Iselin
> 
> For more information, contact john.iselin@yale.edu
> 
> *************************************************************
> ******************/
. 
. 
. ** Start log file
. capture log close log_02

. log using "${logs}02_log_flow_${date}", replace text name(log
> _02)
(file
    C:/Users/ji252/Documents/GitHub/multnomah-county-tax/code
    > /logs/02_log_flow_2026-01-30.log not found)
---------------------------------------------------------------
      name:  log_02
       log:  C:/Users/ji252/Documents/GitHub/multnomah-county-t
> ax/code/logs/02_log_flow_2026-01-30.log
  log type:  text
 opened on:  30 Jan 2026, 10:00:19

. 
. ** Parameters
. local reps = 100

. 
. ** Load ACS data to get the set of counties 
. use "${data}working/acs_county_gross_18plus", clear

. 
. ** Keep required variables 
. keep year fips 

. 
. ** Keep only always-observed fips 
. bysort fips: gen ct = _N

. tab ct 

         ct |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |        168        3.48        3.48
          7 |        287        5.95        9.43
         10 |      4,370       90.57      100.00
------------+-----------------------------------
      Total |      4,825      100.00

. keep if ct == 10 
(455 observations deleted)

. 
. ** Keep fips 
. keep fips 

. 
. ** Drop duplicates 
. duplicates drop 

Duplicates in terms of all variables

(3,933 observations deleted)

. 
. ** Preserve data 
. tempfile acs_fips 

. save `acs_fips'
file C:\Users\ji252\AppData\Local\Temp\ST_828_000001.tmp
    saved as .dta format

. clear 

. 
. ** Load IRS Data
. use "${data}working/irs_county_flow.dta", clear

. 
. ** Sample restrictions
. drop if inlist(state_fips_o, 2, 15)     // Alaska and Hawaii
(3,109 observations deleted)

. drop if inlist(state_fips_d, 2, 15)     // Alaska and Hawaii
(2,293 observations deleted)

. 
. ** Clean up variables
. drop fips

. 
. ** Mover indicators
. gen mover = fips_o != fips_d

. 
. ** Generate flow id
. egen flow_id = group(fips_d fips_o)

. 
. ** Declare panel and fill in missing values 
. xtset flow_id year 

Panel variable: flow_id (unbalanced)
 Time variable: year, 2016 to 2022, but with gaps
         Delta: 1 unit

. tsfill, full

. 
. ** Keep required variables 
. keep fips_d fips_o flow_id year mover n1 n2 agi 

. 
. ** Replace with 0s
. replace n1 = 0 if missing(n1)
(140,172 real changes made)

. replace n2 = 0 if missing(n2)
(140,172 real changes made)

. replace agi = 0 if missing(agi)
(140,172 real changes made)

. replace agi = 0 if agi < 0 
(89 real changes made)

. 
. ** Merge with time-varying controls
. 
. ** Keep if in donor pool in both origin and destination
. foreach x in "o" "d" {
  2. 
.         ** Fill in missing fips
.         bysort flow_id: egen tmp = mean(fips_`x')
  3.         replace fips_`x' = tmp if missing(fips_`x')
  4.         drop tmp 
  5. 
.         ** Merge with relevent variables
.         gen fips = fips_`x'
  6.         merge m:1 fips using "${data}working/ids",        
>                                       ///
>                 keep(match) gen(merge_ids_`x')
  7.         merge m:1 year fips using "${data}working/bls_unem
> ployment",    ///
>                 keep(match) gen(merge_bls_`x')
  8.         merge m:1 year fips using "${data}working/bea_econ
> omics",               ///
>                 keep(match) gen(merge_bea_`x')
  9.         merge m:1 fips using `acs_fips', keep(master match
> ) gen(merge_acs_`x')
 10.         merge m:1 year fips using "${data}working/property
> _tax_rates_overall", ///
>                 gen(proptx_merge_`x') keep(master match) keep
> using(prop_rate_mean )
 11.         
.         ** Rename
.         rename state_name state_name_`x'
 12.         rename state_fips state_fips_`x'
 13.         rename county_name county_name_`x'
 14.         rename county_fips county_fips_`x'      
 15.         rename unemp unemp_`x'
 16.         rename population pop_`x'
 17.         rename per_capita_income per_capita_income_`x'
 18.         rename prop_rate_mean prop_rate_mean_`x'
 19.         drop fips
 20. 
. } // END ORIGIN-DESTINATION LOOP
(140,172 real changes made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                           497,448  (merge_ids_o==3)
    -----------------------------------------
(variable fips was float, now double to accommodate using
       data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                           491,939  (merge_bls_o==3)
    -----------------------------------------

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                           484,407  (merge_bea_o==3)
    -----------------------------------------

    Result                      Number of obs
    -----------------------------------------
    Not matched                       202,846
        from master                   202,846  (merge_acs_o==1)
        from using                          0  (merge_acs_o==2)

    Matched                           281,561  (merge_acs_o==3)
    -----------------------------------------

    Result                      Number of obs
    -----------------------------------------
    Not matched                       189,234
        from master                   189,234  (proptx_merge_o=
> =1)
        from using                          0  (proptx_merge_o=
> =2)

    Matched                           295,173  (proptx_merge_o=
> =3)
    -----------------------------------------
(136,291 real changes made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                           484,407  (merge_ids_d==3)
    -----------------------------------------
(variable fips was float, now double to accommodate using
       data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                           480,970  (merge_bls_d==3)
    -----------------------------------------

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                           475,524  (merge_bea_d==3)
    -----------------------------------------

    Result                      Number of obs
    -----------------------------------------
    Not matched                       207,879
        from master                   207,879  (merge_acs_d==1)
        from using                          0  (merge_acs_d==2)

    Matched                           267,645  (merge_acs_d==3)
    -----------------------------------------

    Result                      Number of obs
    -----------------------------------------
    Not matched                       193,163
        from master                   193,163  (proptx_merge_d=
> =1)
        from using                          0  (proptx_merge_d=
> =2)

    Matched                           282,361  (proptx_merge_d=
> =3)
    -----------------------------------------

. 
. ** Tag flows to-and-from acs counties 
. gen acs_flow = merge_acs_d == 3 & merge_acs_o == 3

. label var acs_flow "Flows to and from ACS counties"

. 
. ** Multnomah indicators
. gen out_multnomah = (state_fips_o == 41 & county_fips_o == 51
> )

. gen in_multnomah = (state_fips_d == 41 & county_fips_d == 51)

. 
. ** Post-indicators
. gen post = year > 2020

. 
. ** Interactions
. gen in_multnomah_post = in_multnomah * post

. gen out_multnomah_post = out_multnomah * post

. 
. ** Create interactions manually (base year = 2020)
. forvalues y = 2016/2022 {
  2.         gen x_out_`y' = out_multnomah * (year == `y')
  3.         gen x_in_`y' = in_multnomah * (year == `y')
  4. }

. 
. ** Drop base year (2020)
. drop x_out_2020 x_in_2020

. 
. *************************************************************
> *******************
. ** MAIN ANALYSIS LOOP: Run regressions for (1) all counties, 
> (2) ACS counties
. ** The second iteration restricts to flows where acs_flow == 
> 1 and adds
. ** property tax rate controls (prop_rate_mean_o and prop_rate
> _mean_d)
. *************************************************************
> *******************
. 
. foreach sample in "all" "acs" {
  2. 
.         ** Set sample-specific parameters
.         if "`sample'" == "all" {
  3.                 local sample_cond ""
  4.                 local covars "unemp_* pop_* per_capita_inc
> ome_*"
  5.                 local file_suffix ""
  6.                 local title_suffix ""
  7.         }
  8.         else if "`sample'" == "acs" {
  9.                 local sample_cond "& acs_flow == 1"
 10.                 local covars "unemp_* pop_* per_capita_inc
> ome_* prop_rate_mean_o prop_rate_mean_d"
 11.                 local file_suffix "_acs"
 12.                 local title_suffix " (ACS Counties)"
 13.         }
 14. 
.         dis ""
 15.         dis "=============================================
> ==========================="
 16.         dis "RUNNING ANALYSIS FOR SAMPLE: `sample'"
 17.         dis "Sample condition: `sample_cond'"
 18.         dis "Covariates: `covars'"
 19.         dis "=============================================
> ==========================="
 20.         dis ""
 21. 
. *************************************************************
> *******************
. ** REGRESSION 1: Multnomah X Post (flow DID)
. *************************************************************
> *******************
. 
. ** Loop over outcome variables
. foreach outcome in n1 n2 agi {
 22. 
.         ** Set outcome label for graphs
.         if "`outcome'" == "n1" local outcome_label "Number of
>  Returns"
 23.         if "`outcome'" == "n2" local outcome_label "Number
>  of Exemptions"
 24.         if "`outcome'" == "agi" local outcome_label "Adjus
> ted Gross Income"
 25. 
.         ** Regression 1a: With covariates
.         ppmlhdfe `outcome' i.out_multnomah_post i.in_multnoma
> h_post     ///
>                 `covars'                                     
>                                                              
>       ///
>                 if mover == 1 `sample_cond',                 
>                                            ///
>                 absorb(year flow_id) vce(cluster flow_id)
 26.         estimates store `outcome'_with_covars
 27. 
.         ** Regression 1b: Without covariates
.         ppmlhdfe `outcome' i.out_multnomah_post i.in_multnoma
> h_post     ///
>                 if mover == 1 `sample_cond',                 
>                                            ///
>                 absorb(year flow_id) vce(cluster flow_id)
 28.         estimates store `outcome'_no_covars
 29. 
.         ** Plot both regressions
.         coefplot        (`outcome'_with_covars, label("With C
> ovariates")        ///
>                                         mc(navy) ciopts(lc(na
> vy)))                                              ///
>                                 (`outcome'_no_covars, label("
> Without Covariates")       ///
>                                         mc(maroon) ciopts(lc(
> maroon))),                                 ///
>                 keep(1.out_multnomah_post 1.in_multnomah_post
> )                          ///
>                 ciopts(recast(rcap))                         
>                                                    ///
>                 yline(0, lc(gs10) lp(dash))                  
>                                            ///
>                 xline(0, lc(gs10) lp(dash))                  
>                                            ///
>                 coeflabels(     1.out_multnomah_post = "Out-m
> igration"                  ///
>                                         1.in_multnomah_post =
>  "In-migration")                   ///
>                 ytitle("Coefficient")                        
>                                                    ///
>                 xtitle("")                                   
>                                                              
>       ///
>                 legend(pos(6) rows(1))                       
>                                                    ///
>                 title("Migration Flows: Multnomah County x Po
> st`title_suffix'") ///
>                 subtitle("`outcome_label'")                  
>                                                    ///
>                 graphregion(color(white))
 30. 
.         graph export "${results}flows/fig_multnomah_post_`out
> come'`file_suffix'.png", replace
 31. 
. 
. } // END OUTCOME LOOP
 32. 
. *************************************************************
> *******************
. ** REGRESSION 1b: Loop over all counties (Permutation-style a
> nalysis)
. ** Purpose: Run same flow regression for each county to creat
> e distribution
. **          of treatment effects for comparison with Multnoma
> h
. *************************************************************
> *******************
. 
. ** Preserve data for later use in REGRESSION 2
. preserve
 33. 
. ** Get list of unique origin fips codes (respecting sample co
> ndition)
. if "`sample'" == "all" {
 34.         levelsof fips_o, local(fips_list)
 35. }
 36. else {
 37.         levelsof fips_o if acs_flow == 1, local(fips_list)
 38. }
 39. local n_fips : word count `fips_list'
 40. dis "Running regressions for `n_fips' counties (`sample' s
> ample)..."
 41. 
. ** Initialize tempfile to store results
. tempfile county_results
 42. postfile county_coefs fips b_out se_out b_in se_in using `
> county_results', replace
 43. 
. ** Counter for display
. local ct = 1
 44. 
. foreach f of local fips_list {
 45. 
.         ** Display status every 100 counties
.         if mod(`ct', 100) == 0 {
 46.                 dis "Processing county `ct' of `n_fips' (f
> ips = `f')..."
 47.         }
 48. 
.         ** Generate treatment vars
.         gen out_tmp = fips_o == `f'
 49.         gen in_tmp = fips_d == `f'
 50. 
.         ** Interactions
.         gen out_post_tmp = out_tmp * post
 51.         gen in_post_tmp = in_tmp * post
 52. 
.         ** Run regression with capture to handle potential er
> rors
.         capture {
 53.                 ** Regression: With covariates
.                  ppmlhdfe agi i.out_post_tmp i.in_post_tmp   
>    ///
>                         `covars'                             
>                                                    ///
>                         if mover == 1 `sample_cond',         
>                            ///
>                         absorb(year flow_id) vce(cluster flow
> _id)
 54. 
.                 ** Store coefficients and SEs
.                 local tmp_b_out = _b[1.out_post_tmp]
 55.                 local tmp_se_out = _se[1.out_post_tmp]
 56.                 local tmp_b_in = _b[1.in_post_tmp]
 57.                 local tmp_se_in = _se[1.in_post_tmp]
 58. 
.                 ** Post results
.                 post county_coefs (`f') (`tmp_b_out') (`tmp_s
> e_out') (`tmp_b_in') (`tmp_se_in')
 59.         }
 60. 
.         ** If regression failed, post missing values
.         if _rc != 0 {
 61.                 post county_coefs (`f') (.) (.) (.) (.)
 62.                 dis "Warning: Regression failed for fips `
> f'"
 63.         }
 64.         
. 
.         ** Drop temporary vars
.         drop out_tmp in_tmp out_post_tmp in_post_tmp
 65. 
.         ** Update count
.         local ct = `ct' + 1
 66. 
. } // END FIPS LOOP
 67. 
. ** Close postfile
. postclose county_coefs
 68. 
. ** Load results
. use `county_results', clear
 69. 
. ** Add identifiers
. gen multnomah = (fips == 41051)
 70. label var fips "County FIPS code"
 71. label var b_out "Out-migration coefficient (County x Post)
> "
 72. label var se_out "Out-migration SE"
 73. label var b_in "In-migration coefficient (County x Post)"
 74. label var se_in "In-migration SE"
 75. label var multnomah "Multnomah County indicator"
 76. 
. ** Calculate t-statistics and p-values
. gen t_out = b_out / se_out
 77. gen t_in = b_in / se_in
 78. gen p_out = 2 * (1 - normal(abs(t_out)))
 79. gen p_in = 2 * (1 - normal(abs(t_in)))
 80. 
. label var t_out "Out-migration t-statistic"
 81. label var t_in "In-migration t-statistic"
 82. label var p_out "Out-migration p-value"
 83. label var p_in "In-migration p-value"
 84. 
. ** Calculate percentile ranks for Multnomah
. foreach x in "b" "t" {
 85.         egen rank_`x'_out = rank(`x'_out)
 86.         egen rank_`x'_in = rank(`x'_in)
 87.         qui count if !missing(`x'_out)
 88.         gen pctile_`x'_out = 100 * rank_`x'_out / r(N)
 89.         qui count if !missing(`x'_in)
 90.         gen pctile_`x'_in = 100 * rank_`x'_in / r(N)
 91. 
. }
 92. 
. label var pctile_b_out "Percentile rank of out-migration coef
> "
 93. label var pctile_b_in "Percentile rank of in-migration coe
> f"
 94. label var pctile_t_out "Percentile rank of out-migration t
> -stat"
 95. label var pctile_t_in "Percentile rank of in-migration t-s
> tat"
 96. 
. ** Display Multnomah's position
. dis ""
 97. dis "=========================================="
 98. dis "Multnomah County Results:"
 99. dis "=========================================="
100. summ b_out t_out b_in t_in pctile_*_out pctile_*_in if mul
> tnomah == 1
101. 
. ** Display distribution summary
. dis ""
102. dis "Distribution of coefficients (all counties):"
103. summ b_out b_in, detail
104. 
. dis ""
105. dis "Distribution of t-stats (all counties):"
106. summ t_out t_in, detail
107. 
. ** Save county coefficients dataset
. compress
108. save "${data}working/county_flow_coefficients`file_suffix'
> .dta", replace
109. export delimited using "${data}working/county_flow_coeffic
> ients`file_suffix'.csv", replace
110. 
. dis "County coefficients saved to ${data}working/county_flow_
> coefficients`file_suffix'.dta"
111. 
. ** Restore original data for REGRESSION 2
. restore
112. 
. *************************************************************
> *******************
. ** SECTION: Multnomah vs Distribution Plots (Histogram Compar
> ison)
. ** Purpose: Plot Multnomah's coefficients against distributio
> n of all counties
. *************************************************************
> *******************
. 
. ** Load the county coefficients
. preserve
113. use "${data}working/county_flow_coefficients`file_suffix'.
> dta", clear
114. 
. ** Loop over beta and t-stats 
. foreach x in "b" "t" {
115.         
.         ** Label 
.         if "`x'" == "b" local txt "Coefficients"
116.         else if "`x'" == "t" local txt = "T-Statistics"
117.                 
.         ** Store Multnomah's coefficients for reference lines
.         summ `x'_out if multnomah == 1, meanonly
118.         local multnomah_`x'_out = r(mean)
119.         summ `x'_in if multnomah == 1, meanonly
120.         local multnomah_`x'_in = r(mean)
121.         summ pctile_`x'_out if multnomah == 1, meanonly
122.         local multnomah_pctile_out = r(mean)
123.         summ pctile_`x'_in if multnomah == 1, meanonly
124.         local multnomah_pctile_in = r(mean)
125. 
.         
.         ** Plot 1: Out-migration coefficient distribution wit
> h Multnomah
.         histogram `x'_out if !missing(`x'_out),              
>                                                    ///
>                 bin(50)                                      
>                                                              
>               ///
>                 fcolor(navy%50) lcolor(navy)                 
>                                                    ///
>                 xline(`multnomah_`x'_out', lcolor(red) lwidth
> (thick) lpattern(solid)) ///
>                 xtitle("Out-migration `txt' (County x Post)")
>                    ///
>                 ytitle("Frequency")                          
>                                                            //
> /
>                 title("Distribution of Out-Migration `txt'`ti
> tle_suffix'")              ///
>                 subtitle("Red line = Multnomah County (percen
> tile: `: display %4.1f `multnomah_pctile_out'')") ///
>                 graphregion(color(white))
126. 
.         graph export "${results}flows/fig_hist_out_`x'`file_s
> uffix'.png", replace
127. 
.         ** Plot 2: In-migration coefficient distribution with
>  Multnomah
.         histogram `x'_in if !missing(`x'_in),                
>                                                    ///
>                 bin(50)                                      
>                                                              
>               ///
>                 fcolor(maroon%50) lcolor(maroon)             
>                                                    ///
>                 xline(`multnomah_`x'_in', lcolor(red) lwidth(
> thick) lpattern(solid)) ///
>                 xtitle("In-migration `txt' (County x Post)") 
>                            ///
>                 ytitle("Frequency")                          
>                                                            //
> /
>                 title("Distribution of In-Migration `txt'`tit
> le_suffix'")               ///
>                 subtitle("Red line = Multnomah County (percen
> tile: `: display %4.1f `multnomah_pctile_in'')") ///
>                 graphregion(color(white))
128. 
.         graph export "${results}flows/fig_hist_in_`x'`file_su
> ffix'.png", replace
129. 
.         ** Plot 3: Combined scatter of out vs in coefficients
.         twoway  (scatter `x'_in `x'_out if multnomah == 0,   
>                                            ///
>                                 mc(navy%30) ms(O) msize(small
> ))                                                 ///
>                         (scatter `x'_in `x'_out if multnomah 
> == 1,                                              ///
>                                 mc(red) ms(D) msize(large)), 
>                                                    ///
>                 xline(0, lc(gs10) lp(dash))                  
>                                                    ///
>                 yline(0, lc(gs10) lp(dash))                  
>                                                    ///
>                 xtitle("Out-migration `txt'")                
>                                    ///
>                 ytitle("In-migration `txt'")                 
>                                            ///
>                 title("Out- vs In-Migration Effects by County
> `title_suffix'")   ///
>                 legend(order(1 "Other Counties" 2 "Multnomah 
> County") pos(6) rows(1)) ///
>                 graphregion(color(white))
130. 
.         graph export "${results}flows/fig_scatter_out_in_`x'`
> file_suffix'.png", replace
131. 
. 
. } // END BETA / T-STAT LOOP
132. 
. *************************************************************
> *******************
. ** SECTION: Export Descriptive Statistics to Excel
. ** Purpose: Export Multnomah vs Distribution stats to Excel f
> ile
. *************************************************************
> *******************
. 
. ** Get Multnomah's statistics
. 
. ** Loop over migration type 
. foreach x in "in" "out" {
133.         
.         summ se_`x' if multnomah == 1, meanonly
134.         local m_se_`x' = r(mean)
135.         
.         ** Loop over beta / t-stat 
.         foreach y in "b" "t" {
136.                 
.                 summ `y'_`x' if multnomah == 1, meanonly
137.                 local m_`y'_`x' = r(mean)
138.                 
.                 summ pctile_`y'_`x' if multnomah == 1, meanon
> ly
139.                 local m_pctile_`y'_`x' = r(mean)
140.                 
.         } // END BETA / T-STAT LOOP 
141.         
.         
. } // END IN/OUT LOOP 
142. 
. ** Count statistics
. qui count if !missing(b_out)
143. local n_counties_out = r(N)
144. qui count if !missing(b_in)
145. local n_counties_in = r(N)
146. qui count if !missing(b_out) & !missing(b_in)
147. local n_counties_both = r(N)
148. 
. ** Count counties with more extreme coefficients than Multnom
> ah
. ** For out-migration: larger (more positive) is "worse"
. ** For in-migration: smaller (more negative) is "worse"
. qui count if b_out > `m_b_out' & !missing(b_out)
149. local n_larger_out = r(N)
150. qui count if b_out > `m_b_out' & !missing(b_out) & p_out <
>  0.05
151. local n_larger_out_sig = r(N)
152. 
. qui count if b_in < `m_b_in' & !missing(b_in)
153. local n_smaller_in = r(N)
154. qui count if b_in < `m_b_in' & !missing(b_in) & p_in < 0.0
> 5
155. local n_smaller_in_sig = r(N)
156. 
. ** Counties with both more out AND less in (worse on both dim
> ensions)
. qui count if b_out > `m_b_out' & b_in < `m_b_in' & !missing(b
> _out) & !missing(b_in)
157. local n_worse_both = r(N)
158. qui count if b_out > `m_b_out' & b_in < `m_b_in' & !missin
> g(b_out) & !missing(b_in) & p_out < 0.05 & p_in < 0.05
159. local n_worse_both_sig = r(N)
160. 
. ** Distribution statistics for out-migration
. summ b_out, detail
161. local dist_out_mean = r(mean)
162. local dist_out_sd = r(sd)
163. local dist_out_min = r(min)
164. local dist_out_max = r(max)
165. local dist_out_p25 = r(p25)
166. local dist_out_p50 = r(p50)
167. local dist_out_p75 = r(p75)
168. 
. ** Distribution statistics for in-migration
. summ b_in, detail
169. local dist_in_mean = r(mean)
170. local dist_in_sd = r(sd)
171. local dist_in_min = r(min)
172. local dist_in_max = r(max)
173. local dist_in_p25 = r(p25)
174. local dist_in_p50 = r(p50)
175. local dist_in_p75 = r(p75)
176. 
. ** Distribution statistics for t-stats
. summ t_out, detail
177. local dist_t_out_mean = r(mean)
178. local dist_t_out_sd = r(sd)
179. local dist_t_out_p50 = r(p50)
180. 
. summ t_in, detail
181. local dist_t_in_mean = r(mean)
182. local dist_t_in_sd = r(sd)
183. local dist_t_in_p50 = r(p50)
184. 
. ** Save county coefficients to tempfile, then create stats da
> taset
. tempfile county_coefs_tmp
185. save `county_coefs_tmp'
186. 
. ** Create a new dataset with the statistics
. clear
187. set obs 40
188. 
. ** Create variables
. gen stat_name = ""
189. gen stat_value = .
190. gen stat_description = ""
191. 
. ** Row counter
. local row = 1
192. 
. ** ==========================================================
> ==================
. ** MULTNOMAH STATISTICS
. ** ==========================================================
> ==================
. 
. replace stat_name = "m_b_out" in `row'
193. replace stat_value = `m_b_out' in `row'
194. replace stat_description = "Multnomah out-migration coeffi
> cient" in `row'
195. local row = `row' + 1
196. 
. replace stat_name = "m_se_out" in `row'
197. replace stat_value = `m_se_out' in `row'
198. replace stat_description = "Multnomah out-migration standa
> rd error" in `row'
199. local row = `row' + 1
200. 
. replace stat_name = "m_t_out" in `row'
201. replace stat_value = `m_t_out' in `row'
202. replace stat_description = "Multnomah out-migration t-stat
> istic" in `row'
203. local row = `row' + 1
204. 
. replace stat_name = "m_p_out" in `row'
205. replace stat_value = `m_p_out' in `row'
206. replace stat_description = "Multnomah out-migration p-valu
> e" in `row'
207. local row = `row' + 1
208. 
. replace stat_name = "m_pctile_out" in `row'
209. replace stat_value = `m_pctile_out' in `row'
210. replace stat_description = "Multnomah out-migration percen
> tile rank" in `row'
211. local row = `row' + 1
212. 
. replace stat_name = "m_b_in" in `row'
213. replace stat_value = `m_b_in' in `row'
214. replace stat_description = "Multnomah in-migration coeffic
> ient" in `row'
215. local row = `row' + 1
216. 
. replace stat_name = "m_se_in" in `row'
217. replace stat_value = `m_se_in' in `row'
218. replace stat_description = "Multnomah in-migration standar
> d error" in `row'
219. local row = `row' + 1
220. 
. replace stat_name = "m_t_in" in `row'
221. replace stat_value = `m_t_in' in `row'
222. replace stat_description = "Multnomah in-migration t-stati
> stic" in `row'
223. local row = `row' + 1
224. 
. replace stat_name = "m_p_in" in `row'
225. replace stat_value = `m_p_in' in `row'
226. replace stat_description = "Multnomah in-migration p-value
> " in `row'
227. local row = `row' + 1
228. 
. replace stat_name = "m_pctile_in" in `row'
229. replace stat_value = `m_pctile_in' in `row'
230. replace stat_description = "Multnomah in-migration percent
> ile rank" in `row'
231. local row = `row' + 1
232. 
. ** ==========================================================
> ==================
. ** COUNT STATISTICS
. ** ==========================================================
> ==================
. 
. replace stat_name = "n_counties_out" in `row'
233. replace stat_value = `n_counties_out' in `row'
234. replace stat_description = "Number of counties with out-mi
> gration coef" in `row'
235. local row = `row' + 1
236. 
. replace stat_name = "n_counties_in" in `row'
237. replace stat_value = `n_counties_in' in `row'
238. replace stat_description = "Number of counties with in-mig
> ration coef" in `row'
239. local row = `row' + 1
240. 
. replace stat_name = "n_counties_both" in `row'
241. replace stat_value = `n_counties_both' in `row'
242. replace stat_description = "Number of counties with both c
> oefs" in `row'
243. local row = `row' + 1
244. 
. replace stat_name = "n_larger_out" in `row'
245. replace stat_value = `n_larger_out' in `row'
246. replace stat_description = "Counties with larger out-migra
> tion coef than Multnomah" in `row'
247. local row = `row' + 1
248. 
. replace stat_name = "n_larger_out_sig" in `row'
249. replace stat_value = `n_larger_out_sig' in `row'
250. replace stat_description = "Counties with larger out-migra
> tion coef (p<0.05)" in `row'
251. local row = `row' + 1
252. 
. replace stat_name = "n_smaller_in" in `row'
253. replace stat_value = `n_smaller_in' in `row'
254. replace stat_description = "Counties with smaller in-migra
> tion coef than Multnomah" in `row'
255. local row = `row' + 1
256. 
. replace stat_name = "n_smaller_in_sig" in `row'
257. replace stat_value = `n_smaller_in_sig' in `row'
258. replace stat_description = "Counties with smaller in-migra
> tion coef (p<0.05)" in `row'
259. local row = `row' + 1
260. 
. replace stat_name = "n_worse_both" in `row'
261. replace stat_value = `n_worse_both' in `row'
262. replace stat_description = "Counties worse on both out AND
>  in migration" in `row'
263. local row = `row' + 1
264. 
. replace stat_name = "n_worse_both_sig" in `row'
265. replace stat_value = `n_worse_both_sig' in `row'
266. replace stat_description = "Counties worse on both (p<0.05
>  for both)" in `row'
267. local row = `row' + 1
268. 
. ** ==========================================================
> ==================
. ** DISTRIBUTION STATISTICS - OUT-MIGRATION
. ** ==========================================================
> ==================
. 
. replace stat_name = "dist_out_mean" in `row'
269. replace stat_value = `dist_out_mean' in `row'
270. replace stat_description = "Distribution mean: out-migrati
> on coef" in `row'
271. local row = `row' + 1
272. 
. replace stat_name = "dist_out_sd" in `row'
273. replace stat_value = `dist_out_sd' in `row'
274. replace stat_description = "Distribution SD: out-migration
>  coef" in `row'
275. local row = `row' + 1
276. 
. replace stat_name = "dist_out_min" in `row'
277. replace stat_value = `dist_out_min' in `row'
278. replace stat_description = "Distribution min: out-migratio
> n coef" in `row'
279. local row = `row' + 1
280. 
. replace stat_name = "dist_out_max" in `row'
281. replace stat_value = `dist_out_max' in `row'
282. replace stat_description = "Distribution max: out-migratio
> n coef" in `row'
283. local row = `row' + 1
284. 
. replace stat_name = "dist_out_p25" in `row'
285. replace stat_value = `dist_out_p25' in `row'
286. replace stat_description = "Distribution 25th pctile: out-
> migration coef" in `row'
287. local row = `row' + 1
288. 
. replace stat_name = "dist_out_p50" in `row'
289. replace stat_value = `dist_out_p50' in `row'
290. replace stat_description = "Distribution median: out-migra
> tion coef" in `row'
291. local row = `row' + 1
292. 
. replace stat_name = "dist_out_p75" in `row'
293. replace stat_value = `dist_out_p75' in `row'
294. replace stat_description = "Distribution 75th pctile: out-
> migration coef" in `row'
295. local row = `row' + 1
296. 
. ** ==========================================================
> ==================
. ** DISTRIBUTION STATISTICS - IN-MIGRATION
. ** ==========================================================
> ==================
. 
. replace stat_name = "dist_in_mean" in `row'
297. replace stat_value = `dist_in_mean' in `row'
298. replace stat_description = "Distribution mean: in-migratio
> n coef" in `row'
299. local row = `row' + 1
300. 
. replace stat_name = "dist_in_sd" in `row'
301. replace stat_value = `dist_in_sd' in `row'
302. replace stat_description = "Distribution SD: in-migration 
> coef" in `row'
303. local row = `row' + 1
304. 
. replace stat_name = "dist_in_min" in `row'
305. replace stat_value = `dist_in_min' in `row'
306. replace stat_description = "Distribution min: in-migration
>  coef" in `row'
307. local row = `row' + 1
308. 
. replace stat_name = "dist_in_max" in `row'
309. replace stat_value = `dist_in_max' in `row'
310. replace stat_description = "Distribution max: in-migration
>  coef" in `row'
311. local row = `row' + 1
312. 
. replace stat_name = "dist_in_p25" in `row'
313. replace stat_value = `dist_in_p25' in `row'
314. replace stat_description = "Distribution 25th pctile: in-m
> igration coef" in `row'
315. local row = `row' + 1
316. 
. replace stat_name = "dist_in_p50" in `row'
317. replace stat_value = `dist_in_p50' in `row'
318. replace stat_description = "Distribution median: in-migrat
> ion coef" in `row'
319. local row = `row' + 1
320. 
. replace stat_name = "dist_in_p75" in `row'
321. replace stat_value = `dist_in_p75' in `row'
322. replace stat_description = "Distribution 75th pctile: in-m
> igration coef" in `row'
323. local row = `row' + 1
324. 
. ** ==========================================================
> ==================
. ** DISTRIBUTION STATISTICS - T-STATISTICS
. ** ==========================================================
> ==================
. 
. replace stat_name = "dist_t_out_mean" in `row'
325. replace stat_value = `dist_t_out_mean' in `row'
326. replace stat_description = "Distribution mean: out-migrati
> on t-stat" in `row'
327. local row = `row' + 1
328. 
. replace stat_name = "dist_t_out_sd" in `row'
329. replace stat_value = `dist_t_out_sd' in `row'
330. replace stat_description = "Distribution SD: out-migration
>  t-stat" in `row'
331. local row = `row' + 1
332. 
. replace stat_name = "dist_t_out_p50" in `row'
333. replace stat_value = `dist_t_out_p50' in `row'
334. replace stat_description = "Distribution median: out-migra
> tion t-stat" in `row'
335. local row = `row' + 1
336. 
. replace stat_name = "dist_t_in_mean" in `row'
337. replace stat_value = `dist_t_in_mean' in `row'
338. replace stat_description = "Distribution mean: in-migratio
> n t-stat" in `row'
339. local row = `row' + 1
340. 
. replace stat_name = "dist_t_in_sd" in `row'
341. replace stat_value = `dist_t_in_sd' in `row'
342. replace stat_description = "Distribution SD: in-migration 
> t-stat" in `row'
343. local row = `row' + 1
344. 
. replace stat_name = "dist_t_in_p50" in `row'
345. replace stat_value = `dist_t_in_p50' in `row'
346. replace stat_description = "Distribution median: in-migrat
> ion t-stat" in `row'
347. local row = `row' + 1
348. 
. ** Drop empty rows
. drop if stat_name == ""
349. 
. ** Add sample identifier
. gen sample = "`sample'"
350. 
. ** Export to Excel
. ** First iteration: create new file; subsequent: add sheet
. if "`sample'" == "all" {
351.         export excel using "${results}flows/flow_analysis_
> stats.xlsx", ///
>                 sheet("`sample'") sheetreplace firstrow(varia
> bles)
352. }
353. else {
354.         export excel using "${results}flows/flow_analysis_
> stats.xlsx", ///
>                 sheet("`sample'") sheetmodify firstrow(variab
> les)
355. }
356. 
. dis "Exported descriptive statistics to flow_analysis_stats.x
> lsx, sheet: `sample'"
357. 
. ** ==========================================================
> ==================
. ** EXPORT COUNTY LISTS WITH LARGER COEFFICIENTS TO ADDITIONAL
>  SHEETS
. ** ==========================================================
> ==================
. 
. ** Load county coefficients and merge with county identifiers
. use `county_coefs_tmp', clear
358. merge m:1 fips using "${data}working/ids", keep(master mat
> ch) nogen ///
>         keepusing(state_name county_name state_fips county_fi
> ps)
359. 
. ** Order variables for cleaner output
. order fips state_name county_name state_fips county_fips mult
> nomah ///
>         b_out se_out t_out p_out pctile_b_out pctile_t_out //
> /
>         b_in se_in t_in p_in pctile_b_in pctile_t_in
360. 
. ** Sheet 1: Counties with larger out-migration coefficients t
> han Multnomah
. preserve
361.         keep if b_out > `m_b_out' & !missing(b_out)
362.         gsort -b_out
363. 
.         ** Keep relevant variables
.         keep fips state_name county_name b_out se_out t_out p
> _out pctile_b_out pctile_t_out
364. 
.         ** Export
.         export excel using "${results}flows/flow_analysis_sta
> ts.xlsx", ///
>                 sheet("larger_out_`sample'") sheetmodify firs
> trow(variables)
365. 
.         dis "Exported `=_N' counties with larger out-migratio
> n coef to sheet: larger_out_`sample'"
366. restore
367. 
. ** Sheet 2: Counties with smaller in-migration coefficients t
> han Multnomah
. preserve
368.         keep if b_in < `m_b_in' & !missing(b_in)
369.         gsort b_in
370. 
.         ** Keep relevant variables
.         keep fips state_name county_name b_in se_in t_in p_in
>  pctile_b_in pctile_t_in
371. 
.         ** Export
.         export excel using "${results}flows/flow_analysis_sta
> ts.xlsx", ///
>                 sheet("smaller_in_`sample'") sheetmodify firs
> trow(variables)
372. 
.         dis "Exported `=_N' counties with smaller in-migratio
> n coef to sheet: smaller_in_`sample'"
373. restore
374. 
. ** Sheet 3: Counties worse on BOTH dimensions (larger out AND
>  smaller in)
. preserve
375.         keep if b_out > `m_b_out' & b_in < `m_b_in' & !mis
> sing(b_out) & !missing(b_in)
376.         gsort -b_out
377. 
.         ** Keep relevant variables
.         keep fips state_name county_name ///
>                 b_out se_out t_out p_out pctile_b_out pctile_
> t_out ///
>                 b_in se_in t_in p_in pctile_b_in pctile_t_in
378. 
.         ** Export
.         export excel using "${results}flows/flow_analysis_sta
> ts.xlsx", ///
>                 sheet("worse_both_`sample'") sheetmodify firs
> trow(variables)
379. 
.         dis "Exported `=_N' counties worse on both dimensions
>  to sheet: worse_both_`sample'"
380. restore
381. 
. ** Sheet 4: Counties with larger out-migration t-statistics t
> han Multnomah
. preserve
382.         keep if t_out > `m_t_out' & !missing(t_out)
383.         gsort -t_out
384. 
.         ** Keep relevant variables
.         keep fips state_name county_name b_out se_out t_out p
> _out pctile_b_out pctile_t_out
385. 
.         ** Export
.         export excel using "${results}flows/flow_analysis_sta
> ts.xlsx", ///
>                 sheet("larger_t_out_`sample'") sheetmodify fi
> rstrow(variables)
386. 
.         dis "Exported `=_N' counties with larger out-migratio
> n t-stat to sheet: larger_t_out_`sample'"
387. restore
388. 
. ** Sheet 5: Counties with smaller in-migration t-statistics t
> han Multnomah
. preserve
389.         keep if t_in < `m_t_in' & !missing(t_in)
390.         gsort t_in
391. 
.         ** Keep relevant variables
.         keep fips state_name county_name b_in se_in t_in p_in
>  pctile_b_in pctile_t_in
392. 
.         ** Export
.         export excel using "${results}flows/flow_analysis_sta
> ts.xlsx", ///
>                 sheet("smaller_t_in_`sample'") sheetmodify fi
> rstrow(variables)
393. 
.         dis "Exported `=_N' counties with smaller in-migratio
> n t-stat to sheet: smaller_t_in_`sample'"
394. restore
395. 
. ** Restore main data and continue
. restore
396. 
. *************************************************************
> *******************
. ** REGRESSION 2: Multnomah X Year (Event Study)
. *************************************************************
> *******************
. 
. ** Loop over outcome variables
. foreach outcome in n1 n2 agi {
397. 
.         ** Set outcome label for graphs
.         if "`outcome'" == "n1" local outcome_label "Number of
>  Returns"
398.         if "`outcome'" == "n2" local outcome_label "Number
>  of Exemptions"
399.         if "`outcome'" == "agi" local outcome_label "Adjus
> ted Gross Income"
400. 
.         ** Regression 2a: With covariates
.         ppmlhdfe `outcome' x_out_* x_in_*                    
>                                            ///
>                 `covars'                                     
>                                                              
>       ///
>                 if mover == 1 `sample_cond',                 
>                                            ///
>                 absorb(year flow_id) vce(cluster flow_id)
401.         estimates store `outcome'_es_with_covars
402. 
.         ** Regression 2b: Without covariates
.         ppmlhdfe `outcome' x_out_* x_in_*                    
>                                            ///
>                 if mover == 1 `sample_cond',                 
>                                            ///
>                 absorb(year flow_id) vce(cluster flow_id)
403.         estimates store `outcome'_es_no_covars
404. 
.         ** Extract coefficients into a dataset and plot
.         preserve
405.                 clear
406.                 set obs 7
407.                 gen year = 2015 + _n
408. 
.                 ** Out-migration coefficients (with covariate
> s)
.                 gen out_coef_wc = .
409.                 gen out_ci_lo_wc = .
410.                 gen out_ci_hi_wc = .
411. 
.                 ** In-migration coefficients (with covariates
> )
.                 gen in_coef_wc = .
412.                 gen in_ci_lo_wc = .
413.                 gen in_ci_hi_wc = .
414. 
.                 ** Out-migration coefficients (without covari
> ates)
.                 gen out_coef_nc = .
415.                 gen out_ci_lo_nc = .
416.                 gen out_ci_hi_nc = .
417. 
.                 ** In-migration coefficients (without covaria
> tes)
.                 gen in_coef_nc = .
418.                 gen in_ci_lo_nc = .
419.                 gen in_ci_hi_nc = .
420. 
.                 ** Fill in coefficients (2020 = base year = 0
> )
.                 foreach y in 2016 2017 2018 2019 2021 2022 {
421. 
.                         ** With covariates
.                         estimates restore `outcome'_es_with_c
> ovars
422.                         replace out_coef_wc = _b[x_out_`y'
> ] if year == `y'
423.                         replace out_ci_lo_wc = _b[x_out_`y
> '] - 1.96 * _se[x_out_`y'] if year == `y'
424.                         replace out_ci_hi_wc = _b[x_out_`y
> '] + 1.96 * _se[x_out_`y'] if year == `y'
425. 
.                         replace in_coef_wc = _b[x_in_`y'] if 
> year == `y'
426.                         replace in_ci_lo_wc = _b[x_in_`y']
>  - 1.96 * _se[x_in_`y'] if year == `y'
427.                         replace in_ci_hi_wc = _b[x_in_`y']
>  + 1.96 * _se[x_in_`y'] if year == `y'
428. 
.                         ** Without covariates
.                         estimates restore `outcome'_es_no_cov
> ars
429.                         replace out_coef_nc = _b[x_out_`y'
> ] if year == `y'
430.                         replace out_ci_lo_nc = _b[x_out_`y
> '] - 1.96 * _se[x_out_`y'] if year == `y'
431.                         replace out_ci_hi_nc = _b[x_out_`y
> '] + 1.96 * _se[x_out_`y'] if year == `y'
432. 
.                         replace in_coef_nc = _b[x_in_`y'] if 
> year == `y'
433.                         replace in_ci_lo_nc = _b[x_in_`y']
>  - 1.96 * _se[x_in_`y'] if year == `y'
434.                         replace in_ci_hi_nc = _b[x_in_`y']
>  + 1.96 * _se[x_in_`y'] if year == `y'
435.                 }
436. 
.                 ** Base year (2020) = 0
.                 foreach v in out_coef_wc out_ci_lo_wc out_ci_
> hi_wc                      ///
>                                          in_coef_wc in_ci_lo_
> wc in_ci_hi_wc                     ///
>                                          out_coef_nc out_ci_l
> o_nc out_ci_hi_nc                  ///
>                                          in_coef_nc in_ci_lo_
> nc in_ci_hi_nc {
437.                         replace `v' = 0 if year == 2020
438.                 }
439. 
.                 ** Offset years slightly for visibility
.                 gen year_out = year - 0.1
440.                 gen year_in = year + 0.1
441. 
.                 ** Plot 1: Out-migration (with and without co
> variates)
.                 twoway  (rcap out_ci_lo_wc out_ci_hi_wc year_
> out, lc(navy))                     ///
>                                 (connected out_coef_wc year_o
> ut, mc(navy) lc(navy) ms(O))               ///
>                                 (rcap out_ci_lo_nc out_ci_hi_
> nc year_in, lc(maroon))                    ///
>                                 (connected out_coef_nc year_i
> n, mc(maroon) lc(maroon) ms(T)),   ///
>                         yline(0, lc(gs10) lp(dash))          
>                                                              
>       ///
>                         xline(2020.5, lc(black) lp(solid))   
>                                                              
>       ///
>                         xlabel(2016(1)2022)                  
>                                                              
>               ///
>                         ytitle("Coefficient (relative to 2020
> )")                                                        //
> /
>                         xtitle("Year")                       
>                                                              
>                       ///
>                         legend(order(2 "With Covariates" 4 "W
> ithout Covariates")                        ///
>                                 pos(6) rows(1))              
>                                                              
>                       ///
>                         title("Out-Migration from Multnomah C
> ounty`title_suffix'")                      ///
>                         subtitle("`outcome_label'")          
>                                                              
>               ///
>                         graphregion(color(white))
442. 
.                 graph export "${results}flows/fig_multnomah_o
> ut_`outcome'`file_suffix'.png", replace
443. 
.                 ** Plot 2: In-migration (with and without cov
> ariates)
.                 twoway  (rcap in_ci_lo_wc in_ci_hi_wc year_ou
> t, lc(navy))                               ///
>                                 (connected in_coef_wc year_ou
> t, mc(navy) lc(navy) ms(O))                ///
>                                 (rcap in_ci_lo_nc in_ci_hi_nc
>  year_in, lc(maroon))                              ///
>                                 (connected in_coef_nc year_in
> , mc(maroon) lc(maroon) ms(T)),    ///
>                         yline(0, lc(gs10) lp(dash))          
>                                                              
>       ///
>                         xline(2020.5, lc(black) lp(solid))   
>                                                              
>       ///
>                         xlabel(2016(1)2022)                  
>                                                              
>               ///
>                         ytitle("Coefficient (relative to 2020
> )")                                                        //
> /
>                         xtitle("Year")                       
>                                                              
>                       ///
>                         legend(order(2 "With Covariates" 4 "W
> ithout Covariates")                        ///
>                                 pos(6) rows(1))              
>                                                              
>                       ///
>                         title("In-Migration to Multnomah Coun
> ty`title_suffix'")                         ///
>                         subtitle("`outcome_label'")          
>                                                              
>               ///
>                         graphregion(color(white))
444. 
.                 graph export "${results}flows/fig_multnomah_i
> n_`outcome'`file_suffix'.png", replace
445. 
.                 ** Plot 3: Both flows (with covariates only, 
> as in original)
.                 twoway  (rcap out_ci_lo_wc out_ci_hi_wc year_
> out, lc(navy))                             ///
>                                 (connected out_coef_wc year_o
> ut, mc(navy) lc(navy) ms(O))               ///
>                                 (rcap in_ci_lo_wc in_ci_hi_wc
>  year_in, lc(maroon))                              ///
>                                 (connected in_coef_wc year_in
> , mc(maroon) lc(maroon) ms(T)),    ///
>                         yline(0, lc(gs10) lp(dash))          
>                                                              
>       ///
>                         xline(2020.5, lc(black) lp(solid))   
>                                                              
>       ///
>                         xlabel(2016(1)2022)                  
>                                                              
>               ///
>                         ytitle("Coefficient (relative to 2020
> )")                                                        //
> /
>                         xtitle("Year")                       
>                                                              
>                       ///
>                         legend(order(2 "Out-migration" 4 "In-
> migration")                                        ///
>                                 pos(6) rows(1))              
>                                                              
>                       ///
>                         title("Migration Flows: Multnomah Cou
> nty`title_suffix'")                        ///
>                         subtitle("`outcome_label'")          
>                                                              
>               ///
>                         graphregion(color(white))
446. 
.                 graph export "${results}flows/fig_multnomah_b
> oth_`outcome'`file_suffix'.png", replace
447. 
.         restore
448. 
. } // END OUTCOME LOOP
449. 
. } // END SAMPLE LOOP (all vs acs)

===============================================================
> =========
RUNNING ANALYSIS FOR SAMPLE: all
Sample condition: 
Covariates: unemp_* pop_* per_capita_income_*
===============================================================
> =========

(dropped 10447 observations that are either singletons or separ
> ated by a fixed effect)
Iteration 1:   deviance = 2.8754e+06  eps = .         iters = 4
>     tol = 1.0e-04                                            
>                    min(eta) =  -2.82  P   
Iteration 2:   deviance = 6.3174e+05  eps = 3.55e+00  iters = 3
>     tol = 1.0e-04                                            
>                    min(eta) =  -3.25      
Iteration 3:   deviance = 5.8911e+05  eps = 7.24e-02  iters = 3
>     tol = 1.0e-04                                            
>                    min(eta) =  -3.39      
Iteration 4:   deviance = 5.8906e+05  eps = 8.34e-05  iters = 2
>     tol = 1.0e-04                                            
>                    min(eta) =  -3.40      
Iteration 5:   deviance = 5.8906e+05  eps = 5.95e-10  iters = 2
>     tol = 1.0e-05                                            
>                    min(eta) =  -3.40      
Iteration 6:   deviance = 5.8906e+05  eps = 0.00e+00  iters = 1
>     tol = 1.0e-06                                            
>                    min(eta) =  -3.40   S  
Iteration 7:   deviance = 5.8906e+05  eps = 1.93e-16  iters = 1
>     tol = 1.0e-09                                            
>                    min(eta) =  -3.40   S O
---------------------------------------------------------------
> ---------------------------------------------
(legend: p: exact partial-out   s: exact solver   h: step-halvi
> ng   o: epsilon below tolerance)
Converged in 7 iterations and 16 HDFE sub-iterations (tol = 1.0
> e-08)

HDFE PPML regression                              No. of obs   
>    =                                                         
>         331,655
Absorbing 2 HDFE groups                           Residual df  
>    =                                                         
>          57,484
Statistics robust to heteroskedasticity           Wald chi2(8) 
>    =                                                         
>         1117.95
Deviance             =  589060.4702               Prob > chi2  
>    =                                                         
>          0.0000
Log pseudolikelihood = -1266915.146               Pseudo R2    
>    =                                                         
>          0.9778

Number of clusters (flow_id)=     57,485
                           (Std. err. adjusted for 57,485 clust
> ers in flow_id)
---------------------------------------------------------------
> ---------------
             |               Robust
          n1 | Coefficient  std. err.      z    P>|z|     [95% 
> con                                                          
>    f. interval]
-------------+-------------------------------------------------
> ---------------
1.out_mult~t |   .0112807    .022745     0.50   0.620    -.0332
> 988                                                          
>        .0558601
1.in_multn~t |  -.0763629   .0162191    -4.71   0.000    -.1081
> 518                                                          
>        -.044574
     unemp_o |   .0234736   .0009508    24.69   0.000     .0216
> 101                                                          
>         .025337
     unemp_d |  -.0210478    .000978   -21.52   0.000    -.0229
> 646                                                          
>       -.0191309
       pop_o |   6.38e-08   3.11e-08     2.05   0.040     2.80e
> -09                                                          
>        1.25e-07
       pop_d |   3.63e-07   3.24e-08    11.20   0.000     3.00e
> -07                                                          
>        4.27e-07
per_capita~o |   2.13e-06   3.64e-07     5.86   0.000     1.42e
> -06                                                          
>        2.84e-06
per_capita~d |  -1.56e-06   2.83e-07    -5.51   0.000    -2.12e
> -06                                                          
>       -1.01e-06
       _cons |   5.640978   .0535479   105.34   0.000     5.536
> 026                                                          
>         5.74593
---------------------------------------------------------------
> ---------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
        year |         7           1           6     |
     flow_id |     57485       57485           0    *|
-----------------------------------------------------+
* = FE nested within cluster; treated as redundant for DoF comp
> utation
(dropped 10447 observations that are either singletons or separ
> ated by a fixed effect)
Iteration 1:   deviance = 2.9001e+06  eps = .         iters = 4
>     tol = 1.0e-04                                            
>                    min(eta) =  -2.75  P   
Iteration 2:   deviance = 6.5484e+05  eps = 3.43e+00  iters = 3
>     tol = 1.0e-04                                            
>                    min(eta) =  -3.22      
Iteration 3:   deviance = 6.1220e+05  eps = 6.97e-02  iters = 3
>     tol = 1.0e-04                                            
>                    min(eta) =  -3.36      
Iteration 4:   deviance = 6.1215e+05  eps = 8.01e-05  iters = 2
>     tol = 1.0e-04                                            
>                    min(eta) =  -3.37      
Iteration 5:   deviance = 6.1215e+05  eps = 5.70e-10  iters = 2
>     tol = 1.0e-05                                            
>                    min(eta) =  -3.37      
Iteration 6:   deviance = 6.1215e+05  eps = 0.00e+00  iters = 1
>     tol = 1.0e-06                                            
>                    min(eta) =  -3.37   S  
Iteration 7:   deviance = 6.1215e+05  eps = 0.00e+00  iters = 1
>     tol = 1.0e-09                                            
>                    min(eta) =  -3.37   S O
---------------------------------------------------------------
> ---------------------------------------------
(legend: p: exact partial-out   s: exact solver   h: step-halvi
> ng   o: epsilon below tolerance)
Converged in 7 iterations and 16 HDFE sub-iterations (tol = 1.0
> e-08)

HDFE PPML regression                              No. of obs   
>    =                                                         
>         331,655
Absorbing 2 HDFE groups                           Residual df  
>    =                                                         
>          57,484
Statistics robust to heteroskedasticity           Wald chi2(2) 
>    =                                                         
>           32.03
Deviance             =  612152.2382               Prob > chi2  
>    =                                                         
>          0.0000
Log pseudolikelihood =  -1278461.03               Pseudo R2    
>    =                                                         
>          0.9776

Number of clusters (flow_id)=     57,485
                           (Std. err. adjusted for 57,485 clust
> ers in flow_id)
---------------------------------------------------------------
> ---------------
             |               Robust
          n1 | Coefficient  std. err.      z    P>|z|     [95% 
> con                                                          
>    f. interval]
-------------+-------------------------------------------------
> ---------------
1.out_mult~t |   .0182474   .0234116     0.78   0.436    -.0276
> 384                                                          
>        .0641333
1.in_multn~t |  -.0863437   .0154255    -5.60   0.000    -.1165
> 772                                                          
>       -.0561103
       _cons |   6.165859   .0000373  1.7e+05   0.000     6.165
> 786                                                          
>        6.165932
---------------------------------------------------------------
> ---------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
        year |         7           1           6     |
     flow_id |     57485       57485           0    *|
-----------------------------------------------------+
* = FE nested within cluster; treated as redundant for DoF comp
> utation
file
    C:/Users/ji252/Documents/GitHub/multnomah-county-tax/resu
    > lts/flows/fig_multnomah_post_n1.png saved as PNG format
(dropped 10447 observations that are either singletons or separ
> ated by a fixed effect)
Iteration 1:   deviance = 5.4787e+06  eps = .         iters = 4
>     tol = 1.0e-04                                            
>                    min(eta) =  -2.91  P   
Iteration 2:   deviance = 1.4132e+06  eps = 2.88e+00  iters = 3
>     tol = 1.0e-04                                            
>                    min(eta) =  -3.54      
Iteration 3:   deviance = 1.3306e+06  eps = 6.20e-02  iters = 3
>     tol = 1.0e-04                                            
>                    min(eta) =  -3.81      
Iteration 4:   deviance = 1.3305e+06  eps = 1.14e-04  iters = 2
>     tol = 1.0e-04                                            
>                    min(eta) =  -3.85      
Iteration 5:   deviance = 1.3305e+06  eps = 4.79e-09  iters = 1
>     tol = 1.0e-04                                            
>                    min(eta) =  -3.85      
Iteration 6:   deviance = 1.3305e+06  eps = 1.64e-14  iters = 1
>     tol = 1.0e-05                                            
>                    min(eta) =  -3.85   S  
Iteration 7:   deviance = 1.3305e+06  eps = 1.55e-16  iters = 2
>     tol = 1.0e-09                                            
>                    min(eta) =  -3.85   S O
---------------------------------------------------------------
> ---------------------------------------------
(legend: p: exact partial-out   s: exact solver   h: step-halvi
> ng   o: epsilon below tolerance)
Converged in 7 iterations and 16 HDFE sub-iterations (tol = 1.0
> e-08)

HDFE PPML regression                              No. of obs   
>    =                                                         
>         331,655
Absorbing 2 HDFE groups                           Residual df  
>    =                                                         
>          57,484
Statistics robust to heteroskedasticity           Wald chi2(8) 
>    =                                                         
>         1091.86
Deviance             =   1330486.72               Prob > chi2  
>    =                                                         
>          0.0000
Log pseudolikelihood = -1733747.739               Pseudo R2    
>    =                                                         
>          0.9830

Number of clusters (flow_id)=     57,485
                           (Std. err. adjusted for 57,485 clust
> ers in flow_id)
---------------------------------------------------------------
> ---------------
             |               Robust
          n2 | Coefficient  std. err.      z    P>|z|     [95% 
> con                                                          
>    f. interval]
-------------+-------------------------------------------------
> ---------------
1.out_mult~t |    .015437    .020791     0.74   0.458    -.0253
> 127                                                          
>        .0561866
1.in_multn~t |  -.0740198   .0154241    -4.80   0.000    -.1042
> 505                                                          
>       -.0437892
     unemp_o |   .0221146   .0009958    22.21   0.000     .0201
> 629                                                          
>        .0240664
     unemp_d |  -.0230597   .0010507   -21.95   0.000    -.0251
> 189                                                          
>       -.0210004
       pop_o |   5.15e-08   3.16e-08     1.63   0.103    -1.04e
> -08                                                          
>        1.13e-07
       pop_d |   3.62e-07   3.00e-08    12.05   0.000     3.03e
> -07                                                          
>        4.20e-07
per_capita~o |   2.54e-06   3.76e-07     6.76   0.000     1.80e
> -06                                                          
>        3.28e-06
per_capita~d |  -2.02e-06   3.03e-07    -6.64   0.000    -2.61e
> -06                                                          
>       -1.42e-06
       _cons |   6.280974    .053925   116.48   0.000     6.175
> 282                                                          
>        6.386665
---------------------------------------------------------------
> ---------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
        year |         7           1           6     |
     flow_id |     57485       57485           0    *|
-----------------------------------------------------+
* = FE nested within cluster; treated as redundant for DoF comp
> utation
(dropped 10447 observations that are either singletons or separ
> ated by a fixed effect)
Iteration 1:   deviance = 5.5233e+06  eps = .         iters = 4
>     tol = 1.0e-04                                            
>                    min(eta) =  -2.89  P   
Iteration 2:   deviance = 1.4553e+06  eps = 2.80e+00  iters = 3
>     tol = 1.0e-04                                            
>                    min(eta) =  -3.50      
Iteration 3:   deviance = 1.3728e+06  eps = 6.01e-02  iters = 3
>     tol = 1.0e-04                                            
>                    min(eta) =  -3.76      
Iteration 4:   deviance = 1.3726e+06  eps = 1.10e-04  iters = 2
>     tol = 1.0e-04                                            
>                    min(eta) =  -3.80      
Iteration 5:   deviance = 1.3726e+06  eps = 4.60e-09  iters = 1
>     tol = 1.0e-04                                            
>                    min(eta) =  -3.80      
Iteration 6:   deviance = 1.3726e+06  eps = 1.60e-14  iters = 1
>     tol = 1.0e-05                                            
>                    min(eta) =  -3.80   S  
Iteration 7:   deviance = 1.3726e+06  eps = 0.00e+00  iters = 1
>     tol = 1.0e-09                                            
>                    min(eta) =  -3.80   S O
---------------------------------------------------------------
> ---------------------------------------------
(legend: p: exact partial-out   s: exact solver   h: step-halvi
> ng   o: epsilon below tolerance)
Converged in 7 iterations and 15 HDFE sub-iterations (tol = 1.0
> e-08)

HDFE PPML regression                              No. of obs   
>    =                                                         
>         331,655
Absorbing 2 HDFE groups                           Residual df  
>    =                                                         
>          57,484
Statistics robust to heteroskedasticity           Wald chi2(2) 
>    =                                                         
>           35.14
Deviance             =  1372638.294               Prob > chi2  
>    =                                                         
>          0.0000
Log pseudolikelihood = -1754823.525               Pseudo R2    
>    =                                                         
>          0.9828

Number of clusters (flow_id)=     57,485
                           (Std. err. adjusted for 57,485 clust
> ers in flow_id)
---------------------------------------------------------------
> ---------------
             |               Robust
          n2 | Coefficient  std. err.      z    P>|z|     [95% 
> con                                                          
>    f. interval]
-------------+-------------------------------------------------
> ---------------
1.out_mult~t |   .0218918   .0207797     1.05   0.292    -.0188
> 356                                                          
>        .0626192
1.in_multn~t |  -.0864384    .014852    -5.82   0.000    -.1155
> 479                                                          
>        -.057329
       _cons |   6.749585   .0000282  2.4e+05   0.000      6.74
> 953                                                          
>         6.74964
---------------------------------------------------------------
> ---------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
        year |         7           1           6     |
     flow_id |     57485       57485           0    *|
-----------------------------------------------------+
* = FE nested within cluster; treated as redundant for DoF comp
> utation
file
    C:/Users/ji252/Documents/GitHub/multnomah-county-tax/resu
    > lts/flows/fig_multnomah_post_n2.png saved as PNG format
(dropped 10447 observations that are either singletons or separ
> ated by a fixed effect)
Iteration 1:   deviance = 4.0054e+08  eps = .         iters = 4
>     tol = 1.0e-04                                            
>                    min(eta) =  -3.59  P   
Iteration 2:   deviance = 1.6976e+08  eps = 1.36e+00  iters = 3
>     tol = 1.0e-04                                            
>                    min(eta) =  -4.22      
Iteration 3:   deviance = 1.6099e+08  eps = 5.44e-02  iters = 3
>     tol = 1.0e-04                                            
>                    min(eta) =  -5.14      
Iteration 4:   deviance = 1.6087e+08  eps = 7.90e-04  iters = 2
>     tol = 1.0e-04                                            
>                    min(eta) =  -5.94      
Iteration 5:   deviance = 1.6086e+08  eps = 3.38e-06  iters = 2
>     tol = 1.0e-04                                            
>                    min(eta) =  -6.50      
Iteration 6:   deviance = 1.6086e+08  eps = 5.80e-08  iters = 2
>     tol = 1.0e-05                                            
>                    min(eta) =  -6.73   S  
Iteration 7:   deviance = 1.6086e+08  eps = 6.22e-10  iters = 2
>     tol = 1.0e-07                                            
>                    min(eta) =  -6.76   S O
---------------------------------------------------------------
> ---------------------------------------------
(legend: p: exact partial-out   s: exact solver   h: step-halvi
> ng   o: epsilon below tolerance)
Converged in 7 iterations and 18 HDFE sub-iterations (tol = 1.0
> e-08)

HDFE PPML regression                              No. of obs   
>    =                                                         
>         331,655
Absorbing 2 HDFE groups                           Residual df  
>    =                                                         
>          57,484
Statistics robust to heteroskedasticity           Wald chi2(8) 
>    =                                                         
>          369.69
Deviance             =  160864664.2               Prob > chi2  
>    =                                                         
>          0.0000
Log pseudolikelihood = -82077725.61               Pseudo R2    
>    =                                                         
>          0.9826

Number of clusters (flow_id)=     57,485
                           (Std. err. adjusted for 57,485 clust
> ers in flow_id)
---------------------------------------------------------------
> ---------------
             |               Robust
         agi | Coefficient  std. err.      z    P>|z|     [95% 
> con                                                          
>    f. interval]
-------------+-------------------------------------------------
> ---------------
1.out_mult~t |   .1613764   .0553811     2.91   0.004     .0528
> 315                                                          
>        .2699214
1.in_multn~t |  -.1838134   .0212845    -8.64   0.000    -.2255
> 303                                                          
>       -.1420964
     unemp_o |   .0423607   .0054837     7.72   0.000     .0316
> 128                                                          
>        .0531085
     unemp_d |  -.0442395   .0038193   -11.58   0.000    -.0517
> 253                                                          
>       -.0367538
       pop_o |  -2.80e-07   6.37e-08    -4.39   0.000    -4.05e
> -07                                                          
>       -1.55e-07
       pop_d |   4.64e-07   7.73e-08     6.00   0.000     3.12e
> -07                                                          
>        6.15e-07
per_capita~o |   8.22e-06   9.26e-07     8.88   0.000     6.41e
> -06                                                          
>          .00001
per_capita~d |   1.41e-06   8.43e-07     1.67   0.095    -2.46e
> -07                                                          
>        3.06e-06
       _cons |   9.822877   .1427415    68.82   0.000     9.543
> 109                                                          
>        10.10264
---------------------------------------------------------------
> ---------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
        year |         7           1           6     |
     flow_id |     57485       57485           0    *|
-----------------------------------------------------+
* = FE nested within cluster; treated as redundant for DoF comp
> utation
(dropped 10447 observations that are either singletons or separ
> ated by a fixed effect)
Iteration 1:   deviance = 4.1413e+08  eps = .         iters = 4
>     tol = 1.0e-04                                            
>                    min(eta) =  -3.29  P   
Iteration 2:   deviance = 1.7950e+08  eps = 1.31e+00  iters = 3
>     tol = 1.0e-04                                            
>                    min(eta) =  -4.22      
Iteration 3:   deviance = 1.7046e+08  eps = 5.30e-02  iters = 3
>     tol = 1.0e-04                                            
>                    min(eta) =  -5.14      
Iteration 4:   deviance = 1.7033e+08  eps = 7.55e-04  iters = 2
>     tol = 1.0e-04                                            
>                    min(eta) =  -5.94      
Iteration 5:   deviance = 1.7033e+08  eps = 3.11e-06  iters = 2
>     tol = 1.0e-04                                            
>                    min(eta) =  -6.50      
Iteration 6:   deviance = 1.7033e+08  eps = 5.48e-08  iters = 2
>     tol = 1.0e-05                                            
>                    min(eta) =  -6.73   S  
Iteration 7:   deviance = 1.7033e+08  eps = 5.88e-10  iters = 2
>     tol = 1.0e-07                                            
>                    min(eta) =  -6.76   S O
---------------------------------------------------------------
> ---------------------------------------------
(legend: p: exact partial-out   s: exact solver   h: step-halvi
> ng   o: epsilon below tolerance)
Converged in 7 iterations and 18 HDFE sub-iterations (tol = 1.0
> e-08)

HDFE PPML regression                              No. of obs   
>    =                                                         
>         331,655
Absorbing 2 HDFE groups                           Residual df  
>    =                                                         
>          57,484
Statistics robust to heteroskedasticity           Wald chi2(2) 
>    =                                                         
>           83.73
Deviance             =  170331590.8               Prob > chi2  
>    =                                                         
>          0.0000
Log pseudolikelihood = -86811188.95               Pseudo R2    
>    =                                                         
>          0.9816

Number of clusters (flow_id)=     57,485
                           (Std. err. adjusted for 57,485 clust
> ers in flow_id)
---------------------------------------------------------------
> ---------------
             |               Robust
         agi | Coefficient  std. err.      z    P>|z|     [95% 
> con                                                          
>    f. interval]
-------------+-------------------------------------------------
> ---------------
1.out_mult~t |   .1691276   .0589561     2.87   0.004     .0535
> 757                                                          
>        .2846795
1.in_multn~t |  -.1838849     .02136    -8.61   0.000    -.2257
> 498                                                          
>         -.14202
       _cons |     10.648    .000114  9.3e+04   0.000     10.64
> 778                                                          
>        10.64822
---------------------------------------------------------------
> ---------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
        year |         7           1           6     |
     flow_id |     57485       57485           0    *|
-----------------------------------------------------+
* = FE nested within cluster; treated as redundant for DoF comp
> utation
file
    C:/Users/ji252/Documents/GitHub/multnomah-county-tax/resu
    > lts/flows/fig_multnomah_post_agi.png saved as PNG
    format
1001 1003 1005 1007 1009 1011 1013 1015 1017 1019 1021 1023 102
> 5 1027 1029 1031 1033 1035 1037 1039 1041 1043 1045 1047 1049
>  1051 1053 1055 1057 1059 1061 1063 1065 1067 1069 1071 1073 
> 1075 1077 1079 1081 1083 1085 1087 1089 1091 1093 1095 1097 1
> 099 1101 1103 1105 1107 1109 1111 1113 1115 1117 1119 1121 11
> 23 1125 1127 1129 1131 1133 4001 4003 4005 4007 4009 4011 401
> 2 4013 4015 4017 4019 4021 4023 4025 4027 5001 5003 5005 5007
>  5009 5011 5013 5015 5017 5019 5021 5023 5025 5027 5029 5031 
> 5033 5035 5037 5039 5041 5043 5045 5047 5049 5051 5053 5055 5
> 057 5059 5061 5063 5065 5067 5069 5071 5073 5075 5077 5079 50
> 81 5083 5085 5087 5089 5091 5093 5095 5097 5099 5101 5103 510
> 5 5107 5109 5111 5113 5115 5117 5119 5121 5123 5125 5127 5129
>  5131 5133 5135 5137 5139 5141 5143 5145 5147 5149 6001 6005 
> 6007 6009 6011 6013 6015 6017 6019 6021 6023 6025 6027 6029 6
> 031 6033 6035 6037 6039 6041 6043 6045 6047 6049 6051 6053 60
> 55 6057 6059 6061 6063 6065 6067 6069 6071 6073 6075 6077 607
> 9 6081 6083 6085 6087 6089 6091 6093 6095 6097 6099 6101 6103
>  6105 6107 6109 6111 6113 6115 8001 8003 8005 8007 8011 8013 
> 8014 8015 8019 8021 8023 8025 8027 8029 8031 8035 8037 8039 8
> 041 8043 8045 8047 8049 8051 8055 8059 8065 8067 8069 8071 80
> 73 8075 8077 8081 8083 8085 8087 8089 8091 8093 8095 8097 809
> 9 8101 8103 8105 8107 8109 8113 8117 8119 8121 8123 8125 1000
> 1 10003 10005 11001 12001 12003 12005 12007 12009 12011 12013
>  12015 12017 12019 12021 12023 12027 12029 12031 12033 12035 
> 12037 12039 12041 12043 12045 12047 12049 12051 12053 12055 1
> 2057 12059 12061 12063 12065 12067 12069 12071 12073 12075 12
> 077 12079 12081 12083 12085 12086 12087 12089 12091 12093 120
> 95 12097 12099 12101 12103 12105 12107 12109 12111 12113 1211
> 5 12117 12119 12121 12123 12125 12127 12129 12131 12133 13001
>  13003 13005 13007 13009 13011 13013 13015 13017 13019 13021 
> 13023 13025 13027 13029 13031 13033 13035 13037 13039 13043 1
> 3045 13047 13049 13051 13053 13055 13057 13059 13063 13065 13
> 067 13069 13071 13073 13075 13077 13079 13081 13083 13085 130
> 87 13089 13091 13093 13095 13097 13099 13101 13103 13105 1310
> 7 13109 13111 13113 13115 13117 13119 13121 13123 13127 13129
>  13131 13133 13135 13137 13139 13141 13143 13145 13147 13149 
> 13151 13153 13155 13157 13159 13161 13163 13165 13167 13169 1
> 3171 13173 13175 13177 13179 13181 13183 13185 13187 13189 13
> 191 13193 13195 13197 13199 13201 13205 13207 13209 13211 132
> 13 13215 13217 13219 13221 13223 13225 13227 13229 13231 1323
> 3 13235 13237 13239 13241 13243 13245 13247 13249 13251 13253
>  13255 13257 13259 13261 13263 13267 13269 13271 13273 13275 
> 13277 13279 13281 13283 13285 13287 13289 13291 13293 13295 1
> 3297 13299 13301 13303 13305 13309 13311 13313 13315 13317 13
> 319 13321 16001 16003 16005 16007 16009 16011 16013 16015 160
> 17 16019 16021 16027 16029 16031 16035 16039 16041 16043 1604
> 5 16047 16049 16051 16053 16055 16057 16059 16061 16063 16065
>  16067 16069 16071 16073 16075 16077 16079 16081 16083 16085 
> 16087 17001 17003 17005 17007 17009 17011 17013 17015 17017 1
> 7019 17021 17023 17025 17027 17029 17031 17033 17035 17037 17
> 039 17041 17043 17045 17047 17049 17051 17053 17055 17057 170
> 59 17061 17063 17065 17067 17069 17071 17073 17075 17077 1707
> 9 17081 17083 17085 17087 17089 17091 17093 17095 17097 17099
>  17101 17103 17105 17107 17109 17111 17113 17115 17117 17119 
> 17121 17123 17125 17127 17129 17131 17133 17135 17137 17139 1
> 7141 17143 17145 17147 17149 17151 17153 17155 17157 17159 17
> 161 17163 17165 17167 17169 17171 17173 17175 17177 17179 171
> 81 17183 17185 17187 17189 17191 17193 17195 17197 17199 1720
> 1 17203 18001 18003 18005 18007 18009 18011 18013 18015 18017
>  18019 18021 18023 18025 18027 18029 18031 18033 18035 18037 
> 18039 18041 18043 18045 18047 18049 18051 18053 18055 18057 1
> 8059 18061 18063 18065 18067 18069 18071 18073 18075 18077 18
> 079 18081 18083 18085 18087 18089 18091 18093 18095 18097 180
> 99 18101 18103 18105 18107 18109 18111 18113 18115 18117 1811
> 9 18121 18123 18125 18127 18129 18131 18133 18135 18137 18139
>  18141 18143 18145 18147 18149 18151 18153 18155 18157 18159 
> 18161 18163 18165 18167 18169 18171 18173 18175 18177 18179 1
> 8181 18183 19001 19003 19005 19007 19009 19011 19013 19015 19
> 017 19019 19021 19023 19025 19027 19029 19031 19033 19035 190
> 37 19039 19041 19043 19045 19047 19049 19051 19053 19055 1905
> 7 19059 19061 19063 19065 19067 19069 19071 19073 19075 19077
>  19079 19081 19083 19085 19087 19089 19091 19093 19095 19097 
> 19099 19101 19103 19105 19107 19109 19111 19113 19115 19117 1
> 9119 19121 19123 19125 19127 19129 19131 19133 19135 19137 19
> 139 19141 19143 19145 19147 19149 19151 19153 19155 19157 191
> 59 19161 19163 19165 19167 19169 19171 19173 19175 19177 1917
> 9 19181 19183 19185 19187 19189 19191 19193 19195 19197 20001
>  20003 20005 20009 20011 20013 20015 20017 20019 20021 20027 
> 20029 20031 20035 20037 20041 20043 20045 20051 20053 20055 2
> 0057 20059 20061 20067 20069 20073 20077 20079 20085 20087 20
> 091 20093 20095 20099 20103 20105 20107 20109 20111 20113 201
> 15 20117 20119 20121 20125 20131 20133 20139 20143 20145 2014
> 9 20151 20155 20157 20159 20161 20163 20165 20167 20169 20171
>  20173 20175 20177 20185 20191 20193 20195 20197 20201 20205 
> 20207 20209 21001 21003 21005 21007 21009 21011 21013 21015 2
> 1017 21019 21021 21023 21025 21027 21029 21031 21033 21035 21
> 037 21039 21041 21043 21045 21047 21049 21051 21053 21055 210
> 57 21059 21061 21063 21065 21067 21069 21071 21073 21075 2107
> 7 21079 21081 21083 21085 21087 21089 21091 21093 21095 21097
>  21099 21101 21103 21105 21107 21109 21111 21113 21115 21117 
> 21119 21121 21123 21125 21127 21129 21131 21133 21135 21137 2
> 1139 21141 21143 21145 21147 21149 21151 21153 21155 21157 21
> 159 21161 21163 21165 21167 21169 21171 21173 21175 21177 211
> 79 21181 21183 21185 21187 21191 21193 21195 21197 21199 2120
> 3 21205 21207 21209 21211 21213 21215 21217 21219 21221 21223
>  21225 21227 21229 21231 21233 21235 21237 21239 22001 22003 
> 22005 22007 22009 22011 22013 22015 22017 22019 22021 22023 2
> 2025 22027 22029 22031 22033 22035 22037 22039 22041 22043 22
> 045 22047 22049 22051 22053 22055 22057 22059 22061 22063 220
> 65 22067 22069 22071 22073 22075 22077 22079 22081 22083 2208
> 5 22087 22089 22091 22093 22095 22097 22099 22101 22103 22105
>  22109 22111 22113 22115 22117 22119 22121 22123 22125 22127 
> 23001 23003 23005 23007 23009 23011 23013 23015 23017 23019 2
> 3021 23023 23025 23027 23029 23031 24001 24003 24005 24009 24
> 011 24013 24015 24017 24019 24021 24023 24025 24027 24029 240
> 31 24033 24035 24037 24039 24041 24043 24045 24047 24510 2500
> 1 25003 25005 25007 25009 25011 25013 25015 25017 25019 25021
>  25023 25025 25027 26001 26003 26005 26007 26009 26011 26013 
> 26015 26017 26019 26021 26023 26025 26027 26029 26031 26033 2
> 6035 26037 26039 26041 26043 26045 26047 26049 26051 26053 26
> 055 26057 26059 26061 26063 26065 26067 26069 26071 26073 260
> 75 26077 26079 26081 26083 26085 26087 26089 26091 26093 2609
> 7 26099 26101 26103 26105 26107 26109 26111 26113 26115 26117
>  26119 26121 26123 26125 26127 26129 26133 26135 26137 26139 
> 26141 26143 26145 26147 26149 26151 26153 26155 26157 26159 2
> 6161 26163 26165 27001 27003 27005 27007 27009 27011 27013 27
> 015 27017 27019 27021 27023 27025 27027 27029 27031 27033 270
> 35 27037 27039 27041 27043 27045 27047 27049 27051 27053 2705
> 5 27057 27059 27061 27063 27065 27067 27071 27073 27075 27077
>  27079 27081 27083 27085 27087 27089 27091 27093 27095 27097 
> 27099 27101 27103 27105 27107 27109 27111 27113 27115 27117 2
> 7119 27121 27123 27125 27127 27129 27131 27133 27135 27137 27
> 139 27141 27143 27145 27147 27149 27151 27153 27157 27159 271
> 61 27163 27165 27167 27169 27171 27173 28001 28003 28005 2800
> 7 28009 28011 28013 28015 28017 28019 28021 28023 28025 28027
>  28029 28031 28033 28035 28037 28039 28041 28043 28045 28047 
> 28049 28051 28053 28057 28059 28061 28063 28065 28067 28069 2
> 8071 28073 28075 28077 28079 28081 28083 28085 28087 28089 28
> 091 28093 28095 28097 28099 28101 28103 28105 28107 28109 281
> 11 28113 28115 28117 28119 28121 28123 28125 28127 28129 2813
> 1 28133 28135 28137 28139 28141 28143 28145 28147 28149 28151
>  28153 28155 28157 28159 28161 28163 29001 29003 29007 29009 
> 29011 29013 29015 29017 29019 29021 29023 29025 29027 29029 2
> 9031 29033 29035 29037 29039 29041 29043 29045 29047 29049 29
> 051 29053 29055 29057 29059 29061 29063 29065 29067 29069 290
> 71 29073 29075 29077 29079 29081 29083 29085 29087 29089 2909
> 1 29093 29095 29097 29099 29101 29103 29105 29107 29109 29111
>  29113 29115 29117 29119 29121 29123 29125 29127 29131 29133 
> 29135 29137 29139 29141 29143 29145 29147 29149 29151 29153 2
> 9155 29157 29159 29161 29163 29165 29167 29169 29171 29173 29
> 175 29177 29179 29181 29183 29185 29186 29187 29189 29195 291
> 97 29199 29201 29203 29205 29207 29209 29211 29213 29215 2921
> 7 29219 29221 29223 29225 29229 29510 30001 30003 30005 30007
>  30009 30013 30015 30017 30021 30023 30027 30029 30031 30035 
> 30039 30041 30043 30047 30049 30051 30053 30057 30061 30063 3
> 0065 30067 30073 30077 30081 30083 30085 30087 30089 30093 30
> 095 30097 30099 30101 30105 30111 31001 31003 31011 31013 310
> 19 31021 31023 31025 31027 31033 31035 31037 31039 31041 3104
> 3 31045 31047 31051 31053 31055 31059 31061 31063 31065 31067
>  31073 31079 31081 31087 31089 31093 31095 31097 31099 31101 
> 31105 31107 31109 31111 31119 31121 31123 31125 31127 31131 3
> 1137 31139 31141 31143 31145 31147 31151 31153 31155 31157 31
> 159 31161 31163 31167 31169 31173 31177 31179 31181 31185 320
> 01 32003 32005 32007 32011 32013 32015 32017 32019 32021 3202
> 3 32027 32029 32031 32033 32510 33001 33003 33005 33007 33009
>  33011 33013 33015 33017 33019 34001 34003 34005 34007 34009 
> 34011 34013 34015 34017 34019 34021 34023 34025 34027 34029 3
> 4031 34033 34035 34037 34039 34041 35001 35005 35006 35007 35
> 009 35013 35015 35017 35019 35025 35027 35028 35029 35031 350
> 33 35035 35037 35039 35041 35043 35045 35047 35049 35051 3505
> 3 35055 35057 35061 36001 36003 36005 36007 36009 36011 36013
>  36015 36017 36019 36021 36023 36025 36027 36029 36031 36033 
> 36035 36037 36039 36041 36043 36045 36047 36049 36051 36053 3
> 6055 36057 36059 36061 36063 36065 36067 36069 36071 36073 36
> 075 36077 36079 36081 36083 36085 36087 36089 36091 36093 360
> 95 36097 36099 36101 36103 36105 36107 36109 36111 36113 3611
> 5 36117 36119 36121 36123 37001 37003 37005 37007 37009 37011
>  37013 37015 37017 37019 37021 37023 37025 37027 37029 37031 
> 37033 37035 37037 37039 37041 37043 37045 37047 37049 37051 3
> 7053 37055 37057 37059 37061 37063 37065 37067 37069 37071 37
> 073 37075 37077 37079 37081 37083 37085 37087 37089 37091 370
> 93 37095 37097 37099 37101 37103 37105 37107 37109 37111 3711
> 3 37115 37117 37119 37121 37123 37125 37127 37129 37131 37133
>  37135 37137 37139 37141 37143 37145 37147 37149 37151 37153 
> 37155 37157 37159 37161 37163 37165 37167 37169 37171 37173 3
> 7175 37177 37179 37181 37183 37185 37187 37189 37191 37193 37
> 195 37197 37199 38003 38005 38009 38013 38015 38017 38021 380
> 25 38029 38035 38041 38043 38045 38049 38053 38055 38057 3805
> 9 38061 38067 38071 38073 38075 38077 38079 38081 38085 38089
>  38093 38097 38099 38101 38105 39001 39003 39005 39007 39009 
> 39011 39013 39015 39017 39019 39021 39023 39025 39027 39029 3
> 9031 39033 39035 39037 39039 39041 39043 39045 39047 39049 39
> 051 39053 39055 39057 39059 39061 39063 39065 39067 39069 390
> 71 39073 39075 39077 39079 39081 39083 39085 39087 39089 3909
> 1 39093 39095 39097 39099 39101 39103 39105 39107 39109 39111
>  39113 39115 39117 39119 39121 39123 39125 39127 39129 39131 
> 39133 39135 39137 39139 39141 39143 39145 39147 39149 39151 3
> 9153 39155 39157 39159 39161 39163 39165 39167 39169 39171 39
> 173 39175 40001 40003 40005 40007 40009 40011 40013 40015 400
> 17 40019 40021 40023 40027 40029 40031 40033 40035 40037 4003
> 9 40041 40043 40045 40047 40049 40051 40053 40055 40059 40061
>  40063 40065 40067 40069 40071 40073 40075 40077 40079 40081 
> 40083 40085 40087 40089 40091 40093 40095 40097 40099 40101 4
> 0103 40105 40107 40109 40111 40113 40115 40117 40119 40121 40
> 123 40125 40127 40129 40131 40133 40135 40137 40139 40141 401
> 43 40145 40147 40149 40151 40153 41001 41003 41005 41007 4100
> 9 41011 41013 41015 41017 41019 41025 41027 41029 41031 41033
>  41035 41037 41039 41041 41043 41045 41047 41049 41051 41053 
> 41057 41059 41061 41063 41065 41067 41071 42001 42003 42005 4
> 2007 42009 42011 42013 42015 42017 42019 42021 42023 42025 42
> 027 42029 42031 42033 42035 42037 42039 42041 42043 42045 420
> 47 42049 42051 42053 42055 42057 42059 42061 42063 42065 4206
> 7 42069 42071 42073 42075 42077 42079 42081 42083 42085 42087
>  42089 42091 42093 42095 42097 42099 42101 42103 42105 42107 
> 42109 42111 42113 42115 42117 42119 42121 42123 42125 42127 4
> 2129 42131 42133 44001 44003 44005 44007 44009 45001 45003 45
> 005 45007 45009 45011 45013 45015 45017 45019 45021 45023 450
> 25 45027 45029 45031 45033 45035 45037 45039 45041 45043 4504
> 5 45047 45049 45051 45053 45055 45057 45059 45061 45063 45065
>  45067 45069 45071 45073 45075 45077 45079 45081 45083 45085 
> 45087 45089 45091 46003 46005 46007 46009 46011 46013 46015 4
> 6019 46023 46025 46027 46029 46033 46035 46037 46039 46041 46
> 045 46047 46051 46057 46061 46065 46067 46071 46077 46079 460
> 81 46083 46085 46087 46089 46091 46093 46099 46101 46102 4610
> 3 46109 46111 46115 46117 46121 46125 46127 46135 47001 47003
>  47005 47007 47009 47011 47013 47015 47017 47019 47021 47023 
> 47025 47027 47029 47031 47033 47035 47037 47039 47041 47043 4
> 7045 47047 47049 47051 47053 47055 47057 47059 47061 47063 47
> 065 47067 47069 47071 47073 47075 47077 47079 47081 47083 470
> 85 47087 47089 47091 47093 47095 47097 47099 47101 47103 4710
> 5 47107 47109 47111 47113 47115 47117 47119 47121 47123 47125
>  47127 47129 47131 47133 47137 47139 47141 47143 47145 47147 
> 47149 47151 47153 47155 47157 47159 47161 47163 47165 47167 4
> 7169 47171 47173 47175 47177 47179 47181 47183 47185 47187 47
> 189 48001 48003 48005 48007 48009 48011 48013 48015 48017 480
> 19 48021 48023 48025 48027 48029 48031 48035 48037 48039 4804
> 1 48043 48047 48049 48051 48053 48055 48057 48059 48061 48063
>  48065 48067 48069 48071 48073 48077 48079 48081 48083 48085 
> 48089 48091 48093 48095 48097 48099 48103 48105 48107 48111 4
> 8113 48115 48117 48119 48121 48123 48127 48129 48131 48133 48
> 135 48139 48141 48143 48145 48147 48149 48151 48153 48157 481
> 59 48161 48163 48165 48167 48169 48171 48175 48177 48179 4818
> 1 48183 48185 48187 48189 48193 48197 48199 48201 48203 48205
>  48207 48209 48213 48215 48217 48219 48221 48223 48225 48227 
> 48229 48231 48233 48235 48237 48239 48241 48245 48247 48249 4
> 8251 48253 48255 48257 48259 48265 48267 48273 48277 48279 48
> 281 48283 48285 48287 48289 48291 48293 48295 48297 48299 483
> 03 48305 48307 48309 48313 48315 48317 48321 48323 48325 4832
> 9 48331 48333 48335 48337 48339 48341 48343 48347 48349 48351
>  48353 48355 48357 48359 48361 48363 48365 48367 48369 48371 
> 48373 48375 48377 48379 48381 48383 48387 48389 48391 48395 4
> 8397 48399 48401 48403 48405 48407 48409 48413 48415 48417 48
> 419 48423 48425 48427 48429 48435 48437 48439 48441 48445 484
> 49 48451 48453 48455 48457 48459 48461 48463 48465 48467 4846
> 9 48471 48473 48475 48477 48479 48481 48483 48485 48487 48489
>  48491 48493 48495 48497 48499 48501 48503 48505 48507 49001 
> 49003 49005 49007 49011 49013 49015 49017 49019 49021 49023 4
> 9025 49027 49029 49035 49037 49039 49041 49043 49045 49047 49
> 049 49051 49053 49057 50001 50003 50005 50007 50009 50011 500
> 13 50015 50017 50019 50021 50023 50025 50027 51001 51007 5100
> 9 51011 51013 51019 51021 51023 51025 51027 51029 51033 51036
>  51037 51041 51043 51047 51049 51051 51057 51061 51063 51065 
> 51067 51071 51073 51075 51077 51079 51083 51085 51087 51093 5
> 1097 51099 51101 51103 51105 51107 51109 51111 51113 51115 51
> 117 51119 51125 51127 51131 51133 51135 51137 51139 51141 511
> 45 51147 51155 51157 51159 51167 51169 51171 51173 51179 5118
> 1 51183 51185 51187 51193 51197 51510 51550 51650 51700 51710
>  51740 51760 51770 51800 51810 53001 53003 53005 53007 53009 
> 53011 53013 53015 53017 53019 53021 53025 53027 53029 53031 5
> 3033 53035 53037 53039 53041 53043 53045 53047 53049 53051 53
> 053 53055 53057 53059 53061 53063 53065 53067 53069 53071 530
> 73 53075 53077 54001 54003 54005 54007 54009 54011 54013 5401
> 5 54017 54019 54021 54023 54025 54027 54029 54031 54033 54035
>  54037 54039 54041 54043 54045 54047 54049 54051 54053 54055 
> 54057 54059 54061 54063 54065 54067 54069 54071 54073 54075 5
> 4077 54079 54081 54083 54085 54087 54089 54091 54093 54095 54
> 097 54099 54101 54103 54105 54107 54109 55001 55003 55005 550
> 07 55009 55011 55013 55015 55017 55019 55021 55023 55025 5502
> 7 55029 55031 55033 55035 55037 55039 55041 55043 55045 55047
>  55049 55051 55053 55055 55057 55059 55061 55063 55065 55067 
> 55069 55071 55073 55075 55077 55078 55079 55081 55083 55085 5
> 5087 55089 55091 55093 55095 55097 55099 55101 55103 55105 55
> 107 55109 55111 55113 55115 55117 55119 55121 55123 55125 551
> 27 55129 55131 55133 55135 55137 55139 55141 56001 56003 5600
> 5 56007 56009 56011 56013 56015 56019 56021 56023 56025 56029
>  56031 56033 56035 56037 56039 56041 56043 56045
Running regressions for 2849 counties (all sample)...
(file C:\Users\ji252\AppData\Local\Temp\ST_828_000003.tmp not
    found)
Warning: Regression failed for fips 1023
Processing county 100 of 2849 (fips = 5035)...
Warning: Regression failed for fips 6049
Processing county 200 of 2849 (fips = 6087)...
Warning: Regression failed for fips 6091
Warning: Regression failed for fips 8023
Warning: Regression failed for fips 8025
Warning: Regression failed for fips 8095
Warning: Regression failed for fips 8099
Warning: Regression failed for fips 8113
Warning: Regression failed for fips 8121
Warning: Regression failed for fips 8125
Processing county 300 of 2849 (fips = 12057)...
Warning: Regression failed for fips 13007
Warning: Regression failed for fips 13037
Warning: Regression failed for fips 13065
Processing county 400 of 2849 (fips = 13127)...
Warning: Regression failed for fips 13243
Warning: Regression failed for fips 13259
Warning: Regression failed for fips 13317
Warning: Regression failed for fips 16007
Processing county 500 of 2849 (fips = 16011)...
Warning: Regression failed for fips 16071
Warning: Regression failed for fips 17013
Warning: Regression failed for fips 17069
Processing county 600 of 2849 (fips = 17131)...
Warning: Regression failed for fips 17151
Warning: Regression failed for fips 17153
Processing county 700 of 2849 (fips = 18127)...
Warning: Regression failed for fips 19003
Warning: Regression failed for fips 19009
Warning: Regression failed for fips 19093
Processing county 800 of 2849 (fips = 19143)...
Warning: Regression failed for fips 19159
Warning: Regression failed for fips 20019
Warning: Regression failed for fips 20067
Warning: Regression failed for fips 20105
Warning: Regression failed for fips 20109
Warning: Regression failed for fips 20119
Warning: Regression failed for fips 20165
Warning: Regression failed for fips 20171
Warning: Regression failed for fips 20185
Warning: Regression failed for fips 20193
Warning: Regression failed for fips 20195
Warning: Regression failed for fips 20201
Processing county 900 of 2849 (fips = 20207)...
Warning: Regression failed for fips 20207
Warning: Regression failed for fips 21057
Warning: Regression failed for fips 21129
Warning: Regression failed for fips 21159
Processing county 1000 of 2849 (fips = 21199)...
Warning: Regression failed for fips 21237
Processing county 1100 of 2849 (fips = 24003)...
Processing county 1200 of 2849 (fips = 26129)...
Warning: Regression failed for fips 26135
Warning: Regression failed for fips 26153
Warning: Regression failed for fips 27011
Warning: Regression failed for fips 27077
Warning: Regression failed for fips 27149
Processing county 1300 of 2849 (fips = 27169)...
Warning: Regression failed for fips 28053
Warning: Regression failed for fips 28125
Warning: Regression failed for fips 29033
Processing county 1400 of 2849 (fips = 29035)...
Warning: Regression failed for fips 29075
Warning: Regression failed for fips 29081
Warning: Regression failed for fips 29103
Warning: Regression failed for fips 29171
Warning: Regression failed for fips 29179
Warning: Regression failed for fips 29199
Processing county 1500 of 2849 (fips = 30009)...
Warning: Regression failed for fips 30051
Warning: Regression failed for fips 30085
Warning: Regression failed for fips 30097
Warning: Regression failed for fips 30101
Warning: Regression failed for fips 30105
Warning: Regression failed for fips 31011
Warning: Regression failed for fips 31027
Warning: Regression failed for fips 31033
Warning: Regression failed for fips 31045
Warning: Regression failed for fips 31061
Warning: Regression failed for fips 31063
Warning: Regression failed for fips 31065
Warning: Regression failed for fips 31073
Warning: Regression failed for fips 31089
Warning: Regression failed for fips 31105
Warning: Regression failed for fips 31147
Warning: Regression failed for fips 31161
Warning: Regression failed for fips 31163
Warning: Regression failed for fips 31169
Warning: Regression failed for fips 31173
Processing county 1600 of 2849 (fips = 31185)...
Warning: Regression failed for fips 32011
Warning: Regression failed for fips 32021
Warning: Regression failed for fips 36041
Processing county 1700 of 2849 (fips = 36049)...
Warning: Regression failed for fips 37005
Warning: Regression failed for fips 37075
Warning: Regression failed for fips 37095
Processing county 1800 of 2849 (fips = 37125)...
Warning: Regression failed for fips 37177
Warning: Regression failed for fips 38013
Warning: Regression failed for fips 38021
Warning: Regression failed for fips 38041
Warning: Regression failed for fips 38043
Warning: Regression failed for fips 38045
Warning: Regression failed for fips 38085
Processing county 1900 of 2849 (fips = 39059)...
Warning: Regression failed for fips 40043
Warning: Regression failed for fips 40059
Processing county 2000 of 2849 (fips = 40087)...
Warning: Regression failed for fips 40151
Warning: Regression failed for fips 41025
Warning: Regression failed for fips 42023
Processing county 2100 of 2849 (fips = 42069)...
Warning: Regression failed for fips 46003
Warning: Regression failed for fips 46007
Warning: Regression failed for fips 46015
Warning: Regression failed for fips 46023
Warning: Regression failed for fips 46037
Processing county 2200 of 2849 (fips = 46041)...
Warning: Regression failed for fips 46041
Warning: Regression failed for fips 46051
Warning: Regression failed for fips 46071
Warning: Regression failed for fips 46085
Warning: Regression failed for fips 46089
Warning: Regression failed for fips 46091
Warning: Regression failed for fips 46109
Warning: Regression failed for fips 46111
Warning: Regression failed for fips 47067
Processing county 2300 of 2849 (fips = 47143)...
Warning: Regression failed for fips 48023
Warning: Regression failed for fips 48079
Warning: Regression failed for fips 48105
Warning: Regression failed for fips 48129
Warning: Regression failed for fips 48151
Processing county 2400 of 2849 (fips = 48171)...
Warning: Regression failed for fips 48197
Warning: Regression failed for fips 48247
Warning: Regression failed for fips 48267
Warning: Regression failed for fips 48295
Warning: Regression failed for fips 48333
Warning: Regression failed for fips 48357
Warning: Regression failed for fips 48383
Processing county 2500 of 2849 (fips = 48405)...
Warning: Regression failed for fips 48413
Warning: Regression failed for fips 48429
Warning: Regression failed for fips 48435
Warning: Regression failed for fips 48461
Warning: Regression failed for fips 48483
Warning: Regression failed for fips 49017
Processing county 2600 of 2849 (fips = 51043)...
Warning: Regression failed for fips 51051
Processing county 2700 of 2849 (fips = 53075)...
Warning: Regression failed for fips 54013
Warning: Regression failed for fips 54071
Warning: Regression failed for fips 54075
Processing county 2800 of 2849 (fips = 55085)...
Warning: Regression failed for fips 56043
(132 missing values generated)
(132 missing values generated)
(132 missing values generated)
(132 missing values generated)
(131 missing values generated)
(131 missing values generated)
(131 missing values generated)
(131 missing values generated)
(132 missing values generated)
(132 missing values generated)
(132 missing values generated)
(132 missing values generated)

==========================================
Multnomah County Results:
==========================================

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
       b_out |          1    .1613764           .   .1613764   .1613764
       t_out |          1    2.913926           .   2.913926   2.913926
        b_in |          1   -.1838134           .  -.1838134  -.1838134
        t_in |          1   -8.636003           .  -8.636003  -8.636003
pctile_b_out |          1    96.61516           .   96.61516   96.61516
-------------+---------------------------------------------------------
pctile_t_out |          1    95.62017           .   95.62017   95.62017
 pctile_b_in |          1     15.6365           .    15.6365    15.6365
 pctile_t_in |          1     7.98675           .    7.98675    7.98675

Distribution of coefficients (all counties):

          Out-migration coefficient (County x Post)
-------------------------------------------------------------
      Percentiles      Smallest
 1%    -.5383406       -1.19288
 5%     -.335157      -1.137723
10%    -.2648458      -.9571632       Obs               2,718
25%    -.1752968      -.9061099       Sum of wgt.       2,718

50%    -.0950147                      Mean          -.0984475
                        Largest       Std. dev.      .1510096
75%    -.0148651       .5249667
90%     .0715168       .5295028       Variance       .0228039
95%     .1318129        .657543       Skewness      -.6088189
99%     .2670831       .6877741       Kurtosis       7.821162

          In-migration coefficient (County x Post)
-------------------------------------------------------------
      Percentiles      Smallest
 1%    -.5200218      -2.103586
 5%    -.3129183      -1.267102
10%     -.228109      -1.263287       Obs               2,718
25%     -.137919      -.9308209       Sum of wgt.       2,718

50%    -.0514831                      Mean          -.0449492
                        Largest       Std. dev.      .1779624
75%     .0539701       .6841459
90%     .1609409       .9048778       Variance       .0316706
95%     .2288452       1.068451       Skewness      -.6283486
99%     .3718513       1.437353       Kurtosis       14.50795

Distribution of t-stats (all counties):

                  Out-migration t-statistic
-------------------------------------------------------------
      Percentiles      Smallest
 1%    -74.99235        -248.53
 5%    -20.25432      -118.6998
10%    -7.400002       -112.914       Obs               2,717
25%    -3.597477      -112.8162       Sum of wgt.       2,717

50%      -1.7353                      Mean          -4.049325
                        Largest       Std. dev.      14.11187
75%    -.2522069       58.40046
90%     1.285465       62.62106       Variance       199.1447
95%     2.608484        65.4359       Skewness      -5.214028
99%     20.04123       82.72672       Kurtosis       56.73002

                  In-migration t-statistic
-------------------------------------------------------------
      Percentiles      Smallest
 1%    -67.92362      -273.5952
 5%    -17.29146      -162.4983
10%    -6.571651      -141.9119       Obs               2,717
25%    -2.803951      -138.6147       Sum of wgt.       2,717

50%    -.8331484                      Mean          -2.517673
                        Largest       Std. dev.      15.99991
75%     .8726166        82.9898
90%     2.777437       97.58379       Variance        255.997
95%     5.109254       148.8558       Skewness      -3.182458
99%      35.3585       175.5935       Kurtosis       60.46389
  variable multnomah was float now byte
  variable rank_b_out was float now int
  variable rank_b_in was float now int
  variable rank_t_out was float now int
  variable rank_t_in was float now int
  (31,339 bytes saved)
(file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/data/working/county_flow_coefficients.dta not found)
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/data/working/county_flow_coefficients.dta saved
(file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/data/working/county_flow_coefficients.csv not found)
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/data/working/county_flow_coefficients.csv saved
County coefficients saved to C:/Users/ji252/Documents/GitHub/multnomah-county-tax/data/working/county_flow_coefficients.dta
(bin=50, start=-1.1928804, width=.03761309)
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/flows/fig_hist_out_b.png saved as PNG format
(bin=50, start=-2.103586, width=.07081878)
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/flows/fig_hist_in_b.png saved as PNG format
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/flows/fig_scatter_out_in_b.png saved as PNG format
(bin=50, start=-248.53001, width=6.6251346)
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/flows/fig_hist_out_t.png saved as PNG format
(bin=50, start=-273.59515, width=8.9837732)
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/flows/fig_hist_in_t.png saved as PNG format
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/flows/fig_scatter_out_in_t.png saved as PNG format

          Out-migration coefficient (County x Post)
-------------------------------------------------------------
      Percentiles      Smallest
 1%    -.5383406       -1.19288
 5%     -.335157      -1.137723
10%    -.2648458      -.9571632       Obs               2,718
25%    -.1752968      -.9061099       Sum of wgt.       2,718

50%    -.0950147                      Mean          -.0984475
                        Largest       Std. dev.      .1510096
75%    -.0148651       .5249667
90%     .0715168       .5295028       Variance       .0228039
95%     .1318129        .657543       Skewness      -.6088189
99%     .2670831       .6877741       Kurtosis       7.821162

          In-migration coefficient (County x Post)
-------------------------------------------------------------
      Percentiles      Smallest
 1%    -.5200218      -2.103586
 5%    -.3129183      -1.267102
10%     -.228109      -1.263287       Obs               2,718
25%     -.137919      -.9308209       Sum of wgt.       2,718

50%    -.0514831                      Mean          -.0449492
                        Largest       Std. dev.      .1779624
75%     .0539701       .6841459
90%     .1609409       .9048778       Variance       .0316706
95%     .2288452       1.068451       Skewness      -.6283486
99%     .3718513       1.437353       Kurtosis       14.50795

                  Out-migration t-statistic
-------------------------------------------------------------
      Percentiles      Smallest
 1%    -74.99235        -248.53
 5%    -20.25432      -118.6998
10%    -7.400002       -112.914       Obs               2,717
25%    -3.597477      -112.8162       Sum of wgt.       2,717

50%      -1.7353                      Mean          -4.049325
                        Largest       Std. dev.      14.11187
75%    -.2522069       58.40046
90%     1.285465       62.62106       Variance       199.1447
95%     2.608484        65.4359       Skewness      -5.214028
99%     20.04123       82.72672       Kurtosis       56.73002

                  In-migration t-statistic
-------------------------------------------------------------
      Percentiles      Smallest
 1%    -67.92362      -273.5952
 5%    -17.29146      -162.4983
10%    -6.571651      -141.9119       Obs               2,717
25%    -2.803951      -138.6147       Sum of wgt.       2,717

50%    -.8331484                      Mean          -2.517673
                        Largest       Std. dev.      15.99991
75%     .8726166        82.9898
90%     2.777437       97.58379       Variance        255.997
95%     5.109254       148.8558       Skewness      -3.182458
99%      35.3585       175.5935       Kurtosis       60.46389
file C:\Users\ji252\AppData\Local\Temp\ST_828_000005.tmp saved as .dta format
Number of observations (_N) was 0, now 40.
(40 missing values generated)
(40 missing values generated)
(40 missing values generated)
variable stat_name was str1 now str7
(1 real change made)
(1 real change made)
variable stat_description was str1 now str35
(1 real change made)
variable stat_name was str7 now str8
(1 real change made)
(1 real change made)
variable stat_description was str35 now str38
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
in not found
r(111);

end of do-file

r(111);

. do "C:\Users\ji252\AppData\Local\Temp\STD828_000001.tmp"

. use "${data}working/county_flow_coefficients`file_suffix'.dta", clear

. 
. ** Loop over beta and t-stats 
. foreach x in "b" "t" {
  2.         
.         ** Label 
.         if "`x'" == "b" local txt "Coefficients"
  3.         else if "`x'" == "t" local txt = "T-Statistics"
  4.                 
.         ** Store Multnomah's coefficients for reference lines
.         summ `x'_out if multnomah == 1, meanonly
  5.         local multnomah_`x'_out = r(mean)
  6.         summ `x'_in if multnomah == 1, meanonly
  7.         local multnomah_`x'_in = r(mean)
  8.         summ pctile_`x'_out if multnomah == 1, meanonly
  9.         local multnomah_pctile_out = r(mean)
 10.         summ pctile_`x'_in if multnomah == 1, meanonly
 11.         local multnomah_pctile_in = r(mean)
 12. 
.         
.         ** Plot 1: Out-migration coefficient distribution with Multnomah
.         histogram `x'_out if !missing(`x'_out),                                                                 ///
>                 bin(50)                                                                                                                 ///
>                 fcolor(navy%50) lcolor(navy)                                                                    ///
>                 xline(`multnomah_`x'_out', lcolor(red) lwidth(thick) lpattern(solid)) ///
>                 xtitle("Out-migration `txt' (County x Post)")                   ///
>                 ytitle("Frequency")                                                                                     ///
>                 title("Distribution of Out-Migration `txt'`title_suffix'")              ///
>                 subtitle("Red line = Multnomah County (percentile: `: display %4.1f `multnomah_pctile_out'')") ///
>                 graphregion(color(white))
 13. 
.         graph export "${results}flows/fig_hist_out_`x'`file_suffix'.png", replace
 14. 
.         ** Plot 2: In-migration coefficient distribution with Multnomah
.         histogram `x'_in if !missing(`x'_in),                                                                   ///
>                 bin(50)                                                                                                                 ///
>                 fcolor(maroon%50) lcolor(maroon)                                                                ///
>                 xline(`multnomah_`x'_in', lcolor(red) lwidth(thick) lpattern(solid)) ///
>                 xtitle("In-migration `txt' (County x Post)")                            ///
>                 ytitle("Frequency")                                                                                     ///
>                 title("Distribution of In-Migration `txt'`title_suffix'")               ///
>                 subtitle("Red line = Multnomah County (percentile: `: display %4.1f `multnomah_pctile_in'')") ///
>                 graphregion(color(white))
 15. 
.         graph export "${results}flows/fig_hist_in_`x'`file_suffix'.png", replace
 16. 
.         ** Plot 3: Combined scatter of out vs in coefficients
.         twoway  (scatter `x'_in `x'_out if multnomah == 0,                                              ///
>                                 mc(navy%30) ms(O) msize(small))                                                 ///
>                         (scatter `x'_in `x'_out if multnomah == 1,                                              ///
>                                 mc(red) ms(D) msize(large)),                                                    ///
>                 xline(0, lc(gs10) lp(dash))                                                                     ///
>                 yline(0, lc(gs10) lp(dash))                                                                     ///
>                 xtitle("Out-migration `txt'")                                                   ///
>                 ytitle("In-migration `txt'")                                                            ///
>                 title("Out- vs In-Migration Effects by County`title_suffix'")   ///
>                 legend(order(1 "Other Counties" 2 "Multnomah County") pos(6) rows(1)) ///
>                 graphregion(color(white))
 17. 
.         graph export "${results}flows/fig_scatter_out_in_`x'`file_suffix'.png", replace
 18. 
. 
. } // END BETA / T-STAT LOOP
(bin=50, start=-1.1928804, width=.03761309)
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/flows/fig_hist_out_b.png saved as PNG format
(bin=50, start=-2.103586, width=.07081878)
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/flows/fig_hist_in_b.png saved as PNG format
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/flows/fig_scatter_out_in_b.png saved as PNG format
(bin=50, start=-248.53001, width=6.6251346)
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/flows/fig_hist_out_t.png saved as PNG format
(bin=50, start=-273.59515, width=8.9837732)
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/flows/fig_hist_in_t.png saved as PNG format
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/flows/fig_scatter_out_in_t.png saved as PNG format

. 
. ********************************************************************************
. ** SECTION: Export Descriptive Statistics to Excel
. ** Purpose: Export Multnomah vs Distribution stats to Excel file
. ********************************************************************************
. 
. ** Get Multnomah's statistics
. 
. ** Loop over migration type 
. foreach x in "in" "out" {
  2.         
.         summ se_`x' if multnomah == 1, meanonly
  3.         local m_se_`x' = r(mean)
  4.         
.         ** Loop over beta / t-stat 
.         foreach y in "b" "t" {
  5.                 
.                 summ `y'_`x' if multnomah == 1, meanonly
  6.                 local m_`y'_`x' = r(mean)
  7.                 
.                 summ pctile_`y'_`x' if multnomah == 1, meanonly
  8.                 local m_pctile_`y'_`x' = r(mean)
  9.                 
.         } // END BETA / T-STAT LOOP 
 10.         
.         
. } // END IN/OUT LOOP 

. 
. ** Count statistics
. qui count if !missing(b_out)

. local n_counties_out = r(N)

. qui count if !missing(b_in)

. local n_counties_in = r(N)

. qui count if !missing(b_out) & !missing(b_in)

. local n_counties_both = r(N)

. 
. ** Count counties with more extreme coefficients than Multnomah
. ** For out-migration: larger (more positive) is "worse"
. ** For in-migration: smaller (more negative) is "worse"
. qui count if b_out > `m_b_out' & !missing(b_out)

. local n_larger_out = r(N)

. qui count if b_out > `m_b_out' & !missing(b_out) & p_out < 0.05

. local n_larger_out_sig = r(N)

. 
. qui count if b_in < `m_b_in' & !missing(b_in)

. local n_smaller_in = r(N)

. qui count if b_in < `m_b_in' & !missing(b_in) & p_in < 0.05

. local n_smaller_in_sig = r(N)

. 
. ** Counties with both more out AND less in (worse on both dimensions)
. qui count if b_out > `m_b_out' & b_in < `m_b_in' & !missing(b_out) & !missing(b_in)

. local n_worse_both = r(N)

. qui count if b_out > `m_b_out' & b_in < `m_b_in' & !missing(b_out) & !missing(b_in) & p_out < 0.05 & p_in < 0.05

. local n_worse_both_sig = r(N)

. 
. ** Distribution statistics for out-migration
. summ b_out, detail

          Out-migration coefficient (County x Post)
-------------------------------------------------------------
      Percentiles      Smallest
 1%    -.5383406       -1.19288
 5%     -.335157      -1.137723
10%    -.2648458      -.9571632       Obs               2,718
25%    -.1752968      -.9061099       Sum of wgt.       2,718

50%    -.0950147                      Mean          -.0984475
                        Largest       Std. dev.      .1510096
75%    -.0148651       .5249667
90%     .0715168       .5295028       Variance       .0228039
95%     .1318129        .657543       Skewness      -.6088189
99%     .2670831       .6877741       Kurtosis       7.821162

. local dist_out_mean = r(mean)

. local dist_out_sd = r(sd)

. local dist_out_min = r(min)

. local dist_out_max = r(max)

. local dist_out_p25 = r(p25)

. local dist_out_p50 = r(p50)

. local dist_out_p75 = r(p75)

. 
. ** Distribution statistics for in-migration
. summ b_in, detail

          In-migration coefficient (County x Post)
-------------------------------------------------------------
      Percentiles      Smallest
 1%    -.5200218      -2.103586
 5%    -.3129183      -1.267102
10%     -.228109      -1.263287       Obs               2,718
25%     -.137919      -.9308209       Sum of wgt.       2,718

50%    -.0514831                      Mean          -.0449492
                        Largest       Std. dev.      .1779624
75%     .0539701       .6841459
90%     .1609409       .9048778       Variance       .0316706
95%     .2288452       1.068451       Skewness      -.6283486
99%     .3718513       1.437353       Kurtosis       14.50795

. local dist_in_mean = r(mean)

. local dist_in_sd = r(sd)

. local dist_in_min = r(min)

. local dist_in_max = r(max)

. local dist_in_p25 = r(p25)

. local dist_in_p50 = r(p50)

. local dist_in_p75 = r(p75)

. 
. ** Distribution statistics for t-stats
. summ t_out, detail

                  Out-migration t-statistic
-------------------------------------------------------------
      Percentiles      Smallest
 1%    -74.99235        -248.53
 5%    -20.25432      -118.6998
10%    -7.400002       -112.914       Obs               2,717
25%    -3.597477      -112.8162       Sum of wgt.       2,717

50%      -1.7353                      Mean          -4.049325
                        Largest       Std. dev.      14.11187
75%    -.2522069       58.40046
90%     1.285465       62.62106       Variance       199.1447
95%     2.608484        65.4359       Skewness      -5.214028
99%     20.04123       82.72672       Kurtosis       56.73002

. local dist_t_out_mean = r(mean)

. local dist_t_out_sd = r(sd)

. local dist_t_out_p50 = r(p50)

. 
. summ t_in, detail

                  In-migration t-statistic
-------------------------------------------------------------
      Percentiles      Smallest
 1%    -67.92362      -273.5952
 5%    -17.29146      -162.4983
10%    -6.571651      -141.9119       Obs               2,717
25%    -2.803951      -138.6147       Sum of wgt.       2,717

50%    -.8331484                      Mean          -2.517673
                        Largest       Std. dev.      15.99991
75%     .8726166        82.9898
90%     2.777437       97.58379       Variance        255.997
95%     5.109254       148.8558       Skewness      -3.182458
99%      35.3585       175.5935       Kurtosis       60.46389

. local dist_t_in_mean = r(mean)

. local dist_t_in_sd = r(sd)

. local dist_t_in_p50 = r(p50)

. 
. ** Save county coefficients to tempfile, then create stats dataset
. tempfile county_coefs_tmp

. save `county_coefs_tmp'
file C:\Users\ji252\AppData\Local\Temp\ST_828_000001.tmp saved as .dta format

. 
. ** Create a new dataset with the statistics
. clear

. set obs 40
Number of observations (_N) was 0, now 40.

. 
. ** Create variables
. gen stat_name = ""
(40 missing values generated)

. gen stat_value = .
(40 missing values generated)

. gen stat_description = ""
(40 missing values generated)

. 
. ** Row counter
. local row = 1

. 
. ** ============================================================================
. ** MULTNOMAH STATISTICS
. ** ============================================================================
. 
. replace stat_name = "m_b_out" in `row'
variable stat_name was str1 now str7
(1 real change made)

. replace stat_value = `m_b_out' in `row'
(1 real change made)

. replace stat_description = "Multnomah out-migration coefficient" in `row'
variable stat_description was str1 now str35
(1 real change made)

. local row = `row' + 1

. 
. replace stat_name = "m_se_out" in `row'
variable stat_name was str7 now str8
(1 real change made)

. replace stat_value = `m_se_out' in `row'
(1 real change made)

. replace stat_description = "Multnomah out-migration standard error" in `row'
variable stat_description was str35 now str38
(1 real change made)

. local row = `row' + 1

. 
. replace stat_name = "m_t_out" in `row'
(1 real change made)

. replace stat_value = `m_t_out' in `row'
(1 real change made)

. replace stat_description = "Multnomah out-migration t-statistic" in `row'
(1 real change made)

. local row = `row' + 1

. 
. replace stat_name = "m_p_out" in `row'
(1 real change made)

. replace stat_value = `m_p_out' in `row'
in not found
r(111);

end of do-file

r(111);

. do "C:\Users\ji252\AppData\Local\Temp\STD828_000002.tmp"

. use "${data}working/county_flow_coefficients`file_suffix'.dta", clear

. 
. ** Loop over beta and t-stats 
. foreach x in "b" "t" {
  2.         
.         ** Label 
.         if "`x'" == "b" local txt "Coefficients"
  3.         else if "`x'" == "t" local txt = "T-Statistics"
  4.                 
.         ** Store Multnomah's coefficients for reference lines
.         summ `x'_out if multnomah == 1, meanonly
  5.         local multnomah_`x'_out = r(mean)
  6.         summ `x'_in if multnomah == 1, meanonly
  7.         local multnomah_`x'_in = r(mean)
  8.         summ pctile_`x'_out if multnomah == 1, meanonly
  9.         local multnomah_pctile_out = r(mean)
 10.         summ pctile_`x'_in if multnomah == 1, meanonly
 11.         local multnomah_pctile_in = r(mean)
 12. 
.         
.         ** Plot 1: Out-migration coefficient distribution with Multnomah
.         histogram `x'_out if !missing(`x'_out),                                                                 ///
>                 bin(50)                                                                                                                 ///
>                 fcolor(navy%50) lcolor(navy)                                                                    ///
>                 xline(`multnomah_`x'_out', lcolor(red) lwidth(thick) lpattern(solid)) ///
>                 xtitle("Out-migration `txt' (County x Post)")                   ///
>                 ytitle("Frequency")                                                                                     ///
>                 title("Distribution of Out-Migration `txt'`title_suffix'")              ///
>                 subtitle("Red line = Multnomah County (percentile: `: display %4.1f `multnomah_pctile_out'')") ///
>                 graphregion(color(white))
 13. 
.         graph export "${results}flows/fig_hist_out_`x'`file_suffix'.png", replace
 14. 
.         ** Plot 2: In-migration coefficient distribution with Multnomah
.         histogram `x'_in if !missing(`x'_in),                                                                   ///
>                 bin(50)                                                                                                                 ///
>                 fcolor(maroon%50) lcolor(maroon)                                                                ///
>                 xline(`multnomah_`x'_in', lcolor(red) lwidth(thick) lpattern(solid)) ///
>                 xtitle("In-migration `txt' (County x Post)")                            ///
>                 ytitle("Frequency")                                                                                     ///
>                 title("Distribution of In-Migration `txt'`title_suffix'")               ///
>                 subtitle("Red line = Multnomah County (percentile: `: display %4.1f `multnomah_pctile_in'')") ///
>                 graphregion(color(white))
 15. 
.         graph export "${results}flows/fig_hist_in_`x'`file_suffix'.png", replace
 16. 
.         ** Plot 3: Combined scatter of out vs in coefficients
.         twoway  (scatter `x'_in `x'_out if multnomah == 0,                                              ///
>                                 mc(navy%30) ms(O) msize(small))                                                 ///
>                         (scatter `x'_in `x'_out if multnomah == 1,                                              ///
>                                 mc(red) ms(D) msize(large)),                                                    ///
>                 xline(0, lc(gs10) lp(dash))                                                                     ///
>                 yline(0, lc(gs10) lp(dash))                                                                     ///
>                 xtitle("Out-migration `txt'")                                                   ///
>                 ytitle("In-migration `txt'")                                                            ///
>                 title("Out- vs In-Migration Effects by County`title_suffix'")   ///
>                 legend(order(1 "Other Counties" 2 "Multnomah County") pos(6) rows(1)) ///
>                 graphregion(color(white))
 17. 
.         graph export "${results}flows/fig_scatter_out_in_`x'`file_suffix'.png", replace
 18. 
. 
. } // END BETA / T-STAT LOOP
(bin=50, start=-1.1928804, width=.03761309)
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/flows/fig_hist_out_b.png saved as PNG format
(bin=50, start=-2.103586, width=.07081878)
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/flows/fig_hist_in_b.png saved as PNG format
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/flows/fig_scatter_out_in_b.png saved as PNG format
(bin=50, start=-248.53001, width=6.6251346)
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/flows/fig_hist_out_t.png saved as PNG format
(bin=50, start=-273.59515, width=8.9837732)
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/flows/fig_hist_in_t.png saved as PNG format
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/flows/fig_scatter_out_in_t.png saved as PNG format

. 
. ********************************************************************************
. ** SECTION: Export Descriptive Statistics to Excel
. ** Purpose: Export Multnomah vs Distribution stats to Excel file
. ********************************************************************************
. 
. ** Get Multnomah's statistics
. 
. ** Loop over migration type 
. foreach x in "in" "out" {
  2.         
.         summ se_`x' if multnomah == 1, meanonly
  3.         local m_se_`x' = r(mean)
  4.         
.         ** Loop over beta / t-stat 
.         foreach y in "b" "t" "p" {
  5.                 
.                 summ `y'_`x' if multnomah == 1, meanonly
  6.                 local m_`y'_`x' = r(mean)
  7.                 
.                 summ pctile_`y'_`x' if multnomah == 1, meanonly
  8.                 local m_pctile_`y'_`x' = r(mean)
  9.                 
.         } // END BETA / T-STAT LOOP 
 10.         
.         
. } // END IN/OUT LOOP 
variable pctile_p_in not found
r(111);

end of do-file

r(111);

. do "C:\Users\ji252\Documents\GitHub\multnomah-county-tax\code
> \02_flow_analysis.do"

. /************************************************************
> *******************
> File Name:              02_flow_analysis.do
> Creator:                John Iselin
> Date Update:    January 30, 2026
> 
> Called by: 00_multnomah.do
> 
> Purpose: Perform flow-based analysis on IRS data.
> 
> Outputs:
> All outputs are produced twice: once for all counties and onc
> e for ACS counties
> only (with _acs suffix). ACS sample includes property tax rat
> e controls.
> 
> - county_flow_coefficients[_acs].dta/csv: flow coefficients f
> or all counties
>   (b_out, b_in, se_out, se_in, t-stats, p-values, percentile 
> ranks)
> - fig_multnomah_post_*[_acs].png: flow coefficient plots for 
> Multnomah
> - fig_hist_out_*[_acs].png: Histogram of out-migration coeffi
> cients (with percentile)
> - fig_hist_in_*[_acs].png: Histogram of in-migration coeffici
> ents (with percentile)
> - fig_scatter_out_in_*[_acs].png: Scatter plot of out vs in c
> oefficients
> - fig_multnomah_out_*[_acs].png: Event study plots for out-mi
> gration
> - fig_multnomah_in_*[_acs].png: Event study plots for in-migr
> ation
> - fig_multnomah_both_*[_acs].png: Combined event study plots
> 
> Excel output (flow_analysis_stats.xlsx):
> - all/acs: Summary statistics for Multnomah and distribution
> - larger_out_all/acs: Counties with larger out-migration coef
> ficients
> - smaller_in_all/acs: Counties with smaller in-migration coef
> ficients
> - worse_both_all/acs: Counties worse on both dimensions
> - larger_t_out_all/acs: Counties with larger out-migration t-
> statistics
> - smaller_t_in_all/acs: Counties with smaller in-migration t-
> statistics
> 
> Authors: John Iselin
> 
> For more information, contact john.iselin@yale.edu
> 
> *************************************************************
> ******************/
. 
. 
. ** Start log file
. capture log close log_02

. log using "${logs}02_log_flow_${date}", replace text name(log
> _02)
---------------------------------------------------------------
      name:  log_02
       log:  C:/Users/ji252/Documents/GitHub/multnomah-county-t
> ax/code/logs/02_log_flow_2026-01-30.log
  log type:  text
 opened on:  30 Jan 2026, 23:51:54

. 
. ** Parameters
. local reps = 100

. 
. ** Load ACS data to get the set of counties 
. use "${data}working/acs_county_gross_18plus", clear

. 
. ** Keep required variables 
. keep year fips 

. 
. ** Keep only always-observed fips 
. bysort fips: gen ct = _N

. tab ct 

         ct |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |        168        3.48        3.48
          7 |        287        5.95        9.43
         10 |      4,370       90.57      100.00
------------+-----------------------------------
      Total |      4,825      100.00

. keep if ct == 10 
(455 observations deleted)

. 
. ** Keep fips 
. keep fips 

. 
. ** Drop duplicates 
. duplicates drop 

Duplicates in terms of all variables

(3,933 observations deleted)

. 
. ** Preserve data 
. tempfile acs_fips 

. save `acs_fips'
file C:\Users\ji252\AppData\Local\Temp\ST_828_000001.tmp
    saved as .dta format

. clear 

. 
. ** Load IRS Data
. use "${data}working/irs_county_flow.dta", clear

. 
. ** Sample restrictions
. drop if inlist(state_fips_o, 2, 15)     // Alaska and Hawaii
(3,109 observations deleted)

. drop if inlist(state_fips_d, 2, 15)     // Alaska and Hawaii
(2,293 observations deleted)

. 
. ** Clean up variables
. drop fips

. 
. ** Mover indicators
. gen mover = fips_o != fips_d

. 
. ** Generate flow id
. egen flow_id = group(fips_d fips_o)

. 
. ** Declare panel and fill in missing values 
. xtset flow_id year 

Panel variable: flow_id (unbalanced)
 Time variable: year, 2016 to 2022, but with gaps
         Delta: 1 unit

. tsfill, full

. 
. ** Keep required variables 
. keep fips_d fips_o flow_id year mover n1 n2 agi 

. 
. ** Replace with 0s
. replace n1 = 0 if missing(n1)
(140,172 real changes made)

. replace n2 = 0 if missing(n2)
(140,172 real changes made)

. replace agi = 0 if missing(agi)
(140,172 real changes made)

. replace agi = 0 if agi < 0 
(89 real changes made)

. 
. ** Merge with time-varying controls
. 
. ** Keep if in donor pool in both origin and destination
. foreach x in "o" "d" {
  2. 
.         ** Fill in missing fips
.         bysort flow_id: egen tmp = mean(fips_`x')
  3.         replace fips_`x' = tmp if missing(fips_`x')
  4.         drop tmp 
  5. 
.         ** Merge with relevent variables
.         gen fips = fips_`x'
  6.         merge m:1 fips using "${data}working/ids",        
>                                       ///
>                 keep(match) gen(merge_ids_`x')
  7.         merge m:1 year fips using "${data}working/bls_unem
> ployment",    ///
>                 keep(match) gen(merge_bls_`x')
  8.         merge m:1 year fips using "${data}working/bea_econ
> omics",               ///
>                 keep(match) gen(merge_bea_`x')
  9.         merge m:1 fips using `acs_fips', keep(master match
> ) gen(merge_acs_`x')
 10.         merge m:1 year fips using "${data}working/property
> _tax_rates_overall", ///
>                 gen(proptx_merge_`x') keep(master match) keep
> using(prop_rate_mean )
 11.         
.         ** Rename
.         rename state_name state_name_`x'
 12.         rename state_fips state_fips_`x'
 13.         rename county_name county_name_`x'
 14.         rename county_fips county_fips_`x'      
 15.         rename unemp unemp_`x'
 16.         rename population pop_`x'
 17.         rename per_capita_income per_capita_income_`x'
 18.         rename prop_rate_mean prop_rate_mean_`x'
 19.         drop fips
 20. 
. } // END ORIGIN-DESTINATION LOOP
(140,172 real changes made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                           497,448  (merge_ids_o==3)
    -----------------------------------------
(variable fips was float, now double to accommodate using
       data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                           491,939  (merge_bls_o==3)
    -----------------------------------------

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                           484,407  (merge_bea_o==3)
    -----------------------------------------

    Result                      Number of obs
    -----------------------------------------
    Not matched                       202,846
        from master                   202,846  (merge_acs_o==1)
        from using                          0  (merge_acs_o==2)

    Matched                           281,561  (merge_acs_o==3)
    -----------------------------------------

    Result                      Number of obs
    -----------------------------------------
    Not matched                       189,234
        from master                   189,234  (proptx_merge_o=
> =1)
        from using                          0  (proptx_merge_o=
> =2)

    Matched                           295,173  (proptx_merge_o=
> =3)
    -----------------------------------------
(136,291 real changes made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                           484,407  (merge_ids_d==3)
    -----------------------------------------
(variable fips was float, now double to accommodate using
       data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                           480,970  (merge_bls_d==3)
    -----------------------------------------

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                           475,524  (merge_bea_d==3)
    -----------------------------------------

    Result                      Number of obs
    -----------------------------------------
    Not matched                       207,879
        from master                   207,879  (merge_acs_d==1)
        from using                          0  (merge_acs_d==2)

    Matched                           267,645  (merge_acs_d==3)
    -----------------------------------------

    Result                      Number of obs
    -----------------------------------------
    Not matched                       193,163
        from master                   193,163  (proptx_merge_d=
> =1)
        from using                          0  (proptx_merge_d=
> =2)

    Matched                           282,361  (proptx_merge_d=
> =3)
    -----------------------------------------

. 
. ** Tag flows to-and-from acs counties 
. gen acs_flow = merge_acs_d == 3 & merge_acs_o == 3

. label var acs_flow "Flows to and from ACS counties"

. 
. ** Multnomah indicators
. gen out_multnomah = (state_fips_o == 41 & county_fips_o == 51
> )

. gen in_multnomah = (state_fips_d == 41 & county_fips_d == 51)

. 
. ** Post-indicators
. gen post = year > 2020

. 
. ** Interactions
. gen in_multnomah_post = in_multnomah * post

. gen out_multnomah_post = out_multnomah * post

. 
. ** Create interactions manually (base year = 2020)
. forvalues y = 2016/2022 {
  2.         gen x_out_`y' = out_multnomah * (year == `y')
  3.         gen x_in_`y' = in_multnomah * (year == `y')
  4. }

. 
. ** Drop base year (2020)
. drop x_out_2020 x_in_2020

. 
. *************************************************************
> *******************
. ** MAIN ANALYSIS LOOP: Run regressions for (1) all counties, 
> (2) ACS counties
. ** The second iteration restricts to flows where acs_flow == 
> 1 and adds
. ** property tax rate controls (prop_rate_mean_o and prop_rate
> _mean_d)
. *************************************************************
> *******************
. 
. foreach sample in  "acs" "all" {
  2. 
.         ** Set sample-specific parameters
.         if "`sample'" == "all" {
  3.                 local sample_cond ""
  4.                 local covars "unemp_* pop_* per_capita_inc
> ome_*"
  5.                 local file_suffix ""
  6.                 local title_suffix ""
  7.         }
  8.         else if "`sample'" == "acs" {
  9.                 local sample_cond "& acs_flow == 1"
 10.                 local covars "unemp_* pop_* per_capita_inc
> ome_* prop_rate_mean_o prop_rate_mean_d"
 11.                 local file_suffix "_acs"
 12.                 local title_suffix " (ACS Counties)"
 13.         }
 14. 
.         dis ""
 15.         dis "=============================================
> ==========================="
 16.         dis "RUNNING ANALYSIS FOR SAMPLE: `sample'"
 17.         dis "Sample condition: `sample_cond'"
 18.         dis "Covariates: `covars'"
 19.         dis "=============================================
> ==========================="
 20.         dis ""
 21. 
. *************************************************************
> *******************
. ** REGRESSION 1: Multnomah X Post (flow DID)
. *************************************************************
> *******************
. 
. ** Loop over outcome variables
. foreach outcome in n1 n2 agi {
 22. 
.         ** Set outcome label for graphs
.         if "`outcome'" == "n1" local outcome_label "Number of
>  Returns"
 23.         if "`outcome'" == "n2" local outcome_label "Number
>  of Exemptions"
 24.         if "`outcome'" == "agi" local outcome_label "Adjus
> ted Gross Income"
 25. 
.         ** Regression 1a: With covariates
.         ppmlhdfe `outcome' i.out_multnomah_post i.in_multnoma
> h_post     ///
>                 `covars'                                     
>                                                              
>       ///
>                 if mover == 1 `sample_cond',                 
>                                            ///
>                 absorb(year flow_id) vce(cluster flow_id)
 26.         estimates store `outcome'_with_covars
 27. 
.         ** Regression 1b: Without covariates
.         ppmlhdfe `outcome' i.out_multnomah_post i.in_multnoma
> h_post     ///
>                 if mover == 1 `sample_cond',                 
>                                            ///
>                 absorb(year flow_id) vce(cluster flow_id)
 28.         estimates store `outcome'_no_covars
 29. 
.         ** Plot both regressions
.         coefplot        (`outcome'_with_covars, label("With C
> ovariates")        ///
>                                         mc(navy) ciopts(lc(na
> vy)))                                              ///
>                                 (`outcome'_no_covars, label("
> Without Covariates")       ///
>                                         mc(maroon) ciopts(lc(
> maroon))),                                 ///
>                 keep(1.out_multnomah_post 1.in_multnomah_post
> )                          ///
>                 ciopts(recast(rcap))                         
>                                                    ///
>                 yline(0, lc(gs10) lp(dash))                  
>                                            ///
>                 xline(0, lc(gs10) lp(dash))                  
>                                            ///
>                 coeflabels(     1.out_multnomah_post = "Out-m
> igration"                  ///
>                                         1.in_multnomah_post =
>  "In-migration")                   ///
>                 ytitle("Coefficient")                        
>                                                    ///
>                 xtitle("")                                   
>                                                              
>       ///
>                 legend(pos(6) rows(1))                       
>                                                    ///
>                 title("Migration Flows: Multnomah County x Po
> st`title_suffix'") ///
>                 subtitle("`outcome_label'")                  
>                                                    ///
>                 graphregion(color(white))
 30. 
.         graph export "${results}flows/fig_multnomah_post_`out
> come'`file_suffix'.png", replace
 31. 
. 
. } // END OUTCOME LOOP
 32. 
. *************************************************************
> *******************
. ** REGRESSION 1b: Loop over all counties (Permutation-style a
> nalysis)
. ** Purpose: Run same flow regression for each county to creat
> e distribution
. **          of treatment effects for comparison with Multnoma
> h
. *************************************************************
> *******************
. 
. ** Preserve data for later use in REGRESSION 2
. preserve
 33. 
. ** Get list of unique origin fips codes (respecting sample co
> ndition)
. if "`sample'" == "all" {
 34.         levelsof fips_o, local(fips_list)
 35. }
 36. else {
 37.         levelsof fips_o if acs_flow == 1, local(fips_list)
 38. }
 39. local n_fips : word count `fips_list'
 40. dis "Running regressions for `n_fips' counties (`sample' s
> ample)..."
 41. 
. ** Initialize tempfile to store results
. tempfile county_results
 42. postfile county_coefs fips b_out se_out b_in se_in using `
> county_results', replace
 43. 
. ** Counter for display
. local ct = 1
 44. 
. foreach f of local fips_list {
 45. 
.         ** Display status every 100 counties
.         if mod(`ct', 100) == 0 {
 46.                 dis "Processing county `ct' of `n_fips' (f
> ips = `f')..."
 47.         }
 48. 
.         ** Generate treatment vars
.         gen out_tmp = fips_o == `f'
 49.         gen in_tmp = fips_d == `f'
 50. 
.         ** Interactions
.         gen out_post_tmp = out_tmp * post
 51.         gen in_post_tmp = in_tmp * post
 52. 
.         ** Run regression with capture to handle potential er
> rors
.         capture {
 53.                 ** Regression: With covariates
.                  ppmlhdfe agi i.out_post_tmp i.in_post_tmp   
>    ///
>                         `covars'                             
>                                                    ///
>                         if mover == 1 `sample_cond',         
>                            ///
>                         absorb(year flow_id) vce(cluster flow
> _id)
 54. 
.                 ** Store coefficients and SEs
.                 local tmp_b_out = _b[1.out_post_tmp]
 55.                 local tmp_se_out = _se[1.out_post_tmp]
 56.                 local tmp_b_in = _b[1.in_post_tmp]
 57.                 local tmp_se_in = _se[1.in_post_tmp]
 58. 
.                 ** Post results
.                 post county_coefs (`f') (`tmp_b_out') (`tmp_s
> e_out') (`tmp_b_in') (`tmp_se_in')
 59.         }
 60. 
.         ** If regression failed, post missing values
.         if _rc != 0 {
 61.                 post county_coefs (`f') (.) (.) (.) (.)
 62.                 dis "Warning: Regression failed for fips `
> f'"
 63.         }
 64.         
. 
.         ** Drop temporary vars
.         drop out_tmp in_tmp out_post_tmp in_post_tmp
 65. 
.         ** Update count
.         local ct = `ct' + 1
 66. 
. } // END FIPS LOOP
 67. 
. ** Close postfile
. postclose county_coefs
 68. 
. ** Load results
. use `county_results', clear
 69. 
. ** Add identifiers
. gen multnomah = (fips == 41051)
 70. label var fips "County FIPS code"
 71. label var b_out "Out-migration coefficient (County x Post)
> "
 72. label var se_out "Out-migration SE"
 73. label var b_in "In-migration coefficient (County x Post)"
 74. label var se_in "In-migration SE"
 75. label var multnomah "Multnomah County indicator"
 76. 
. ** Calculate t-statistics and p-values
. gen t_out = b_out / se_out
 77. gen t_in = b_in / se_in
 78. gen p_out = 2 * (1 - normal(abs(t_out)))
 79. gen p_in = 2 * (1 - normal(abs(t_in)))
 80. 
. label var t_out "Out-migration t-statistic"
 81. label var t_in "In-migration t-statistic"
 82. label var p_out "Out-migration p-value"
 83. label var p_in "In-migration p-value"
 84. 
. ** Calculate percentile ranks for Multnomah
. foreach x in "b" "t" {
 85.         egen rank_`x'_out = rank(`x'_out)
 86.         egen rank_`x'_in = rank(`x'_in)
 87.         qui count if !missing(`x'_out)
 88.         gen pctile_`x'_out = 100 * rank_`x'_out / r(N)
 89.         qui count if !missing(`x'_in)
 90.         gen pctile_`x'_in = 100 * rank_`x'_in / r(N)
 91. 
. }
 92. 
. label var pctile_b_out "Percentile rank of out-migration coef
> "
 93. label var pctile_b_in "Percentile rank of in-migration coe
> f"
 94. label var pctile_t_out "Percentile rank of out-migration t
> -stat"
 95. label var pctile_t_in "Percentile rank of in-migration t-s
> tat"
 96. 
. ** Display Multnomah's position
. dis ""
 97. dis "=========================================="
 98. dis "Multnomah County Results:"
 99. dis "=========================================="
100. summ b_out t_out b_in t_in pctile_*_out pctile_*_in if mul
> tnomah == 1
101. 
. ** Display distribution summary
. dis ""
102. dis "Distribution of coefficients (all counties):"
103. summ b_out b_in, detail
104. 
. dis ""
105. dis "Distribution of t-stats (all counties):"
106. summ t_out t_in, detail
107. 
. ** Save county coefficients dataset
. compress
108. save "${data}working/county_flow_coefficients`file_suffix'
> .dta", replace
109. export delimited using "${data}working/county_flow_coeffic
> ients`file_suffix'.csv", replace
110. 
. dis "County coefficients saved to ${data}working/county_flow_
> coefficients`file_suffix'.dta"
111. 
. ** Restore original data for REGRESSION 2
. restore
112. 
. *************************************************************
> *******************
. ** SECTION: Multnomah vs Distribution Plots (Histogram Compar
> ison)
. ** Purpose: Plot Multnomah's coefficients against distributio
> n of all counties
. *************************************************************
> *******************
. 
. ** Load the county coefficients
. preserve
113. use "${data}working/county_flow_coefficients`file_suffix'.
> dta", clear
114. 
. ** Loop over beta and t-stats 
. foreach x in "b" "t" {
115.         
.         ** Label 
.         if "`x'" == "b" local txt "Coefficients"
116.         else if "`x'" == "t" local txt = "T-Statistics"
117.                 
.         ** Store Multnomah's coefficients for reference lines
.         summ `x'_out if multnomah == 1, meanonly
118.         local multnomah_`x'_out = r(mean)
119.         summ `x'_in if multnomah == 1, meanonly
120.         local multnomah_`x'_in = r(mean)
121.         summ pctile_`x'_out if multnomah == 1, meanonly
122.         local multnomah_pctile_out = r(mean)
123.         summ pctile_`x'_in if multnomah == 1, meanonly
124.         local multnomah_pctile_in = r(mean)
125. 
.         
.         ** Plot 1: Out-migration coefficient distribution wit
> h Multnomah
.         histogram `x'_out if !missing(`x'_out),              
>                                                    ///
>                 bin(50)                                      
>                                                              
>               ///
>                 fcolor(navy%50) lcolor(navy)                 
>                                                    ///
>                 xline(`multnomah_`x'_out', lcolor(red) lwidth
> (thick) lpattern(solid)) ///
>                 xtitle("Out-migration `txt' (County x Post)")
>                    ///
>                 ytitle("Frequency")                          
>                                                            //
> /
>                 title("Distribution of Out-Migration `txt'`ti
> tle_suffix'")              ///
>                 subtitle("Red line = Multnomah County (percen
> tile: `: display %4.1f `multnomah_pctile_out'')") ///
>                 graphregion(color(white))
126. 
.         graph export "${results}flows/fig_hist_out_`x'`file_s
> uffix'.png", replace
127. 
.         ** Plot 2: In-migration coefficient distribution with
>  Multnomah
.         histogram `x'_in if !missing(`x'_in),                
>                                                    ///
>                 bin(50)                                      
>                                                              
>               ///
>                 fcolor(maroon%50) lcolor(maroon)             
>                                                    ///
>                 xline(`multnomah_`x'_in', lcolor(red) lwidth(
> thick) lpattern(solid)) ///
>                 xtitle("In-migration `txt' (County x Post)") 
>                            ///
>                 ytitle("Frequency")                          
>                                                            //
> /
>                 title("Distribution of In-Migration `txt'`tit
> le_suffix'")               ///
>                 subtitle("Red line = Multnomah County (percen
> tile: `: display %4.1f `multnomah_pctile_in'')") ///
>                 graphregion(color(white))
128. 
.         graph export "${results}flows/fig_hist_in_`x'`file_su
> ffix'.png", replace
129. 
.         ** Plot 3: Combined scatter of out vs in coefficients
.         twoway  (scatter `x'_in `x'_out if multnomah == 0,   
>                                            ///
>                                 mc(navy%30) ms(O) msize(small
> ))                                                 ///
>                         (scatter `x'_in `x'_out if multnomah 
> == 1,                                              ///
>                                 mc(red) ms(D) msize(large)), 
>                                                    ///
>                 xline(0, lc(gs10) lp(dash))                  
>                                                    ///
>                 yline(0, lc(gs10) lp(dash))                  
>                                                    ///
>                 xtitle("Out-migration `txt'")                
>                                    ///
>                 ytitle("In-migration `txt'")                 
>                                            ///
>                 title("Out- vs In-Migration Effects by County
> `title_suffix'")   ///
>                 legend(order(1 "Other Counties" 2 "Multnomah 
> County") pos(6) rows(1)) ///
>                 graphregion(color(white))
130. 
.         graph export "${results}flows/fig_scatter_out_in_`x'`
> file_suffix'.png", replace
131. 
. 
. } // END BETA / T-STAT LOOP
132. 
. *************************************************************
> *******************
. ** SECTION: Export Descriptive Statistics to Excel
. ** Purpose: Export Multnomah vs Distribution stats to Excel f
> ile
. *************************************************************
> *******************
. 
. ** Get Multnomah's statistics
. 
. ** Loop over migration type 
. foreach x in "in" "out" {
133.         
.         summ se_`x' if multnomah == 1, meanonly
134.         local m_se_`x' = r(mean)
135.         
.         summ p_`x' if multnomah == 1, meanonly
136.         local m_p_`x' = r(mean)
137.         
.         ** Loop over beta / t-stat 
.         foreach y in "b" "t" {
138.                 
.                 summ `y'_`x' if multnomah == 1, meanonly
139.                 local m_`y'_`x' = r(mean)
140.                 
.                 summ pctile_`y'_`x' if multnomah == 1, meanon
> ly
141.                 local m_pctile_`y'_`x' = r(mean)
142.                 
.         } // END BETA / T-STAT LOOP 
143.         
.         
. } // END IN/OUT LOOP 
144. 
. ** Count statistics
. qui count if !missing(b_out)
145. local n_counties_out = r(N)
146. qui count if !missing(b_in)
147. local n_counties_in = r(N)
148. qui count if !missing(b_out) & !missing(b_in)
149. local n_counties_both = r(N)
150. 
. ** Count counties with more extreme coefficients than Multnom
> ah
. ** For out-migration: larger (more positive) is "worse"
. ** For in-migration: smaller (more negative) is "worse"
. qui count if b_out > `m_b_out' & !missing(b_out)
151. local n_larger_out = r(N)
152. qui count if b_out > `m_b_out' & !missing(b_out) & p_out <
>  0.05
153. local n_larger_out_sig = r(N)
154. 
. qui count if b_in < `m_b_in' & !missing(b_in)
155. local n_smaller_in = r(N)
156. qui count if b_in < `m_b_in' & !missing(b_in) & p_in < 0.0
> 5
157. local n_smaller_in_sig = r(N)
158. 
. ** Counties with both more out AND less in (worse on both dim
> ensions)
. qui count if b_out > `m_b_out' & b_in < `m_b_in' & !missing(b
> _out) & !missing(b_in)
159. local n_worse_both = r(N)
160. qui count if b_out > `m_b_out' & b_in < `m_b_in' & !missin
> g(b_out) & !missing(b_in) & p_out < 0.05 & p_in < 0.05
161. local n_worse_both_sig = r(N)
162. 
. ** Distribution statistics for out-migration
. summ b_out, detail
163. local dist_out_mean = r(mean)
164. local dist_out_sd = r(sd)
165. local dist_out_min = r(min)
166. local dist_out_max = r(max)
167. local dist_out_p25 = r(p25)
168. local dist_out_p50 = r(p50)
169. local dist_out_p75 = r(p75)
170. 
. ** Distribution statistics for in-migration
. summ b_in, detail
171. local dist_in_mean = r(mean)
172. local dist_in_sd = r(sd)
173. local dist_in_min = r(min)
174. local dist_in_max = r(max)
175. local dist_in_p25 = r(p25)
176. local dist_in_p50 = r(p50)
177. local dist_in_p75 = r(p75)
178. 
. ** Distribution statistics for t-stats
. summ t_out, detail
179. local dist_t_out_mean = r(mean)
180. local dist_t_out_sd = r(sd)
181. local dist_t_out_p50 = r(p50)
182. 
. summ t_in, detail
183. local dist_t_in_mean = r(mean)
184. local dist_t_in_sd = r(sd)
185. local dist_t_in_p50 = r(p50)
186. 
. ** Save county coefficients to tempfile, then create stats da
> taset
. tempfile county_coefs_tmp
187. save `county_coefs_tmp'
188. 
. ** Create a new dataset with the statistics
. clear
189. set obs 40
190. 
. ** Create variables
. gen stat_name = ""
191. gen stat_value = .
192. gen stat_description = ""
193. 
. ** Row counter
. local row = 1
194. 
. ** ==========================================================
> ==================
. ** MULTNOMAH STATISTICS
. ** ==========================================================
> ==================
. 
. replace stat_name = "m_b_out" in `row'
195. replace stat_value = `m_b_out' in `row'
196. replace stat_description = "Multnomah out-migration coeffi
> cient" in `row'
197. local row = `row' + 1
198. 
. replace stat_name = "m_se_out" in `row'
199. replace stat_value = `m_se_out' in `row'
200. replace stat_description = "Multnomah out-migration standa
> rd error" in `row'
201. local row = `row' + 1
202. 
. replace stat_name = "m_t_out" in `row'
203. replace stat_value = `m_t_out' in `row'
204. replace stat_description = "Multnomah out-migration t-stat
> istic" in `row'
205. local row = `row' + 1
206. 
. replace stat_name = "m_p_out" in `row'
207. replace stat_value = `m_p_out' in `row'
208. replace stat_description = "Multnomah out-migration p-valu
> e" in `row'
209. local row = `row' + 1
210. 
. replace stat_name = "m_pctile_out" in `row'
211. replace stat_value = `m_pctile_out' in `row'
212. replace stat_description = "Multnomah out-migration percen
> tile rank" in `row'
213. local row = `row' + 1
214. 
. replace stat_name = "m_b_in" in `row'
215. replace stat_value = `m_b_in' in `row'
216. replace stat_description = "Multnomah in-migration coeffic
> ient" in `row'
217. local row = `row' + 1
218. 
. replace stat_name = "m_se_in" in `row'
219. replace stat_value = `m_se_in' in `row'
220. replace stat_description = "Multnomah in-migration standar
> d error" in `row'
221. local row = `row' + 1
222. 
. replace stat_name = "m_t_in" in `row'
223. replace stat_value = `m_t_in' in `row'
224. replace stat_description = "Multnomah in-migration t-stati
> stic" in `row'
225. local row = `row' + 1
226. 
. replace stat_name = "m_p_in" in `row'
227. replace stat_value = `m_p_in' in `row'
228. replace stat_description = "Multnomah in-migration p-value
> " in `row'
229. local row = `row' + 1
230. 
. replace stat_name = "m_pctile_in" in `row'
231. replace stat_value = `m_pctile_in' in `row'
232. replace stat_description = "Multnomah in-migration percent
> ile rank" in `row'
233. local row = `row' + 1
234. 
. ** ==========================================================
> ==================
. ** COUNT STATISTICS
. ** ==========================================================
> ==================
. 
. replace stat_name = "n_counties_out" in `row'
235. replace stat_value = `n_counties_out' in `row'
236. replace stat_description = "Number of counties with out-mi
> gration coef" in `row'
237. local row = `row' + 1
238. 
. replace stat_name = "n_counties_in" in `row'
239. replace stat_value = `n_counties_in' in `row'
240. replace stat_description = "Number of counties with in-mig
> ration coef" in `row'
241. local row = `row' + 1
242. 
. replace stat_name = "n_counties_both" in `row'
243. replace stat_value = `n_counties_both' in `row'
244. replace stat_description = "Number of counties with both c
> oefs" in `row'
245. local row = `row' + 1
246. 
. replace stat_name = "n_larger_out" in `row'
247. replace stat_value = `n_larger_out' in `row'
248. replace stat_description = "Counties with larger out-migra
> tion coef than Multnomah" in `row'
249. local row = `row' + 1
250. 
. replace stat_name = "n_larger_out_sig" in `row'
251. replace stat_value = `n_larger_out_sig' in `row'
252. replace stat_description = "Counties with larger out-migra
> tion coef (p<0.05)" in `row'
253. local row = `row' + 1
254. 
. replace stat_name = "n_smaller_in" in `row'
255. replace stat_value = `n_smaller_in' in `row'
256. replace stat_description = "Counties with smaller in-migra
> tion coef than Multnomah" in `row'
257. local row = `row' + 1
258. 
. replace stat_name = "n_smaller_in_sig" in `row'
259. replace stat_value = `n_smaller_in_sig' in `row'
260. replace stat_description = "Counties with smaller in-migra
> tion coef (p<0.05)" in `row'
261. local row = `row' + 1
262. 
. replace stat_name = "n_worse_both" in `row'
263. replace stat_value = `n_worse_both' in `row'
264. replace stat_description = "Counties worse on both out AND
>  in migration" in `row'
265. local row = `row' + 1
266. 
. replace stat_name = "n_worse_both_sig" in `row'
267. replace stat_value = `n_worse_both_sig' in `row'
268. replace stat_description = "Counties worse on both (p<0.05
>  for both)" in `row'
269. local row = `row' + 1
270. 
. ** ==========================================================
> ==================
. ** DISTRIBUTION STATISTICS - OUT-MIGRATION
. ** ==========================================================
> ==================
. 
. replace stat_name = "dist_out_mean" in `row'
271. replace stat_value = `dist_out_mean' in `row'
272. replace stat_description = "Distribution mean: out-migrati
> on coef" in `row'
273. local row = `row' + 1
274. 
. replace stat_name = "dist_out_sd" in `row'
275. replace stat_value = `dist_out_sd' in `row'
276. replace stat_description = "Distribution SD: out-migration
>  coef" in `row'
277. local row = `row' + 1
278. 
. replace stat_name = "dist_out_min" in `row'
279. replace stat_value = `dist_out_min' in `row'
280. replace stat_description = "Distribution min: out-migratio
> n coef" in `row'
281. local row = `row' + 1
282. 
. replace stat_name = "dist_out_max" in `row'
283. replace stat_value = `dist_out_max' in `row'
284. replace stat_description = "Distribution max: out-migratio
> n coef" in `row'
285. local row = `row' + 1
286. 
. replace stat_name = "dist_out_p25" in `row'
287. replace stat_value = `dist_out_p25' in `row'
288. replace stat_description = "Distribution 25th pctile: out-
> migration coef" in `row'
289. local row = `row' + 1
290. 
. replace stat_name = "dist_out_p50" in `row'
291. replace stat_value = `dist_out_p50' in `row'
292. replace stat_description = "Distribution median: out-migra
> tion coef" in `row'
293. local row = `row' + 1
294. 
. replace stat_name = "dist_out_p75" in `row'
295. replace stat_value = `dist_out_p75' in `row'
296. replace stat_description = "Distribution 75th pctile: out-
> migration coef" in `row'
297. local row = `row' + 1
298. 
. ** ==========================================================
> ==================
. ** DISTRIBUTION STATISTICS - IN-MIGRATION
. ** ==========================================================
> ==================
. 
. replace stat_name = "dist_in_mean" in `row'
299. replace stat_value = `dist_in_mean' in `row'
300. replace stat_description = "Distribution mean: in-migratio
> n coef" in `row'
301. local row = `row' + 1
302. 
. replace stat_name = "dist_in_sd" in `row'
303. replace stat_value = `dist_in_sd' in `row'
304. replace stat_description = "Distribution SD: in-migration 
> coef" in `row'
305. local row = `row' + 1
306. 
. replace stat_name = "dist_in_min" in `row'
307. replace stat_value = `dist_in_min' in `row'
308. replace stat_description = "Distribution min: in-migration
>  coef" in `row'
309. local row = `row' + 1
310. 
. replace stat_name = "dist_in_max" in `row'
311. replace stat_value = `dist_in_max' in `row'
312. replace stat_description = "Distribution max: in-migration
>  coef" in `row'
313. local row = `row' + 1
314. 
. replace stat_name = "dist_in_p25" in `row'
315. replace stat_value = `dist_in_p25' in `row'
316. replace stat_description = "Distribution 25th pctile: in-m
> igration coef" in `row'
317. local row = `row' + 1
318. 
. replace stat_name = "dist_in_p50" in `row'
319. replace stat_value = `dist_in_p50' in `row'
320. replace stat_description = "Distribution median: in-migrat
> ion coef" in `row'
321. local row = `row' + 1
322. 
. replace stat_name = "dist_in_p75" in `row'
323. replace stat_value = `dist_in_p75' in `row'
324. replace stat_description = "Distribution 75th pctile: in-m
> igration coef" in `row'
325. local row = `row' + 1
326. 
. ** ==========================================================
> ==================
. ** DISTRIBUTION STATISTICS - T-STATISTICS
. ** ==========================================================
> ==================
. 
. replace stat_name = "dist_t_out_mean" in `row'
327. replace stat_value = `dist_t_out_mean' in `row'
328. replace stat_description = "Distribution mean: out-migrati
> on t-stat" in `row'
329. local row = `row' + 1
330. 
. replace stat_name = "dist_t_out_sd" in `row'
331. replace stat_value = `dist_t_out_sd' in `row'
332. replace stat_description = "Distribution SD: out-migration
>  t-stat" in `row'
333. local row = `row' + 1
334. 
. replace stat_name = "dist_t_out_p50" in `row'
335. replace stat_value = `dist_t_out_p50' in `row'
336. replace stat_description = "Distribution median: out-migra
> tion t-stat" in `row'
337. local row = `row' + 1
338. 
. replace stat_name = "dist_t_in_mean" in `row'
339. replace stat_value = `dist_t_in_mean' in `row'
340. replace stat_description = "Distribution mean: in-migratio
> n t-stat" in `row'
341. local row = `row' + 1
342. 
. replace stat_name = "dist_t_in_sd" in `row'
343. replace stat_value = `dist_t_in_sd' in `row'
344. replace stat_description = "Distribution SD: in-migration 
> t-stat" in `row'
345. local row = `row' + 1
346. 
. replace stat_name = "dist_t_in_p50" in `row'
347. replace stat_value = `dist_t_in_p50' in `row'
348. replace stat_description = "Distribution median: in-migrat
> ion t-stat" in `row'
349. local row = `row' + 1
350. 
. ** Drop empty rows
. drop if stat_name == ""
351. 
. ** Add sample identifier
. gen sample = "`sample'"
352. 
. ** Export to Excel
. ** First iteration: create new file; subsequent: add sheet
. if "`sample'" == "all" {
353.         export excel using "${results}flows/flow_analysis_
> stats.xlsx", ///
>                 sheet("`sample'") sheetreplace firstrow(varia
> bles)
354. }
355. else {
356.         export excel using "${results}flows/flow_analysis_
> stats.xlsx", ///
>                 sheet("`sample'") sheetmodify firstrow(variab
> les)
357. }
358. 
. dis "Exported descriptive statistics to flow_analysis_stats.x
> lsx, sheet: `sample'"
359. 
. ** ==========================================================
> ==================
. ** EXPORT COUNTY LISTS WITH LARGER COEFFICIENTS TO ADDITIONAL
>  SHEETS
. ** ==========================================================
> ==================
. 
. ** Load county coefficients and merge with county identifiers
. use `county_coefs_tmp', clear
360. merge m:1 fips using "${data}working/ids", keep(master mat
> ch) nogen ///
>         keepusing(state_name county_name state_fips county_fi
> ps)
361. 
. ** Order variables for cleaner output
. order fips state_name county_name state_fips county_fips mult
> nomah ///
>         b_out se_out t_out p_out pctile_b_out pctile_t_out //
> /
>         b_in se_in t_in p_in pctile_b_in pctile_t_in
362. 
. ** Sheet 1: Counties with larger out-migration coefficients t
> han Multnomah
. preserve
363.         keep if b_out > `m_b_out' & !missing(b_out)
364.         gsort -b_out
365. 
.         ** Keep relevant variables
.         keep fips state_name county_name b_out se_out t_out p
> _out pctile_b_out pctile_t_out
366. 
.         ** Export
.         export excel using "${results}flows/flow_analysis_sta
> ts.xlsx", ///
>                 sheet("larger_out_`sample'") sheetmodify firs
> trow(variables)
367. 
.         dis "Exported `=_N' counties with larger out-migratio
> n coef to sheet: larger_out_`sample'"
368. restore
369. 
. ** Sheet 2: Counties with smaller in-migration coefficients t
> han Multnomah
. preserve
370.         keep if b_in < `m_b_in' & !missing(b_in)
371.         gsort b_in
372. 
.         ** Keep relevant variables
.         keep fips state_name county_name b_in se_in t_in p_in
>  pctile_b_in pctile_t_in
373. 
.         ** Export
.         export excel using "${results}flows/flow_analysis_sta
> ts.xlsx", ///
>                 sheet("smaller_in_`sample'") sheetmodify firs
> trow(variables)
374. 
.         dis "Exported `=_N' counties with smaller in-migratio
> n coef to sheet: smaller_in_`sample'"
375. restore
376. 
. ** Sheet 3: Counties worse on BOTH dimensions (larger out AND
>  smaller in)
. preserve
377.         keep if b_out > `m_b_out' & b_in < `m_b_in' & !mis
> sing(b_out) & !missing(b_in)
378.         gsort -b_out
379. 
.         ** Keep relevant variables
.         keep fips state_name county_name ///
>                 b_out se_out t_out p_out pctile_b_out pctile_
> t_out ///
>                 b_in se_in t_in p_in pctile_b_in pctile_t_in
380. 
.         ** Export
.         export excel using "${results}flows/flow_analysis_sta
> ts.xlsx", ///
>                 sheet("worse_both_`sample'") sheetmodify firs
> trow(variables)
381. 
.         dis "Exported `=_N' counties worse on both dimensions
>  to sheet: worse_both_`sample'"
382. restore
383. 
. ** Sheet 4: Counties with larger out-migration t-statistics t
> han Multnomah
. preserve
384.         keep if t_out > `m_t_out' & !missing(t_out)
385.         gsort -t_out
386. 
.         ** Keep relevant variables
.         keep fips state_name county_name b_out se_out t_out p
> _out pctile_b_out pctile_t_out
387. 
.         ** Export
.         export excel using "${results}flows/flow_analysis_sta
> ts.xlsx", ///
>                 sheet("larger_t_out_`sample'") sheetmodify fi
> rstrow(variables)
388. 
.         dis "Exported `=_N' counties with larger out-migratio
> n t-stat to sheet: larger_t_out_`sample'"
389. restore
390. 
. ** Sheet 5: Counties with smaller in-migration t-statistics t
> han Multnomah
. preserve
391.         keep if t_in < `m_t_in' & !missing(t_in)
392.         gsort t_in
393. 
.         ** Keep relevant variables
.         keep fips state_name county_name b_in se_in t_in p_in
>  pctile_b_in pctile_t_in
394. 
.         ** Export
.         export excel using "${results}flows/flow_analysis_sta
> ts.xlsx", ///
>                 sheet("smaller_t_in_`sample'") sheetmodify fi
> rstrow(variables)
395. 
.         dis "Exported `=_N' counties with smaller in-migratio
> n t-stat to sheet: smaller_t_in_`sample'"
396. restore
397. 
. ** Restore main data and continue
. restore
398. 
. *************************************************************
> *******************
. ** REGRESSION 2: Multnomah X Year (Event Study)
. *************************************************************
> *******************
. 
. ** Loop over outcome variables
. foreach outcome in n1 n2 agi {
399. 
.         ** Set outcome label for graphs
.         if "`outcome'" == "n1" local outcome_label "Number of
>  Returns"
400.         if "`outcome'" == "n2" local outcome_label "Number
>  of Exemptions"
401.         if "`outcome'" == "agi" local outcome_label "Adjus
> ted Gross Income"
402. 
.         ** Regression 2a: With covariates
.         ppmlhdfe `outcome' x_out_* x_in_*                    
>                                            ///
>                 `covars'                                     
>                                                              
>       ///
>                 if mover == 1 `sample_cond',                 
>                                            ///
>                 absorb(year flow_id) vce(cluster flow_id)
403.         estimates store `outcome'_es_with_covars
404. 
.         ** Regression 2b: Without covariates
.         ppmlhdfe `outcome' x_out_* x_in_*                    
>                                            ///
>                 if mover == 1 `sample_cond',                 
>                                            ///
>                 absorb(year flow_id) vce(cluster flow_id)
405.         estimates store `outcome'_es_no_covars
406. 
.         ** Extract coefficients into a dataset and plot
.         preserve
407.                 clear
408.                 set obs 7
409.                 gen year = 2015 + _n
410. 
.                 ** Out-migration coefficients (with covariate
> s)
.                 gen out_coef_wc = .
411.                 gen out_ci_lo_wc = .
412.                 gen out_ci_hi_wc = .
413. 
.                 ** In-migration coefficients (with covariates
> )
.                 gen in_coef_wc = .
414.                 gen in_ci_lo_wc = .
415.                 gen in_ci_hi_wc = .
416. 
.                 ** Out-migration coefficients (without covari
> ates)
.                 gen out_coef_nc = .
417.                 gen out_ci_lo_nc = .
418.                 gen out_ci_hi_nc = .
419. 
.                 ** In-migration coefficients (without covaria
> tes)
.                 gen in_coef_nc = .
420.                 gen in_ci_lo_nc = .
421.                 gen in_ci_hi_nc = .
422. 
.                 ** Fill in coefficients (2020 = base year = 0
> )
.                 foreach y in 2016 2017 2018 2019 2021 2022 {
423. 
.                         ** With covariates
.                         estimates restore `outcome'_es_with_c
> ovars
424.                         replace out_coef_wc = _b[x_out_`y'
> ] if year == `y'
425.                         replace out_ci_lo_wc = _b[x_out_`y
> '] - 1.96 * _se[x_out_`y'] if year == `y'
426.                         replace out_ci_hi_wc = _b[x_out_`y
> '] + 1.96 * _se[x_out_`y'] if year == `y'
427. 
.                         replace in_coef_wc = _b[x_in_`y'] if 
> year == `y'
428.                         replace in_ci_lo_wc = _b[x_in_`y']
>  - 1.96 * _se[x_in_`y'] if year == `y'
429.                         replace in_ci_hi_wc = _b[x_in_`y']
>  + 1.96 * _se[x_in_`y'] if year == `y'
430. 
.                         ** Without covariates
.                         estimates restore `outcome'_es_no_cov
> ars
431.                         replace out_coef_nc = _b[x_out_`y'
> ] if year == `y'
432.                         replace out_ci_lo_nc = _b[x_out_`y
> '] - 1.96 * _se[x_out_`y'] if year == `y'
433.                         replace out_ci_hi_nc = _b[x_out_`y
> '] + 1.96 * _se[x_out_`y'] if year == `y'
434. 
.                         replace in_coef_nc = _b[x_in_`y'] if 
> year == `y'
435.                         replace in_ci_lo_nc = _b[x_in_`y']
>  - 1.96 * _se[x_in_`y'] if year == `y'
436.                         replace in_ci_hi_nc = _b[x_in_`y']
>  + 1.96 * _se[x_in_`y'] if year == `y'
437.                 }
438. 
.                 ** Base year (2020) = 0
.                 foreach v in out_coef_wc out_ci_lo_wc out_ci_
> hi_wc                      ///
>                                          in_coef_wc in_ci_lo_
> wc in_ci_hi_wc                     ///
>                                          out_coef_nc out_ci_l
> o_nc out_ci_hi_nc                  ///
>                                          in_coef_nc in_ci_lo_
> nc in_ci_hi_nc {
439.                         replace `v' = 0 if year == 2020
440.                 }
441. 
.                 ** Offset years slightly for visibility
.                 gen year_out = year - 0.1
442.                 gen year_in = year + 0.1
443. 
.                 ** Plot 1: Out-migration (with and without co
> variates)
.                 twoway  (rcap out_ci_lo_wc out_ci_hi_wc year_
> out, lc(navy))                     ///
>                                 (connected out_coef_wc year_o
> ut, mc(navy) lc(navy) ms(O))               ///
>                                 (rcap out_ci_lo_nc out_ci_hi_
> nc year_in, lc(maroon))                    ///
>                                 (connected out_coef_nc year_i
> n, mc(maroon) lc(maroon) ms(T)),   ///
>                         yline(0, lc(gs10) lp(dash))          
>                                                              
>       ///
>                         xline(2020.5, lc(black) lp(solid))   
>                                                              
>       ///
>                         xlabel(2016(1)2022)                  
>                                                              
>               ///
>                         ytitle("Coefficient (relative to 2020
> )")                                                        //
> /
>                         xtitle("Year")                       
>                                                              
>                       ///
>                         legend(order(2 "With Covariates" 4 "W
> ithout Covariates")                        ///
>                                 pos(6) rows(1))              
>                                                              
>                       ///
>                         title("Out-Migration from Multnomah C
> ounty`title_suffix'")                      ///
>                         subtitle("`outcome_label'")          
>                                                              
>               ///
>                         graphregion(color(white))
444. 
.                 graph export "${results}flows/fig_multnomah_o
> ut_`outcome'`file_suffix'.png", replace
445. 
.                 ** Plot 2: In-migration (with and without cov
> ariates)
.                 twoway  (rcap in_ci_lo_wc in_ci_hi_wc year_ou
> t, lc(navy))                               ///
>                                 (connected in_coef_wc year_ou
> t, mc(navy) lc(navy) ms(O))                ///
>                                 (rcap in_ci_lo_nc in_ci_hi_nc
>  year_in, lc(maroon))                              ///
>                                 (connected in_coef_nc year_in
> , mc(maroon) lc(maroon) ms(T)),    ///
>                         yline(0, lc(gs10) lp(dash))          
>                                                              
>       ///
>                         xline(2020.5, lc(black) lp(solid))   
>                                                              
>       ///
>                         xlabel(2016(1)2022)                  
>                                                              
>               ///
>                         ytitle("Coefficient (relative to 2020
> )")                                                        //
> /
>                         xtitle("Year")                       
>                                                              
>                       ///
>                         legend(order(2 "With Covariates" 4 "W
> ithout Covariates")                        ///
>                                 pos(6) rows(1))              
>                                                              
>                       ///
>                         title("In-Migration to Multnomah Coun
> ty`title_suffix'")                         ///
>                         subtitle("`outcome_label'")          
>                                                              
>               ///
>                         graphregion(color(white))
446. 
.                 graph export "${results}flows/fig_multnomah_i
> n_`outcome'`file_suffix'.png", replace
447. 
.                 ** Plot 3: Both flows (with covariates only, 
> as in original)
.                 twoway  (rcap out_ci_lo_wc out_ci_hi_wc year_
> out, lc(navy))                             ///
>                                 (connected out_coef_wc year_o
> ut, mc(navy) lc(navy) ms(O))               ///
>                                 (rcap in_ci_lo_wc in_ci_hi_wc
>  year_in, lc(maroon))                              ///
>                                 (connected in_coef_wc year_in
> , mc(maroon) lc(maroon) ms(T)),    ///
>                         yline(0, lc(gs10) lp(dash))          
>                                                              
>       ///
>                         xline(2020.5, lc(black) lp(solid))   
>                                                              
>       ///
>                         xlabel(2016(1)2022)                  
>                                                              
>               ///
>                         ytitle("Coefficient (relative to 2020
> )")                                                        //
> /
>                         xtitle("Year")                       
>                                                              
>                       ///
>                         legend(order(2 "Out-migration" 4 "In-
> migration")                                        ///
>                                 pos(6) rows(1))              
>                                                              
>                       ///
>                         title("Migration Flows: Multnomah Cou
> nty`title_suffix'")                        ///
>                         subtitle("`outcome_label'")          
>                                                              
>               ///
>                         graphregion(color(white))
448. 
.                 graph export "${results}flows/fig_multnomah_b
> oth_`outcome'`file_suffix'.png", replace
449. 
.         restore
450. 
. } // END OUTCOME LOOP
451. 
. } // END SAMPLE LOOP (all vs acs)

===============================================================
> =========
RUNNING ANALYSIS FOR SAMPLE: acs
Sample condition: & acs_flow == 1
Covariates: unemp_* pop_* per_capita_income_* prop_rate_mean_o 
> prop_rate_mean_d
===============================================================
> =========

(dropped 3389 observations that are either singletons or separa
> ted by a fixed effect)
Iteration 1:   deviance = 1.9778e+06  eps = .         iters = 4
>     tol = 1.0e-04                                            
>                    min(eta) =  -2.88  P   
Iteration 2:   deviance = 3.3937e+05  eps = 4.83e+00  iters = 3
>     tol = 1.0e-04                                            
>                    min(eta) =  -3.48      
Iteration 3:   deviance = 2.9123e+05  eps = 1.65e-01  iters = 3
>     tol = 1.0e-04                                            
>                    min(eta) =  -3.71      
Iteration 4:   deviance = 2.9102e+05  eps = 7.29e-04  iters = 2
>     tol = 1.0e-04                                            
>                    min(eta) =  -3.74      
Iteration 5:   deviance = 2.9102e+05  eps = 5.68e-08  iters = 2
>     tol = 1.0e-04                                            
>                    min(eta) =  -3.74      
Iteration 6:   deviance = 2.9102e+05  eps = 1.24e-15  iters = 1
>     tol = 1.0e-05                                            
>                    min(eta) =  -3.74   S  
Iteration 7:   deviance = 2.9102e+05  eps = 1.37e-16  iters = 1
>     tol = 1.0e-09                                            
>                    min(eta) =  -3.74   S O
---------------------------------------------------------------
> ---------------------------------------------
(legend: p: exact partial-out   s: exact solver   h: step-halvi
> ng   o: epsilon below tolerance)
Converged in 7 iterations and 16 HDFE sub-iterations (tol = 1.0
> e-08)

HDFE PPML regression                              No. of obs   
>    =                                                         
>         129,600
Absorbing 2 HDFE groups                           Residual df  
>    =                                                         
>          22,046
Statistics robust to heteroskedasticity           Wald chi2(10)
>    =                                                         
>          679.39
Deviance             =  291015.7779               Prob > chi2  
>    =                                                         
>          0.0000
Log pseudolikelihood = -533368.3743               Pseudo R2    
>    =                                                         
>          0.9851

Number of clusters (flow_id)=     22,047
                           (Std. err. adjusted for 22,047 clust
> ers in flow_id)
---------------------------------------------------------------
> ---------------
             |               Robust
          n1 | Coefficient  std. err.      z    P>|z|     [95% 
> con                                                          
>    f. interval]
-------------+-------------------------------------------------
> ---------------
1.out_mult~t |  -.0022129   .0235929    -0.09   0.925     -.048
> 454                                                          
>        .0440283
1.in_multn~t |  -.0846358   .0168906    -5.01   0.000    -.1177
> 409                                                          
>       -.0515308
     unemp_o |   .0229647   .0013063    17.58   0.000     .0204
> 044                                                          
>        .0255251
     unemp_d |  -.0190961   .0014121   -13.52   0.000    -.0218
> 638                                                          
>       -.0163284
       pop_o |   7.22e-09   2.60e-08     0.28   0.781    -4.38e
> -08                                                          
>        5.83e-08
       pop_d |   3.86e-07   3.88e-08     9.95   0.000     3.10e
> -07                                                          
>        4.62e-07
per_capita~o |   1.12e-06   5.10e-07     2.19   0.028     1.19e
> -07                                                          
>        2.12e-06
per_capita~d |  -1.67e-06   4.07e-07    -4.10   0.000    -2.46e
> -06                                                          
>       -8.69e-07
prop_rate_~o |  -.0056646   .0020497    -2.76   0.006     -.009
> 682                                                          
>       -.0016473
prop_rate_~d |  -.0001682   .0020167    -0.08   0.934    -.0041
> 209                                                          
>        .0037844
       _cons |   6.125872   .0784274    78.11   0.000     5.972
> 157                                                          
>        6.279587
---------------------------------------------------------------
> ---------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
        year |         7           1           6     |
     flow_id |     22047       22047           0    *|
-----------------------------------------------------+
* = FE nested within cluster; treated as redundant for DoF comp
> utation
(dropped 3389 observations that are either singletons or separa
> ted by a fixed effect)
Iteration 1:   deviance = 1.9948e+06  eps = .         iters = 4
>     tol = 1.0e-04                                            
>                    min(eta) =  -2.86  P   
Iteration 2:   deviance = 3.5534e+05  eps = 4.61e+00  iters = 3
>     tol = 1.0e-04                                            
>                    min(eta) =  -3.44      
Iteration 3:   deviance = 3.0721e+05  eps = 1.57e-01  iters = 3
>     tol = 1.0e-04                                            
>                    min(eta) =  -3.68      
Iteration 4:   deviance = 3.0700e+05  eps = 6.90e-04  iters = 2
>     tol = 1.0e-04                                            
>                    min(eta) =  -3.71      
Iteration 5:   deviance = 3.0700e+05  eps = 5.37e-08  iters = 2
>     tol = 1.0e-04                                            
>                    min(eta) =  -3.71      
Iteration 6:   deviance = 3.0700e+05  eps = 1.04e-15  iters = 1
>     tol = 1.0e-05                                            
>                    min(eta) =  -3.71   S  
Iteration 7:   deviance = 3.0700e+05  eps = 1.30e-16  iters = 1
>     tol = 1.0e-09                                            
>                    min(eta) =  -3.71   S O
---------------------------------------------------------------
> ---------------------------------------------
(legend: p: exact partial-out   s: exact solver   h: step-halvi
> ng   o: epsilon below tolerance)
Converged in 7 iterations and 16 HDFE sub-iterations (tol = 1.0
> e-08)

HDFE PPML regression                              No. of obs   
>    =                                                         
>         129,600
Absorbing 2 HDFE groups                           Residual df  
>    =                                                         
>          22,046
Statistics robust to heteroskedasticity           Wald chi2(2) 
>    =                                                         
>           34.36
Deviance             =  306996.4457               Prob > chi2  
>    =                                                         
>          0.0000
Log pseudolikelihood = -541358.7081               Pseudo R2    
>    =                                                         
>          0.9849

Number of clusters (flow_id)=     22,047
                           (Std. err. adjusted for 22,047 clust
> ers in flow_id)
---------------------------------------------------------------
> ---------------
             |               Robust
          n1 | Coefficient  std. err.      z    P>|z|     [95% 
> con                                                          
>    f. interval]
-------------+-------------------------------------------------
> ---------------
1.out_mult~t |   .0032104   .0243075     0.13   0.895    -.0444
> 315                                                          
>        .0508523
1.in_multn~t |  -.0965589   .0164903    -5.86   0.000    -.1288
> 792                                                          
>       -.0642386
       _cons |    6.70651   .0000597  1.1e+05   0.000     6.706
> 393                                                          
>        6.706627
---------------------------------------------------------------
> ---------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
        year |         7           1           6     |
     flow_id |     22047       22047           0    *|
-----------------------------------------------------+
* = FE nested within cluster; treated as redundant for DoF comp
> utation
file
    C:/Users/ji252/Documents/GitHub/multnomah-county-tax/resu
    > lts/flows/fig_multnomah_post_n1_acs.png saved as PNG
    format
(dropped 3389 observations that are either singletons or separa
> ted by a fixed effect)
Iteration 1:   deviance = 3.6622e+06  eps = .         iters = 4
>     tol = 1.0e-04                                            
>                    min(eta) =  -3.00  P   
Iteration 2:   deviance = 7.1966e+05  eps = 4.09e+00  iters = 3
>     tol = 1.0e-04                                            
>                    min(eta) =  -3.70      
Iteration 3:   deviance = 6.2926e+05  eps = 1.44e-01  iters = 3
>     tol = 1.0e-04                                            
>                    min(eta) =  -4.08      
Iteration 4:   deviance = 6.2873e+05  eps = 8.40e-04  iters = 2
>     tol = 1.0e-04                                            
>                    min(eta) =  -4.17      
Iteration 5:   deviance = 6.2873e+05  eps = 1.99e-07  iters = 2
>     tol = 1.0e-04                                            
>                    min(eta) =  -4.17      
Iteration 6:   deviance = 6.2873e+05  eps = 1.03e-13  iters = 1
>     tol = 1.0e-05                                            
>                    min(eta) =  -4.17   S  
Iteration 7:   deviance = 6.2873e+05  eps = 1.16e-16  iters = 1
>     tol = 1.0e-08                                            
>                    min(eta) =  -4.17   S O
---------------------------------------------------------------
> ---------------------------------------------
(legend: p: exact partial-out   s: exact solver   h: step-halvi
> ng   o: epsilon below tolerance)
Converged in 7 iterations and 16 HDFE sub-iterations (tol = 1.0
> e-08)

HDFE PPML regression                              No. of obs   
>    =                                                         
>         129,600
Absorbing 2 HDFE groups                           Residual df  
>    =                                                         
>          22,046
Statistics robust to heteroskedasticity           Wald chi2(10)
>    =                                                         
>          645.69
Deviance             =  628730.0175               Prob > chi2  
>    =                                                         
>          0.0000
Log pseudolikelihood = -737640.9381               Pseudo R2    
>    =                                                         
>          0.9885

Number of clusters (flow_id)=     22,047
                           (Std. err. adjusted for 22,047 clust
> ers in flow_id)
---------------------------------------------------------------
> ---------------
             |               Robust
          n2 | Coefficient  std. err.      z    P>|z|     [95% 
> con                                                          
>    f. interval]
-------------+-------------------------------------------------
> ---------------
1.out_mult~t |  -.0016164   .0193979    -0.08   0.934    -.0396
> 356                                                          
>        .0364027
1.in_multn~t |   -.084359   .0158222    -5.33   0.000      -.11
> 537                                                          
>        -.053348
     unemp_o |   .0216645   .0013954    15.53   0.000     .0189
> 295                                                          
>        .0243995
     unemp_d |  -.0207735   .0015576   -13.34   0.000    -.0238
> 264                                                          
>       -.0177206
       pop_o |  -6.75e-09   2.84e-08    -0.24   0.812    -6.24e
> -08                                                          
>        4.89e-08
       pop_d |   4.05e-07   3.62e-08    11.19   0.000     3.34e
> -07                                                          
>        4.76e-07
per_capita~o |   1.62e-06   5.18e-07     3.12   0.002     6.00e
> -07                                                          
>        2.63e-06
per_capita~d |  -2.04e-06   4.34e-07    -4.70   0.000    -2.89e
> -06                                                          
>       -1.19e-06
prop_rate_~o |  -.0054931   .0021535    -2.55   0.011    -.0097
> 139                                                          
>       -.0012723
prop_rate_~d |  -.0005758   .0021315    -0.27   0.787    -.0047
> 535                                                          
>        .0036019
       _cons |   6.744748   .0806006    83.68   0.000     6.586
> 774                                                          
>        6.902722
---------------------------------------------------------------
> ---------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
        year |         7           1           6     |
     flow_id |     22047       22047           0    *|
-----------------------------------------------------+
* = FE nested within cluster; treated as redundant for DoF comp
> utation
(dropped 3389 observations that are either singletons or separa
> ted by a fixed effect)
Iteration 1:   deviance = 3.6934e+06  eps = .         iters = 4
>     tol = 1.0e-04                                            
>                    min(eta) =  -2.99  P   
Iteration 2:   deviance = 7.4908e+05  eps = 3.93e+00  iters = 3
>     tol = 1.0e-04                                            
>                    min(eta) =  -3.69      
Iteration 3:   deviance = 6.5872e+05  eps = 1.37e-01  iters = 3
>     tol = 1.0e-04                                            
>                    min(eta) =  -4.06      
Iteration 4:   deviance = 6.5819e+05  eps = 8.00e-04  iters = 2
>     tol = 1.0e-04                                            
>                    min(eta) =  -4.14      
Iteration 5:   deviance = 6.5819e+05  eps = 1.89e-07  iters = 2
>     tol = 1.0e-04                                            
>                    min(eta) =  -4.15      
Iteration 6:   deviance = 6.5819e+05  eps = 9.74e-14  iters = 1
>     tol = 1.0e-05                                            
>                    min(eta) =  -4.15   S  
Iteration 7:   deviance = 6.5819e+05  eps = 0.00e+00  iters = 1
>     tol = 1.0e-08                                            
>                    min(eta) =  -4.15   S O
---------------------------------------------------------------
> ---------------------------------------------
(legend: p: exact partial-out   s: exact solver   h: step-halvi
> ng   o: epsilon below tolerance)
Converged in 7 iterations and 16 HDFE sub-iterations (tol = 1.0
> e-08)

HDFE PPML regression                              No. of obs   
>    =                                                         
>         129,600
Absorbing 2 HDFE groups                           Residual df  
>    =                                                         
>          22,046
Statistics robust to heteroskedasticity           Wald chi2(2) 
>    =                                                         
>           39.84
Deviance             =  658193.6762               Prob > chi2  
>    =                                                         
>          0.0000
Log pseudolikelihood = -752372.7674               Pseudo R2    
>    =                                                         
>          0.9883

Number of clusters (flow_id)=     22,047
                           (Std. err. adjusted for 22,047 clust
> ers in flow_id)
---------------------------------------------------------------
> ---------------
             |               Robust
          n2 | Coefficient  std. err.      z    P>|z|     [95% 
> con                                                          
>    f. interval]
-------------+-------------------------------------------------
> ---------------
1.out_mult~t |   .0028857    .019154     0.15   0.880    -.0346
> 556                                                          
>        .0404269
1.in_multn~t |  -.0991782   .0157384    -6.30   0.000     -.130
> 025                                                          
>       -.0683315
       _cons |   7.303822   .0000424  1.7e+05   0.000     7.303
> 738                                                          
>        7.303905
---------------------------------------------------------------
> ---------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
        year |         7           1           6     |
     flow_id |     22047       22047           0    *|
-----------------------------------------------------+
* = FE nested within cluster; treated as redundant for DoF comp
> utation
file
    C:/Users/ji252/Documents/GitHub/multnomah-county-tax/resu
    > lts/flows/fig_multnomah_post_n2_acs.png saved as PNG
    format
(dropped 3389 observations that are either singletons or separa
> ted by a fixed effect)
Iteration 1:   deviance = 2.6805e+08  eps = .         iters = 4
>     tol = 1.0e-04                                            
>                    min(eta) =  -3.32  P   
Iteration 2:   deviance = 1.0401e+08  eps = 1.58e+00  iters = 3
>     tol = 1.0e-04                                            
>                    min(eta) =  -4.14      
Iteration 3:   deviance = 9.5891e+07  eps = 8.47e-02  iters = 3
>     tol = 1.0e-04                                            
>                    min(eta) =  -4.78      
Iteration 4:   deviance = 9.5722e+07  eps = 1.77e-03  iters = 2
>     tol = 1.0e-04                                            
>                    min(eta) =  -5.11      
Iteration 5:   deviance = 9.5721e+07  eps = 5.84e-06  iters = 2
>     tol = 1.0e-04                                            
>                    min(eta) =  -5.21      
Iteration 6:   deviance = 9.5721e+07  eps = 9.66e-10  iters = 2
>     tol = 1.0e-05                                            
>                    min(eta) =  -5.22   S  
Iteration 7:   deviance = 9.5721e+07  eps = 2.41e-15  iters = 1
>     tol = 1.0e-07                                            
>                    min(eta) =  -5.22   S  
Iteration 8:   deviance = 9.5721e+07  eps = 0.00e+00  iters = 1
>     tol = 1.0e-09                                            
>                    min(eta) =  -5.22   S O
---------------------------------------------------------------
> ---------------------------------------------
(legend: p: exact partial-out   s: exact solver   h: step-halvi
> ng   o: epsilon below tolerance)
Converged in 8 iterations and 18 HDFE sub-iterations (tol = 1.0
> e-08)

HDFE PPML regression                              No. of obs   
>    =                                                         
>         129,600
Absorbing 2 HDFE groups                           Residual df  
>    =                                                         
>          22,046
Statistics robust to heteroskedasticity           Wald chi2(10)
>    =                                                         
>          511.65
Deviance             =  95721037.43               Prob > chi2  
>    =                                                         
>          0.0000
Log pseudolikelihood = -48521300.98               Pseudo R2    
>    =                                                         
>          0.9838

Number of clusters (flow_id)=     22,047
                           (Std. err. adjusted for 22,047 clust
> ers in flow_id)
---------------------------------------------------------------
> ---------------
             |               Robust
         agi | Coefficient  std. err.      z    P>|z|     [95% 
> con                                                          
>    f. interval]
-------------+-------------------------------------------------
> ---------------
1.out_mult~t |    .116637   .0563226     2.07   0.038     .0062
> 467                                                          
>        .2270274
1.in_multn~t |  -.1908973   .0225148    -8.48   0.000    -.2350
> 255                                                          
>       -.1467691
     unemp_o |   .0379792   .0068692     5.53   0.000     .0245
> 158                                                          
>        .0514425
     unemp_d |  -.0406767   .0051414    -7.91   0.000    -.0507
> 536                                                          
>       -.0305999
       pop_o |  -2.79e-07   6.28e-08    -4.45   0.000    -4.02e
> -07                                                          
>       -1.56e-07
       pop_d |   5.24e-07   8.90e-08     5.89   0.000     3.50e
> -07                                                          
>        6.99e-07
per_capita~o |   7.56e-06   9.75e-07     7.75   0.000     5.65e
> -06                                                          
>        9.47e-06
per_capita~d |   9.16e-07   1.13e-06     0.81   0.417    -1.30e
> -06                                                          
>        3.13e-06
prop_rate_~o |   -.013418   .0062772    -2.14   0.033    -.0257
> 211                                                          
>       -.0011149
prop_rate_~d |   .0080536   .0054192     1.49   0.137    -.0025
> 678                                                          
>         .018675
       _cons |   10.23336   .2129496    48.06   0.000     9.815
> 987                                                          
>        10.65073
---------------------------------------------------------------
> ---------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
        year |         7           1           6     |
     flow_id |     22047       22047           0    *|
-----------------------------------------------------+
* = FE nested within cluster; treated as redundant for DoF comp
> utation
(dropped 3389 observations that are either singletons or separa
> ted by a fixed effect)
Iteration 1:   deviance = 2.7605e+08  eps = .         iters = 4
>     tol = 1.0e-04                                            
>                    min(eta) =  -3.25  P   
Iteration 2:   deviance = 1.1017e+08  eps = 1.51e+00  iters = 3
>     tol = 1.0e-04                                            
>                    min(eta) =  -4.15      
Iteration 3:   deviance = 1.0194e+08  eps = 8.07e-02  iters = 3
>     tol = 1.0e-04                                            
>                    min(eta) =  -4.83      
Iteration 4:   deviance = 1.0178e+08  eps = 1.66e-03  iters = 2
>     tol = 1.0e-04                                            
>                    min(eta) =  -5.17      
Iteration 5:   deviance = 1.0178e+08  eps = 5.36e-06  iters = 2
>     tol = 1.0e-04                                            
>                    min(eta) =  -5.25      
Iteration 6:   deviance = 1.0178e+08  eps = 9.20e-10  iters = 2
>     tol = 1.0e-05                                            
>                    min(eta) =  -5.25   S  
Iteration 7:   deviance = 1.0178e+08  eps = 2.40e-15  iters = 1
>     tol = 1.0e-07                                            
>                    min(eta) =  -5.25   S  
Iteration 8:   deviance = 1.0178e+08  eps = 1.34e-16  iters = 1
>     tol = 1.0e-09                                            
>                    min(eta) =  -5.25   S O
---------------------------------------------------------------
> ---------------------------------------------
(legend: p: exact partial-out   s: exact solver   h: step-halvi
> ng   o: epsilon below tolerance)
Converged in 8 iterations and 18 HDFE sub-iterations (tol = 1.0
> e-08)

HDFE PPML regression                              No. of obs   
>    =                                                         
>         129,600
Absorbing 2 HDFE groups                           Residual df  
>    =                                                         
>          22,046
Statistics robust to heteroskedasticity           Wald chi2(2) 
>    =                                                         
>           79.19
Deviance             =  101775047.8               Prob > chi2  
>    =                                                         
>          0.0000
Log pseudolikelihood = -51548306.18               Pseudo R2    
>    =                                                         
>          0.9827

Number of clusters (flow_id)=     22,047
                           (Std. err. adjusted for 22,047 clust
> ers in flow_id)
---------------------------------------------------------------
> ---------------
             |               Robust
         agi | Coefficient  std. err.      z    P>|z|     [95% 
> con                                                          
>    f. interval]
-------------+-------------------------------------------------
> ---------------
1.out_mult~t |   .1151791   .0612446     1.88   0.060    -.0048
> 582                                                          
>        .2352163
1.in_multn~t |  -.1994398   .0231161    -8.63   0.000    -.2447
> 464                                                          
>       -.1541331
       _cons |   11.16124   .0001579  7.1e+04   0.000     11.16
> 093                                                          
>        11.16155
---------------------------------------------------------------
> ---------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
        year |         7           1           6     |
     flow_id |     22047       22047           0    *|
-----------------------------------------------------+
* = FE nested within cluster; treated as redundant for DoF comp
> utation
file
    C:/Users/ji252/Documents/GitHub/multnomah-county-tax/resu
    > lts/flows/fig_multnomah_post_agi_acs.png saved as PNG
    format
1003 1015 1097 4005 4013 4025 5007 5119 5143 6001 6007 6013 601
> 7 6019 6023 6025 6029 6031 6037 6039 6041 6047 6055 6059 6061
>  6065 6067 6071 6073 6075 6077 6079 6081 6083 6085 6087 6089 
> 6095 6097 6099 6107 6111 6113 8069 10001 10003 10005 11001 12
> 001 12009 12011 12015 12017 12019 12021 12031 12033 12053 120
> 57 12061 12071 12073 12081 12083 12085 12091 12095 12097 1209
> 9 12101 12103 12105 12111 12113 12115 12117 13015 13021 13045
>  13051 13057 13059 13063 13067 13073 13077 13097 13113 13117 
> 13135 13139 13151 13185 13223 13245 13313 16019 17031 17043 1
> 7089 17097 17111 17113 17119 17143 17161 17167 17179 17197 18
> 003 18019 18035 18039 18063 18081 18089 18091 18095 18097 181
> 05 18127 18141 18157 18163 18167 19013 19103 19113 19163 2004
> 5 20091 20209 21015 21067 21111 21117 21227 22005 22017 22033
>  22055 22071 22073 22103 23001 23011 24003 24005 24013 24015 
> 24017 24021 24025 24027 24031 24033 24510 25003 25025 26005 2
> 6021 26065 26075 26077 26081 26093 26099 26115 26121 26125 26
> 139 26145 26147 26161 26163 27003 27037 27053 27109 27123 271
> 63 28033 28047 28059 29095 29099 29183 29189 29510 31055 3110
> 9 31153 32003 32031 34003 34005 34007 34013 34015 34017 34019
>  34021 34023 34025 34027 34029 34031 34035 34037 34039 34041 
> 35013 35043 36001 36005 36013 36029 36047 36055 36059 36061 3
> 6063 36071 36075 36081 36083 36085 36087 36089 36091 36093 36
> 103 36109 37001 37019 37021 37035 37051 37057 37063 37067 370
> 71 37081 37085 37119 37135 37147 37151 37159 37183 37191 3801
> 7 39003 39017 39023 39035 39041 39045 39049 39057 39061 39089
>  39093 39103 39109 39113 39133 39139 39153 39165 39169 40017 
> 40027 40109 41005 41019 41029 41039 41047 41051 41067 42003 4
> 2011 42017 42019 42021 42027 42029 42043 42045 42049 42051 42
> 071 42075 42085 42089 42091 42101 42107 42129 42133 44003 440
> 07 44009 45083 47009 47037 47065 47149 47157 47187 47189 4802
> 7 48029 48039 48041 48061 48085 48091 48113 48121 48135 48139
>  48141 48157 48167 48183 48187 48201 48209 48215 48245 48251 
> 48257 48303 48309 48329 48339 48355 48367 48375 48381 48423 4
> 8439 48441 48451 48453 48479 48485 48491 49011 49035 49049 49
> 053 49057 51013 51041 51087 51107 51510 51650 51700 51760 518
> 10 53011 53033 53035 53053 53061 53063 53067 53073 53077 5500
> 9 55025 55059 55063 55073 55079 55087 55101 55105 55117 55127
>  55133 55139
Running regressions for 386 counties (acs sample)...
(file C:\Users\ji252\AppData\Local\Temp\ST_828_000003.tmp not
    found)
Processing county 100 of 386 (fips = 17089)...
Processing county 200 of 386 (fips = 34017)...
Processing county 300 of 386 (fips = 42129)...

==========================================
Multnomah County Results:
==========================================

    Variable |        Obs        Mean    Std. dev.       Min   
>      Max
-------------+-------------------------------------------------
> --------
       b_out |          1     .116637           .    .116637   
>  .116637
       t_out |          1    2.070873           .   2.070873   
> 2.070873
        b_in |          1   -.1908973           .  -.1908973  -
> .1908973
        t_in |          1   -8.478744           .  -8.478744  -
> 8.478744
pctile_b_out |          1    93.26425           .   93.26425   
> 93.26425
-------------+-------------------------------------------------
> --------
pctile_t_out |          1    93.00518           .   93.00518   
> 93.00518
 pctile_b_in |          1    6.735751           .   6.735751   
> 6.735751
 pctile_t_in |          1    3.626943           .   3.626943   
> 3.626943

Distribution of coefficients (all counties):

          Out-migration coefficient (County x Post)
-------------------------------------------------------------
      Percentiles      Smallest
 1%    -.3068653      -1.085196
 5%    -.2371705      -.3452315
10%    -.1933728      -.3142822       Obs                 386
25%    -.1308724      -.3068653       Sum of wgt.         386

50%     -.068173                      Mean          -.0615695
                        Largest       Std. dev.      .1306556
75%     .0033888       .2401696
90%     .0819461       .2480409       Variance       .0170709
95%     .1283096       .3075692       Skewness       .0617987
99%     .2401696       .9156172       Kurtosis       19.59754

          In-migration coefficient (County x Post)
-------------------------------------------------------------
      Percentiles      Smallest
 1%    -.3479243      -.8163297
 5%    -.2103909      -.4469585
10%    -.1670359      -.3582215       Obs                 386
25%    -.1076507      -.3479243       Sum of wgt.         386

50%    -.0408166                      Mean          -.0244704
                        Largest       Std. dev.      .1365747
75%     .0488692       .3261347
90%     .1672236       .3376232       Variance       .0186526
95%     .2106411       .3755583       Skewness      -.0355125
99%     .3261347       .4674779       Kurtosis       6.046852

Distribution of t-stats (all counties):

                  Out-migration t-statistic
-------------------------------------------------------------
      Percentiles      Smallest
 1%     -14.9795      -23.43215
 5%    -7.192556      -18.90471
10%    -5.775691      -15.46177       Obs                 386
25%    -3.292215       -14.9795       Sum of wgt.         386

50%    -1.590027                      Mean          -1.867984
                        Largest       Std. dev.      3.476731
75%     .0598428       6.878835
90%     1.699664       7.040114       Variance       12.08766
95%     2.884984       7.999939       Skewness      -1.339702
99%     6.878835       8.272927       Kurtosis       9.162123

                  In-migration t-statistic
-------------------------------------------------------------
      Percentiles      Smallest
 1%    -11.16764      -16.30601
 5%    -6.765165       -14.7201
10%    -5.092554      -12.92676       Obs                 386
25%    -2.936938      -11.16764       Sum of wgt.         386

50%    -.9176782                      Mean          -1.109723
                        Largest       Std. dev.      3.565328
75%      .858092       8.511084
90%     2.738593       9.027787       Variance       12.71157
95%     4.366858       9.468974       Skewness      -.3321887
99%     8.511084       11.43118       Kurtosis       5.130012
  variable multnomah was float now byte
  variable rank_b_out was float now int
  variable rank_b_in was float now int
  variable rank_t_out was float now int
  variable rank_t_in was float now int
  (4,246 bytes saved)
(file
    C:/Users/ji252/Documents/GitHub/multnomah-county-tax/data
    > /working/county_flow_coefficients_acs.dta not found)
file
    C:/Users/ji252/Documents/GitHub/multnomah-county-tax/data
    > /working/county_flow_coefficients_acs.dta saved
(file
    C:/Users/ji252/Documents/GitHub/multnomah-county-tax/data
    > /working/county_flow_coefficients_acs.csv not found)
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/data/
> working/county_flow_coefficients_acs.csv saved
County coefficients saved to C:/Users/ji252/Documents/GitHub/mu
> ltnomah-county-tax/data/working/county_flow_coefficients_acs.
> dta
(bin=50, start=-1.085196, width=.04001626)
file
    C:/Users/ji252/Documents/GitHub/multnomah-county-tax/resu
    > lts/flows/fig_hist_out_b_acs.png saved as PNG format
(bin=50, start=-.81632972, width=.02567615)
file
    C:/Users/ji252/Documents/GitHub/multnomah-county-tax/resu
    > lts/flows/fig_hist_in_b_acs.png saved as PNG format
file
    C:/Users/ji252/Documents/GitHub/multnomah-county-tax/resu
    > lts/flows/fig_scatter_out_in_b_acs.png saved as PNG
    format
(bin=50, start=-23.432154, width=.63410162)
file
    C:/Users/ji252/Documents/GitHub/multnomah-county-tax/resu
    > lts/flows/fig_hist_out_t_acs.png saved as PNG format
(bin=50, start=-16.306009, width=.55474382)
file
    C:/Users/ji252/Documents/GitHub/multnomah-county-tax/resu
    > lts/flows/fig_hist_in_t_acs.png saved as PNG format
file
    C:/Users/ji252/Documents/GitHub/multnomah-county-tax/resu
    > lts/flows/fig_scatter_out_in_t_acs.png saved as PNG
    format

          Out-migration coefficient (County x Post)
-------------------------------------------------------------
      Percentiles      Smallest
 1%    -.3068653      -1.085196
 5%    -.2371705      -.3452315
10%    -.1933728      -.3142822       Obs                 386
25%    -.1308724      -.3068653       Sum of wgt.         386

50%     -.068173                      Mean          -.0615695
                        Largest       Std. dev.      .1306556
75%     .0033888       .2401696
90%     .0819461       .2480409       Variance       .0170709
95%     .1283096       .3075692       Skewness       .0617987
99%     .2401696       .9156172       Kurtosis       19.59754

          In-migration coefficient (County x Post)
-------------------------------------------------------------
      Percentiles      Smallest
 1%    -.3479243      -.8163297
 5%    -.2103909      -.4469585
10%    -.1670359      -.3582215       Obs                 386
25%    -.1076507      -.3479243       Sum of wgt.         386

50%    -.0408166                      Mean          -.0244704
                        Largest       Std. dev.      .1365747
75%     .0488692       .3261347
90%     .1672236       .3376232       Variance       .0186526
95%     .2106411       .3755583       Skewness      -.0355125
99%     .3261347       .4674779       Kurtosis       6.046852

                  Out-migration t-statistic
-------------------------------------------------------------
      Percentiles      Smallest
 1%     -14.9795      -23.43215
 5%    -7.192556      -18.90471
10%    -5.775691      -15.46177       Obs                 386
25%    -3.292215       -14.9795       Sum of wgt.         386

50%    -1.590027                      Mean          -1.867984
                        Largest       Std. dev.      3.476731
75%     .0598428       6.878835
90%     1.699664       7.040114       Variance       12.08766
95%     2.884984       7.999939       Skewness      -1.339702
99%     6.878835       8.272927       Kurtosis       9.162123

                  In-migration t-statistic
-------------------------------------------------------------
      Percentiles      Smallest
 1%    -11.16764      -16.30601
 5%    -6.765165       -14.7201
10%    -5.092554      -12.92676       Obs                 386
25%    -2.936938      -11.16764       Sum of wgt.         386

50%    -.9176782                      Mean          -1.109723
                        Largest       Std. dev.      3.565328
75%      .858092       8.511084
90%     2.738593       9.027787       Variance       12.71157
95%     4.366858       9.468974       Skewness      -.3321887
99%     8.511084       11.43118       Kurtosis       5.130012
file C:\Users\ji252\AppData\Local\Temp\ST_828_000005.tmp
    saved as .dta format
Number of observations (_N) was 0, now 40.
(40 missing values generated)
(40 missing values generated)
(40 missing values generated)
variable stat_name was str1 now str7
(1 real change made)
(1 real change made)
variable stat_description was str1 now str35
(1 real change made)
variable stat_name was str7 now str8
(1 real change made)
(1 real change made)
variable stat_description was str35 now str38
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
variable stat_name was str8 now str12
(1 real change made)
in not found
r(111);

end of do-file

r(111);

. do "C:\Users\ji252\Documents\GitHub\multnomah-county-tax\code
> \02_flow_analysis.do"

. /************************************************************
> *******************
> File Name:              02_flow_analysis.do
> Creator:                John Iselin
> Date Update:    January 30, 2026
> 
> Called by: 00_multnomah.do
> 
> Purpose: Perform flow-based analysis on IRS data.
> 
> Outputs:
> All outputs are produced twice: once for all counties and onc
> e for ACS counties
> only (with _acs suffix). ACS sample includes property tax rat
> e controls.
> 
> - county_flow_coefficients[_acs].dta/csv: flow coefficients f
> or all counties
>   (b_out, b_in, se_out, se_in, t-stats, p-values, percentile 
> ranks)
> - fig_multnomah_post_*[_acs].png: flow coefficient plots for 
> Multnomah
> - fig_hist_out_*[_acs].png: Histogram of out-migration coeffi
> cients (with percentile)
> - fig_hist_in_*[_acs].png: Histogram of in-migration coeffici
> ents (with percentile)
> - fig_scatter_out_in_*[_acs].png: Scatter plot of out vs in c
> oefficients
> - fig_multnomah_out_*[_acs].png: Event study plots for out-mi
> gration
> - fig_multnomah_in_*[_acs].png: Event study plots for in-migr
> ation
> - fig_multnomah_both_*[_acs].png: Combined event study plots
> 
> Excel output (flow_analysis_stats.xlsx):
> - all/acs: Summary statistics for Multnomah and distribution
> - larger_out_all/acs: Counties with larger out-migration coef
> ficients
> - smaller_in_all/acs: Counties with smaller in-migration coef
> ficients
> - worse_both_all/acs: Counties worse on both dimensions
> - larger_t_out_all/acs: Counties with larger out-migration t-
> statistics
> - smaller_t_in_all/acs: Counties with smaller in-migration t-
> statistics
> 
> Debug mode:
> - Set local debug = 1 to run on a random subset of counties f
> or faster testing
> - Set local debug_n to control the number of random counties 
> (default: 50)
> - Multnomah County is always included in the debug sample
> - Set debug = 0 for full production runs
> 
> Authors: John Iselin
> 
> For more information, contact john.iselin@yale.edu
> 
> *************************************************************
> ******************/
. 
. 
. ** Start log file
. capture log close log_02

. log using "${logs}02_log_flow_${date}", replace text name(log
> _02)
---------------------------------------------------------------
      name:  log_02
       log:  C:/Users/ji252/Documents/GitHub/multnomah-county-t
> ax/code/logs/02_log_flow_2026-01-30.log
  log type:  text
 opened on:  31 Jan 2026, 09:40:25

. 
. ** Parameters
. local reps = 100

. 
. ** Debug mode: set to 1 to run on a random subset of counties
>  for faster testing
. ** Set to 0 for full production run
. local debug = 1

. local debug_n = 50  // Number of random counties to sample in
>  debug mode (plus Multnomah)

. 
. ** Load ACS data to get the set of counties 
. use "${data}working/acs_county_gross_18plus", clear

. 
. ** Keep required variables 
. keep year fips 

. 
. ** Keep only always-observed fips 
. bysort fips: gen ct = _N

. tab ct 

         ct |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |        168        3.48        3.48
          7 |        287        5.95        9.43
         10 |      4,370       90.57      100.00
------------+-----------------------------------
      Total |      4,825      100.00

. keep if ct == 10 
(455 observations deleted)

. 
. ** Keep fips 
. keep fips 

. 
. ** Drop duplicates 
. duplicates drop 

Duplicates in terms of all variables

(3,933 observations deleted)

. 
. ** Preserve data 
. tempfile acs_fips 

. save `acs_fips'
file C:\Users\ji252\AppData\Local\Temp\ST_828_000001.tmp
    saved as .dta format

. clear 

. 
. ** Load IRS Data
. use "${data}working/irs_county_flow.dta", clear

. 
. ** Sample restrictions
. drop if inlist(state_fips_o, 2, 15)     // Alaska and Hawaii
(3,109 observations deleted)

. drop if inlist(state_fips_d, 2, 15)     // Alaska and Hawaii
(2,293 observations deleted)

. 
. ** Clean up variables
. drop fips

. 
. ** Mover indicators
. gen mover = fips_o != fips_d

. 
. ** Generate flow id
. egen flow_id = group(fips_d fips_o)

. 
. ** Declare panel and fill in missing values 
. xtset flow_id year 

Panel variable: flow_id (unbalanced)
 Time variable: year, 2016 to 2022, but with gaps
         Delta: 1 unit

. tsfill, full

. 
. ** Keep required variables 
. keep fips_d fips_o flow_id year mover n1 n2 agi 

. 
. ** Replace with 0s
. replace n1 = 0 if missing(n1)
(140,172 real changes made)

. replace n2 = 0 if missing(n2)
(140,172 real changes made)

. replace agi = 0 if missing(agi)
(140,172 real changes made)

. replace agi = 0 if agi < 0 
(89 real changes made)

. 
. ** Merge with time-varying controls
. 
. ** Keep if in donor pool in both origin and destination
. foreach x in "o" "d" {
  2. 
.         ** Fill in missing fips
.         bysort flow_id: egen tmp = mean(fips_`x')
  3.         replace fips_`x' = tmp if missing(fips_`x')
  4.         drop tmp 
  5. 
.         ** Merge with relevent variables
.         gen fips = fips_`x'
  6.         merge m:1 fips using "${data}working/ids",        
>                                       ///
>                 keep(match) gen(merge_ids_`x')
  7.         merge m:1 year fips using "${data}working/bls_unem
> ployment",    ///
>                 keep(match) gen(merge_bls_`x')
  8.         merge m:1 year fips using "${data}working/bea_econ
> omics",               ///
>                 keep(match) gen(merge_bea_`x')
  9.         merge m:1 fips using `acs_fips', keep(master match
> ) gen(merge_acs_`x')
 10.         merge m:1 year fips using "${data}working/property
> _tax_rates_overall", ///
>                 gen(proptx_merge_`x') keep(master match) keep
> using(prop_rate_mean )
 11.         
.         ** Rename
.         rename state_name state_name_`x'
 12.         rename state_fips state_fips_`x'
 13.         rename county_name county_name_`x'
 14.         rename county_fips county_fips_`x'      
 15.         rename unemp unemp_`x'
 16.         rename population pop_`x'
 17.         rename per_capita_income per_capita_income_`x'
 18.         rename prop_rate_mean prop_rate_mean_`x'
 19.         drop fips
 20. 
. } // END ORIGIN-DESTINATION LOOP
(140,172 real changes made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                           497,448  (merge_ids_o==3)
    -----------------------------------------
(variable fips was float, now double to accommodate using
       data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                           491,939  (merge_bls_o==3)
    -----------------------------------------

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                           484,407  (merge_bea_o==3)
    -----------------------------------------

    Result                      Number of obs
    -----------------------------------------
    Not matched                       202,846
        from master                   202,846  (merge_acs_o==1)
        from using                          0  (merge_acs_o==2)

    Matched                           281,561  (merge_acs_o==3)
    -----------------------------------------

    Result                      Number of obs
    -----------------------------------------
    Not matched                       189,234
        from master                   189,234  (proptx_merge_o=
> =1)
        from using                          0  (proptx_merge_o=
> =2)

    Matched                           295,173  (proptx_merge_o=
> =3)
    -----------------------------------------
(136,291 real changes made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                           484,407  (merge_ids_d==3)
    -----------------------------------------
(variable fips was float, now double to accommodate using
       data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                           480,970  (merge_bls_d==3)
    -----------------------------------------

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                           475,524  (merge_bea_d==3)
    -----------------------------------------

    Result                      Number of obs
    -----------------------------------------
    Not matched                       207,879
        from master                   207,879  (merge_acs_d==1)
        from using                          0  (merge_acs_d==2)

    Matched                           267,645  (merge_acs_d==3)
    -----------------------------------------

    Result                      Number of obs
    -----------------------------------------
    Not matched                       193,163
        from master                   193,163  (proptx_merge_d=
> =1)
        from using                          0  (proptx_merge_d=
> =2)

    Matched                           282,361  (proptx_merge_d=
> =3)
    -----------------------------------------

. 
. ** Tag flows to-and-from acs counties 
. gen acs_flow = merge_acs_d == 3 & merge_acs_o == 3

. label var acs_flow "Flows to and from ACS counties"

. 
. ** Multnomah indicators
. gen out_multnomah = (state_fips_o == 41 & county_fips_o == 51
> )

. gen in_multnomah = (state_fips_d == 41 & county_fips_d == 51)

. 
. ** Post-indicators
. gen post = year > 2020

. 
. ** Interactions
. gen in_multnomah_post = in_multnomah * post

. gen out_multnomah_post = out_multnomah * post

. 
. ** Create interactions manually (base year = 2020)
. forvalues y = 2016/2022 {
  2.         gen x_out_`y' = out_multnomah * (year == `y')
  3.         gen x_in_`y' = in_multnomah * (year == `y')
  4. }

. 
. ** Drop base year (2020)
. drop x_out_2020 x_in_2020

. 
. *************************************************************
> *******************
. ** MAIN ANALYSIS LOOP: Run regressions for (1) all counties, 
> (2) ACS counties
. ** The second iteration restricts to flows where acs_flow == 
> 1 and adds
. ** property tax rate controls (prop_rate_mean_o and prop_rate
> _mean_d)
. *************************************************************
> *******************
. 
. foreach sample in  "acs" "all" {
  2. 
.         ** Set sample-specific parameters
.         if "`sample'" == "all" {
  3.                 local sample_cond ""
  4.                 local covars "unemp_* pop_* per_capita_inc
> ome_*"
  5.                 local file_suffix ""
  6.                 local title_suffix ""
  7.         }
  8.         else if "`sample'" == "acs" {
  9.                 local sample_cond "& acs_flow == 1"
 10.                 local covars "unemp_* pop_* per_capita_inc
> ome_* prop_rate_mean_o prop_rate_mean_d"
 11.                 local file_suffix "_acs"
 12.                 local title_suffix " (ACS Counties)"
 13.         }
 14. 
.         dis ""
 15.         dis "=============================================
> ==========================="
 16.         dis "RUNNING ANALYSIS FOR SAMPLE: `sample'"
 17.         dis "Sample condition: `sample_cond'"
 18.         dis "Covariates: `covars'"
 19.         dis "=============================================
> ==========================="
 20.         dis ""
 21. 
. *************************************************************
> *******************
. ** REGRESSION 1: Multnomah X Post (flow DID)
. *************************************************************
> *******************
. 
. ** Loop over outcome variables
. foreach outcome in n1 n2 agi {
 22. 
.         ** Set outcome label for graphs
.         if "`outcome'" == "n1" local outcome_label "Number of
>  Returns"
 23.         if "`outcome'" == "n2" local outcome_label "Number
>  of Exemptions"
 24.         if "`outcome'" == "agi" local outcome_label "Adjus
> ted Gross Income"
 25. 
.         ** Regression 1a: With covariates
.         ppmlhdfe `outcome' i.out_multnomah_post i.in_multnoma
> h_post     ///
>                 `covars'                                     
>                                                              
>       ///
>                 if mover == 1 `sample_cond',                 
>                                            ///
>                 absorb(year flow_id) vce(cluster flow_id)
 26.         estimates store `outcome'_with_covars
 27. 
.         ** Regression 1b: Without covariates
.         ppmlhdfe `outcome' i.out_multnomah_post i.in_multnoma
> h_post     ///
>                 if mover == 1 `sample_cond',                 
>                                            ///
>                 absorb(year flow_id) vce(cluster flow_id)
 28.         estimates store `outcome'_no_covars
 29. 
.         ** Plot both regressions
.         coefplot        (`outcome'_with_covars, label("With C
> ovariates")        ///
>                                         mc(navy) ciopts(lc(na
> vy)))                                              ///
>                                 (`outcome'_no_covars, label("
> Without Covariates")       ///
>                                         mc(maroon) ciopts(lc(
> maroon))),                                 ///
>                 keep(1.out_multnomah_post 1.in_multnomah_post
> )                          ///
>                 ciopts(recast(rcap))                         
>                                                    ///
>                 yline(0, lc(gs10) lp(dash))                  
>                                            ///
>                 xline(0, lc(gs10) lp(dash))                  
>                                            ///
>                 coeflabels(     1.out_multnomah_post = "Out-m
> igration"                  ///
>                                         1.in_multnomah_post =
>  "In-migration")                   ///
>                 ytitle("Coefficient")                        
>                                                    ///
>                 xtitle("")                                   
>                                                              
>       ///
>                 legend(pos(6) rows(1))                       
>                                                    ///
>                 title("Migration Flows: Multnomah County x Po
> st`title_suffix'") ///
>                 subtitle("`outcome_label'")                  
>                                                    ///
>                 graphregion(color(white))
 30. 
.         graph export "${results}flows/fig_multnomah_post_`out
> come'`file_suffix'.png", replace
 31. 
. 
. } // END OUTCOME LOOP
 32. 
. *************************************************************
> *******************
. ** REGRESSION 1b: Loop over all counties (Permutation-style a
> nalysis)
. ** Purpose: Run same flow regression for each county to creat
> e distribution
. **          of treatment effects for comparison with Multnoma
> h
. *************************************************************
> *******************
. 
. ** Preserve data for later use in REGRESSION 2
. preserve
 33. 
. ** Get list of unique origin fips codes (respecting sample co
> ndition)
. if "`sample'" == "all" {
 34.         levelsof fips_o, local(fips_list)
 35. }
 36. else {
 37.         levelsof fips_o if acs_flow == 1, local(fips_list)
 38. }
 39. local n_fips_full : word count `fips_list'
 40. 
. ** Debug mode: randomly sample a subset of counties (always i
> nclude Multnomah)
. if `debug' == 1 {
 41.         dis ""
 42.         dis "*** DEBUG MODE: Sampling `debug_n' random cou
> nties (plus Multnomah) ***"
 43.         dis ""
 44. 
.         ** Create tempfile with all fips codes
.         tempfile fips_full
 45.         clear
 46.         local n_fips_tmp : word count `fips_list'
 47.         set obs `n_fips_tmp'
 48.         gen fips = .
 49.         local i = 1
 50.         foreach f of local fips_list {
 51.                 replace fips = `f' in `i'
 52.                 local i = `i' + 1
 53.         }
 54. 
.         ** Tag Multnomah (always include)
.         gen multnomah = (fips == 41051)
 55. 
.         ** Generate random number for sampling
.         set seed 12345  // For reproducibility; change or rem
> ove for different random samples
 56.         gen random = runiform()
 57. 
.         ** Sort: Multnomah first, then random order
.         gsort -multnomah random
 58. 
.         ** Keep Multnomah + debug_n random counties
.         keep if _n <= `debug_n' + 1 | multnomah == 1
 59. 
.         ** Extract new fips list
.         levelsof fips, local(fips_list)
 60. 
.         ** Restore original data
.         restore
 61.         preserve
 62. }
 63. 
. local n_fips : word count `fips_list'
 64. if `debug' == 1 {
 65.         dis "DEBUG: Running regressions for `n_fips' count
> ies (sampled from `n_fips_full') (`sample' sample)..."
 66. }
 67. else {
 68.         dis "Running regressions for `n_fips' counties (`s
> ample' sample)..."
 69. }
 70. 
. ** Initialize tempfile to store results
. tempfile county_results
 71. postfile county_coefs fips b_out se_out b_in se_in using `
> county_results', replace
 72. 
. ** Counter for display
. local ct = 1
 73. 
. foreach f of local fips_list {
 74. 
.         ** Display status every 100 counties
.         if mod(`ct', 100) == 0 {
 75.                 dis "Processing county `ct' of `n_fips' (f
> ips = `f')..."
 76.         }
 77. 
.         ** Generate treatment vars
.         gen out_tmp = fips_o == `f'
 78.         gen in_tmp = fips_d == `f'
 79. 
.         ** Interactions
.         gen out_post_tmp = out_tmp * post
 80.         gen in_post_tmp = in_tmp * post
 81. 
.         ** Run regression with capture to handle potential er
> rors
.         capture {
 82.                 ** Regression: With covariates
.                  ppmlhdfe agi i.out_post_tmp i.in_post_tmp   
>    ///
>                         `covars'                             
>                                                    ///
>                         if mover == 1 `sample_cond',         
>                            ///
>                         absorb(year flow_id) vce(cluster flow
> _id)
 83. 
.                 ** Store coefficients and SEs
.                 local tmp_b_out = _b[1.out_post_tmp]
 84.                 local tmp_se_out = _se[1.out_post_tmp]
 85.                 local tmp_b_in = _b[1.in_post_tmp]
 86.                 local tmp_se_in = _se[1.in_post_tmp]
 87. 
.                 ** Post results
.                 post county_coefs (`f') (`tmp_b_out') (`tmp_s
> e_out') (`tmp_b_in') (`tmp_se_in')
 88.         }
 89. 
.         ** If regression failed, post missing values
.         if _rc != 0 {
 90.                 post county_coefs (`f') (.) (.) (.) (.)
 91.                 dis "Warning: Regression failed for fips `
> f'"
 92.         }
 93.         
. 
.         ** Drop temporary vars
.         drop out_tmp in_tmp out_post_tmp in_post_tmp
 94. 
.         ** Update count
.         local ct = `ct' + 1
 95. 
. } // END FIPS LOOP
 96. 
. ** Close postfile
. postclose county_coefs
 97. 
. ** Load results
. use `county_results', clear
 98. 
. ** Add identifiers
. gen multnomah = (fips == 41051)
 99. label var fips "County FIPS code"
100. label var b_out "Out-migration coefficient (County x Post)
> "
101. label var se_out "Out-migration SE"
102. label var b_in "In-migration coefficient (County x Post)"
103. label var se_in "In-migration SE"
104. label var multnomah "Multnomah County indicator"
105. 
. ** Calculate t-statistics and p-values
. gen t_out = b_out / se_out
106. gen t_in = b_in / se_in
107. gen p_out = 2 * (1 - normal(abs(t_out)))
108. gen p_in = 2 * (1 - normal(abs(t_in)))
109. 
. label var t_out "Out-migration t-statistic"
110. label var t_in "In-migration t-statistic"
111. label var p_out "Out-migration p-value"
112. label var p_in "In-migration p-value"
113. 
. ** Calculate percentile ranks for Multnomah
. foreach x in "b" "t" {
114.         egen rank_`x'_out = rank(`x'_out)
115.         egen rank_`x'_in = rank(`x'_in)
116.         qui count if !missing(`x'_out)
117.         gen pctile_`x'_out = 100 * rank_`x'_out / r(N)
118.         qui count if !missing(`x'_in)
119.         gen pctile_`x'_in = 100 * rank_`x'_in / r(N)
120. 
. }
121. 
. label var pctile_b_out "Percentile rank of out-migration coef
> "
122. label var pctile_b_in "Percentile rank of in-migration coe
> f"
123. label var pctile_t_out "Percentile rank of out-migration t
> -stat"
124. label var pctile_t_in "Percentile rank of in-migration t-s
> tat"
125. 
. ** Display Multnomah's position
. dis ""
126. dis "=========================================="
127. dis "Multnomah County Results:"
128. dis "=========================================="
129. summ b_out t_out b_in t_in pctile_*_out pctile_*_in if mul
> tnomah == 1
130. 
. ** Display distribution summary
. dis ""
131. dis "Distribution of coefficients (all counties):"
132. summ b_out b_in, detail
133. 
. dis ""
134. dis "Distribution of t-stats (all counties):"
135. summ t_out t_in, detail
136. 
. ** Save county coefficients dataset
. compress
137. save "${data}working/county_flow_coefficients`file_suffix'
> .dta", replace
138. export delimited using "${data}working/county_flow_coeffic
> ients`file_suffix'.csv", replace
139. 
. dis "County coefficients saved to ${data}working/county_flow_
> coefficients`file_suffix'.dta"
140. 
. ** Restore original data for REGRESSION 2
. restore
141. 
. *************************************************************
> *******************
. ** SECTION: Multnomah vs Distribution Plots (Histogram Compar
> ison)
. ** Purpose: Plot Multnomah's coefficients against distributio
> n of all counties
. *************************************************************
> *******************
. 
. ** Load the county coefficients
. preserve
142. use "${data}working/county_flow_coefficients`file_suffix'.
> dta", clear
143. 
. ** Loop over beta and t-stats 
. foreach x in "b" "t" {
144.         
.         ** Label 
.         if "`x'" == "b" local txt "Coefficients"
145.         else if "`x'" == "t" local txt = "T-Statistics"
146.                 
.         ** Store Multnomah's coefficients for reference lines
.         summ `x'_out if multnomah == 1, meanonly
147.         local multnomah_`x'_out = r(mean)
148.         summ `x'_in if multnomah == 1, meanonly
149.         local multnomah_`x'_in = r(mean)
150.         summ pctile_`x'_out if multnomah == 1, meanonly
151.         local multnomah_pctile_out = r(mean)
152.         summ pctile_`x'_in if multnomah == 1, meanonly
153.         local multnomah_pctile_in = r(mean)
154. 
.         
.         ** Plot 1: Out-migration coefficient distribution wit
> h Multnomah
.         histogram `x'_out if !missing(`x'_out),              
>                                                    ///
>                 bin(50)                                      
>                                                              
>               ///
>                 fcolor(navy%50) lcolor(navy)                 
>                                                    ///
>                 xline(`multnomah_`x'_out', lcolor(red) lwidth
> (thick) lpattern(solid)) ///
>                 xtitle("Out-migration `txt' (County x Post)")
>                    ///
>                 ytitle("Frequency")                          
>                                                            //
> /
>                 title("Distribution of Out-Migration `txt'`ti
> tle_suffix'")              ///
>                 subtitle("Red line = Multnomah County (percen
> tile: `: display %4.1f `multnomah_pctile_out'')") ///
>                 graphregion(color(white))
155. 
.         graph export "${results}flows/fig_hist_out_`x'`file_s
> uffix'.png", replace
156. 
.         ** Plot 2: In-migration coefficient distribution with
>  Multnomah
.         histogram `x'_in if !missing(`x'_in),                
>                                                    ///
>                 bin(50)                                      
>                                                              
>               ///
>                 fcolor(maroon%50) lcolor(maroon)             
>                                                    ///
>                 xline(`multnomah_`x'_in', lcolor(red) lwidth(
> thick) lpattern(solid)) ///
>                 xtitle("In-migration `txt' (County x Post)") 
>                            ///
>                 ytitle("Frequency")                          
>                                                            //
> /
>                 title("Distribution of In-Migration `txt'`tit
> le_suffix'")               ///
>                 subtitle("Red line = Multnomah County (percen
> tile: `: display %4.1f `multnomah_pctile_in'')") ///
>                 graphregion(color(white))
157. 
.         graph export "${results}flows/fig_hist_in_`x'`file_su
> ffix'.png", replace
158. 
.         ** Plot 3: Combined scatter of out vs in coefficients
.         twoway  (scatter `x'_in `x'_out if multnomah == 0,   
>                                            ///
>                                 mc(navy%30) ms(O) msize(small
> ))                                                 ///
>                         (scatter `x'_in `x'_out if multnomah 
> == 1,                                              ///
>                                 mc(red) ms(D) msize(large)), 
>                                                    ///
>                 xline(0, lc(gs10) lp(dash))                  
>                                                    ///
>                 yline(0, lc(gs10) lp(dash))                  
>                                                    ///
>                 xtitle("Out-migration `txt'")                
>                                    ///
>                 ytitle("In-migration `txt'")                 
>                                            ///
>                 title("Out- vs In-Migration Effects by County
> `title_suffix'")   ///
>                 legend(order(1 "Other Counties" 2 "Multnomah 
> County") pos(6) rows(1)) ///
>                 graphregion(color(white))
159. 
.         graph export "${results}flows/fig_scatter_out_in_`x'`
> file_suffix'.png", replace
160. 
. 
. } // END BETA / T-STAT LOOP
161. 
. *************************************************************
> *******************
. ** SECTION: Export Descriptive Statistics to Excel
. ** Purpose: Export Multnomah vs Distribution stats to Excel f
> ile
. *************************************************************
> *******************
. 
. ** Get Multnomah's statistics
. 
. ** Loop over migration type 
. foreach x in "in" "out" {
162.         
.         summ se_`x' if multnomah == 1, meanonly
163.         local m_se_`x' = r(mean)
164.         
.         summ p_`x' if multnomah == 1, meanonly
165.         local m_p_`x' = r(mean)
166.         
.         ** Loop over beta / t-stat 
.         foreach y in "b" "t" {
167.                 
.                 summ `y'_`x' if multnomah == 1, meanonly
168.                 local m_`y'_`x' = r(mean)
169.                 
.                 summ pctile_`y'_`x' if multnomah == 1, meanon
> ly
170.                 local m_pctile_`y'_`x' = r(mean)
171.                 
.         } // END BETA / T-STAT LOOP 
172.         
.         
. } // END IN/OUT LOOP 
173. 
. ** Count statistics
. qui count if !missing(b_out)
174. local n_counties_out = r(N)
175. qui count if !missing(b_in)
176. local n_counties_in = r(N)
177. qui count if !missing(b_out) & !missing(b_in)
178. local n_counties_both = r(N)
179. 
. ** Count counties with more extreme coefficients than Multnom
> ah
. ** For out-migration: larger (more positive) is "worse"
. ** For in-migration: smaller (more negative) is "worse"
. qui count if b_out > `m_b_out' & !missing(b_out)
180. local n_larger_out = r(N)
181. qui count if b_out > `m_b_out' & !missing(b_out) & p_out <
>  0.05
182. local n_larger_out_sig = r(N)
183. 
. qui count if b_in < `m_b_in' & !missing(b_in)
184. local n_smaller_in = r(N)
185. qui count if b_in < `m_b_in' & !missing(b_in) & p_in < 0.0
> 5
186. local n_smaller_in_sig = r(N)
187. 
. ** Counties with both more out AND less in (worse on both dim
> ensions)
. qui count if b_out > `m_b_out' & b_in < `m_b_in' & !missing(b
> _out) & !missing(b_in)
188. local n_worse_both = r(N)
189. qui count if b_out > `m_b_out' & b_in < `m_b_in' & !missin
> g(b_out) & !missing(b_in) & p_out < 0.05 & p_in < 0.05
190. local n_worse_both_sig = r(N)
191. 
. ** Distribution statistics for out-migration
. summ b_out, detail
192. local dist_out_mean = r(mean)
193. local dist_out_sd = r(sd)
194. local dist_out_min = r(min)
195. local dist_out_max = r(max)
196. local dist_out_p25 = r(p25)
197. local dist_out_p50 = r(p50)
198. local dist_out_p75 = r(p75)
199. 
. ** Distribution statistics for in-migration
. summ b_in, detail
200. local dist_in_mean = r(mean)
201. local dist_in_sd = r(sd)
202. local dist_in_min = r(min)
203. local dist_in_max = r(max)
204. local dist_in_p25 = r(p25)
205. local dist_in_p50 = r(p50)
206. local dist_in_p75 = r(p75)
207. 
. ** Distribution statistics for t-stats
. summ t_out, detail
208. local dist_t_out_mean = r(mean)
209. local dist_t_out_sd = r(sd)
210. local dist_t_out_p50 = r(p50)
211. 
. summ t_in, detail
212. local dist_t_in_mean = r(mean)
213. local dist_t_in_sd = r(sd)
214. local dist_t_in_p50 = r(p50)
215. 
. ** Save county coefficients to tempfile, then create stats da
> taset
. tempfile county_coefs_tmp
216. save `county_coefs_tmp'
217. 
. ** Create a new dataset with the statistics
. clear
218. set obs 40
219. 
. ** Create variables
. gen stat_name = ""
220. gen stat_value = .
221. gen stat_description = ""
222. 
. ** Row counter
. local row = 1
223. 
. ** ==========================================================
> ==================
. ** MULTNOMAH STATISTICS
. ** ==========================================================
> ==================
. 
. replace stat_name = "m_b_out" in `row'
224. replace stat_value = `m_b_out' in `row'
225. replace stat_description = "Multnomah out-migration coeffi
> cient" in `row'
226. local row = `row' + 1
227. 
. replace stat_name = "m_se_out" in `row'
228. replace stat_value = `m_se_out' in `row'
229. replace stat_description = "Multnomah out-migration standa
> rd error" in `row'
230. local row = `row' + 1
231. 
. replace stat_name = "m_t_out" in `row'
232. replace stat_value = `m_t_out' in `row'
233. replace stat_description = "Multnomah out-migration t-stat
> istic" in `row'
234. local row = `row' + 1
235. 
. replace stat_name = "m_p_out" in `row'
236. replace stat_value = `m_p_out' in `row'
237. replace stat_description = "Multnomah out-migration p-valu
> e" in `row'
238. local row = `row' + 1
239. 
. replace stat_name = "m_pctile_b_out" in `row'
240. replace stat_value = `m_pctile_b_out' in `row'
241. replace stat_description = "Multnomah out-migration percen
> tile rank" in `row'
242. local row = `row' + 1
243. 
. replace stat_name = "m_b_in" in `row'
244. replace stat_value = `m_b_in' in `row'
245. replace stat_description = "Multnomah in-migration coeffic
> ient" in `row'
246. local row = `row' + 1
247. 
. replace stat_name = "m_se_in" in `row'
248. replace stat_value = `m_se_in' in `row'
249. replace stat_description = "Multnomah in-migration standar
> d error" in `row'
250. local row = `row' + 1
251. 
. replace stat_name = "m_t_in" in `row'
252. replace stat_value = `m_t_in' in `row'
253. replace stat_description = "Multnomah in-migration t-stati
> stic" in `row'
254. local row = `row' + 1
255. 
. replace stat_name = "m_p_in" in `row'
256. replace stat_value = `m_p_in' in `row'
257. replace stat_description = "Multnomah in-migration p-value
> " in `row'
258. local row = `row' + 1
259. 
. replace stat_name = "m_pctile_b_in" in `row'
260. replace stat_value = `m_pctile_b_in' in `row'
261. replace stat_description = "Multnomah in-migration percent
> ile rank" in `row'
262. local row = `row' + 1
263. 
. ** ==========================================================
> ==================
. ** COUNT STATISTICS
. ** ==========================================================
> ==================
. 
. replace stat_name = "n_counties_out" in `row'
264. replace stat_value = `n_counties_out' in `row'
265. replace stat_description = "Number of counties with out-mi
> gration coef" in `row'
266. local row = `row' + 1
267. 
. replace stat_name = "n_counties_in" in `row'
268. replace stat_value = `n_counties_in' in `row'
269. replace stat_description = "Number of counties with in-mig
> ration coef" in `row'
270. local row = `row' + 1
271. 
. replace stat_name = "n_counties_both" in `row'
272. replace stat_value = `n_counties_both' in `row'
273. replace stat_description = "Number of counties with both c
> oefs" in `row'
274. local row = `row' + 1
275. 
. replace stat_name = "n_larger_out" in `row'
276. replace stat_value = `n_larger_out' in `row'
277. replace stat_description = "Counties with larger out-migra
> tion coef than Multnomah" in `row'
278. local row = `row' + 1
279. 
. replace stat_name = "n_larger_out_sig" in `row'
280. replace stat_value = `n_larger_out_sig' in `row'
281. replace stat_description = "Counties with larger out-migra
> tion coef (p<0.05)" in `row'
282. local row = `row' + 1
283. 
. replace stat_name = "n_smaller_in" in `row'
284. replace stat_value = `n_smaller_in' in `row'
285. replace stat_description = "Counties with smaller in-migra
> tion coef than Multnomah" in `row'
286. local row = `row' + 1
287. 
. replace stat_name = "n_smaller_in_sig" in `row'
288. replace stat_value = `n_smaller_in_sig' in `row'
289. replace stat_description = "Counties with smaller in-migra
> tion coef (p<0.05)" in `row'
290. local row = `row' + 1
291. 
. replace stat_name = "n_worse_both" in `row'
292. replace stat_value = `n_worse_both' in `row'
293. replace stat_description = "Counties worse on both out AND
>  in migration" in `row'
294. local row = `row' + 1
295. 
. replace stat_name = "n_worse_both_sig" in `row'
296. replace stat_value = `n_worse_both_sig' in `row'
297. replace stat_description = "Counties worse on both (p<0.05
>  for both)" in `row'
298. local row = `row' + 1
299. 
. ** ==========================================================
> ==================
. ** DISTRIBUTION STATISTICS - OUT-MIGRATION
. ** ==========================================================
> ==================
. 
. replace stat_name = "dist_out_mean" in `row'
300. replace stat_value = `dist_out_mean' in `row'
301. replace stat_description = "Distribution mean: out-migrati
> on coef" in `row'
302. local row = `row' + 1
303. 
. replace stat_name = "dist_out_sd" in `row'
304. replace stat_value = `dist_out_sd' in `row'
305. replace stat_description = "Distribution SD: out-migration
>  coef" in `row'
306. local row = `row' + 1
307. 
. replace stat_name = "dist_out_min" in `row'
308. replace stat_value = `dist_out_min' in `row'
309. replace stat_description = "Distribution min: out-migratio
> n coef" in `row'
310. local row = `row' + 1
311. 
. replace stat_name = "dist_out_max" in `row'
312. replace stat_value = `dist_out_max' in `row'
313. replace stat_description = "Distribution max: out-migratio
> n coef" in `row'
314. local row = `row' + 1
315. 
. replace stat_name = "dist_out_p25" in `row'
316. replace stat_value = `dist_out_p25' in `row'
317. replace stat_description = "Distribution 25th pctile: out-
> migration coef" in `row'
318. local row = `row' + 1
319. 
. replace stat_name = "dist_out_p50" in `row'
320. replace stat_value = `dist_out_p50' in `row'
321. replace stat_description = "Distribution median: out-migra
> tion coef" in `row'
322. local row = `row' + 1
323. 
. replace stat_name = "dist_out_p75" in `row'
324. replace stat_value = `dist_out_p75' in `row'
325. replace stat_description = "Distribution 75th pctile: out-
> migration coef" in `row'
326. local row = `row' + 1
327. 
. ** ==========================================================
> ==================
. ** DISTRIBUTION STATISTICS - IN-MIGRATION
. ** ==========================================================
> ==================
. 
. replace stat_name = "dist_in_mean" in `row'
328. replace stat_value = `dist_in_mean' in `row'
329. replace stat_description = "Distribution mean: in-migratio
> n coef" in `row'
330. local row = `row' + 1
331. 
. replace stat_name = "dist_in_sd" in `row'
332. replace stat_value = `dist_in_sd' in `row'
333. replace stat_description = "Distribution SD: in-migration 
> coef" in `row'
334. local row = `row' + 1
335. 
. replace stat_name = "dist_in_min" in `row'
336. replace stat_value = `dist_in_min' in `row'
337. replace stat_description = "Distribution min: in-migration
>  coef" in `row'
338. local row = `row' + 1
339. 
. replace stat_name = "dist_in_max" in `row'
340. replace stat_value = `dist_in_max' in `row'
341. replace stat_description = "Distribution max: in-migration
>  coef" in `row'
342. local row = `row' + 1
343. 
. replace stat_name = "dist_in_p25" in `row'
344. replace stat_value = `dist_in_p25' in `row'
345. replace stat_description = "Distribution 25th pctile: in-m
> igration coef" in `row'
346. local row = `row' + 1
347. 
. replace stat_name = "dist_in_p50" in `row'
348. replace stat_value = `dist_in_p50' in `row'
349. replace stat_description = "Distribution median: in-migrat
> ion coef" in `row'
350. local row = `row' + 1
351. 
. replace stat_name = "dist_in_p75" in `row'
352. replace stat_value = `dist_in_p75' in `row'
353. replace stat_description = "Distribution 75th pctile: in-m
> igration coef" in `row'
354. local row = `row' + 1
355. 
. ** ==========================================================
> ==================
. ** DISTRIBUTION STATISTICS - T-STATISTICS
. ** ==========================================================
> ==================
. 
. replace stat_name = "dist_t_out_mean" in `row'
356. replace stat_value = `dist_t_out_mean' in `row'
357. replace stat_description = "Distribution mean: out-migrati
> on t-stat" in `row'
358. local row = `row' + 1
359. 
. replace stat_name = "dist_t_out_sd" in `row'
360. replace stat_value = `dist_t_out_sd' in `row'
361. replace stat_description = "Distribution SD: out-migration
>  t-stat" in `row'
362. local row = `row' + 1
363. 
. replace stat_name = "dist_t_out_p50" in `row'
364. replace stat_value = `dist_t_out_p50' in `row'
365. replace stat_description = "Distribution median: out-migra
> tion t-stat" in `row'
366. local row = `row' + 1
367. 
. replace stat_name = "dist_t_in_mean" in `row'
368. replace stat_value = `dist_t_in_mean' in `row'
369. replace stat_description = "Distribution mean: in-migratio
> n t-stat" in `row'
370. local row = `row' + 1
371. 
. replace stat_name = "dist_t_in_sd" in `row'
372. replace stat_value = `dist_t_in_sd' in `row'
373. replace stat_description = "Distribution SD: in-migration 
> t-stat" in `row'
374. local row = `row' + 1
375. 
. replace stat_name = "dist_t_in_p50" in `row'
376. replace stat_value = `dist_t_in_p50' in `row'
377. replace stat_description = "Distribution median: in-migrat
> ion t-stat" in `row'
378. local row = `row' + 1
379. 
. ** Drop empty rows
. drop if stat_name == ""
380. 
. ** Add sample identifier
. gen sample = "`sample'"
381. 
. ** Export to Excel
. ** First iteration: create new file; subsequent: add sheet
. if "`sample'" == "all" {
382.         export excel using "${results}flows/flow_analysis_
> stats.xlsx", ///
>                 sheet("`sample'") sheetreplace firstrow(varia
> bles)
383. }
384. else {
385.         export excel using "${results}flows/flow_analysis_
> stats.xlsx", ///
>                 sheet("`sample'") sheetmodify firstrow(variab
> les)
386. }
387. 
. dis "Exported descriptive statistics to flow_analysis_stats.x
> lsx, sheet: `sample'"
388. 
. ** ==========================================================
> ==================
. ** EXPORT COUNTY LISTS WITH LARGER COEFFICIENTS TO ADDITIONAL
>  SHEETS
. ** ==========================================================
> ==================
. 
. ** Load county coefficients and merge with county identifiers
. use `county_coefs_tmp', clear
389. merge m:1 fips using "${data}working/ids", keep(master mat
> ch) nogen ///
>         keepusing(state_name county_name state_fips county_fi
> ps)
390. 
. ** Order variables for cleaner output
. order fips state_name county_name state_fips county_fips mult
> nomah ///
>         b_out se_out t_out p_out pctile_b_out pctile_t_out //
> /
>         b_in se_in t_in p_in pctile_b_in pctile_t_in
391. 
. ** Sheet 1: Counties with larger out-migration coefficients t
> han Multnomah
. preserve
392.         keep if b_out > `m_b_out' & !missing(b_out)
393.         gsort -b_out
394. 
.         ** Keep relevant variables
.         keep fips state_name county_name b_out se_out t_out p
> _out pctile_b_out pctile_t_out
395. 
.         ** Export
.         export excel using "${results}flows/flow_analysis_sta
> ts.xlsx", ///
>                 sheet("larger_out_`sample'") sheetmodify firs
> trow(variables)
396. 
.         dis "Exported `=_N' counties with larger out-migratio
> n coef to sheet: larger_out_`sample'"
397. restore
398. 
. ** Sheet 2: Counties with smaller in-migration coefficients t
> han Multnomah
. preserve
399.         keep if b_in < `m_b_in' & !missing(b_in)
400.         gsort b_in
401. 
.         ** Keep relevant variables
.         keep fips state_name county_name b_in se_in t_in p_in
>  pctile_b_in pctile_t_in
402. 
.         ** Export
.         export excel using "${results}flows/flow_analysis_sta
> ts.xlsx", ///
>                 sheet("smaller_in_`sample'") sheetmodify firs
> trow(variables)
403. 
.         dis "Exported `=_N' counties with smaller in-migratio
> n coef to sheet: smaller_in_`sample'"
404. restore
405. 
. ** Sheet 3: Counties worse on BOTH dimensions (larger out AND
>  smaller in)
. preserve
406.         keep if b_out > `m_b_out' & b_in < `m_b_in' & !mis
> sing(b_out) & !missing(b_in)
407.         gsort -b_out
408. 
.         ** Keep relevant variables
.         keep fips state_name county_name ///
>                 b_out se_out t_out p_out pctile_b_out pctile_
> t_out ///
>                 b_in se_in t_in p_in pctile_b_in pctile_t_in
409. 
.         ** Export
.         export excel using "${results}flows/flow_analysis_sta
> ts.xlsx", ///
>                 sheet("worse_both_`sample'") sheetmodify firs
> trow(variables)
410. 
.         dis "Exported `=_N' counties worse on both dimensions
>  to sheet: worse_both_`sample'"
411. restore
412. 
. ** Sheet 4: Counties with larger out-migration t-statistics t
> han Multnomah
. preserve
413.         keep if t_out > `m_t_out' & !missing(t_out)
414.         gsort -t_out
415. 
.         ** Keep relevant variables
.         keep fips state_name county_name b_out se_out t_out p
> _out pctile_b_out pctile_t_out
416. 
.         ** Export
.         export excel using "${results}flows/flow_analysis_sta
> ts.xlsx", ///
>                 sheet("larger_t_out_`sample'") sheetmodify fi
> rstrow(variables)
417. 
.         dis "Exported `=_N' counties with larger out-migratio
> n t-stat to sheet: larger_t_out_`sample'"
418. restore
419. 
. ** Sheet 5: Counties with smaller in-migration t-statistics t
> han Multnomah
. preserve
420.         keep if t_in < `m_t_in' & !missing(t_in)
421.         gsort t_in
422. 
.         ** Keep relevant variables
.         keep fips state_name county_name b_in se_in t_in p_in
>  pctile_b_in pctile_t_in
423. 
.         ** Export
.         export excel using "${results}flows/flow_analysis_sta
> ts.xlsx", ///
>                 sheet("smaller_t_in_`sample'") sheetmodify fi
> rstrow(variables)
424. 
.         dis "Exported `=_N' counties with smaller in-migratio
> n t-stat to sheet: smaller_t_in_`sample'"
425. restore
426. 
. ** Restore main data and continue
. restore
427. 
. *************************************************************
> *******************
. ** REGRESSION 2: Multnomah X Year (Event Study)
. *************************************************************
> *******************
. 
. ** Loop over outcome variables
. foreach outcome in n1 n2 agi {
428. 
.         ** Set outcome label for graphs
.         if "`outcome'" == "n1" local outcome_label "Number of
>  Returns"
429.         if "`outcome'" == "n2" local outcome_label "Number
>  of Exemptions"
430.         if "`outcome'" == "agi" local outcome_label "Adjus
> ted Gross Income"
431. 
.         ** Regression 2a: With covariates
.         ppmlhdfe `outcome' x_out_* x_in_*                    
>                                            ///
>                 `covars'                                     
>                                                              
>       ///
>                 if mover == 1 `sample_cond',                 
>                                            ///
>                 absorb(year flow_id) vce(cluster flow_id)
432.         estimates store `outcome'_es_with_covars
433. 
.         ** Regression 2b: Without covariates
.         ppmlhdfe `outcome' x_out_* x_in_*                    
>                                            ///
>                 if mover == 1 `sample_cond',                 
>                                            ///
>                 absorb(year flow_id) vce(cluster flow_id)
434.         estimates store `outcome'_es_no_covars
435. 
.         ** Extract coefficients into a dataset and plot
.         preserve
436.                 clear
437.                 set obs 7
438.                 gen year = 2015 + _n
439. 
.                 ** Out-migration coefficients (with covariate
> s)
.                 gen out_coef_wc = .
440.                 gen out_ci_lo_wc = .
441.                 gen out_ci_hi_wc = .
442. 
.                 ** In-migration coefficients (with covariates
> )
.                 gen in_coef_wc = .
443.                 gen in_ci_lo_wc = .
444.                 gen in_ci_hi_wc = .
445. 
.                 ** Out-migration coefficients (without covari
> ates)
.                 gen out_coef_nc = .
446.                 gen out_ci_lo_nc = .
447.                 gen out_ci_hi_nc = .
448. 
.                 ** In-migration coefficients (without covaria
> tes)
.                 gen in_coef_nc = .
449.                 gen in_ci_lo_nc = .
450.                 gen in_ci_hi_nc = .
451. 
.                 ** Fill in coefficients (2020 = base year = 0
> )
.                 foreach y in 2016 2017 2018 2019 2021 2022 {
452. 
.                         ** With covariates
.                         estimates restore `outcome'_es_with_c
> ovars
453.                         replace out_coef_wc = _b[x_out_`y'
> ] if year == `y'
454.                         replace out_ci_lo_wc = _b[x_out_`y
> '] - 1.96 * _se[x_out_`y'] if year == `y'
455.                         replace out_ci_hi_wc = _b[x_out_`y
> '] + 1.96 * _se[x_out_`y'] if year == `y'
456. 
.                         replace in_coef_wc = _b[x_in_`y'] if 
> year == `y'
457.                         replace in_ci_lo_wc = _b[x_in_`y']
>  - 1.96 * _se[x_in_`y'] if year == `y'
458.                         replace in_ci_hi_wc = _b[x_in_`y']
>  + 1.96 * _se[x_in_`y'] if year == `y'
459. 
.                         ** Without covariates
.                         estimates restore `outcome'_es_no_cov
> ars
460.                         replace out_coef_nc = _b[x_out_`y'
> ] if year == `y'
461.                         replace out_ci_lo_nc = _b[x_out_`y
> '] - 1.96 * _se[x_out_`y'] if year == `y'
462.                         replace out_ci_hi_nc = _b[x_out_`y
> '] + 1.96 * _se[x_out_`y'] if year == `y'
463. 
.                         replace in_coef_nc = _b[x_in_`y'] if 
> year == `y'
464.                         replace in_ci_lo_nc = _b[x_in_`y']
>  - 1.96 * _se[x_in_`y'] if year == `y'
465.                         replace in_ci_hi_nc = _b[x_in_`y']
>  + 1.96 * _se[x_in_`y'] if year == `y'
466.                 }
467. 
.                 ** Base year (2020) = 0
.                 foreach v in out_coef_wc out_ci_lo_wc out_ci_
> hi_wc                      ///
>                                          in_coef_wc in_ci_lo_
> wc in_ci_hi_wc                     ///
>                                          out_coef_nc out_ci_l
> o_nc out_ci_hi_nc                  ///
>                                          in_coef_nc in_ci_lo_
> nc in_ci_hi_nc {
468.                         replace `v' = 0 if year == 2020
469.                 }
470. 
.                 ** Offset years slightly for visibility
.                 gen year_out = year - 0.1
471.                 gen year_in = year + 0.1
472. 
.                 ** Plot 1: Out-migration (with and without co
> variates)
.                 twoway  (rcap out_ci_lo_wc out_ci_hi_wc year_
> out, lc(navy))                     ///
>                                 (connected out_coef_wc year_o
> ut, mc(navy) lc(navy) ms(O))               ///
>                                 (rcap out_ci_lo_nc out_ci_hi_
> nc year_in, lc(maroon))                    ///
>                                 (connected out_coef_nc year_i
> n, mc(maroon) lc(maroon) ms(T)),   ///
>                         yline(0, lc(gs10) lp(dash))          
>                                                              
>       ///
>                         xline(2020.5, lc(black) lp(solid))   
>                                                              
>       ///
>                         xlabel(2016(1)2022)                  
>                                                              
>               ///
>                         ytitle("Coefficient (relative to 2020
> )")                                                        //
> /
>                         xtitle("Year")                       
>                                                              
>                       ///
>                         legend(order(2 "With Covariates" 4 "W
> ithout Covariates")                        ///
>                                 pos(6) rows(1))              
>                                                              
>                       ///
>                         title("Out-Migration from Multnomah C
> ounty`title_suffix'")                      ///
>                         subtitle("`outcome_label'")          
>                                                              
>               ///
>                         graphregion(color(white))
473. 
.                 graph export "${results}flows/fig_multnomah_o
> ut_`outcome'`file_suffix'.png", replace
474. 
.                 ** Plot 2: In-migration (with and without cov
> ariates)
.                 twoway  (rcap in_ci_lo_wc in_ci_hi_wc year_ou
> t, lc(navy))                               ///
>                                 (connected in_coef_wc year_ou
> t, mc(navy) lc(navy) ms(O))                ///
>                                 (rcap in_ci_lo_nc in_ci_hi_nc
>  year_in, lc(maroon))                              ///
>                                 (connected in_coef_nc year_in
> , mc(maroon) lc(maroon) ms(T)),    ///
>                         yline(0, lc(gs10) lp(dash))          
>                                                              
>       ///
>                         xline(2020.5, lc(black) lp(solid))   
>                                                              
>       ///
>                         xlabel(2016(1)2022)                  
>                                                              
>               ///
>                         ytitle("Coefficient (relative to 2020
> )")                                                        //
> /
>                         xtitle("Year")                       
>                                                              
>                       ///
>                         legend(order(2 "With Covariates" 4 "W
> ithout Covariates")                        ///
>                                 pos(6) rows(1))              
>                                                              
>                       ///
>                         title("In-Migration to Multnomah Coun
> ty`title_suffix'")                         ///
>                         subtitle("`outcome_label'")          
>                                                              
>               ///
>                         graphregion(color(white))
475. 
.                 graph export "${results}flows/fig_multnomah_i
> n_`outcome'`file_suffix'.png", replace
476. 
.                 ** Plot 3: Both flows (with covariates only, 
> as in original)
.                 twoway  (rcap out_ci_lo_wc out_ci_hi_wc year_
> out, lc(navy))                             ///
>                                 (connected out_coef_wc year_o
> ut, mc(navy) lc(navy) ms(O))               ///
>                                 (rcap in_ci_lo_wc in_ci_hi_wc
>  year_in, lc(maroon))                              ///
>                                 (connected in_coef_wc year_in
> , mc(maroon) lc(maroon) ms(T)),    ///
>                         yline(0, lc(gs10) lp(dash))          
>                                                              
>       ///
>                         xline(2020.5, lc(black) lp(solid))   
>                                                              
>       ///
>                         xlabel(2016(1)2022)                  
>                                                              
>               ///
>                         ytitle("Coefficient (relative to 2020
> )")                                                        //
> /
>                         xtitle("Year")                       
>                                                              
>                       ///
>                         legend(order(2 "Out-migration" 4 "In-
> migration")                                        ///
>                                 pos(6) rows(1))              
>                                                              
>                       ///
>                         title("Migration Flows: Multnomah Cou
> nty`title_suffix'")                        ///
>                         subtitle("`outcome_label'")          
>                                                              
>               ///
>                         graphregion(color(white))
477. 
.                 graph export "${results}flows/fig_multnomah_b
> oth_`outcome'`file_suffix'.png", replace
478. 
.         restore
479. 
. } // END OUTCOME LOOP
480. 
. } // END SAMPLE LOOP (all vs acs)

===============================================================
> =========
RUNNING ANALYSIS FOR SAMPLE: acs
Sample condition: & acs_flow == 1
Covariates: unemp_* pop_* per_capita_income_* prop_rate_mean_o 
> prop_rate_mean_d
===============================================================
> =========

(dropped 3389 observations that are either singletons or separa
> ted by a fixed effect)
Iteration 1:   deviance = 1.9778e+06  eps = .         iters = 4
>     tol = 1.0e-04                                            
>                    min(eta) =  -2.88  P   
Iteration 2:   deviance = 3.3937e+05  eps = 4.83e+00  iters = 3
>     tol = 1.0e-04                                            
>                    min(eta) =  -3.48      
Iteration 3:   deviance = 2.9123e+05  eps = 1.65e-01  iters = 3
>     tol = 1.0e-04                                            
>                    min(eta) =  -3.71      
Iteration 4:   deviance = 2.9102e+05  eps = 7.29e-04  iters = 2
>     tol = 1.0e-04                                            
>                    min(eta) =  -3.74      
Iteration 5:   deviance = 2.9102e+05  eps = 5.68e-08  iters = 2
>     tol = 1.0e-04                                            
>                    min(eta) =  -3.74      
Iteration 6:   deviance = 2.9102e+05  eps = 9.61e-16  iters = 1
>     tol = 1.0e-05                                            
>                    min(eta) =  -3.74   S  
Iteration 7:   deviance = 2.9102e+05  eps = 0.00e+00  iters = 1
>     tol = 1.0e-09                                            
>                    min(eta) =  -3.74   S O
---------------------------------------------------------------
> ---------------------------------------------
(legend: p: exact partial-out   s: exact solver   h: step-halvi
> ng   o: epsilon below tolerance)
Converged in 7 iterations and 16 HDFE sub-iterations (tol = 1.0
> e-08)

HDFE PPML regression                              No. of obs   
>    =                                                         
>         129,600
Absorbing 2 HDFE groups                           Residual df  
>    =                                                         
>          22,046
Statistics robust to heteroskedasticity           Wald chi2(10)
>    =                                                         
>          679.39
Deviance             =  291015.7779               Prob > chi2  
>    =                                                         
>          0.0000
Log pseudolikelihood = -533368.3743               Pseudo R2    
>    =                                                         
>          0.9851

Number of clusters (flow_id)=     22,047
                           (Std. err. adjusted for 22,047 clust
> ers in flow_id)
---------------------------------------------------------------
> ---------------
             |               Robust
          n1 | Coefficient  std. err.      z    P>|z|     [95% 
> con                                                          
>    f. interval]
-------------+-------------------------------------------------
> ---------------
1.out_mult~t |  -.0022129   .0235929    -0.09   0.925     -.048
> 454                                                          
>        .0440283
1.in_multn~t |  -.0846358   .0168906    -5.01   0.000    -.1177
> 409                                                          
>       -.0515308
     unemp_o |   .0229647   .0013063    17.58   0.000     .0204
> 044                                                          
>        .0255251
     unemp_d |  -.0190961   .0014121   -13.52   0.000    -.0218
> 638                                                          
>       -.0163284
       pop_o |   7.22e-09   2.60e-08     0.28   0.781    -4.38e
> -08                                                          
>        5.83e-08
       pop_d |   3.86e-07   3.88e-08     9.95   0.000     3.10e
> -07                                                          
>        4.62e-07
per_capita~o |   1.12e-06   5.10e-07     2.19   0.028     1.19e
> -07                                                          
>        2.12e-06
per_capita~d |  -1.67e-06   4.07e-07    -4.10   0.000    -2.46e
> -06                                                          
>       -8.69e-07
prop_rate_~o |  -.0056646   .0020497    -2.76   0.006     -.009
> 682                                                          
>       -.0016473
prop_rate_~d |  -.0001682   .0020167    -0.08   0.934    -.0041
> 209                                                          
>        .0037844
       _cons |   6.125872   .0784274    78.11   0.000     5.972
> 157                                                          
>        6.279587
---------------------------------------------------------------
> ---------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
        year |         7           1           6     |
     flow_id |     22047       22047           0    *|
-----------------------------------------------------+
* = FE nested within cluster; treated as redundant for DoF comp
> utation
(dropped 3389 observations that are either singletons or separa
> ted by a fixed effect)
Iteration 1:   deviance = 1.9948e+06  eps = .         iters = 4
>     tol = 1.0e-04                                            
>                    min(eta) =  -2.86  P   
Iteration 2:   deviance = 3.5534e+05  eps = 4.61e+00  iters = 3
>     tol = 1.0e-04                                            
>                    min(eta) =  -3.44      
Iteration 3:   deviance = 3.0721e+05  eps = 1.57e-01  iters = 3
>     tol = 1.0e-04                                            
>                    min(eta) =  -3.68      
Iteration 4:   deviance = 3.0700e+05  eps = 6.90e-04  iters = 2
>     tol = 1.0e-04                                            
>                    min(eta) =  -3.71      
Iteration 5:   deviance = 3.0700e+05  eps = 5.37e-08  iters = 2
>     tol = 1.0e-04                                            
>                    min(eta) =  -3.71      
Iteration 6:   deviance = 3.0700e+05  eps = 9.11e-16  iters = 1
>     tol = 1.0e-05                                            
>                    min(eta) =  -3.71   S  
Iteration 7:   deviance = 3.0700e+05  eps = 0.00e+00  iters = 1
>     tol = 1.0e-09                                            
>                    min(eta) =  -3.71   S O
---------------------------------------------------------------
> ---------------------------------------------
(legend: p: exact partial-out   s: exact solver   h: step-halvi
> ng   o: epsilon below tolerance)
Converged in 7 iterations and 16 HDFE sub-iterations (tol = 1.0
> e-08)

HDFE PPML regression                              No. of obs   
>    =                                                         
>         129,600
Absorbing 2 HDFE groups                           Residual df  
>    =                                                         
>          22,046
Statistics robust to heteroskedasticity           Wald chi2(2) 
>    =                                                         
>           34.36
Deviance             =  306996.4457               Prob > chi2  
>    =                                                         
>          0.0000
Log pseudolikelihood = -541358.7081               Pseudo R2    
>    =                                                         
>          0.9849

Number of clusters (flow_id)=     22,047
                           (Std. err. adjusted for 22,047 clust
> ers in flow_id)
---------------------------------------------------------------
> ---------------
             |               Robust
          n1 | Coefficient  std. err.      z    P>|z|     [95% 
> con                                                          
>    f. interval]
-------------+-------------------------------------------------
> ---------------
1.out_mult~t |   .0032104   .0243075     0.13   0.895    -.0444
> 315                                                          
>        .0508523
1.in_multn~t |  -.0965589   .0164903    -5.86   0.000    -.1288
> 792                                                          
>       -.0642386
       _cons |    6.70651   .0000597  1.1e+05   0.000     6.706
> 393                                                          
>        6.706627
---------------------------------------------------------------
> ---------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
        year |         7           1           6     |
     flow_id |     22047       22047           0    *|
-----------------------------------------------------+
* = FE nested within cluster; treated as redundant for DoF comp
> utation
file
    C:/Users/ji252/Documents/GitHub/multnomah-county-tax/resu
    > lts/flows/fig_multnomah_post_n1_acs.png saved as PNG
    format
(dropped 3389 observations that are either singletons or separa
> ted by a fixed effect)
Iteration 1:   deviance = 3.6622e+06  eps = .         iters = 4
>     tol = 1.0e-04                                            
>                    min(eta) =  -3.00  P   
Iteration 2:   deviance = 7.1966e+05  eps = 4.09e+00  iters = 3
>     tol = 1.0e-04                                            
>                    min(eta) =  -3.70      
Iteration 3:   deviance = 6.2926e+05  eps = 1.44e-01  iters = 3
>     tol = 1.0e-04                                            
>                    min(eta) =  -4.08      
Iteration 4:   deviance = 6.2873e+05  eps = 8.40e-04  iters = 2
>     tol = 1.0e-04                                            
>                    min(eta) =  -4.17      
Iteration 5:   deviance = 6.2873e+05  eps = 1.99e-07  iters = 2
>     tol = 1.0e-04                                            
>                    min(eta) =  -4.17      
Iteration 6:   deviance = 6.2873e+05  eps = 1.03e-13  iters = 1
>     tol = 1.0e-05                                            
>                    min(eta) =  -4.17   S  
Iteration 7:   deviance = 6.2873e+05  eps = 1.16e-16  iters = 1
>     tol = 1.0e-08                                            
>                    min(eta) =  -4.17   S O
---------------------------------------------------------------
> ---------------------------------------------
(legend: p: exact partial-out   s: exact solver   h: step-halvi
> ng   o: epsilon below tolerance)
Converged in 7 iterations and 16 HDFE sub-iterations (tol = 1.0
> e-08)

HDFE PPML regression                              No. of obs   
>    =                                                         
>         129,600
Absorbing 2 HDFE groups                           Residual df  
>    =                                                         
>          22,046
Statistics robust to heteroskedasticity           Wald chi2(10)
>    =                                                         
>          645.69
Deviance             =  628730.0175               Prob > chi2  
>    =                                                         
>          0.0000
Log pseudolikelihood = -737640.9381               Pseudo R2    
>    =                                                         
>          0.9885

Number of clusters (flow_id)=     22,047
                           (Std. err. adjusted for 22,047 clust
> ers in flow_id)
---------------------------------------------------------------
> ---------------
             |               Robust
          n2 | Coefficient  std. err.      z    P>|z|     [95% 
> con                                                          
>    f. interval]
-------------+-------------------------------------------------
> ---------------
1.out_mult~t |  -.0016164   .0193979    -0.08   0.934    -.0396
> 356                                                          
>        .0364027
1.in_multn~t |   -.084359   .0158222    -5.33   0.000      -.11
> 537                                                          
>        -.053348
     unemp_o |   .0216645   .0013954    15.53   0.000     .0189
> 295                                                          
>        .0243995
     unemp_d |  -.0207735   .0015576   -13.34   0.000    -.0238
> 264                                                          
>       -.0177206
       pop_o |  -6.75e-09   2.84e-08    -0.24   0.812    -6.24e
> -08                                                          
>        4.89e-08
       pop_d |   4.05e-07   3.62e-08    11.19   0.000     3.34e
> -07                                                          
>        4.76e-07
per_capita~o |   1.62e-06   5.18e-07     3.12   0.002     6.00e
> -07                                                          
>        2.63e-06
per_capita~d |  -2.04e-06   4.34e-07    -4.70   0.000    -2.89e
> -06                                                          
>       -1.19e-06
prop_rate_~o |  -.0054931   .0021535    -2.55   0.011    -.0097
> 139                                                          
>       -.0012723
prop_rate_~d |  -.0005758   .0021315    -0.27   0.787    -.0047
> 535                                                          
>        .0036019
       _cons |   6.744748   .0806006    83.68   0.000     6.586
> 774                                                          
>        6.902722
---------------------------------------------------------------
> ---------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
        year |         7           1           6     |
     flow_id |     22047       22047           0    *|
-----------------------------------------------------+
* = FE nested within cluster; treated as redundant for DoF comp
> utation
(dropped 3389 observations that are either singletons or separa
> ted by a fixed effect)
Iteration 1:   deviance = 3.6934e+06  eps = .         iters = 4
>     tol = 1.0e-04                                            
>                    min(eta) =  -2.99  P   
Iteration 2:   deviance = 7.4908e+05  eps = 3.93e+00  iters = 3
>     tol = 1.0e-04                                            
>                    min(eta) =  -3.69      
Iteration 3:   deviance = 6.5872e+05  eps = 1.37e-01  iters = 3
>     tol = 1.0e-04                                            
>                    min(eta) =  -4.06      
Iteration 4:   deviance = 6.5819e+05  eps = 8.00e-04  iters = 2
>     tol = 1.0e-04                                            
>                    min(eta) =  -4.14      
Iteration 5:   deviance = 6.5819e+05  eps = 1.89e-07  iters = 2
>     tol = 1.0e-04                                            
>                    min(eta) =  -4.15      
Iteration 6:   deviance = 6.5819e+05  eps = 9.72e-14  iters = 1
>     tol = 1.0e-05                                            
>                    min(eta) =  -4.15   S  
Iteration 7:   deviance = 6.5819e+05  eps = 2.21e-16  iters = 1
>     tol = 1.0e-08                                            
>                    min(eta) =  -4.15   S O
---------------------------------------------------------------
> ---------------------------------------------
(legend: p: exact partial-out   s: exact solver   h: step-halvi
> ng   o: epsilon below tolerance)
Converged in 7 iterations and 16 HDFE sub-iterations (tol = 1.0
> e-08)

HDFE PPML regression                              No. of obs   
>    =                                                         
>         129,600
Absorbing 2 HDFE groups                           Residual df  
>    =                                                         
>          22,046
Statistics robust to heteroskedasticity           Wald chi2(2) 
>    =                                                         
>           39.84
Deviance             =  658193.6762               Prob > chi2  
>    =                                                         
>          0.0000
Log pseudolikelihood = -752372.7674               Pseudo R2    
>    =                                                         
>          0.9883

Number of clusters (flow_id)=     22,047
                           (Std. err. adjusted for 22,047 clust
> ers in flow_id)
---------------------------------------------------------------
> ---------------
             |               Robust
          n2 | Coefficient  std. err.      z    P>|z|     [95% 
> con                                                          
>    f. interval]
-------------+-------------------------------------------------
> ---------------
1.out_mult~t |   .0028857    .019154     0.15   0.880    -.0346
> 556                                                          
>        .0404269
1.in_multn~t |  -.0991782   .0157384    -6.30   0.000     -.130
> 025                                                          
>       -.0683315
       _cons |   7.303822   .0000424  1.7e+05   0.000     7.303
> 738                                                          
>        7.303905
---------------------------------------------------------------
> ---------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
        year |         7           1           6     |
     flow_id |     22047       22047           0    *|
-----------------------------------------------------+
* = FE nested within cluster; treated as redundant for DoF comp
> utation
file
    C:/Users/ji252/Documents/GitHub/multnomah-county-tax/resu
    > lts/flows/fig_multnomah_post_n2_acs.png saved as PNG
    format
(dropped 3389 observations that are either singletons or separa
> ted by a fixed effect)
Iteration 1:   deviance = 2.6805e+08  eps = .         iters = 4
>     tol = 1.0e-04                                            
>                    min(eta) =  -3.32  P   
Iteration 2:   deviance = 1.0401e+08  eps = 1.58e+00  iters = 3
>     tol = 1.0e-04                                            
>                    min(eta) =  -4.14      
Iteration 3:   deviance = 9.5891e+07  eps = 8.47e-02  iters = 3
>     tol = 1.0e-04                                            
>                    min(eta) =  -4.78      
Iteration 4:   deviance = 9.5722e+07  eps = 1.77e-03  iters = 2
>     tol = 1.0e-04                                            
>                    min(eta) =  -5.11      
Iteration 5:   deviance = 9.5721e+07  eps = 5.84e-06  iters = 2
>     tol = 1.0e-04                                            
>                    min(eta) =  -5.21      
Iteration 6:   deviance = 9.5721e+07  eps = 9.66e-10  iters = 2
>     tol = 1.0e-05                                            
>                    min(eta) =  -5.22   S  
Iteration 7:   deviance = 9.5721e+07  eps = 2.56e-15  iters = 1
>     tol = 1.0e-07                                            
>                    min(eta) =  -5.22   S  
Iteration 8:   deviance = 9.5721e+07  eps = 0.00e+00  iters = 1
>     tol = 1.0e-09                                            
>                    min(eta) =  -5.22   S O
---------------------------------------------------------------
> ---------------------------------------------
(legend: p: exact partial-out   s: exact solver   h: step-halvi
> ng   o: epsilon below tolerance)
Converged in 8 iterations and 18 HDFE sub-iterations (tol = 1.0
> e-08)

HDFE PPML regression                              No. of obs   
>    =                                                         
>         129,600
Absorbing 2 HDFE groups                           Residual df  
>    =                                                         
>          22,046
Statistics robust to heteroskedasticity           Wald chi2(10)
>    =                                                         
>          511.65
Deviance             =  95721037.43               Prob > chi2  
>    =                                                         
>          0.0000
Log pseudolikelihood = -48521300.98               Pseudo R2    
>    =                                                         
>          0.9838

Number of clusters (flow_id)=     22,047
                           (Std. err. adjusted for 22,047 clust
> ers in flow_id)
---------------------------------------------------------------
> ---------------
             |               Robust
         agi | Coefficient  std. err.      z    P>|z|     [95% 
> con                                                          
>    f. interval]
-------------+-------------------------------------------------
> ---------------
1.out_mult~t |    .116637   .0563226     2.07   0.038     .0062
> 467                                                          
>        .2270274
1.in_multn~t |  -.1908973   .0225148    -8.48   0.000    -.2350
> 255                                                          
>       -.1467691
     unemp_o |   .0379792   .0068692     5.53   0.000     .0245
> 158                                                          
>        .0514425
     unemp_d |  -.0406767   .0051414    -7.91   0.000    -.0507
> 536                                                          
>       -.0305999
       pop_o |  -2.79e-07   6.28e-08    -4.45   0.000    -4.02e
> -07                                                          
>       -1.56e-07
       pop_d |   5.24e-07   8.90e-08     5.89   0.000     3.50e
> -07                                                          
>        6.99e-07
per_capita~o |   7.56e-06   9.75e-07     7.75   0.000     5.65e
> -06                                                          
>        9.47e-06
per_capita~d |   9.16e-07   1.13e-06     0.81   0.417    -1.30e
> -06                                                          
>        3.13e-06
prop_rate_~o |   -.013418   .0062772    -2.14   0.033    -.0257
> 211                                                          
>       -.0011149
prop_rate_~d |   .0080536   .0054192     1.49   0.137    -.0025
> 678                                                          
>         .018675
       _cons |   10.23336   .2129496    48.06   0.000     9.815
> 987                                                          
>        10.65073
---------------------------------------------------------------
> ---------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
        year |         7           1           6     |
     flow_id |     22047       22047           0    *|
-----------------------------------------------------+
* = FE nested within cluster; treated as redundant for DoF comp
> utation
(dropped 3389 observations that are either singletons or separa
> ted by a fixed effect)
Iteration 1:   deviance = 2.7605e+08  eps = .         iters = 4
>     tol = 1.0e-04                                            
>                    min(eta) =  -3.25  P   
Iteration 2:   deviance = 1.1017e+08  eps = 1.51e+00  iters = 3
>     tol = 1.0e-04                                            
>                    min(eta) =  -4.15      
Iteration 3:   deviance = 1.0194e+08  eps = 8.07e-02  iters = 3
>     tol = 1.0e-04                                            
>                    min(eta) =  -4.83      
Iteration 4:   deviance = 1.0178e+08  eps = 1.66e-03  iters = 2
>     tol = 1.0e-04                                            
>                    min(eta) =  -5.17      
Iteration 5:   deviance = 1.0178e+08  eps = 5.36e-06  iters = 2
>     tol = 1.0e-04                                            
>                    min(eta) =  -5.25      
Iteration 6:   deviance = 1.0178e+08  eps = 9.20e-10  iters = 2
>     tol = 1.0e-05                                            
>                    min(eta) =  -5.25   S  
Iteration 7:   deviance = 1.0178e+08  eps = 2.40e-15  iters = 1
>     tol = 1.0e-07                                            
>                    min(eta) =  -5.25   S  
Iteration 8:   deviance = 1.0178e+08  eps = 1.34e-16  iters = 1
>     tol = 1.0e-09                                            
>                    min(eta) =  -5.25   S O
---------------------------------------------------------------
> ---------------------------------------------
(legend: p: exact partial-out   s: exact solver   h: step-halvi
> ng   o: epsilon below tolerance)
Converged in 8 iterations and 18 HDFE sub-iterations (tol = 1.0
> e-08)

HDFE PPML regression                              No. of obs   
>    =                                                         
>         129,600
Absorbing 2 HDFE groups                           Residual df  
>    =                                                         
>          22,046
Statistics robust to heteroskedasticity           Wald chi2(2) 
>    =                                                         
>           79.19
Deviance             =  101775047.8               Prob > chi2  
>    =                                                         
>          0.0000
Log pseudolikelihood = -51548306.18               Pseudo R2    
>    =                                                         
>          0.9827

Number of clusters (flow_id)=     22,047
                           (Std. err. adjusted for 22,047 clust
> ers in flow_id)
---------------------------------------------------------------
> ---------------
             |               Robust
         agi | Coefficient  std. err.      z    P>|z|     [95% 
> con                                                          
>    f. interval]
-------------+-------------------------------------------------
> ---------------
1.out_mult~t |   .1151791   .0612446     1.88   0.060    -.0048
> 582                                                          
>        .2352163
1.in_multn~t |  -.1994398   .0231161    -8.63   0.000    -.2447
> 464                                                          
>       -.1541331
       _cons |   11.16124   .0001579  7.1e+04   0.000     11.16
> 093                                                          
>        11.16155
---------------------------------------------------------------
> ---------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
        year |         7           1           6     |
     flow_id |     22047       22047           0    *|
-----------------------------------------------------+
* = FE nested within cluster; treated as redundant for DoF comp
> utation
file
    C:/Users/ji252/Documents/GitHub/multnomah-county-tax/resu
    > lts/flows/fig_multnomah_post_agi_acs.png saved as PNG
    format
1003 1015 1097 4005 4013 4025 5007 5119 5143 6001 6007 6013 601
> 7 6019 6023 6025 6029 6031 6037 6039 6041 6047 6055 6059 6061
>  6065 6067 6071 6073 6075 6077 6079 6081 6083 6085 6087 6089 
> 6095 6097 6099 6107 6111 6113 8069 10001 10003 10005 11001 12
> 001 12009 12011 12015 12017 12019 12021 12031 12033 12053 120
> 57 12061 12071 12073 12081 12083 12085 12091 12095 12097 1209
> 9 12101 12103 12105 12111 12113 12115 12117 13015 13021 13045
>  13051 13057 13059 13063 13067 13073 13077 13097 13113 13117 
> 13135 13139 13151 13185 13223 13245 13313 16019 17031 17043 1
> 7089 17097 17111 17113 17119 17143 17161 17167 17179 17197 18
> 003 18019 18035 18039 18063 18081 18089 18091 18095 18097 181
> 05 18127 18141 18157 18163 18167 19013 19103 19113 19163 2004
> 5 20091 20209 21015 21067 21111 21117 21227 22005 22017 22033
>  22055 22071 22073 22103 23001 23011 24003 24005 24013 24015 
> 24017 24021 24025 24027 24031 24033 24510 25003 25025 26005 2
> 6021 26065 26075 26077 26081 26093 26099 26115 26121 26125 26
> 139 26145 26147 26161 26163 27003 27037 27053 27109 27123 271
> 63 28033 28047 28059 29095 29099 29183 29189 29510 31055 3110
> 9 31153 32003 32031 34003 34005 34007 34013 34015 34017 34019
>  34021 34023 34025 34027 34029 34031 34035 34037 34039 34041 
> 35013 35043 36001 36005 36013 36029 36047 36055 36059 36061 3
> 6063 36071 36075 36081 36083 36085 36087 36089 36091 36093 36
> 103 36109 37001 37019 37021 37035 37051 37057 37063 37067 370
> 71 37081 37085 37119 37135 37147 37151 37159 37183 37191 3801
> 7 39003 39017 39023 39035 39041 39045 39049 39057 39061 39089
>  39093 39103 39109 39113 39133 39139 39153 39165 39169 40017 
> 40027 40109 41005 41019 41029 41039 41047 41051 41067 42003 4
> 2011 42017 42019 42021 42027 42029 42043 42045 42049 42051 42
> 071 42075 42085 42089 42091 42101 42107 42129 42133 44003 440
> 07 44009 45083 47009 47037 47065 47149 47157 47187 47189 4802
> 7 48029 48039 48041 48061 48085 48091 48113 48121 48135 48139
>  48141 48157 48167 48183 48187 48201 48209 48215 48245 48251 
> 48257 48303 48309 48329 48339 48355 48367 48375 48381 48423 4
> 8439 48441 48451 48453 48479 48485 48491 49011 49035 49049 49
> 053 49057 51013 51041 51087 51107 51510 51650 51700 51760 518
> 10 53011 53033 53035 53053 53061 53063 53067 53073 53077 5500
> 9 55025 55059 55063 55073 55079 55087 55101 55105 55117 55127
>  55133 55139

*** DEBUG MODE: Sampling 50 random counties (plus Multnomah) **
> *

Number of observations (_N) was 0, now 386.
(386 missing values generated)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(335 observations deleted)
5007 6007 6013 6031 6037 6041 6071 6111 6113 10003 12019 12057 
> 13067 13117 17089 17113 17161 18035 19103 19113 20045 21111 2
> 4015 26005 26065 26145 27053 28047 34019 34041 35013 35043 36
> 091 37021 37051 39035 39041 39045 39103 41051 41067 42091 471
> 49 48085 48091 48187 48381 48491 53035 55073 55101
DEBUG: Running regressions for 51 counties (sampled from 386) (
> acs sample)...
(file C:\Users\ji252\AppData\Local\Temp\ST_828_000005.tmp not
    found)

==========================================
Multnomah County Results:
==========================================

    Variable |        Obs        Mean    Std. dev.       Min   
>      Max
-------------+-------------------------------------------------
> --------
       b_out |          1     .116637           .    .116637   
>  .116637
       t_out |          1    2.070873           .   2.070873   
> 2.070873
        b_in |          1   -.1908973           .  -.1908973  -
> .1908973
        t_in |          1   -8.478744           .  -8.478744  -
> 8.478744
pctile_b_out |          1    98.03922           .   98.03922   
> 98.03922
-------------+-------------------------------------------------
> --------
pctile_t_out |          1    98.03922           .   98.03922   
> 98.03922
 pctile_b_in |          1    11.76471           .   11.76471   
> 11.76471
 pctile_t_in |          1    5.882353           .   5.882353   
> 5.882353

Distribution of coefficients (all counties):

          Out-migration coefficient (County x Post)
-------------------------------------------------------------
      Percentiles      Smallest
 1%    -1.085196      -1.085196
 5%    -.2982568      -.3142822
10%    -.2140841      -.2982568       Obs                  51
25%    -.1398995      -.2641376       Sum of wgt.          51

50%    -.0809548                      Mean          -.0969713
                        Largest       Std. dev.      .1736525
75%    -.0274022       .0827278
90%     .0597266       .0850695       Variance       .0301552
95%     .0850695        .116637       Skewness      -3.599831
99%     .1654969       .1654969       Kurtosis       21.78394

          In-migration coefficient (County x Post)
-------------------------------------------------------------
      Percentiles      Smallest
 1%    -.3479243      -.3479243
 5%    -.2246167        -.25041
10%    -.1908973      -.2246167       Obs                  51
25%    -.1022107      -.2201321       Sum of wgt.          51

50%    -.0567471                      Mean           -.049418
                        Largest       Std. dev.      .1144192
75%     .0085893       .1243257
90%     .0529052       .1767142       Variance       .0130918
95%     .1767142       .2106411       Skewness       .2173722
99%     .2645486       .2645486       Kurtosis       3.832265

Distribution of t-stats (all counties):

                  Out-migration t-statistic
-------------------------------------------------------------
      Percentiles      Smallest
 1%    -12.57733      -12.57733
 5%    -6.612787      -8.190372
10%    -5.895919      -6.612787       Obs                  51
25%    -3.853351      -6.549831       Sum of wgt.          51

50%    -1.652136                      Mean          -2.121933
                        Largest       Std. dev.      2.863281
75%    -.4845576       1.445995
90%     1.208287       2.016212       Variance       8.198376
95%     2.016212       2.070873       Skewness       -1.02686
99%     3.243918       3.243918       Kurtosis       5.132142

                  In-migration t-statistic
-------------------------------------------------------------
      Percentiles      Smallest
 1%    -10.89214      -10.89214
 5%    -8.478744      -9.035348
10%    -5.477742      -8.478744       Obs                  51
25%    -3.008746      -6.274827       Sum of wgt.          51

50%    -1.398889                      Mean          -1.703595
                        Largest       Std. dev.      3.044666
75%     .1468206       2.409428
90%     1.649559       2.468509       Variance       9.269991
95%     2.468509       3.162416       Skewness      -.7348252
99%     5.087091       5.087091       Kurtosis       4.056843
  variable multnomah was float now byte
  variable rank_b_out was float now byte
  variable rank_b_in was float now byte
  variable rank_t_out was float now byte
  variable rank_t_in was float now byte
  (765 bytes saved)
file
    C:/Users/ji252/Documents/GitHub/multnomah-county-tax/data
    > /working/county_flow_coefficients_acs.dta saved
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/data/
> working/county_flow_coefficients_acs.csv saved
County coefficients saved to C:/Users/ji252/Documents/GitHub/mu
> ltnomah-county-tax/data/working/county_flow_coefficients_acs.
> dta
(bin=50, start=-1.085196, width=.02501386)
file
    C:/Users/ji252/Documents/GitHub/multnomah-county-tax/resu
    > lts/flows/fig_hist_out_b_acs.png saved as PNG format
(bin=50, start=-.34792426, width=.01224946)
file
    C:/Users/ji252/Documents/GitHub/multnomah-county-tax/resu
    > lts/flows/fig_hist_in_b_acs.png saved as PNG format
file
    C:/Users/ji252/Documents/GitHub/multnomah-county-tax/resu
    > lts/flows/fig_scatter_out_in_b_acs.png saved as PNG
    format
(bin=50, start=-12.577332, width=.31642498)
file
    C:/Users/ji252/Documents/GitHub/multnomah-county-tax/resu
    > lts/flows/fig_hist_out_t_acs.png saved as PNG format
(bin=50, start=-10.892142, width=.31958467)
file
    C:/Users/ji252/Documents/GitHub/multnomah-county-tax/resu
    > lts/flows/fig_hist_in_t_acs.png saved as PNG format
file
    C:/Users/ji252/Documents/GitHub/multnomah-county-tax/resu
    > lts/flows/fig_scatter_out_in_t_acs.png saved as PNG
    format

          Out-migration coefficient (County x Post)
-------------------------------------------------------------
      Percentiles      Smallest
 1%    -1.085196      -1.085196
 5%    -.2982568      -.3142822
10%    -.2140841      -.2982568       Obs                  51
25%    -.1398995      -.2641376       Sum of wgt.          51

50%    -.0809548                      Mean          -.0969713
                        Largest       Std. dev.      .1736525
75%    -.0274022       .0827278
90%     .0597266       .0850695       Variance       .0301552
95%     .0850695        .116637       Skewness      -3.599831
99%     .1654969       .1654969       Kurtosis       21.78394

          In-migration coefficient (County x Post)
-------------------------------------------------------------
      Percentiles      Smallest
 1%    -.3479243      -.3479243
 5%    -.2246167        -.25041
10%    -.1908973      -.2246167       Obs                  51
25%    -.1022107      -.2201321       Sum of wgt.          51

50%    -.0567471                      Mean           -.049418
                        Largest       Std. dev.      .1144192
75%     .0085893       .1243257
90%     .0529052       .1767142       Variance       .0130918
95%     .1767142       .2106411       Skewness       .2173722
99%     .2645486       .2645486       Kurtosis       3.832265

                  Out-migration t-statistic
-------------------------------------------------------------
      Percentiles      Smallest
 1%    -12.57733      -12.57733
 5%    -6.612787      -8.190372
10%    -5.895919      -6.612787       Obs                  51
25%    -3.853351      -6.549831       Sum of wgt.          51

50%    -1.652136                      Mean          -2.121933
                        Largest       Std. dev.      2.863281
75%    -.4845576       1.445995
90%     1.208287       2.016212       Variance       8.198376
95%     2.016212       2.070873       Skewness       -1.02686
99%     3.243918       3.243918       Kurtosis       5.132142

                  In-migration t-statistic
-------------------------------------------------------------
      Percentiles      Smallest
 1%    -10.89214      -10.89214
 5%    -8.478744      -9.035348
10%    -5.477742      -8.478744       Obs                  51
25%    -3.008746      -6.274827       Sum of wgt.          51

50%    -1.398889                      Mean          -1.703595
                        Largest       Std. dev.      3.044666
75%     .1468206       2.409428
90%     1.649559       2.468509       Variance       9.269991
95%     2.468509       3.162416       Skewness      -.7348252
99%     5.087091       5.087091       Kurtosis       4.056843
file C:\Users\ji252\AppData\Local\Temp\ST_828_000007.tmp
    saved as .dta format
Number of observations (_N) was 0, now 40.
(40 missing values generated)
(40 missing values generated)
(40 missing values generated)
variable stat_name was str1 now str7
(1 real change made)
(1 real change made)
variable stat_description was str1 now str35
(1 real change made)
variable stat_name was str7 now str8
(1 real change made)
(1 real change made)
variable stat_description was str35 now str38
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
variable stat_name was str8 now str14
(1 real change made)
(1 real change made)
variable stat_description was str38 now str39
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
variable stat_description was str39 now str42
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
variable stat_name was str14 now str15
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
variable stat_description was str42 now str54
(1 real change made)
variable stat_name was str15 now str16
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 observation deleted)
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/resul
> ts/flows/flow_analysis_stats.xlsx saved
Exported descriptive statistics to flow_analysis_stats.xlsx, sh
> eet: acs

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                                51  
    -----------------------------------------
already preserved
r(621);

end of do-file

r(621);

. do "C:\Users\ji252\AppData\Local\Temp\STD828_000003.tmp"

. /************************************************************
> *******************
> File Name:              02_flow_analysis.do
> Creator:                John Iselin
> Date Update:    January 31, 2026
> 
> Called by: 00_multnomah.do
> 
> Purpose: Perform flow-based analysis on IRS data.
> 
> Outputs:
> All outputs are produced twice: once for all counties and onc
> e for ACS counties
> only (with _acs suffix). ACS sample includes property tax rat
> e controls.
> 
> - county_flow_coefficients[_acs].dta/csv: flow coefficients f
> or all counties
>   (b_out, b_in, se_out, se_in, t-stats, p-values, percentile 
> ranks)
> - fig_multnomah_post_*[_acs].png: flow coefficient plots for 
> Multnomah
> - fig_hist_out_*[_acs].png: Histogram of out-migration coeffi
> cients (with percentile)
> - fig_hist_in_*[_acs].png: Histogram of in-migration coeffici
> ents (with percentile)
> - fig_scatter_out_in_*[_acs].png: Scatter plot of out vs in c
> oefficients
> - fig_multnomah_out_*[_acs].png: Event study plots for out-mi
> gration
> - fig_multnomah_in_*[_acs].png: Event study plots for in-migr
> ation
> - fig_multnomah_both_*[_acs].png: Combined event study plots
> 
> Excel output (flow_analysis_stats.xlsx):
> - all/acs: Summary statistics for Multnomah and distribution
> - larger_out_all/acs: Counties with larger out-migration coef
> ficients
> - smaller_in_all/acs: Counties with smaller in-migration coef
> ficients
> - worse_both_all/acs: Counties worse on both dimensions
> - larger_t_out_all/acs: Counties with larger out-migration t-
> statistics
> - smaller_t_in_all/acs: Counties with smaller in-migration t-
> statistics
> 
> Debug mode:
> - Set local debug = 1 to run on a random subset of counties f
> or faster testing
> - Set local debug_n to control the number of random counties 
> (default: 50)
> - Multnomah County is always included in the debug sample
> - Set debug = 0 for full production runs
> 
> Authors: John Iselin
> 
> For more information, contact john.iselin@yale.edu
> 
> *************************************************************
> ******************/
. 
. 
. ** Start log file
. capture log close log_02

. log using "${logs}02_log_flow_${date}", replace text name(log
> _02)
---------------------------------------------------------------
      name:  log_02
       log:  C:/Users/ji252/Documents/GitHub/multnomah-county-t
> ax/code/logs/02_log_flow_2026-01-30.log
  log type:  text
 opened on:  31 Jan 2026, 09:49:55

. 
. ** Parameters
. local reps = 100

. 
. ** Debug mode: set to 1 to run on a random subset of counties
>  for faster testing
. ** Set to 0 for full production run
. local debug = 1

. local debug_n = 50  // Number of random counties to sample in
>  debug mode (plus Multnomah)

. 
. ** Load ACS data to get the set of counties
. use "${data}working/acs_county_gross_18plus", clear

. 
. ** Keep required variables
. keep year fips

. 
. ** Keep only always-observed fips
. bysort fips: gen ct = _N

. tab ct

         ct |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |        168        3.48        3.48
          7 |        287        5.95        9.43
         10 |      4,370       90.57      100.00
------------+-----------------------------------
      Total |      4,825      100.00

. keep if ct == 10
(455 observations deleted)

. 
. ** Keep fips
. keep fips

. 
. ** Drop duplicates
. duplicates drop

Duplicates in terms of all variables

(3,933 observations deleted)

. 
. ** Save to tempfile
. tempfile acs_fips

. save `acs_fips'
file C:\Users\ji252\AppData\Local\Temp\ST_828_000001.tmp
    saved as .dta format

. clear

. 
. ** Load IRS Data
. use "${data}working/irs_county_flow.dta", clear

. 
. ** Sample restrictions
. drop if inlist(state_fips_o, 2, 15)     // Alaska and Hawaii
(3,109 observations deleted)

. drop if inlist(state_fips_d, 2, 15)     // Alaska and Hawaii
(2,293 observations deleted)

. 
. ** Clean up variables
. drop fips

. 
. ** Mover indicators
. gen mover = fips_o != fips_d

. 
. ** Generate flow id
. egen flow_id = group(fips_d fips_o)

. 
. ** Declare panel and fill in missing values
. xtset flow_id year

Panel variable: flow_id (unbalanced)
 Time variable: year, 2016 to 2022, but with gaps
         Delta: 1 unit

. tsfill, full

. 
. ** Keep required variables
. keep fips_d fips_o flow_id year mover n1 n2 agi

. 
. ** Replace with 0s
. replace n1 = 0 if missing(n1)
(140,172 real changes made)

. replace n2 = 0 if missing(n2)
(140,172 real changes made)

. replace agi = 0 if missing(agi)
(140,172 real changes made)

. replace agi = 0 if agi < 0
(89 real changes made)

. 
. ** Merge with time-varying controls
. 
. ** Keep if in donor pool in both origin and destination
. foreach x in "o" "d" {
  2. 
.         ** Fill in missing fips
.         bysort flow_id: egen tmp = mean(fips_`x')
  3.         replace fips_`x' = tmp if missing(fips_`x')
  4.         drop tmp
  5. 
.         ** Merge with relevent variables
.         gen fips = fips_`x'
  6.         merge m:1 fips using "${data}working/ids",        
>                                       ///
>                 keep(match) gen(merge_ids_`x')
  7.         merge m:1 year fips using "${data}working/bls_unem
> ployment",    ///
>                 keep(match) gen(merge_bls_`x')
  8.         merge m:1 year fips using "${data}working/bea_econ
> omics",               ///
>                 keep(match) gen(merge_bea_`x')
  9.         merge m:1 fips using `acs_fips', keep(master match
> ) gen(merge_acs_`x')
 10.         merge m:1 year fips using "${data}working/property
> _tax_rates_overall", ///
>                 gen(proptx_merge_`x') keep(master match) keep
> using(prop_rate_mean )
 11. 
.         ** Rename
.         rename state_name state_name_`x'
 12.         rename state_fips state_fips_`x'
 13.         rename county_name county_name_`x'
 14.         rename county_fips county_fips_`x'
 15.         rename unemp unemp_`x'
 16.         rename population pop_`x'
 17.         rename per_capita_income per_capita_income_`x'
 18.         rename prop_rate_mean prop_rate_mean_`x'
 19.         drop fips
 20. 
. } // END ORIGIN-DESTINATION LOOP
(140,172 real changes made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                           497,448  (merge_ids_o==3)
    -----------------------------------------
(variable fips was float, now double to accommodate using
       data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                           491,939  (merge_bls_o==3)
    -----------------------------------------

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                           484,407  (merge_bea_o==3)
    -----------------------------------------

    Result                      Number of obs
    -----------------------------------------
    Not matched                       202,846
        from master                   202,846  (merge_acs_o==1)
        from using                          0  (merge_acs_o==2)

    Matched                           281,561  (merge_acs_o==3)
    -----------------------------------------

    Result                      Number of obs
    -----------------------------------------
    Not matched                       189,234
        from master                   189,234  (proptx_merge_o=
> =1)
        from using                          0  (proptx_merge_o=
> =2)

    Matched                           295,173  (proptx_merge_o=
> =3)
    -----------------------------------------
(136,291 real changes made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                           484,407  (merge_ids_d==3)
    -----------------------------------------
(variable fips was float, now double to accommodate using
       data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                           480,970  (merge_bls_d==3)
    -----------------------------------------

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                           475,524  (merge_bea_d==3)
    -----------------------------------------

    Result                      Number of obs
    -----------------------------------------
    Not matched                       207,879
        from master                   207,879  (merge_acs_d==1)
        from using                          0  (merge_acs_d==2)

    Matched                           267,645  (merge_acs_d==3)
    -----------------------------------------

    Result                      Number of obs
    -----------------------------------------
    Not matched                       193,163
        from master                   193,163  (proptx_merge_d=
> =1)
        from using                          0  (proptx_merge_d=
> =2)

    Matched                           282,361  (proptx_merge_d=
> =3)
    -----------------------------------------

. 
. ** Tag flows to-and-from acs counties
. gen acs_flow = merge_acs_d == 3 & merge_acs_o == 3

. label var acs_flow "Flows to and from ACS counties"

. 
. ** Multnomah indicators
. gen out_multnomah = (state_fips_o == 41 & county_fips_o == 51
> )

. gen in_multnomah = (state_fips_d == 41 & county_fips_d == 51)

. 
. ** Post-indicators
. gen post = year > 2020

. 
. ** Interactions
. gen in_multnomah_post = in_multnomah * post

. gen out_multnomah_post = out_multnomah * post

. 
. ** Create interactions manually (base year = 2020)
. forvalues y = 2016/2022 {
  2.         gen x_out_`y' = out_multnomah * (year == `y')
  3.         gen x_in_`y' = in_multnomah * (year == `y')
  4. }

. 
. ** Drop base year (2020)
. drop x_out_2020 x_in_2020

. 
. ** Save main analysis dataset to tempfile
. tempfile main_data

. save `main_data'
file C:\Users\ji252\AppData\Local\Temp\ST_828_000002.tmp
    saved as .dta format

. 
. *************************************************************
> *******************
. ** MAIN ANALYSIS LOOP: Run regressions for (1) all counties, 
> (2) ACS counties
. ** The second iteration restricts to flows where acs_flow == 
> 1 and adds
. ** property tax rate controls (prop_rate_mean_o and prop_rate
> _mean_d)
. *************************************************************
> *******************
. 
. foreach sample in "acs" "all" {
  2. 
.         ** Set sample-specific parameters
.         if "`sample'" == "all" {
  3.                 local sample_cond ""
  4.                 local covars "unemp_* pop_* per_capita_inc
> ome_*"
  5.                 local file_suffix ""
  6.                 local title_suffix ""
  7.         }
  8.         else if "`sample'" == "acs" {
  9.                 local sample_cond "& acs_flow == 1"
 10.                 local covars "unemp_* pop_* per_capita_inc
> ome_* prop_rate_mean_o prop_rate_mean_d"
 11.                 local file_suffix "_acs"
 12.                 local title_suffix " (ACS Counties)"
 13.         }
 14. 
.         dis ""
 15.         dis "=============================================
> ==========================="
 16.         dis "RUNNING ANALYSIS FOR SAMPLE: `sample'"
 17.         dis "Sample condition: `sample_cond'"
 18.         dis "Covariates: `covars'"
 19.         dis "=============================================
> ==========================="
 20.         dis ""
 21. 
. *************************************************************
> *******************
. ** REGRESSION 1: Multnomah X Post (flow DID)
. *************************************************************
> *******************
. 
. ** Load main data
. use `main_data', clear
 22. 
. ** Loop over outcome variables
. foreach outcome in n1 n2 agi {
 23. 
.         ** Set outcome label for graphs
.         if "`outcome'" == "n1" local outcome_label "Number of
>  Returns"
 24.         if "`outcome'" == "n2" local outcome_label "Number
>  of Exemptions"
 25.         if "`outcome'" == "agi" local outcome_label "Adjus
> ted Gross Income"
 26. 
.         ** Regression 1a: With covariates
.         ppmlhdfe `outcome' i.out_multnomah_post i.in_multnoma
> h_post     ///
>                 `covars'                                     
>                                                              
>       ///
>                 if mover == 1 `sample_cond',                 
>                                            ///
>                 absorb(year flow_id) vce(cluster flow_id)
 27.         estimates store `outcome'_with_covars
 28. 
.         ** Regression 1b: Without covariates
.         ppmlhdfe `outcome' i.out_multnomah_post i.in_multnoma
> h_post     ///
>                 if mover == 1 `sample_cond',                 
>                                            ///
>                 absorb(year flow_id) vce(cluster flow_id)
 29.         estimates store `outcome'_no_covars
 30. 
.         ** Plot both regressions
.         coefplot        (`outcome'_with_covars, label("With C
> ovariates")        ///
>                                         mc(navy) ciopts(lc(na
> vy)))                                              ///
>                                 (`outcome'_no_covars, label("
> Without Covariates")       ///
>                                         mc(maroon) ciopts(lc(
> maroon))),                                 ///
>                 keep(1.out_multnomah_post 1.in_multnomah_post
> )                          ///
>                 ciopts(recast(rcap))                         
>                                                    ///
>                 yline(0, lc(gs10) lp(dash))                  
>                                            ///
>                 xline(0, lc(gs10) lp(dash))                  
>                                            ///
>                 coeflabels(     1.out_multnomah_post = "Out-m
> igration"                  ///
>                                         1.in_multnomah_post =
>  "In-migration")                   ///
>                 ytitle("Coefficient")                        
>                                                    ///
>                 xtitle("")                                   
>                                                              
>       ///
>                 legend(pos(6) rows(1))                       
>                                                    ///
>                 title("Migration Flows: Multnomah County x Po
> st`title_suffix'") ///
>                 subtitle("`outcome_label'")                  
>                                                    ///
>                 graphregion(color(white))
 31. 
.         graph export "${results}flows/fig_multnomah_post_`out
> come'`file_suffix'.png", replace
 32. 
. 
. } // END OUTCOME LOOP
 33. 
. *************************************************************
> *******************
. ** REGRESSION 1b: Loop over all counties (Permutation-style a
> nalysis)
. ** Purpose: Run same flow regression for each county to creat
> e distribution
. **          of treatment effects for comparison with Multnoma
> h
. *************************************************************
> *******************
. 
. ** Load main data fresh for permutation analysis
. use `main_data', clear
 34. 
. ** Get list of unique origin fips codes (respecting sample co
> ndition)
. if "`sample'" == "all" {
 35.         levelsof fips_o, local(fips_list)
 36. }
 37. else {
 38.         levelsof fips_o if acs_flow == 1, local(fips_list)
 39. }
 40. local n_fips_full : word count `fips_list'
 41. 
. ** Debug mode: randomly sample a subset of counties (always i
> nclude Multnomah)
. if `debug' == 1 {
 42.         dis ""
 43.         dis "*** DEBUG MODE: Sampling `debug_n' random cou
> nties (plus Multnomah) ***"
 44.         dis ""
 45. 
.         ** Save current data
.         tempfile main_data_tmp
 46.         save `main_data_tmp'
 47. 
.         ** Create dataset with all fips codes for sampling
.         clear
 48.         local n_fips_tmp : word count `fips_list'
 49.         set obs `n_fips_tmp'
 50.         gen fips = .
 51.         local i = 1
 52.         foreach f of local fips_list {
 53.                 replace fips = `f' in `i'
 54.                 local i = `i' + 1
 55.         }
 56. 
.         ** Tag Multnomah (always include)
.         gen multnomah = (fips == 41051)
 57. 
.         ** Generate random number for sampling
.         set seed 12345  // For reproducibility; change or rem
> ove for different random samples
 58.         gen random = runiform()
 59. 
.         ** Sort: Multnomah first, then random order
.         gsort -multnomah random
 60. 
.         ** Keep Multnomah + debug_n random counties
.         keep if _n <= `debug_n' + 1 | multnomah == 1
 61. 
.         ** Extract new fips list
.         levelsof fips, local(fips_list)
 62. 
.         ** Reload main data
.         use `main_data_tmp', clear
 63. }
 64. 
. local n_fips : word count `fips_list'
 65. if `debug' == 1 {
 66.         dis "DEBUG: Running regressions for `n_fips' count
> ies (sampled from `n_fips_full') (`sample' sample)..."
 67. }
 68. else {
 69.         dis "Running regressions for `n_fips' counties (`s
> ample' sample)..."
 70. }
 71. 
. ** Initialize tempfile to store results
. tempfile county_results
 72. postfile county_coefs fips b_out se_out b_in se_in using `
> county_results', replace
 73. 
. ** Counter for display
. local ct = 1
 74. 
. foreach f of local fips_list {
 75. 
.         ** Display status every 100 counties
.         if mod(`ct', 100) == 0 {
 76.                 dis "Processing county `ct' of `n_fips' (f
> ips = `f')..."
 77.         }
 78. 
.         ** Generate treatment vars
.         gen out_tmp = fips_o == `f'
 79.         gen in_tmp = fips_d == `f'
 80. 
.         ** Interactions
.         gen out_post_tmp = out_tmp * post
 81.         gen in_post_tmp = in_tmp * post
 82. 
.         ** Run regression with capture to handle potential er
> rors
.         capture {
 83.                 ** Regression: With covariates
.                  ppmlhdfe agi i.out_post_tmp i.in_post_tmp   
>    ///
>                         `covars'                             
>                                                    ///
>                         if mover == 1 `sample_cond',         
>                            ///
>                         absorb(year flow_id) vce(cluster flow
> _id)
 84. 
.                 ** Store coefficients and SEs
.                 local tmp_b_out = _b[1.out_post_tmp]
 85.                 local tmp_se_out = _se[1.out_post_tmp]
 86.                 local tmp_b_in = _b[1.in_post_tmp]
 87.                 local tmp_se_in = _se[1.in_post_tmp]
 88. 
.                 ** Post results
.                 post county_coefs (`f') (`tmp_b_out') (`tmp_s
> e_out') (`tmp_b_in') (`tmp_se_in')
 89.         }
 90. 
.         ** If regression failed, post missing values
.         if _rc != 0 {
 91.                 post county_coefs (`f') (.) (.) (.) (.)
 92.                 dis "Warning: Regression failed for fips `
> f'"
 93.         }
 94. 
. 
.         ** Drop temporary vars
.         drop out_tmp in_tmp out_post_tmp in_post_tmp
 95. 
.         ** Update count
.         local ct = `ct' + 1
 96. 
. } // END FIPS LOOP
 97. 
. ** Close postfile
. postclose county_coefs
 98. 
. ** Load results
. use `county_results', clear
 99. 
. ** Add identifiers
. gen multnomah = (fips == 41051)
100. label var fips "County FIPS code"
101. label var b_out "Out-migration coefficient (County x Post)
> "
102. label var se_out "Out-migration SE"
103. label var b_in "In-migration coefficient (County x Post)"
104. label var se_in "In-migration SE"
105. label var multnomah "Multnomah County indicator"
106. 
. ** Calculate t-statistics and p-values
. gen t_out = b_out / se_out
107. gen t_in = b_in / se_in
108. gen p_out = 2 * (1 - normal(abs(t_out)))
109. gen p_in = 2 * (1 - normal(abs(t_in)))
110. 
. label var t_out "Out-migration t-statistic"
111. label var t_in "In-migration t-statistic"
112. label var p_out "Out-migration p-value"
113. label var p_in "In-migration p-value"
114. 
. ** Calculate percentile ranks for Multnomah
. foreach x in "b" "t" {
115.         egen rank_`x'_out = rank(`x'_out)
116.         egen rank_`x'_in = rank(`x'_in)
117.         qui count if !missing(`x'_out)
118.         gen pctile_`x'_out = 100 * rank_`x'_out / r(N)
119.         qui count if !missing(`x'_in)
120.         gen pctile_`x'_in = 100 * rank_`x'_in / r(N)
121. 
. }
122. 
. label var pctile_b_out "Percentile rank of out-migration coef
> "
123. label var pctile_b_in "Percentile rank of in-migration coe
> f"
124. label var pctile_t_out "Percentile rank of out-migration t
> -stat"
125. label var pctile_t_in "Percentile rank of in-migration t-s
> tat"
126. 
. ** Display Multnomah's position
. dis ""
127. dis "=========================================="
128. dis "Multnomah County Results:"
129. dis "=========================================="
130. summ b_out t_out b_in t_in pctile_*_out pctile_*_in if mul
> tnomah == 1
131. 
. ** Display distribution summary
. dis ""
132. dis "Distribution of coefficients (all counties):"
133. summ b_out b_in, detail
134. 
. dis ""
135. dis "Distribution of t-stats (all counties):"
136. summ t_out t_in, detail
137. 
. ** Save county coefficients dataset
. compress
138. save "${data}working/county_flow_coefficients`file_suffix'
> .dta", replace
139. export delimited using "${data}working/county_flow_coeffic
> ients`file_suffix'.csv", replace
140. 
. dis "County coefficients saved to ${data}working/county_flow_
> coefficients`file_suffix'.dta"
141. 
. *************************************************************
> *******************
. ** SECTION: Multnomah vs Distribution Plots (Histogram Compar
> ison)
. ** Purpose: Plot Multnomah's coefficients against distributio
> n of all counties
. *************************************************************
> *******************
. 
. ** Load the county coefficients (already in memory, but reloa
> d for clarity)
. use "${data}working/county_flow_coefficients`file_suffix'.dta
> ", clear
142. 
. ** Loop over beta and t-stats
. foreach x in "b" "t" {
143. 
.         ** Label
.         if "`x'" == "b" local txt "Coefficients"
144.         else if "`x'" == "t" local txt = "T-Statistics"
145. 
.         ** Store Multnomah's coefficients for reference lines
.         summ `x'_out if multnomah == 1, meanonly
146.         local multnomah_`x'_out = r(mean)
147.         summ `x'_in if multnomah == 1, meanonly
148.         local multnomah_`x'_in = r(mean)
149.         summ pctile_`x'_out if multnomah == 1, meanonly
150.         local multnomah_pctile_out = r(mean)
151.         summ pctile_`x'_in if multnomah == 1, meanonly
152.         local multnomah_pctile_in = r(mean)
153. 
. 
.         ** Plot 1: Out-migration coefficient distribution wit
> h Multnomah
.         histogram `x'_out if !missing(`x'_out),              
>                                                    ///
>                 bin(50)                                      
>                                                              
>               ///
>                 fcolor(navy%50) lcolor(navy)                 
>                                                    ///
>                 xline(`multnomah_`x'_out', lcolor(red) lwidth
> (thick) lpattern(solid)) ///
>                 xtitle("Out-migration `txt' (County x Post)")
>                    ///
>                 ytitle("Frequency")                          
>                                                            //
> /
>                 title("Distribution of Out-Migration `txt'`ti
> tle_suffix'")              ///
>                 subtitle("Red line = Multnomah County (percen
> tile: `: display %4.1f `multnomah_pctile_out'')") ///
>                 graphregion(color(white))
154. 
.         graph export "${results}flows/fig_hist_out_`x'`file_s
> uffix'.png", replace
155. 
.         ** Plot 2: In-migration coefficient distribution with
>  Multnomah
.         histogram `x'_in if !missing(`x'_in),                
>                                                    ///
>                 bin(50)                                      
>                                                              
>               ///
>                 fcolor(maroon%50) lcolor(maroon)             
>                                                    ///
>                 xline(`multnomah_`x'_in', lcolor(red) lwidth(
> thick) lpattern(solid)) ///
>                 xtitle("In-migration `txt' (County x Post)") 
>                            ///
>                 ytitle("Frequency")                          
>                                                            //
> /
>                 title("Distribution of In-Migration `txt'`tit
> le_suffix'")               ///
>                 subtitle("Red line = Multnomah County (percen
> tile: `: display %4.1f `multnomah_pctile_in'')") ///
>                 graphregion(color(white))
156. 
.         graph export "${results}flows/fig_hist_in_`x'`file_su
> ffix'.png", replace
157. 
.         ** Plot 3: Combined scatter of out vs in coefficients
.         twoway  (scatter `x'_in `x'_out if multnomah == 0,   
>                                            ///
>                                 mc(navy%30) ms(O) msize(small
> ))                                                 ///
>                         (scatter `x'_in `x'_out if multnomah 
> == 1,                                              ///
>                                 mc(red) ms(D) msize(large)), 
>                                                    ///
>                 xline(0, lc(gs10) lp(dash))                  
>                                                    ///
>                 yline(0, lc(gs10) lp(dash))                  
>                                                    ///
>                 xtitle("Out-migration `txt'")                
>                                    ///
>                 ytitle("In-migration `txt'")                 
>                                            ///
>                 title("Out- vs In-Migration Effects by County
> `title_suffix'")   ///
>                 legend(order(1 "Other Counties" 2 "Multnomah 
> County") pos(6) rows(1)) ///
>                 graphregion(color(white))
158. 
.         graph export "${results}flows/fig_scatter_out_in_`x'`
> file_suffix'.png", replace
159. 
. 
. } // END BETA / T-STAT LOOP
160. 
. *************************************************************
> *******************
. ** SECTION: Export Descriptive Statistics to Excel
. ** Purpose: Export Multnomah vs Distribution stats to Excel f
> ile
. *************************************************************
> *******************
. 
. ** Get Multnomah's statistics
. 
. ** Loop over migration type
. foreach x in "in" "out" {
161. 
.         summ se_`x' if multnomah == 1, meanonly
162.         local m_se_`x' = r(mean)
163. 
.         summ p_`x' if multnomah == 1, meanonly
164.         local m_p_`x' = r(mean)
165. 
.         ** Loop over beta / t-stat
.         foreach y in "b" "t" {
166. 
.                 summ `y'_`x' if multnomah == 1, meanonly
167.                 local m_`y'_`x' = r(mean)
168. 
.                 summ pctile_`y'_`x' if multnomah == 1, meanon
> ly
169.                 local m_pctile_`y'_`x' = r(mean)
170. 
.         } // END BETA / T-STAT LOOP
171. 
. 
. } // END IN/OUT LOOP
172. 
. ** Count statistics
. qui count if !missing(b_out)
173. local n_counties_out = r(N)
174. qui count if !missing(b_in)
175. local n_counties_in = r(N)
176. qui count if !missing(b_out) & !missing(b_in)
177. local n_counties_both = r(N)
178. 
. ** Count counties with more extreme coefficients than Multnom
> ah
. ** For out-migration: larger (more positive) is "worse"
. ** For in-migration: smaller (more negative) is "worse"
. qui count if b_out > `m_b_out' & !missing(b_out)
179. local n_larger_out = r(N)
180. qui count if b_out > `m_b_out' & !missing(b_out) & p_out <
>  0.05
181. local n_larger_out_sig = r(N)
182. 
. qui count if b_in < `m_b_in' & !missing(b_in)
183. local n_smaller_in = r(N)
184. qui count if b_in < `m_b_in' & !missing(b_in) & p_in < 0.0
> 5
185. local n_smaller_in_sig = r(N)
186. 
. ** Counties with both more out AND less in (worse on both dim
> ensions)
. qui count if b_out > `m_b_out' & b_in < `m_b_in' & !missing(b
> _out) & !missing(b_in)
187. local n_worse_both = r(N)
188. qui count if b_out > `m_b_out' & b_in < `m_b_in' & !missin
> g(b_out) & !missing(b_in) & p_out < 0.05 & p_in < 0.05
189. local n_worse_both_sig = r(N)
190. 
. ** Distribution statistics for out-migration
. summ b_out, detail
191. local dist_out_mean = r(mean)
192. local dist_out_sd = r(sd)
193. local dist_out_min = r(min)
194. local dist_out_max = r(max)
195. local dist_out_p25 = r(p25)
196. local dist_out_p50 = r(p50)
197. local dist_out_p75 = r(p75)
198. 
. ** Distribution statistics for in-migration
. summ b_in, detail
199. local dist_in_mean = r(mean)
200. local dist_in_sd = r(sd)
201. local dist_in_min = r(min)
202. local dist_in_max = r(max)
203. local dist_in_p25 = r(p25)
204. local dist_in_p50 = r(p50)
205. local dist_in_p75 = r(p75)
206. 
. ** Distribution statistics for t-stats
. summ t_out, detail
207. local dist_t_out_mean = r(mean)
208. local dist_t_out_sd = r(sd)
209. local dist_t_out_p50 = r(p50)
210. 
. summ t_in, detail
211. local dist_t_in_mean = r(mean)
212. local dist_t_in_sd = r(sd)
213. local dist_t_in_p50 = r(p50)
214. 
. ** Save county coefficients to tempfile for later use in expo
> rt sheets
. tempfile county_coefs_for_export
215. save `county_coefs_for_export'
216. 
. ** Create a new dataset with the statistics
. clear
217. set obs 40
218. 
. ** Create variables
. gen stat_name = ""
219. gen stat_value = .
220. gen stat_description = ""
221. 
. ** Row counter
. local row = 1
222. 
. ** ==========================================================
> ==================
. ** MULTNOMAH STATISTICS
. ** ==========================================================
> ==================
. 
. replace stat_name = "m_b_out" in `row'
223. replace stat_value = `m_b_out' in `row'
224. replace stat_description = "Multnomah out-migration coeffi
> cient" in `row'
225. local row = `row' + 1
226. 
. replace stat_name = "m_se_out" in `row'
227. replace stat_value = `m_se_out' in `row'
228. replace stat_description = "Multnomah out-migration standa
> rd error" in `row'
229. local row = `row' + 1
230. 
. replace stat_name = "m_t_out" in `row'
231. replace stat_value = `m_t_out' in `row'
232. replace stat_description = "Multnomah out-migration t-stat
> istic" in `row'
233. local row = `row' + 1
234. 
. replace stat_name = "m_p_out" in `row'
235. replace stat_value = `m_p_out' in `row'
236. replace stat_description = "Multnomah out-migration p-valu
> e" in `row'
237. local row = `row' + 1
238. 
. replace stat_name = "m_pctile_b_out" in `row'
239. replace stat_value = `m_pctile_b_out' in `row'
240. replace stat_description = "Multnomah out-migration percen
> tile rank" in `row'
241. local row = `row' + 1
242. 
. replace stat_name = "m_b_in" in `row'
243. replace stat_value = `m_b_in' in `row'
244. replace stat_description = "Multnomah in-migration coeffic
> ient" in `row'
245. local row = `row' + 1
246. 
. replace stat_name = "m_se_in" in `row'
247. replace stat_value = `m_se_in' in `row'
248. replace stat_description = "Multnomah in-migration standar
> d error" in `row'
249. local row = `row' + 1
250. 
. replace stat_name = "m_t_in" in `row'
251. replace stat_value = `m_t_in' in `row'
252. replace stat_description = "Multnomah in-migration t-stati
> stic" in `row'
253. local row = `row' + 1
254. 
. replace stat_name = "m_p_in" in `row'
255. replace stat_value = `m_p_in' in `row'
256. replace stat_description = "Multnomah in-migration p-value
> " in `row'
257. local row = `row' + 1
258. 
. replace stat_name = "m_pctile_b_in" in `row'
259. replace stat_value = `m_pctile_b_in' in `row'
260. replace stat_description = "Multnomah in-migration percent
> ile rank" in `row'
261. local row = `row' + 1
262. 
. ** ==========================================================
> ==================
. ** COUNT STATISTICS
. ** ==========================================================
> ==================
. 
. replace stat_name = "n_counties_out" in `row'
263. replace stat_value = `n_counties_out' in `row'
264. replace stat_description = "Number of counties with out-mi
> gration coef" in `row'
265. local row = `row' + 1
266. 
. replace stat_name = "n_counties_in" in `row'
267. replace stat_value = `n_counties_in' in `row'
268. replace stat_description = "Number of counties with in-mig
> ration coef" in `row'
269. local row = `row' + 1
270. 
. replace stat_name = "n_counties_both" in `row'
271. replace stat_value = `n_counties_both' in `row'
272. replace stat_description = "Number of counties with both c
> oefs" in `row'
273. local row = `row' + 1
274. 
. replace stat_name = "n_larger_out" in `row'
275. replace stat_value = `n_larger_out' in `row'
276. replace stat_description = "Counties with larger out-migra
> tion coef than Multnomah" in `row'
277. local row = `row' + 1
278. 
. replace stat_name = "n_larger_out_sig" in `row'
279. replace stat_value = `n_larger_out_sig' in `row'
280. replace stat_description = "Counties with larger out-migra
> tion coef (p<0.05)" in `row'
281. local row = `row' + 1
282. 
. replace stat_name = "n_smaller_in" in `row'
283. replace stat_value = `n_smaller_in' in `row'
284. replace stat_description = "Counties with smaller in-migra
> tion coef than Multnomah" in `row'
285. local row = `row' + 1
286. 
. replace stat_name = "n_smaller_in_sig" in `row'
287. replace stat_value = `n_smaller_in_sig' in `row'
288. replace stat_description = "Counties with smaller in-migra
> tion coef (p<0.05)" in `row'
289. local row = `row' + 1
290. 
. replace stat_name = "n_worse_both" in `row'
291. replace stat_value = `n_worse_both' in `row'
292. replace stat_description = "Counties worse on both out AND
>  in migration" in `row'
293. local row = `row' + 1
294. 
. replace stat_name = "n_worse_both_sig" in `row'
295. replace stat_value = `n_worse_both_sig' in `row'
296. replace stat_description = "Counties worse on both (p<0.05
>  for both)" in `row'
297. local row = `row' + 1
298. 
. ** ==========================================================
> ==================
. ** DISTRIBUTION STATISTICS - OUT-MIGRATION
. ** ==========================================================
> ==================
. 
. replace stat_name = "dist_out_mean" in `row'
299. replace stat_value = `dist_out_mean' in `row'
300. replace stat_description = "Distribution mean: out-migrati
> on coef" in `row'
301. local row = `row' + 1
302. 
. replace stat_name = "dist_out_sd" in `row'
303. replace stat_value = `dist_out_sd' in `row'
304. replace stat_description = "Distribution SD: out-migration
>  coef" in `row'
305. local row = `row' + 1
306. 
. replace stat_name = "dist_out_min" in `row'
307. replace stat_value = `dist_out_min' in `row'
308. replace stat_description = "Distribution min: out-migratio
> n coef" in `row'
309. local row = `row' + 1
310. 
. replace stat_name = "dist_out_max" in `row'
311. replace stat_value = `dist_out_max' in `row'
312. replace stat_description = "Distribution max: out-migratio
> n coef" in `row'
313. local row = `row' + 1
314. 
. replace stat_name = "dist_out_p25" in `row'
315. replace stat_value = `dist_out_p25' in `row'
316. replace stat_description = "Distribution 25th pctile: out-
> migration coef" in `row'
317. local row = `row' + 1
318. 
. replace stat_name = "dist_out_p50" in `row'
319. replace stat_value = `dist_out_p50' in `row'
320. replace stat_description = "Distribution median: out-migra
> tion coef" in `row'
321. local row = `row' + 1
322. 
. replace stat_name = "dist_out_p75" in `row'
323. replace stat_value = `dist_out_p75' in `row'
324. replace stat_description = "Distribution 75th pctile: out-
> migration coef" in `row'
325. local row = `row' + 1
326. 
. ** ==========================================================
> ==================
. ** DISTRIBUTION STATISTICS - IN-MIGRATION
. ** ==========================================================
> ==================
. 
. replace stat_name = "dist_in_mean" in `row'
327. replace stat_value = `dist_in_mean' in `row'
328. replace stat_description = "Distribution mean: in-migratio
> n coef" in `row'
329. local row = `row' + 1
330. 
. replace stat_name = "dist_in_sd" in `row'
331. replace stat_value = `dist_in_sd' in `row'
332. replace stat_description = "Distribution SD: in-migration 
> coef" in `row'
333. local row = `row' + 1
334. 
. replace stat_name = "dist_in_min" in `row'
335. replace stat_value = `dist_in_min' in `row'
336. replace stat_description = "Distribution min: in-migration
>  coef" in `row'
337. local row = `row' + 1
338. 
. replace stat_name = "dist_in_max" in `row'
339. replace stat_value = `dist_in_max' in `row'
340. replace stat_description = "Distribution max: in-migration
>  coef" in `row'
341. local row = `row' + 1
342. 
. replace stat_name = "dist_in_p25" in `row'
343. replace stat_value = `dist_in_p25' in `row'
344. replace stat_description = "Distribution 25th pctile: in-m
> igration coef" in `row'
345. local row = `row' + 1
346. 
. replace stat_name = "dist_in_p50" in `row'
347. replace stat_value = `dist_in_p50' in `row'
348. replace stat_description = "Distribution median: in-migrat
> ion coef" in `row'
349. local row = `row' + 1
350. 
. replace stat_name = "dist_in_p75" in `row'
351. replace stat_value = `dist_in_p75' in `row'
352. replace stat_description = "Distribution 75th pctile: in-m
> igration coef" in `row'
353. local row = `row' + 1
354. 
. ** ==========================================================
> ==================
. ** DISTRIBUTION STATISTICS - T-STATISTICS
. ** ==========================================================
> ==================
. 
. replace stat_name = "dist_t_out_mean" in `row'
355. replace stat_value = `dist_t_out_mean' in `row'
356. replace stat_description = "Distribution mean: out-migrati
> on t-stat" in `row'
357. local row = `row' + 1
358. 
. replace stat_name = "dist_t_out_sd" in `row'
359. replace stat_value = `dist_t_out_sd' in `row'
360. replace stat_description = "Distribution SD: out-migration
>  t-stat" in `row'
361. local row = `row' + 1
362. 
. replace stat_name = "dist_t_out_p50" in `row'
363. replace stat_value = `dist_t_out_p50' in `row'
364. replace stat_description = "Distribution median: out-migra
> tion t-stat" in `row'
365. local row = `row' + 1
366. 
. replace stat_name = "dist_t_in_mean" in `row'
367. replace stat_value = `dist_t_in_mean' in `row'
368. replace stat_description = "Distribution mean: in-migratio
> n t-stat" in `row'
369. local row = `row' + 1
370. 
. replace stat_name = "dist_t_in_sd" in `row'
371. replace stat_value = `dist_t_in_sd' in `row'
372. replace stat_description = "Distribution SD: in-migration 
> t-stat" in `row'
373. local row = `row' + 1
374. 
. replace stat_name = "dist_t_in_p50" in `row'
375. replace stat_value = `dist_t_in_p50' in `row'
376. replace stat_description = "Distribution median: in-migrat
> ion t-stat" in `row'
377. local row = `row' + 1
378. 
. ** Drop empty rows
. drop if stat_name == ""
379. 
. ** Add sample identifier
. gen sample = "`sample'"
380. 
. ** Export to Excel
. ** First iteration: create new file; subsequent: add sheet
. if "`sample'" == "all" {
381.         export excel using "${results}flows/flow_analysis_
> stats.xlsx", ///
>                 sheet("`sample'") sheetreplace firstrow(varia
> bles)
382. }
383. else {
384.         export excel using "${results}flows/flow_analysis_
> stats.xlsx", ///
>                 sheet("`sample'") sheetmodify firstrow(variab
> les)
385. }
386. 
. dis "Exported descriptive statistics to flow_analysis_stats.x
> lsx, sheet: `sample'"
387. 
. ** ==========================================================
> ==================
. ** EXPORT COUNTY LISTS WITH LARGER COEFFICIENTS TO ADDITIONAL
>  SHEETS
. ** ==========================================================
> ==================
. 
. ** Load county coefficients and merge with county identifiers
. use `county_coefs_for_export', clear
388. merge m:1 fips using "${data}working/ids", keep(master mat
> ch) nogen ///
>         keepusing(state_name county_name state_fips county_fi
> ps)
389. 
. ** Order variables for cleaner output
. order fips state_name county_name state_fips county_fips mult
> nomah ///
>         b_out se_out t_out p_out pctile_b_out pctile_t_out //
> /
>         b_in se_in t_in p_in pctile_b_in pctile_t_in
390. 
. ** Save merged data for subsequent sheets
. tempfile county_coefs_merged
391. save `county_coefs_merged'
392. 
. ** Sheet 1: Counties with larger out-migration coefficients t
> han Multnomah
. use `county_coefs_merged', clear
393. keep if b_out > `m_b_out' & !missing(b_out)
394. gsort -b_out
395. 
. ** Keep relevant variables
. keep fips state_name county_name b_out se_out t_out p_out pct
> ile_b_out pctile_t_out
396. 
. ** Export
. export excel using "${results}flows/flow_analysis_stats.xlsx"
> , ///
>         sheet("larger_out_`sample'") sheetmodify firstrow(var
> iables)
397. 
. dis "Exported `=_N' counties with larger out-migration coef t
> o sheet: larger_out_`sample'"
398. 
. ** Sheet 2: Counties with smaller in-migration coefficients t
> han Multnomah
. use `county_coefs_merged', clear
399. keep if b_in < `m_b_in' & !missing(b_in)
400. gsort b_in
401. 
. ** Keep relevant variables
. keep fips state_name county_name b_in se_in t_in p_in pctile_
> b_in pctile_t_in
402. 
. ** Export
. export excel using "${results}flows/flow_analysis_stats.xlsx"
> , ///
>         sheet("smaller_in_`sample'") sheetmodify firstrow(var
> iables)
403. 
. dis "Exported `=_N' counties with smaller in-migration coef t
> o sheet: smaller_in_`sample'"
404. 
. ** Sheet 3: Counties worse on BOTH dimensions (larger out AND
>  smaller in)
. use `county_coefs_merged', clear
405. keep if b_out > `m_b_out' & b_in < `m_b_in' & !missing(b_o
> ut) & !missing(b_in)
406. gsort -b_out
407. 
. ** Keep relevant variables
. keep fips state_name county_name ///
>         b_out se_out t_out p_out pctile_b_out pctile_t_out //
> /
>         b_in se_in t_in p_in pctile_b_in pctile_t_in
408. 
. ** Export
. export excel using "${results}flows/flow_analysis_stats.xlsx"
> , ///
>         sheet("worse_both_`sample'") sheetmodify firstrow(var
> iables)
409. 
. dis "Exported `=_N' counties worse on both dimensions to shee
> t: worse_both_`sample'"
410. 
. ** Sheet 4: Counties with larger out-migration t-statistics t
> han Multnomah
. use `county_coefs_merged', clear
411. keep if t_out > `m_t_out' & !missing(t_out)
412. gsort -t_out
413. 
. ** Keep relevant variables
. keep fips state_name county_name b_out se_out t_out p_out pct
> ile_b_out pctile_t_out
414. 
. ** Export
. export excel using "${results}flows/flow_analysis_stats.xlsx"
> , ///
>         sheet("larger_t_out_`sample'") sheetmodify firstrow(v
> ariables)
415. 
. dis "Exported `=_N' counties with larger out-migration t-stat
>  to sheet: larger_t_out_`sample'"
416. 
. ** Sheet 5: Counties with smaller in-migration t-statistics t
> han Multnomah
. use `county_coefs_merged', clear
417. keep if t_in < `m_t_in' & !missing(t_in)
418. gsort t_in
419. 
. ** Keep relevant variables
. keep fips state_name county_name b_in se_in t_in p_in pctile_
> b_in pctile_t_in
420. 
. ** Export
. export excel using "${results}flows/flow_analysis_stats.xlsx"
> , ///
>         sheet("smaller_t_in_`sample'") sheetmodify firstrow(v
> ariables)
421. 
. dis "Exported `=_N' counties with smaller in-migration t-stat
>  to sheet: smaller_t_in_`sample'"
422. 
. *************************************************************
> *******************
. ** REGRESSION 2: Multnomah X Year (Event Study)
. *************************************************************
> *******************
. 
. ** Load main data for event study regressions
. use `main_data', clear
423. 
. ** Loop over outcome variables
. foreach outcome in n1 n2 agi {
424. 
.         ** Set outcome label for graphs
.         if "`outcome'" == "n1" local outcome_label "Number of
>  Returns"
425.         if "`outcome'" == "n2" local outcome_label "Number
>  of Exemptions"
426.         if "`outcome'" == "agi" local outcome_label "Adjus
> ted Gross Income"
427. 
.         ** Regression 2a: With covariates
.         ppmlhdfe `outcome' x_out_* x_in_*                    
>                                            ///
>                 `covars'                                     
>                                                              
>       ///
>                 if mover == 1 `sample_cond',                 
>                                            ///
>                 absorb(year flow_id) vce(cluster flow_id)
428.         estimates store `outcome'_es_with_covars
429. 
.         ** Regression 2b: Without covariates
.         ppmlhdfe `outcome' x_out_* x_in_*                    
>                                            ///
>                 if mover == 1 `sample_cond',                 
>                                            ///
>                 absorb(year flow_id) vce(cluster flow_id)
430.         estimates store `outcome'_es_no_covars
431. 
.         ** Create coefficient dataset for plotting
.         clear
432.         set obs 7
433.         gen year = 2015 + _n
434. 
.         ** Out-migration coefficients (with covariates)
.         gen out_coef_wc = .
435.         gen out_ci_lo_wc = .
436.         gen out_ci_hi_wc = .
437. 
.         ** In-migration coefficients (with covariates)
.         gen in_coef_wc = .
438.         gen in_ci_lo_wc = .
439.         gen in_ci_hi_wc = .
440. 
.         ** Out-migration coefficients (without covariates)
.         gen out_coef_nc = .
441.         gen out_ci_lo_nc = .
442.         gen out_ci_hi_nc = .
443. 
.         ** In-migration coefficients (without covariates)
.         gen in_coef_nc = .
444.         gen in_ci_lo_nc = .
445.         gen in_ci_hi_nc = .
446. 
.         ** Fill in coefficients (2020 = base year = 0)
.         foreach y in 2016 2017 2018 2019 2021 2022 {
447. 
.                 ** With covariates
.                 estimates restore `outcome'_es_with_covars
448.                 replace out_coef_wc = _b[x_out_`y'] if yea
> r == `y'
449.                 replace out_ci_lo_wc = _b[x_out_`y'] - 1.9
> 6 * _se[x_out_`y'] if year == `y'
450.                 replace out_ci_hi_wc = _b[x_out_`y'] + 1.9
> 6 * _se[x_out_`y'] if year == `y'
451. 
.                 replace in_coef_wc = _b[x_in_`y'] if year == 
> `y'
452.                 replace in_ci_lo_wc = _b[x_in_`y'] - 1.96 
> * _se[x_in_`y'] if year == `y'
453.                 replace in_ci_hi_wc = _b[x_in_`y'] + 1.96 
> * _se[x_in_`y'] if year == `y'
454. 
.                 ** Without covariates
.                 estimates restore `outcome'_es_no_covars
455.                 replace out_coef_nc = _b[x_out_`y'] if yea
> r == `y'
456.                 replace out_ci_lo_nc = _b[x_out_`y'] - 1.9
> 6 * _se[x_out_`y'] if year == `y'
457.                 replace out_ci_hi_nc = _b[x_out_`y'] + 1.9
> 6 * _se[x_out_`y'] if year == `y'
458. 
.                 replace in_coef_nc = _b[x_in_`y'] if year == 
> `y'
459.                 replace in_ci_lo_nc = _b[x_in_`y'] - 1.96 
> * _se[x_in_`y'] if year == `y'
460.                 replace in_ci_hi_nc = _b[x_in_`y'] + 1.96 
> * _se[x_in_`y'] if year == `y'
461.         }
462. 
.         ** Base year (2020) = 0
.         foreach v in out_coef_wc out_ci_lo_wc out_ci_hi_wc   
>                    ///
>                                  in_coef_wc in_ci_lo_wc in_ci
> _hi_wc                     ///
>                                  out_coef_nc out_ci_lo_nc out
> _ci_hi_nc                  ///
>                                  in_coef_nc in_ci_lo_nc in_ci
> _hi_nc {
463.                 replace `v' = 0 if year == 2020
464.         }
465. 
.         ** Offset years slightly for visibility
.         gen year_out = year - 0.1
466.         gen year_in = year + 0.1
467. 
.         ** Plot 1: Out-migration (with and without covariates
> )
.         twoway  (rcap out_ci_lo_wc out_ci_hi_wc year_out, lc(
> navy))                     ///
>                         (connected out_coef_wc year_out, mc(n
> avy) lc(navy) ms(O))               ///
>                         (rcap out_ci_lo_nc out_ci_hi_nc year_
> in, lc(maroon))                    ///
>                         (connected out_coef_nc year_in, mc(ma
> roon) lc(maroon) ms(T)),   ///
>                 yline(0, lc(gs10) lp(dash))                  
>                                                            //
> /
>                 xline(2020.5, lc(black) lp(solid))           
>                                                            //
> /
>                 xlabel(2016(1)2022)                          
>                                                              
>       ///
>                 ytitle("Coefficient (relative to 2020)")     
>                                                    ///
>                 xtitle("Year")                               
>                                                              
>               ///
>                 legend(order(2 "With Covariates" 4 "Without C
> ovariates")                        ///
>                         pos(6) rows(1))                      
>                                                              
>               ///
>                 title("Out-Migration from Multnomah County`ti
> tle_suffix'")                      ///
>                 subtitle("`outcome_label'")                  
>                                                              
>       ///
>                 graphregion(color(white))
468. 
.         graph export "${results}flows/fig_multnomah_out_`outc
> ome'`file_suffix'.png", replace
469. 
.         ** Plot 2: In-migration (with and without covariates)
.         twoway  (rcap in_ci_lo_wc in_ci_hi_wc year_out, lc(na
> vy))                               ///
>                         (connected in_coef_wc year_out, mc(na
> vy) lc(navy) ms(O))                ///
>                         (rcap in_ci_lo_nc in_ci_hi_nc year_in
> , lc(maroon))                              ///
>                         (connected in_coef_nc year_in, mc(mar
> oon) lc(maroon) ms(T)),    ///
>                 yline(0, lc(gs10) lp(dash))                  
>                                                            //
> /
>                 xline(2020.5, lc(black) lp(solid))           
>                                                            //
> /
>                 xlabel(2016(1)2022)                          
>                                                              
>       ///
>                 ytitle("Coefficient (relative to 2020)")     
>                                                    ///
>                 xtitle("Year")                               
>                                                              
>               ///
>                 legend(order(2 "With Covariates" 4 "Without C
> ovariates")                        ///
>                         pos(6) rows(1))                      
>                                                              
>               ///
>                 title("In-Migration to Multnomah County`title
> _suffix'")                         ///
>                 subtitle("`outcome_label'")                  
>                                                              
>       ///
>                 graphregion(color(white))
470. 
.         graph export "${results}flows/fig_multnomah_in_`outco
> me'`file_suffix'.png", replace
471. 
.         ** Plot 3: Both flows (with covariates only, as in or
> iginal)
.         twoway  (rcap out_ci_lo_wc out_ci_hi_wc year_out, lc(
> navy))                             ///
>                         (connected out_coef_wc year_out, mc(n
> avy) lc(navy) ms(O))               ///
>                         (rcap in_ci_lo_wc in_ci_hi_wc year_in
> , lc(maroon))                              ///
>                         (connected in_coef_wc year_in, mc(mar
> oon) lc(maroon) ms(T)),    ///
>                 yline(0, lc(gs10) lp(dash))                  
>                                                            //
> /
>                 xline(2020.5, lc(black) lp(solid))           
>                                                            //
> /
>                 xlabel(2016(1)2022)                          
>                                                              
>       ///
>                 ytitle("Coefficient (relative to 2020)")     
>                                                    ///
>                 xtitle("Year")                               
>                                                              
>               ///
>                 legend(order(2 "Out-migration" 4 "In-migratio
> n")                                        ///
>                         pos(6) rows(1))                      
>                                                              
>               ///
>                 title("Migration Flows: Multnomah County`titl
> e_suffix'")                        ///
>                 subtitle("`outcome_label'")                  
>                                                              
>       ///
>                 graphregion(color(white))
472. 
.         graph export "${results}flows/fig_multnomah_both_`out
> come'`file_suffix'.png", replace
473. 
.         ** Reload main data for next outcome
.         use `main_data', clear
474. 
. } // END OUTCOME LOOP
475. 
. } // END SAMPLE LOOP (all vs acs)

===============================================================
> =========
RUNNING ANALYSIS FOR SAMPLE: acs
Sample condition: & acs_flow == 1
Covariates: unemp_* pop_* per_capita_income_* prop_rate_mean_o 
> prop_rate_mean_d
===============================================================
> =========

(dropped 3389 observations that are either singletons or separa
> ted by a fixed effect)
Iteration 1:   deviance = 1.9778e+06  eps = .         iters = 4
>     tol = 1.0e-04                                            
>                    min(eta) =  -2.88  P   
Iteration 2:   deviance = 3.3937e+05  eps = 4.83e+00  iters = 3
>     tol = 1.0e-04                                            
>                    min(eta) =  -3.48      
Iteration 3:   deviance = 2.9123e+05  eps = 1.65e-01  iters = 3
>     tol = 1.0e-04                                            
>                    min(eta) =  -3.71      
Iteration 4:   deviance = 2.9102e+05  eps = 7.29e-04  iters = 2
>     tol = 1.0e-04                                            
>                    min(eta) =  -3.74      
Iteration 5:   deviance = 2.9102e+05  eps = 5.68e-08  iters = 2
>     tol = 1.0e-04                                            
>                    min(eta) =  -3.74      
Iteration 6:   deviance = 2.9102e+05  eps = 1.10e-15  iters = 1
>     tol = 1.0e-05                                            
>                    min(eta) =  -3.74   S  
Iteration 7:   deviance = 2.9102e+05  eps = 2.75e-16  iters = 1
>     tol = 1.0e-09                                            
>                    min(eta) =  -3.74   S O
---------------------------------------------------------------
> ---------------------------------------------
(legend: p: exact partial-out   s: exact solver   h: step-halvi
> ng   o: epsilon below tolerance)
Converged in 7 iterations and 16 HDFE sub-iterations (tol = 1.0
> e-08)

HDFE PPML regression                              No. of obs   
>    =                                                         
>         129,600
Absorbing 2 HDFE groups                           Residual df  
>    =                                                         
>          22,046
Statistics robust to heteroskedasticity           Wald chi2(10)
>    =                                                         
>          679.39
Deviance             =  291015.7779               Prob > chi2  
>    =                                                         
>          0.0000
Log pseudolikelihood = -533368.3743               Pseudo R2    
>    =                                                         
>          0.9851

Number of clusters (flow_id)=     22,047
                           (Std. err. adjusted for 22,047 clust
> ers in flow_id)
---------------------------------------------------------------
> ---------------
             |               Robust
          n1 | Coefficient  std. err.      z    P>|z|     [95% 
> con                                                          
>    f. interval]
-------------+-------------------------------------------------
> ---------------
1.out_mult~t |  -.0022129   .0235929    -0.09   0.925     -.048
> 454                                                          
>        .0440283
1.in_multn~t |  -.0846358   .0168906    -5.01   0.000    -.1177
> 409                                                          
>       -.0515308
     unemp_o |   .0229647   .0013063    17.58   0.000     .0204
> 044                                                          
>        .0255251
     unemp_d |  -.0190961   .0014121   -13.52   0.000    -.0218
> 638                                                          
>       -.0163284
       pop_o |   7.22e-09   2.60e-08     0.28   0.781    -4.38e
> -08                                                          
>        5.83e-08
       pop_d |   3.86e-07   3.88e-08     9.95   0.000     3.10e
> -07                                                          
>        4.62e-07
per_capita~o |   1.12e-06   5.10e-07     2.19   0.028     1.19e
> -07                                                          
>        2.12e-06
per_capita~d |  -1.67e-06   4.07e-07    -4.10   0.000    -2.46e
> -06                                                          
>       -8.69e-07
prop_rate_~o |  -.0056646   .0020497    -2.76   0.006     -.009
> 682                                                          
>       -.0016473
prop_rate_~d |  -.0001682   .0020167    -0.08   0.934    -.0041
> 209                                                          
>        .0037844
       _cons |   6.125872   .0784274    78.11   0.000     5.972
> 157                                                          
>        6.279587
---------------------------------------------------------------
> ---------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
        year |         7           1           6     |
     flow_id |     22047       22047           0    *|
-----------------------------------------------------+
* = FE nested within cluster; treated as redundant for DoF comp
> utation
(dropped 3389 observations that are either singletons or separa
> ted by a fixed effect)
Iteration 1:   deviance = 1.9948e+06  eps = .         iters = 4
>     tol = 1.0e-04                                            
>                    min(eta) =  -2.86  P   
Iteration 2:   deviance = 3.5534e+05  eps = 4.61e+00  iters = 3
>     tol = 1.0e-04                                            
>                    min(eta) =  -3.44      
Iteration 3:   deviance = 3.0721e+05  eps = 1.57e-01  iters = 3
>     tol = 1.0e-04                                            
>                    min(eta) =  -3.68      
Iteration 4:   deviance = 3.0700e+05  eps = 6.90e-04  iters = 2
>     tol = 1.0e-04                                            
>                    min(eta) =  -3.71      
Iteration 5:   deviance = 3.0700e+05  eps = 5.37e-08  iters = 2
>     tol = 1.0e-04                                            
>                    min(eta) =  -3.71      
Iteration 6:   deviance = 3.0700e+05  eps = 1.17e-15  iters = 1
>     tol = 1.0e-05                                            
>                    min(eta) =  -3.71   S  
Iteration 7:   deviance = 3.0700e+05  eps = 1.30e-16  iters = 1
>     tol = 1.0e-09                                            
>                    min(eta) =  -3.71   S O
---------------------------------------------------------------
> ---------------------------------------------
(legend: p: exact partial-out   s: exact solver   h: step-halvi
> ng   o: epsilon below tolerance)
Converged in 7 iterations and 16 HDFE sub-iterations (tol = 1.0
> e-08)

HDFE PPML regression                              No. of obs   
>    =                                                         
>         129,600
Absorbing 2 HDFE groups                           Residual df  
>    =                                                         
>          22,046
Statistics robust to heteroskedasticity           Wald chi2(2) 
>    =                                                         
>           34.36
Deviance             =  306996.4457               Prob > chi2  
>    =                                                         
>          0.0000
Log pseudolikelihood = -541358.7081               Pseudo R2    
>    =                                                         
>          0.9849

Number of clusters (flow_id)=     22,047
                           (Std. err. adjusted for 22,047 clust
> ers in flow_id)
---------------------------------------------------------------
> ---------------
             |               Robust
          n1 | Coefficient  std. err.      z    P>|z|     [95% 
> con                                                          
>    f. interval]
-------------+-------------------------------------------------
> ---------------
1.out_mult~t |   .0032104   .0243075     0.13   0.895    -.0444
> 315                                                          
>        .0508523
1.in_multn~t |  -.0965589   .0164903    -5.86   0.000    -.1288
> 792                                                          
>       -.0642386
       _cons |    6.70651   .0000597  1.1e+05   0.000     6.706
> 393                                                          
>        6.706627
---------------------------------------------------------------
> ---------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
        year |         7           1           6     |
     flow_id |     22047       22047           0    *|
-----------------------------------------------------+
* = FE nested within cluster; treated as redundant for DoF comp
> utation
file
    C:/Users/ji252/Documents/GitHub/multnomah-county-tax/resu
    > lts/flows/fig_multnomah_post_n1_acs.png saved as PNG
    format
(dropped 3389 observations that are either singletons or separa
> ted by a fixed effect)
Iteration 1:   deviance = 3.6622e+06  eps = .         iters = 4
>     tol = 1.0e-04                                            
>                    min(eta) =  -3.00  P   
Iteration 2:   deviance = 7.1966e+05  eps = 4.09e+00  iters = 3
>     tol = 1.0e-04                                            
>                    min(eta) =  -3.70      
Iteration 3:   deviance = 6.2926e+05  eps = 1.44e-01  iters = 3
>     tol = 1.0e-04                                            
>                    min(eta) =  -4.08      
Iteration 4:   deviance = 6.2873e+05  eps = 8.40e-04  iters = 2
>     tol = 1.0e-04                                            
>                    min(eta) =  -4.17      
Iteration 5:   deviance = 6.2873e+05  eps = 1.99e-07  iters = 2
>     tol = 1.0e-04                                            
>                    min(eta) =  -4.17      
Iteration 6:   deviance = 6.2873e+05  eps = 1.03e-13  iters = 1
>     tol = 1.0e-05                                            
>                    min(eta) =  -4.17   S  
Iteration 7:   deviance = 6.2873e+05  eps = 0.00e+00  iters = 1
>     tol = 1.0e-08                                            
>                    min(eta) =  -4.17   S O
---------------------------------------------------------------
> ---------------------------------------------
(legend: p: exact partial-out   s: exact solver   h: step-halvi
> ng   o: epsilon below tolerance)
Converged in 7 iterations and 16 HDFE sub-iterations (tol = 1.0
> e-08)

HDFE PPML regression                              No. of obs   
>    =                                                         
>         129,600
Absorbing 2 HDFE groups                           Residual df  
>    =                                                         
>          22,046
Statistics robust to heteroskedasticity           Wald chi2(10)
>    =                                                         
>          645.69
Deviance             =  628730.0175               Prob > chi2  
>    =                                                         
>          0.0000
Log pseudolikelihood = -737640.9381               Pseudo R2    
>    =                                                         
>          0.9885

Number of clusters (flow_id)=     22,047
                           (Std. err. adjusted for 22,047 clust
> ers in flow_id)
---------------------------------------------------------------
> ---------------
             |               Robust
          n2 | Coefficient  std. err.      z    P>|z|     [95% 
> con                                                          
>    f. interval]
-------------+-------------------------------------------------
> ---------------
1.out_mult~t |  -.0016164   .0193979    -0.08   0.934    -.0396
> 356                                                          
>        .0364027
1.in_multn~t |   -.084359   .0158222    -5.33   0.000      -.11
> 537                                                          
>        -.053348
     unemp_o |   .0216645   .0013954    15.53   0.000     .0189
> 295                                                          
>        .0243995
     unemp_d |  -.0207735   .0015576   -13.34   0.000    -.0238
> 264                                                          
>       -.0177206
       pop_o |  -6.75e-09   2.84e-08    -0.24   0.812    -6.24e
> -08                                                          
>        4.89e-08
       pop_d |   4.05e-07   3.62e-08    11.19   0.000     3.34e
> -07                                                          
>        4.76e-07
per_capita~o |   1.62e-06   5.18e-07     3.12   0.002     6.00e
> -07                                                          
>        2.63e-06
per_capita~d |  -2.04e-06   4.34e-07    -4.70   0.000    -2.89e
> -06                                                          
>       -1.19e-06
prop_rate_~o |  -.0054931   .0021535    -2.55   0.011    -.0097
> 139                                                          
>       -.0012723
prop_rate_~d |  -.0005758   .0021315    -0.27   0.787    -.0047
> 535                                                          
>        .0036019
       _cons |   6.744748   .0806006    83.68   0.000     6.586
> 774                                                          
>        6.902722
---------------------------------------------------------------
> ---------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
        year |         7           1           6     |
     flow_id |     22047       22047           0    *|
-----------------------------------------------------+
* = FE nested within cluster; treated as redundant for DoF comp
> utation
(dropped 3389 observations that are either singletons or separa
> ted by a fixed effect)
Iteration 1:   deviance = 3.6934e+06  eps = .         iters = 4
>     tol = 1.0e-04                                            
>                    min(eta) =  -2.99  P   
Iteration 2:   deviance = 7.4908e+05  eps = 3.93e+00  iters = 3
>     tol = 1.0e-04                                            
>                    min(eta) =  -3.69      
Iteration 3:   deviance = 6.5872e+05  eps = 1.37e-01  iters = 3
>     tol = 1.0e-04                                            
>                    min(eta) =  -4.06      
Iteration 4:   deviance = 6.5819e+05  eps = 8.00e-04  iters = 2
>     tol = 1.0e-04                                            
>                    min(eta) =  -4.14      
Iteration 5:   deviance = 6.5819e+05  eps = 1.89e-07  iters = 2
>     tol = 1.0e-04                                            
>                    min(eta) =  -4.15      
Iteration 6:   deviance = 6.5819e+05  eps = 9.72e-14  iters = 1
>     tol = 1.0e-05                                            
>                    min(eta) =  -4.15   S  
Iteration 7:   deviance = 6.5819e+05  eps = 2.21e-16  iters = 1
>     tol = 1.0e-08                                            
>                    min(eta) =  -4.15   S O
---------------------------------------------------------------
> ---------------------------------------------
(legend: p: exact partial-out   s: exact solver   h: step-halvi
> ng   o: epsilon below tolerance)
Converged in 7 iterations and 16 HDFE sub-iterations (tol = 1.0
> e-08)

HDFE PPML regression                              No. of obs   
>    =                                                         
>         129,600
Absorbing 2 HDFE groups                           Residual df  
>    =                                                         
>          22,046
Statistics robust to heteroskedasticity           Wald chi2(2) 
>    =                                                         
>           39.84
Deviance             =  658193.6762               Prob > chi2  
>    =                                                         
>          0.0000
Log pseudolikelihood = -752372.7674               Pseudo R2    
>    =                                                         
>          0.9883

Number of clusters (flow_id)=     22,047
                           (Std. err. adjusted for 22,047 clust
> ers in flow_id)
---------------------------------------------------------------
> ---------------
             |               Robust
          n2 | Coefficient  std. err.      z    P>|z|     [95% 
> con                                                          
>    f. interval]
-------------+-------------------------------------------------
> ---------------
1.out_mult~t |   .0028857    .019154     0.15   0.880    -.0346
> 556                                                          
>        .0404269
1.in_multn~t |  -.0991782   .0157384    -6.30   0.000     -.130
> 025                                                          
>       -.0683315
       _cons |   7.303822   .0000424  1.7e+05   0.000     7.303
> 738                                                          
>        7.303905
---------------------------------------------------------------
> ---------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
        year |         7           1           6     |
     flow_id |     22047       22047           0    *|
-----------------------------------------------------+
* = FE nested within cluster; treated as redundant for DoF comp
> utation
file
    C:/Users/ji252/Documents/GitHub/multnomah-county-tax/resu
    > lts/flows/fig_multnomah_post_n2_acs.png saved as PNG
    format
(dropped 3389 observations that are either singletons or separa
> ted by a fixed effect)
Iteration 1:   deviance = 2.6805e+08  eps = .         iters = 4
>     tol = 1.0e-04                                            
>                    min(eta) =  -3.32  P   
Iteration 2:   deviance = 1.0401e+08  eps = 1.58e+00  iters = 3
>     tol = 1.0e-04                                            
>                    min(eta) =  -4.14      
Iteration 3:   deviance = 9.5891e+07  eps = 8.47e-02  iters = 3
>     tol = 1.0e-04                                            
>                    min(eta) =  -4.78      
Iteration 4:   deviance = 9.5722e+07  eps = 1.77e-03  iters = 2
>     tol = 1.0e-04                                            
>                    min(eta) =  -5.11      
Iteration 5:   deviance = 9.5721e+07  eps = 5.84e-06  iters = 2
>     tol = 1.0e-04                                            
>                    min(eta) =  -5.21      
Iteration 6:   deviance = 9.5721e+07  eps = 9.66e-10  iters = 2
>     tol = 1.0e-05                                            
>                    min(eta) =  -5.22   S  
Iteration 7:   deviance = 9.5721e+07  eps = 2.70e-15  iters = 1
>     tol = 1.0e-07                                            
>                    min(eta) =  -5.22   S  
Iteration 8:   deviance = 9.5721e+07  eps = 0.00e+00  iters = 1
>     tol = 1.0e-09                                            
>                    min(eta) =  -5.22   S O
---------------------------------------------------------------
> ---------------------------------------------
(legend: p: exact partial-out   s: exact solver   h: step-halvi
> ng   o: epsilon below tolerance)
Converged in 8 iterations and 18 HDFE sub-iterations (tol = 1.0
> e-08)

HDFE PPML regression                              No. of obs   
>    =                                                         
>         129,600
Absorbing 2 HDFE groups                           Residual df  
>    =                                                         
>          22,046
Statistics robust to heteroskedasticity           Wald chi2(10)
>    =                                                         
>          511.65
Deviance             =  95721037.43               Prob > chi2  
>    =                                                         
>          0.0000
Log pseudolikelihood = -48521300.98               Pseudo R2    
>    =                                                         
>          0.9838

Number of clusters (flow_id)=     22,047
                           (Std. err. adjusted for 22,047 clust
> ers in flow_id)
---------------------------------------------------------------
> ---------------
             |               Robust
         agi | Coefficient  std. err.      z    P>|z|     [95% 
> con                                                          
>    f. interval]
-------------+-------------------------------------------------
> ---------------
1.out_mult~t |    .116637   .0563226     2.07   0.038     .0062
> 467                                                          
>        .2270274
1.in_multn~t |  -.1908973   .0225148    -8.48   0.000    -.2350
> 255                                                          
>       -.1467691
     unemp_o |   .0379792   .0068692     5.53   0.000     .0245
> 158                                                          
>        .0514425
     unemp_d |  -.0406767   .0051414    -7.91   0.000    -.0507
> 536                                                          
>       -.0305999
       pop_o |  -2.79e-07   6.28e-08    -4.45   0.000    -4.02e
> -07                                                          
>       -1.56e-07
       pop_d |   5.24e-07   8.90e-08     5.89   0.000     3.50e
> -07                                                          
>        6.99e-07
per_capita~o |   7.56e-06   9.75e-07     7.75   0.000     5.65e
> -06                                                          
>        9.47e-06
per_capita~d |   9.16e-07   1.13e-06     0.81   0.417    -1.30e
> -06                                                          
>        3.13e-06
prop_rate_~o |   -.013418   .0062772    -2.14   0.033    -.0257
> 211                                                          
>       -.0011149
prop_rate_~d |   .0080536   .0054192     1.49   0.137    -.0025
> 678                                                          
>         .018675
       _cons |   10.23336   .2129496    48.06   0.000     9.815
> 987                                                          
>        10.65073
---------------------------------------------------------------
> ---------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
        year |         7           1           6     |
     flow_id |     22047       22047           0    *|
-----------------------------------------------------+
* = FE nested within cluster; treated as redundant for DoF comp
> utation
(dropped 3389 observations that are either singletons or separa
> ted by a fixed effect)
Iteration 1:   deviance = 2.7605e+08  eps = .         iters = 4
>     tol = 1.0e-04                                            
>                    min(eta) =  -3.25  P   
Iteration 2:   deviance = 1.1017e+08  eps = 1.51e+00  iters = 3
>     tol = 1.0e-04                                            
>                    min(eta) =  -4.15      
Iteration 3:   deviance = 1.0194e+08  eps = 8.07e-02  iters = 3
>     tol = 1.0e-04                                            
>                    min(eta) =  -4.83      
Iteration 4:   deviance = 1.0178e+08  eps = 1.66e-03  iters = 2
>     tol = 1.0e-04                                            
>                    min(eta) =  -5.17      
Iteration 5:   deviance = 1.0178e+08  eps = 5.36e-06  iters = 2
>     tol = 1.0e-04                                            
>                    min(eta) =  -5.25      
Iteration 6:   deviance = 1.0178e+08  eps = 9.20e-10  iters = 2
>     tol = 1.0e-05                                            
>                    min(eta) =  -5.25   S  
Iteration 7:   deviance = 1.0178e+08  eps = 2.54e-15  iters = 1
>     tol = 1.0e-07                                            
>                    min(eta) =  -5.25   S  
Iteration 8:   deviance = 1.0178e+08  eps = 0.00e+00  iters = 1
>     tol = 1.0e-09                                            
>                    min(eta) =  -5.25   S O
---------------------------------------------------------------
> ---------------------------------------------
(legend: p: exact partial-out   s: exact solver   h: step-halvi
> ng   o: epsilon below tolerance)
Converged in 8 iterations and 18 HDFE sub-iterations (tol = 1.0
> e-08)

HDFE PPML regression                              No. of obs   
>    =                                                         
>         129,600
Absorbing 2 HDFE groups                           Residual df  
>    =                                                         
>          22,046
Statistics robust to heteroskedasticity           Wald chi2(2) 
>    =                                                         
>           79.19
Deviance             =  101775047.8               Prob > chi2  
>    =                                                         
>          0.0000
Log pseudolikelihood = -51548306.18               Pseudo R2    
>    =                                                         
>          0.9827

Number of clusters (flow_id)=     22,047
                           (Std. err. adjusted for 22,047 clust
> ers in flow_id)
---------------------------------------------------------------
> ---------------
             |               Robust
         agi | Coefficient  std. err.      z    P>|z|     [95% 
> con                                                          
>    f. interval]
-------------+-------------------------------------------------
> ---------------
1.out_mult~t |   .1151791   .0612446     1.88   0.060    -.0048
> 582                                                          
>        .2352163
1.in_multn~t |  -.1994398   .0231161    -8.63   0.000    -.2447
> 464                                                          
>       -.1541331
       _cons |   11.16124   .0001579  7.1e+04   0.000     11.16
> 093                                                          
>        11.16155
---------------------------------------------------------------
> ---------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
        year |         7           1           6     |
     flow_id |     22047       22047           0    *|
-----------------------------------------------------+
* = FE nested within cluster; treated as redundant for DoF comp
> utation
file
    C:/Users/ji252/Documents/GitHub/multnomah-county-tax/resu
    > lts/flows/fig_multnomah_post_agi_acs.png saved as PNG
    format
1003 1015 1097 4005 4013 4025 5007 5119 5143 6001 6007 6013 601
> 7 6019 6023 6025 6029 6031 6037 6039 6041 6047 6055 6059 6061
>  6065 6067 6071 6073 6075 6077 6079 6081 6083 6085 6087 6089 
> 6095 6097 6099 6107 6111 6113 8069 10001 10003 10005 11001 12
> 001 12009 12011 12015 12017 12019 12021 12031 12033 12053 120
> 57 12061 12071 12073 12081 12083 12085 12091 12095 12097 1209
> 9 12101 12103 12105 12111 12113 12115 12117 13015 13021 13045
>  13051 13057 13059 13063 13067 13073 13077 13097 13113 13117 
> 13135 13139 13151 13185 13223 13245 13313 16019 17031 17043 1
> 7089 17097 17111 17113 17119 17143 17161 17167 17179 17197 18
> 003 18019 18035 18039 18063 18081 18089 18091 18095 18097 181
> 05 18127 18141 18157 18163 18167 19013 19103 19113 19163 2004
> 5 20091 20209 21015 21067 21111 21117 21227 22005 22017 22033
>  22055 22071 22073 22103 23001 23011 24003 24005 24013 24015 
> 24017 24021 24025 24027 24031 24033 24510 25003 25025 26005 2
> 6021 26065 26075 26077 26081 26093 26099 26115 26121 26125 26
> 139 26145 26147 26161 26163 27003 27037 27053 27109 27123 271
> 63 28033 28047 28059 29095 29099 29183 29189 29510 31055 3110
> 9 31153 32003 32031 34003 34005 34007 34013 34015 34017 34019
>  34021 34023 34025 34027 34029 34031 34035 34037 34039 34041 
> 35013 35043 36001 36005 36013 36029 36047 36055 36059 36061 3
> 6063 36071 36075 36081 36083 36085 36087 36089 36091 36093 36
> 103 36109 37001 37019 37021 37035 37051 37057 37063 37067 370
> 71 37081 37085 37119 37135 37147 37151 37159 37183 37191 3801
> 7 39003 39017 39023 39035 39041 39045 39049 39057 39061 39089
>  39093 39103 39109 39113 39133 39139 39153 39165 39169 40017 
> 40027 40109 41005 41019 41029 41039 41047 41051 41067 42003 4
> 2011 42017 42019 42021 42027 42029 42043 42045 42049 42051 42
> 071 42075 42085 42089 42091 42101 42107 42129 42133 44003 440
> 07 44009 45083 47009 47037 47065 47149 47157 47187 47189 4802
> 7 48029 48039 48041 48061 48085 48091 48113 48121 48135 48139
>  48141 48157 48167 48183 48187 48201 48209 48215 48245 48251 
> 48257 48303 48309 48329 48339 48355 48367 48375 48381 48423 4
> 8439 48441 48451 48453 48479 48485 48491 49011 49035 49049 49
> 053 49057 51013 51041 51087 51107 51510 51650 51700 51760 518
> 10 53011 53033 53035 53053 53061 53063 53067 53073 53077 5500
> 9 55025 55059 55063 55073 55079 55087 55101 55105 55117 55127
>  55133 55139

*** DEBUG MODE: Sampling 50 random counties (plus Multnomah) **
> *

file C:\Users\ji252\AppData\Local\Temp\ST_828_000003.tmp
    saved as .dta format
Number of observations (_N) was 0, now 386.
(386 missing values generated)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(335 observations deleted)
5007 6007 6013 6031 6037 6041 6071 6111 6113 10003 12019 12057 
> 13067 13117 17089 17113 17161 18035 19103 19113 20045 21111 2
> 4015 26005 26065 26145 27053 28047 34019 34041 35013 35043 36
> 091 37021 37051 39035 39041 39045 39103 41051 41067 42091 471
> 49 48085 48091 48187 48381 48491 53035 55073 55101
DEBUG: Running regressions for 51 counties (sampled from 386) (
> acs sample)...
(file C:\Users\ji252\AppData\Local\Temp\ST_828_000004.tmp not
    found)

==========================================
Multnomah County Results:
==========================================

    Variable |        Obs        Mean    Std. dev.       Min   
>      Max
-------------+-------------------------------------------------
> --------
       b_out |          1     .116637           .    .116637   
>  .116637
       t_out |          1    2.070873           .   2.070873   
> 2.070873
        b_in |          1   -.1908973           .  -.1908973  -
> .1908973
        t_in |          1   -8.478744           .  -8.478744  -
> 8.478744
pctile_b_out |          1    98.03922           .   98.03922   
> 98.03922
-------------+-------------------------------------------------
> --------
pctile_t_out |          1    98.03922           .   98.03922   
> 98.03922
 pctile_b_in |          1    11.76471           .   11.76471   
> 11.76471
 pctile_t_in |          1    5.882353           .   5.882353   
> 5.882353

Distribution of coefficients (all counties):

          Out-migration coefficient (County x Post)
-------------------------------------------------------------
      Percentiles      Smallest
 1%    -1.085196      -1.085196
 5%    -.2982568      -.3142822
10%    -.2140841      -.2982568       Obs                  51
25%    -.1398995      -.2641376       Sum of wgt.          51

50%    -.0809548                      Mean          -.0969713
                        Largest       Std. dev.      .1736525
75%    -.0274022       .0827278
90%     .0597266       .0850695       Variance       .0301552
95%     .0850695        .116637       Skewness      -3.599831
99%     .1654969       .1654969       Kurtosis       21.78394

          In-migration coefficient (County x Post)
-------------------------------------------------------------
      Percentiles      Smallest
 1%    -.3479243      -.3479243
 5%    -.2246167        -.25041
10%    -.1908973      -.2246167       Obs                  51
25%    -.1022107      -.2201321       Sum of wgt.          51

50%    -.0567471                      Mean           -.049418
                        Largest       Std. dev.      .1144192
75%     .0085893       .1243257
90%     .0529052       .1767142       Variance       .0130918
95%     .1767142       .2106411       Skewness       .2173722
99%     .2645486       .2645486       Kurtosis       3.832265

Distribution of t-stats (all counties):

                  Out-migration t-statistic
-------------------------------------------------------------
      Percentiles      Smallest
 1%    -12.57733      -12.57733
 5%    -6.612787      -8.190372
10%    -5.895919      -6.612787       Obs                  51
25%    -3.853351      -6.549831       Sum of wgt.          51

50%    -1.652136                      Mean          -2.121933
                        Largest       Std. dev.      2.863281
75%    -.4845576       1.445995
90%     1.208287       2.016212       Variance       8.198376
95%     2.016212       2.070873       Skewness       -1.02686
99%     3.243918       3.243918       Kurtosis       5.132142

                  In-migration t-statistic
-------------------------------------------------------------
      Percentiles      Smallest
 1%    -10.89214      -10.89214
 5%    -8.478744      -9.035348
10%    -5.477742      -8.478744       Obs                  51
25%    -3.008746      -6.274827       Sum of wgt.          51

50%    -1.398889                      Mean          -1.703595
                        Largest       Std. dev.      3.044666
75%     .1468206       2.409428
90%     1.649559       2.468509       Variance       9.269991
95%     2.468509       3.162416       Skewness      -.7348252
99%     5.087091       5.087091       Kurtosis       4.056843
  variable multnomah was float now byte
  variable rank_b_out was float now byte
  variable rank_b_in was float now byte
  variable rank_t_out was float now byte
  variable rank_t_in was float now byte
  (765 bytes saved)
file
    C:/Users/ji252/Documents/GitHub/multnomah-county-tax/data
    > /working/county_flow_coefficients_acs.dta saved
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/data/
> working/county_flow_coefficients_acs.csv saved
County coefficients saved to C:/Users/ji252/Documents/GitHub/mu
> ltnomah-county-tax/data/working/county_flow_coefficients_acs.
> dta
(bin=50, start=-1.085196, width=.02501386)
file
    C:/Users/ji252/Documents/GitHub/multnomah-county-tax/resu
    > lts/flows/fig_hist_out_b_acs.png saved as PNG format
(bin=50, start=-.34792426, width=.01224946)
file
    C:/Users/ji252/Documents/GitHub/multnomah-county-tax/resu
    > lts/flows/fig_hist_in_b_acs.png saved as PNG format
file
    C:/Users/ji252/Documents/GitHub/multnomah-county-tax/resu
    > lts/flows/fig_scatter_out_in_b_acs.png saved as PNG
    format
(bin=50, start=-12.577332, width=.31642498)
file
    C:/Users/ji252/Documents/GitHub/multnomah-county-tax/resu
    > lts/flows/fig_hist_out_t_acs.png saved as PNG format
(bin=50, start=-10.892142, width=.31958467)
file
    C:/Users/ji252/Documents/GitHub/multnomah-county-tax/resu
    > lts/flows/fig_hist_in_t_acs.png saved as PNG format
file
    C:/Users/ji252/Documents/GitHub/multnomah-county-tax/resu
    > lts/flows/fig_scatter_out_in_t_acs.png saved as PNG
    format

          Out-migration coefficient (County x Post)
-------------------------------------------------------------
      Percentiles      Smallest
 1%    -1.085196      -1.085196
 5%    -.2982568      -.3142822
10%    -.2140841      -.2982568       Obs                  51
25%    -.1398995      -.2641376       Sum of wgt.          51

50%    -.0809548                      Mean          -.0969713
                        Largest       Std. dev.      .1736525
75%    -.0274022       .0827278
90%     .0597266       .0850695       Variance       .0301552
95%     .0850695        .116637       Skewness      -3.599831
99%     .1654969       .1654969       Kurtosis       21.78394

          In-migration coefficient (County x Post)
-------------------------------------------------------------
      Percentiles      Smallest
 1%    -.3479243      -.3479243
 5%    -.2246167        -.25041
10%    -.1908973      -.2246167       Obs                  51
25%    -.1022107      -.2201321       Sum of wgt.          51

50%    -.0567471                      Mean           -.049418
                        Largest       Std. dev.      .1144192
75%     .0085893       .1243257
90%     .0529052       .1767142       Variance       .0130918
95%     .1767142       .2106411       Skewness       .2173722
99%     .2645486       .2645486       Kurtosis       3.832265

                  Out-migration t-statistic
-------------------------------------------------------------
      Percentiles      Smallest
 1%    -12.57733      -12.57733
 5%    -6.612787      -8.190372
10%    -5.895919      -6.612787       Obs                  51
25%    -3.853351      -6.549831       Sum of wgt.          51

50%    -1.652136                      Mean          -2.121933
                        Largest       Std. dev.      2.863281
75%    -.4845576       1.445995
90%     1.208287       2.016212       Variance       8.198376
95%     2.016212       2.070873       Skewness       -1.02686
99%     3.243918       3.243918       Kurtosis       5.132142

                  In-migration t-statistic
-------------------------------------------------------------
      Percentiles      Smallest
 1%    -10.89214      -10.89214
 5%    -8.478744      -9.035348
10%    -5.477742      -8.478744       Obs                  51
25%    -3.008746      -6.274827       Sum of wgt.          51

50%    -1.398889                      Mean          -1.703595
                        Largest       Std. dev.      3.044666
75%     .1468206       2.409428
90%     1.649559       2.468509       Variance       9.269991
95%     2.468509       3.162416       Skewness      -.7348252
99%     5.087091       5.087091       Kurtosis       4.056843
file C:\Users\ji252\AppData\Local\Temp\ST_828_000005.tmp
    saved as .dta format
Number of observations (_N) was 0, now 40.
(40 missing values generated)
(40 missing values generated)
(40 missing values generated)
variable stat_name was str1 now str7
(1 real change made)
(1 real change made)
variable stat_description was str1 now str35
(1 real change made)
variable stat_name was str7 now str8
(1 real change made)
(1 real change made)
variable stat_description was str35 now str38
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
variable stat_name was str8 now str14
(1 real change made)
(1 real change made)
variable stat_description was str38 now str39
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
variable stat_description was str39 now str42
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
variable stat_name was str14 now str15
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
variable stat_description was str42 now str54
(1 real change made)
variable stat_name was str15 now str16
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 observation deleted)
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/resul
> ts/flows/flow_analysis_stats.xlsx saved
Exported descriptive statistics to flow_analysis_stats.xlsx, sh
> eet: acs

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                                51  
    -----------------------------------------
file C:\Users\ji252\AppData\Local\Temp\ST_828_000006.tmp
    saved as .dta format
(50 observations deleted)
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/resul
> ts/flows/flow_analysis_stats.xlsx saved
Exported 1 counties with larger out-migration coef to sheet: la
> rger_out_acs
(45 observations deleted)
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/resul
> ts/flows/flow_analysis_stats.xlsx saved
Exported 6 counties with smaller in-migration coef to sheet: sm
> aller_in_acs
(51 observations deleted)
no observations
r(2000);

end of do-file

r(2000);

. do "C:\Users\ji252\Documents\GitHub\multnomah-county-tax\code
> \02_flow_analysis.do"

. /************************************************************
> *******************
> File Name:              02_flow_analysis.do
> Creator:                John Iselin
> Date Update:    January 31, 2026
> 
> Called by: 00_multnomah.do
> 
> Purpose: Perform flow-based analysis on IRS data.
> 
> Outputs:
> All outputs are produced twice: once for all counties and onc
> e for ACS counties
> only (with _acs suffix). ACS sample includes property tax rat
> e controls.
> 
> - county_flow_coefficients[_acs].dta/csv: flow coefficients f
> or all counties
>   (b_out, b_in, se_out, se_in, t-stats, p-values, percentile 
> ranks)
> - fig_multnomah_post_*[_acs].png: flow coefficient plots for 
> Multnomah
> - fig_hist_out_*[_acs].png: Histogram of out-migration coeffi
> cients (with percentile)
> - fig_hist_in_*[_acs].png: Histogram of in-migration coeffici
> ents (with percentile)
> - fig_scatter_out_in_*[_acs].png: Scatter plot of out vs in c
> oefficients
> - fig_multnomah_out_*[_acs].png: Event study plots for out-mi
> gration
> - fig_multnomah_in_*[_acs].png: Event study plots for in-migr
> ation
> - fig_multnomah_both_*[_acs].png: Combined event study plots
> 
> Excel output (flow_analysis_stats.xlsx):
> - all/acs: Summary statistics for Multnomah and distribution
> - larger_out_all/acs: Counties with larger out-migration coef
> ficients
> - smaller_in_all/acs: Counties with smaller in-migration coef
> ficients
> - worse_both_all/acs: Counties worse on both dimensions
> - larger_t_out_all/acs: Counties with larger out-migration t-
> statistics
> - smaller_t_in_all/acs: Counties with smaller in-migration t-
> statistics
> 
> Debug mode:
> - Set local debug = 1 to run on a random subset of counties f
> or faster testing
> - Set local debug_n to control the number of random counties 
> (default: 50)
> - Multnomah County is always included in the debug sample
> - Set debug = 0 for full production runs
> 
> Authors: John Iselin
> 
> For more information, contact john.iselin@yale.edu
> 
> *************************************************************
> ******************/
. 
. 
. ** Start log file
. capture log close log_02

. log using "${logs}02_log_flow_${date}", replace text name(log
> _02)
---------------------------------------------------------------
      name:  log_02
       log:  C:/Users/ji252/Documents/GitHub/multnomah-county-t
> ax/code/logs/02_log_flow_2026-01-30.log
  log type:  text
 opened on:  31 Jan 2026, 09:59:07

. 
. ** Parameters
. local reps = 100

. 
. ** Debug mode: set to 1 to run on a random subset of counties
>  for faster testing
. ** Set to 0 for full production run
. local debug = 1

. local debug_n = 20  // Number of random counties to sample in
>  debug mode (plus Multnomah)

. 
. ** Load ACS data to get the set of counties
. use "${data}working/acs_county_gross_18plus", clear

. 
. ** Keep required variables
. keep year fips

. 
. ** Keep only always-observed fips
. bysort fips: gen ct = _N

. tab ct

         ct |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |        168        3.48        3.48
          7 |        287        5.95        9.43
         10 |      4,370       90.57      100.00
------------+-----------------------------------
      Total |      4,825      100.00

. keep if ct == 10
(455 observations deleted)

. 
. ** Keep fips
. keep fips

. 
. ** Drop duplicates
. duplicates drop

Duplicates in terms of all variables

(3,933 observations deleted)

. 
. ** Save to tempfile
. tempfile acs_fips

. save `acs_fips'
file C:\Users\ji252\AppData\Local\Temp\ST_828_000001.tmp
    saved as .dta format

. clear

. 
. ** Load IRS Data
. use "${data}working/irs_county_flow.dta", clear

. 
. ** Sample restrictions
. drop if inlist(state_fips_o, 2, 15)     // Alaska and Hawaii
(3,109 observations deleted)

. drop if inlist(state_fips_d, 2, 15)     // Alaska and Hawaii
(2,293 observations deleted)

. 
. ** Clean up variables
. drop fips

. 
. ** Mover indicators
. gen mover = fips_o != fips_d

. 
. ** Generate flow id
. egen flow_id = group(fips_d fips_o)

. 
. ** Declare panel and fill in missing values
. xtset flow_id year

Panel variable: flow_id (unbalanced)
 Time variable: year, 2016 to 2022, but with gaps
         Delta: 1 unit

. tsfill, full

. 
. ** Keep required variables
. keep fips_d fips_o flow_id year mover n1 n2 agi

. 
. ** Replace with 0s
. replace n1 = 0 if missing(n1)
(140,172 real changes made)

. replace n2 = 0 if missing(n2)
(140,172 real changes made)

. replace agi = 0 if missing(agi)
(140,172 real changes made)

. replace agi = 0 if agi < 0
(89 real changes made)

. 
. ** Merge with time-varying controls
. 
. ** Keep if in donor pool in both origin and destination
. foreach x in "o" "d" {
  2. 
.         ** Fill in missing fips
.         bysort flow_id: egen tmp = mean(fips_`x')
  3.         replace fips_`x' = tmp if missing(fips_`x')
  4.         drop tmp
  5. 
.         ** Merge with relevent variables
.         gen fips = fips_`x'
  6.         merge m:1 fips using "${data}working/ids",        
>                                       ///
>                 keep(match) gen(merge_ids_`x')
  7.         merge m:1 year fips using "${data}working/bls_unem
> ployment",    ///
>                 keep(match) gen(merge_bls_`x')
  8.         merge m:1 year fips using "${data}working/bea_econ
> omics",               ///
>                 keep(match) gen(merge_bea_`x')
  9.         merge m:1 fips using `acs_fips', keep(master match
> ) gen(merge_acs_`x')
 10.         merge m:1 year fips using "${data}working/property
> _tax_rates_overall", ///
>                 gen(proptx_merge_`x') keep(master match) keep
> using(prop_rate_mean )
 11. 
.         ** Rename
.         rename state_name state_name_`x'
 12.         rename state_fips state_fips_`x'
 13.         rename county_name county_name_`x'
 14.         rename county_fips county_fips_`x'
 15.         rename unemp unemp_`x'
 16.         rename population pop_`x'
 17.         rename per_capita_income per_capita_income_`x'
 18.         rename prop_rate_mean prop_rate_mean_`x'
 19.         drop fips
 20. 
. } // END ORIGIN-DESTINATION LOOP
(140,172 real changes made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                           497,448  (merge_ids_o==3)
    -----------------------------------------
(variable fips was float, now double to accommodate using
       data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                           491,939  (merge_bls_o==3)
    -----------------------------------------

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                           484,407  (merge_bea_o==3)
    -----------------------------------------

    Result                      Number of obs
    -----------------------------------------
    Not matched                       202,846
        from master                   202,846  (merge_acs_o==1)
        from using                          0  (merge_acs_o==2)

    Matched                           281,561  (merge_acs_o==3)
    -----------------------------------------

    Result                      Number of obs
    -----------------------------------------
    Not matched                       189,234
        from master                   189,234  (proptx_merge_o=
> =1)
        from using                          0  (proptx_merge_o=
> =2)

    Matched                           295,173  (proptx_merge_o=
> =3)
    -----------------------------------------
(136,291 real changes made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                           484,407  (merge_ids_d==3)
    -----------------------------------------
(variable fips was float, now double to accommodate using
       data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                           480,970  (merge_bls_d==3)
    -----------------------------------------

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                           475,524  (merge_bea_d==3)
    -----------------------------------------

    Result                      Number of obs
    -----------------------------------------
    Not matched                       207,879
        from master                   207,879  (merge_acs_d==1)
        from using                          0  (merge_acs_d==2)

    Matched                           267,645  (merge_acs_d==3)
    -----------------------------------------

    Result                      Number of obs
    -----------------------------------------
    Not matched                       193,163
        from master                   193,163  (proptx_merge_d=
> =1)
        from using                          0  (proptx_merge_d=
> =2)

    Matched                           282,361  (proptx_merge_d=
> =3)
    -----------------------------------------

. 
. ** Tag flows to-and-from acs counties
. gen acs_flow = merge_acs_d == 3 & merge_acs_o == 3

. label var acs_flow "Flows to and from ACS counties"

. 
. ** Multnomah indicators
. gen out_multnomah = (state_fips_o == 41 & county_fips_o == 51
> )

. gen in_multnomah = (state_fips_d == 41 & county_fips_d == 51)

. 
. ** Post-indicators
. gen post = year > 2020

. 
. ** Interactions
. gen in_multnomah_post = in_multnomah * post

. gen out_multnomah_post = out_multnomah * post

. 
. ** Create interactions manually (base year = 2020)
. forvalues y = 2016/2022 {
  2.         gen x_out_`y' = out_multnomah * (year == `y')
  3.         gen x_in_`y' = in_multnomah * (year == `y')
  4. }

. 
. ** Drop base year (2020)
. drop x_out_2020 x_in_2020

. 
. ** Save main analysis dataset to tempfile
. tempfile main_data

. save `main_data'
file C:\Users\ji252\AppData\Local\Temp\ST_828_000002.tmp
    saved as .dta format

. 
. *************************************************************
> *******************
. ** MAIN ANALYSIS LOOP: Run regressions for (1) all counties, 
> (2) ACS counties
. ** The second iteration restricts to flows where acs_flow == 
> 1 and adds
. ** property tax rate controls (prop_rate_mean_o and prop_rate
> _mean_d)
. *************************************************************
> *******************
. 
. foreach sample in "acs" "all" {
  2. 
.         ** Set sample-specific parameters
.         if "`sample'" == "all" {
  3.                 local sample_cond ""
  4.                 local covars "unemp_* pop_* per_capita_inc
> ome_*"
  5.                 local file_suffix ""
  6.                 local title_suffix ""
  7.         }
  8.         else if "`sample'" == "acs" {
  9.                 local sample_cond "& acs_flow == 1"
 10.                 local covars "unemp_* pop_* per_capita_inc
> ome_* prop_rate_mean_o prop_rate_mean_d"
 11.                 local file_suffix "_acs"
 12.                 local title_suffix " (ACS Counties)"
 13.         }
 14. 
.         dis ""
 15.         dis "=============================================
> ==========================="
 16.         dis "RUNNING ANALYSIS FOR SAMPLE: `sample'"
 17.         dis "Sample condition: `sample_cond'"
 18.         dis "Covariates: `covars'"
 19.         dis "=============================================
> ==========================="
 20.         dis ""
 21. 
. *************************************************************
> *******************
. ** REGRESSION 1: Multnomah X Post (flow DID)
. *************************************************************
> *******************
. 
. ** Load main data
. use `main_data', clear
 22. 
. ** Loop over outcome variables
. foreach outcome in n1 n2 agi {
 23. 
.         ** Set outcome label for graphs
.         if "`outcome'" == "n1" local outcome_label "Number of
>  Returns"
 24.         if "`outcome'" == "n2" local outcome_label "Number
>  of Exemptions"
 25.         if "`outcome'" == "agi" local outcome_label "Adjus
> ted Gross Income"
 26. 
.         ** Regression 1a: With covariates
.         ppmlhdfe `outcome' i.out_multnomah_post i.in_multnoma
> h_post     ///
>                 `covars'                                     
>                                                              
>       ///
>                 if mover == 1 `sample_cond',                 
>                                            ///
>                 absorb(year flow_id) vce(cluster flow_id)
 27.         estimates store `outcome'_with_covars
 28. 
.         ** Regression 1b: Without covariates
.         ppmlhdfe `outcome' i.out_multnomah_post i.in_multnoma
> h_post     ///
>                 if mover == 1 `sample_cond',                 
>                                            ///
>                 absorb(year flow_id) vce(cluster flow_id)
 29.         estimates store `outcome'_no_covars
 30. 
.         ** Plot both regressions
.         coefplot        (`outcome'_with_covars, label("With C
> ovariates")        ///
>                                         mc(navy) ciopts(lc(na
> vy)))                                              ///
>                                 (`outcome'_no_covars, label("
> Without Covariates")       ///
>                                         mc(maroon) ciopts(lc(
> maroon))),                                 ///
>                 keep(1.out_multnomah_post 1.in_multnomah_post
> )                          ///
>                 ciopts(recast(rcap))                         
>                                                    ///
>                 yline(0, lc(gs10) lp(dash))                  
>                                            ///
>                 xline(0, lc(gs10) lp(dash))                  
>                                            ///
>                 coeflabels(     1.out_multnomah_post = "Out-m
> igration"                  ///
>                                         1.in_multnomah_post =
>  "In-migration")                   ///
>                 ytitle("Coefficient")                        
>                                                    ///
>                 xtitle("")                                   
>                                                              
>       ///
>                 legend(pos(6) rows(1))                       
>                                                    ///
>                 title("Migration Flows: Multnomah County x Po
> st`title_suffix'") ///
>                 subtitle("`outcome_label'")                  
>                                                    ///
>                 graphregion(color(white))
 31. 
.         graph export "${results}flows/fig_multnomah_post_`out
> come'`file_suffix'.png", replace
 32. 
. 
. } // END OUTCOME LOOP
 33. 
. *************************************************************
> *******************
. ** REGRESSION 1b: Loop over all counties (Permutation-style a
> nalysis)
. ** Purpose: Run same flow regression for each county to creat
> e distribution
. **          of treatment effects for comparison with Multnoma
> h
. *************************************************************
> *******************
. 
. ** Load main data fresh for permutation analysis
. use `main_data', clear
 34. 
. ** Get list of unique origin fips codes (respecting sample co
> ndition)
. if "`sample'" == "all" {
 35.         levelsof fips_o, local(fips_list)
 36. }
 37. else {
 38.         levelsof fips_o if acs_flow == 1, local(fips_list)
 39. }
 40. local n_fips_full : word count `fips_list'
 41. 
. ** Debug mode: randomly sample a subset of counties (always i
> nclude Multnomah)
. if `debug' == 1 {
 42.         dis ""
 43.         dis "*** DEBUG MODE: Sampling `debug_n' random cou
> nties (plus Multnomah) ***"
 44.         dis ""
 45. 
.         ** Save current data
.         tempfile main_data_tmp
 46.         save `main_data_tmp'
 47. 
.         ** Create dataset with all fips codes for sampling
.         clear
 48.         local n_fips_tmp : word count `fips_list'
 49.         set obs `n_fips_tmp'
 50.         gen fips = .
 51.         local i = 1
 52.         foreach f of local fips_list {
 53.                 replace fips = `f' in `i'
 54.                 local i = `i' + 1
 55.         }
 56. 
.         ** Tag Multnomah (always include)
.         gen multnomah = (fips == 41051)
 57. 
.         ** Generate random number for sampling
.         set seed 12345  // For reproducibility; change or rem
> ove for different random samples
 58.         gen random = runiform()
 59. 
.         ** Sort: Multnomah first, then random order
.         gsort -multnomah random
 60. 
.         ** Keep Multnomah + debug_n random counties
.         keep if _n <= `debug_n' + 1 | multnomah == 1
 61. 
.         ** Extract new fips list
.         levelsof fips, local(fips_list)
 62. 
.         ** Reload main data
.         use `main_data_tmp', clear
 63. }
 64. 
. local n_fips : word count `fips_list'
 65. if `debug' == 1 {
 66.         dis "DEBUG: Running regressions for `n_fips' count
> ies (sampled from `n_fips_full') (`sample' sample)..."
 67. }
 68. else {
 69.         dis "Running regressions for `n_fips' counties (`s
> ample' sample)..."
 70. }
 71. 
. ** Initialize tempfile to store results
. tempfile county_results
 72. postfile county_coefs fips b_out se_out b_in se_in using `
> county_results', replace
 73. 
. ** Counter for display
. local ct = 1
 74. 
. foreach f of local fips_list {
 75. 
.         ** Display status every 100 counties
.         if mod(`ct', 100) == 0 {
 76.                 dis "Processing county `ct' of `n_fips' (f
> ips = `f')..."
 77.         }
 78. 
.         ** Generate treatment vars
.         gen out_tmp = fips_o == `f'
 79.         gen in_tmp = fips_d == `f'
 80. 
.         ** Interactions
.         gen out_post_tmp = out_tmp * post
 81.         gen in_post_tmp = in_tmp * post
 82. 
.         ** Run regression with capture to handle potential er
> rors
.         capture {
 83.                 ** Regression: With covariates
.                  ppmlhdfe agi i.out_post_tmp i.in_post_tmp   
>    ///
>                         `covars'                             
>                                                    ///
>                         if mover == 1 `sample_cond',         
>                            ///
>                         absorb(year flow_id) vce(cluster flow
> _id)
 84. 
.                 ** Store coefficients and SEs
.                 local tmp_b_out = _b[1.out_post_tmp]
 85.                 local tmp_se_out = _se[1.out_post_tmp]
 86.                 local tmp_b_in = _b[1.in_post_tmp]
 87.                 local tmp_se_in = _se[1.in_post_tmp]
 88. 
.                 ** Post results
.                 post county_coefs (`f') (`tmp_b_out') (`tmp_s
> e_out') (`tmp_b_in') (`tmp_se_in')
 89.         }
 90. 
.         ** If regression failed, post missing values
.         if _rc != 0 {
 91.                 post county_coefs (`f') (.) (.) (.) (.)
 92.                 dis "Warning: Regression failed for fips `
> f'"
 93.         }
 94. 
. 
.         ** Drop temporary vars
.         drop out_tmp in_tmp out_post_tmp in_post_tmp
 95. 
.         ** Update count
.         local ct = `ct' + 1
 96. 
. } // END FIPS LOOP
 97. 
. ** Close postfile
. postclose county_coefs
 98. 
. ** Load results
. use `county_results', clear
 99. 
. ** Add identifiers
. gen multnomah = (fips == 41051)
100. label var fips "County FIPS code"
101. label var b_out "Out-migration coefficient (County x Post)
> "
102. label var se_out "Out-migration SE"
103. label var b_in "In-migration coefficient (County x Post)"
104. label var se_in "In-migration SE"
105. label var multnomah "Multnomah County indicator"
106. 
. ** Calculate t-statistics and p-values
. gen t_out = b_out / se_out
107. gen t_in = b_in / se_in
108. gen p_out = 2 * (1 - normal(abs(t_out)))
109. gen p_in = 2 * (1 - normal(abs(t_in)))
110. 
. label var t_out "Out-migration t-statistic"
111. label var t_in "In-migration t-statistic"
112. label var p_out "Out-migration p-value"
113. label var p_in "In-migration p-value"
114. 
. ** Calculate percentile ranks for Multnomah
. foreach x in "b" "t" {
115.         egen rank_`x'_out = rank(`x'_out)
116.         egen rank_`x'_in = rank(`x'_in)
117.         qui count if !missing(`x'_out)
118.         gen pctile_`x'_out = 100 * rank_`x'_out / r(N)
119.         qui count if !missing(`x'_in)
120.         gen pctile_`x'_in = 100 * rank_`x'_in / r(N)
121. 
. }
122. 
. label var pctile_b_out "Percentile rank of out-migration coef
> "
123. label var pctile_b_in "Percentile rank of in-migration coe
> f"
124. label var pctile_t_out "Percentile rank of out-migration t
> -stat"
125. label var pctile_t_in "Percentile rank of in-migration t-s
> tat"
126. 
. ** Display Multnomah's position
. dis ""
127. dis "=========================================="
128. dis "Multnomah County Results:"
129. dis "=========================================="
130. summ b_out t_out b_in t_in pctile_*_out pctile_*_in if mul
> tnomah == 1
131. 
. ** Display distribution summary
. dis ""
132. dis "Distribution of coefficients (all counties):"
133. summ b_out b_in, detail
134. 
. dis ""
135. dis "Distribution of t-stats (all counties):"
136. summ t_out t_in, detail
137. 
. ** Save county coefficients dataset
. compress
138. save "${data}working/county_flow_coefficients`file_suffix'
> .dta", replace
139. export delimited using "${data}working/county_flow_coeffic
> ients`file_suffix'.csv", replace
140. 
. dis "County coefficients saved to ${data}working/county_flow_
> coefficients`file_suffix'.dta"
141. 
. *************************************************************
> *******************
. ** SECTION: Multnomah vs Distribution Plots (Histogram Compar
> ison)
. ** Purpose: Plot Multnomah's coefficients against distributio
> n of all counties
. *************************************************************
> *******************
. 
. ** Load the county coefficients (already in memory, but reloa
> d for clarity)
. use "${data}working/county_flow_coefficients`file_suffix'.dta
> ", clear
142. 
. ** Loop over beta and t-stats
. foreach x in "b" "t" {
143. 
.         ** Label
.         if "`x'" == "b" local txt "Coefficients"
144.         else if "`x'" == "t" local txt = "T-Statistics"
145. 
.         ** Store Multnomah's coefficients for reference lines
.         summ `x'_out if multnomah == 1, meanonly
146.         local multnomah_`x'_out = r(mean)
147.         summ `x'_in if multnomah == 1, meanonly
148.         local multnomah_`x'_in = r(mean)
149.         summ pctile_`x'_out if multnomah == 1, meanonly
150.         local multnomah_pctile_out = r(mean)
151.         summ pctile_`x'_in if multnomah == 1, meanonly
152.         local multnomah_pctile_in = r(mean)
153. 
. 
.         ** Plot 1: Out-migration coefficient distribution wit
> h Multnomah
.         histogram `x'_out if !missing(`x'_out),              
>                                                    ///
>                 bin(50)                                      
>                                                              
>               ///
>                 fcolor(navy%50) lcolor(navy)                 
>                                                    ///
>                 xline(`multnomah_`x'_out', lcolor(red) lwidth
> (thick) lpattern(solid)) ///
>                 xtitle("Out-migration `txt' (County x Post)")
>                    ///
>                 ytitle("Frequency")                          
>                                                            //
> /
>                 title("Distribution of Out-Migration `txt'`ti
> tle_suffix'")              ///
>                 subtitle("Red line = Multnomah County (percen
> tile: `: display %4.1f `multnomah_pctile_out'')") ///
>                 graphregion(color(white))
154. 
.         graph export "${results}flows/fig_hist_out_`x'`file_s
> uffix'.png", replace
155. 
.         ** Plot 2: In-migration coefficient distribution with
>  Multnomah
.         histogram `x'_in if !missing(`x'_in),                
>                                                    ///
>                 bin(50)                                      
>                                                              
>               ///
>                 fcolor(maroon%50) lcolor(maroon)             
>                                                    ///
>                 xline(`multnomah_`x'_in', lcolor(red) lwidth(
> thick) lpattern(solid)) ///
>                 xtitle("In-migration `txt' (County x Post)") 
>                            ///
>                 ytitle("Frequency")                          
>                                                            //
> /
>                 title("Distribution of In-Migration `txt'`tit
> le_suffix'")               ///
>                 subtitle("Red line = Multnomah County (percen
> tile: `: display %4.1f `multnomah_pctile_in'')") ///
>                 graphregion(color(white))
156. 
.         graph export "${results}flows/fig_hist_in_`x'`file_su
> ffix'.png", replace
157. 
.         ** Plot 3: Combined scatter of out vs in coefficients
.         twoway  (scatter `x'_in `x'_out if multnomah == 0,   
>                                            ///
>                                 mc(navy%30) ms(O) msize(small
> ))                                                 ///
>                         (scatter `x'_in `x'_out if multnomah 
> == 1,                                              ///
>                                 mc(red) ms(D) msize(large)), 
>                                                    ///
>                 xline(0, lc(gs10) lp(dash))                  
>                                                    ///
>                 yline(0, lc(gs10) lp(dash))                  
>                                                    ///
>                 xtitle("Out-migration `txt'")                
>                                    ///
>                 ytitle("In-migration `txt'")                 
>                                            ///
>                 title("Out- vs In-Migration Effects by County
> `title_suffix'")   ///
>                 legend(order(1 "Other Counties" 2 "Multnomah 
> County") pos(6) rows(1)) ///
>                 graphregion(color(white))
158. 
.         graph export "${results}flows/fig_scatter_out_in_`x'`
> file_suffix'.png", replace
159. 
. 
. } // END BETA / T-STAT LOOP
160. 
. *************************************************************
> *******************
. ** SECTION: Export Descriptive Statistics to Excel
. ** Purpose: Export Multnomah vs Distribution stats to Excel f
> ile
. *************************************************************
> *******************
. 
. ** Get Multnomah's statistics
. 
. ** Loop over migration type
. foreach x in "in" "out" {
161. 
.         summ se_`x' if multnomah == 1, meanonly
162.         local m_se_`x' = r(mean)
163. 
.         summ p_`x' if multnomah == 1, meanonly
164.         local m_p_`x' = r(mean)
165. 
.         ** Loop over beta / t-stat
.         foreach y in "b" "t" {
166. 
.                 summ `y'_`x' if multnomah == 1, meanonly
167.                 local m_`y'_`x' = r(mean)
168. 
.                 summ pctile_`y'_`x' if multnomah == 1, meanon
> ly
169.                 local m_pctile_`y'_`x' = r(mean)
170. 
.         } // END BETA / T-STAT LOOP
171. 
. 
. } // END IN/OUT LOOP
172. 
. ** Count statistics
. qui count if !missing(b_out)
173. local n_counties_out = r(N)
174. qui count if !missing(b_in)
175. local n_counties_in = r(N)
176. qui count if !missing(b_out) & !missing(b_in)
177. local n_counties_both = r(N)
178. 
. ** Count counties with more extreme coefficients than Multnom
> ah
. ** For out-migration: larger (more positive) is "worse"
. ** For in-migration: smaller (more negative) is "worse"
. qui count if b_out > `m_b_out' & !missing(b_out)
179. local n_larger_out = r(N)
180. qui count if b_out > `m_b_out' & !missing(b_out) & p_out <
>  0.05
181. local n_larger_out_sig = r(N)
182. 
. qui count if b_in < `m_b_in' & !missing(b_in)
183. local n_smaller_in = r(N)
184. qui count if b_in < `m_b_in' & !missing(b_in) & p_in < 0.0
> 5
185. local n_smaller_in_sig = r(N)
186. 
. ** Counties with both more out AND less in (worse on both dim
> ensions)
. qui count if b_out > `m_b_out' & b_in < `m_b_in' & !missing(b
> _out) & !missing(b_in)
187. local n_worse_both = r(N)
188. qui count if b_out > `m_b_out' & b_in < `m_b_in' & !missin
> g(b_out) & !missing(b_in) & p_out < 0.05 & p_in < 0.05
189. local n_worse_both_sig = r(N)
190. 
. ** Distribution statistics for out-migration
. summ b_out, detail
191. local dist_out_mean = r(mean)
192. local dist_out_sd = r(sd)
193. local dist_out_min = r(min)
194. local dist_out_max = r(max)
195. local dist_out_p25 = r(p25)
196. local dist_out_p50 = r(p50)
197. local dist_out_p75 = r(p75)
198. 
. ** Distribution statistics for in-migration
. summ b_in, detail
199. local dist_in_mean = r(mean)
200. local dist_in_sd = r(sd)
201. local dist_in_min = r(min)
202. local dist_in_max = r(max)
203. local dist_in_p25 = r(p25)
204. local dist_in_p50 = r(p50)
205. local dist_in_p75 = r(p75)
206. 
. ** Distribution statistics for t-stats
. summ t_out, detail
207. local dist_t_out_mean = r(mean)
208. local dist_t_out_sd = r(sd)
209. local dist_t_out_p50 = r(p50)
210. 
. summ t_in, detail
211. local dist_t_in_mean = r(mean)
212. local dist_t_in_sd = r(sd)
213. local dist_t_in_p50 = r(p50)
214. 
. ** Save county coefficients to tempfile for later use in expo
> rt sheets
. tempfile county_coefs_for_export
215. save `county_coefs_for_export'
216. 
. ** Create a new dataset with the statistics
. clear
217. set obs 40
218. 
. ** Create variables
. gen stat_name = ""
219. gen stat_value = .
220. gen stat_description = ""
221. 
. ** Row counter
. local row = 1
222. 
. ** ==========================================================
> ==================
. ** MULTNOMAH STATISTICS
. ** ==========================================================
> ==================
. 
. replace stat_name = "m_b_out" in `row'
223. replace stat_value = `m_b_out' in `row'
224. replace stat_description = "Multnomah out-migration coeffi
> cient" in `row'
225. local row = `row' + 1
226. 
. replace stat_name = "m_se_out" in `row'
227. replace stat_value = `m_se_out' in `row'
228. replace stat_description = "Multnomah out-migration standa
> rd error" in `row'
229. local row = `row' + 1
230. 
. replace stat_name = "m_t_out" in `row'
231. replace stat_value = `m_t_out' in `row'
232. replace stat_description = "Multnomah out-migration t-stat
> istic" in `row'
233. local row = `row' + 1
234. 
. replace stat_name = "m_p_out" in `row'
235. replace stat_value = `m_p_out' in `row'
236. replace stat_description = "Multnomah out-migration p-valu
> e" in `row'
237. local row = `row' + 1
238. 
. replace stat_name = "m_pctile_b_out" in `row'
239. replace stat_value = `m_pctile_b_out' in `row'
240. replace stat_description = "Multnomah out-migration percen
> tile rank" in `row'
241. local row = `row' + 1
242. 
. replace stat_name = "m_b_in" in `row'
243. replace stat_value = `m_b_in' in `row'
244. replace stat_description = "Multnomah in-migration coeffic
> ient" in `row'
245. local row = `row' + 1
246. 
. replace stat_name = "m_se_in" in `row'
247. replace stat_value = `m_se_in' in `row'
248. replace stat_description = "Multnomah in-migration standar
> d error" in `row'
249. local row = `row' + 1
250. 
. replace stat_name = "m_t_in" in `row'
251. replace stat_value = `m_t_in' in `row'
252. replace stat_description = "Multnomah in-migration t-stati
> stic" in `row'
253. local row = `row' + 1
254. 
. replace stat_name = "m_p_in" in `row'
255. replace stat_value = `m_p_in' in `row'
256. replace stat_description = "Multnomah in-migration p-value
> " in `row'
257. local row = `row' + 1
258. 
. replace stat_name = "m_pctile_b_in" in `row'
259. replace stat_value = `m_pctile_b_in' in `row'
260. replace stat_description = "Multnomah in-migration percent
> ile rank" in `row'
261. local row = `row' + 1
262. 
. ** ==========================================================
> ==================
. ** COUNT STATISTICS
. ** ==========================================================
> ==================
. 
. replace stat_name = "n_counties_out" in `row'
263. replace stat_value = `n_counties_out' in `row'
264. replace stat_description = "Number of counties with out-mi
> gration coef" in `row'
265. local row = `row' + 1
266. 
. replace stat_name = "n_counties_in" in `row'
267. replace stat_value = `n_counties_in' in `row'
268. replace stat_description = "Number of counties with in-mig
> ration coef" in `row'
269. local row = `row' + 1
270. 
. replace stat_name = "n_counties_both" in `row'
271. replace stat_value = `n_counties_both' in `row'
272. replace stat_description = "Number of counties with both c
> oefs" in `row'
273. local row = `row' + 1
274. 
. replace stat_name = "n_larger_out" in `row'
275. replace stat_value = `n_larger_out' in `row'
276. replace stat_description = "Counties with larger out-migra
> tion coef than Multnomah" in `row'
277. local row = `row' + 1
278. 
. replace stat_name = "n_larger_out_sig" in `row'
279. replace stat_value = `n_larger_out_sig' in `row'
280. replace stat_description = "Counties with larger out-migra
> tion coef (p<0.05)" in `row'
281. local row = `row' + 1
282. 
. replace stat_name = "n_smaller_in" in `row'
283. replace stat_value = `n_smaller_in' in `row'
284. replace stat_description = "Counties with smaller in-migra
> tion coef than Multnomah" in `row'
285. local row = `row' + 1
286. 
. replace stat_name = "n_smaller_in_sig" in `row'
287. replace stat_value = `n_smaller_in_sig' in `row'
288. replace stat_description = "Counties with smaller in-migra
> tion coef (p<0.05)" in `row'
289. local row = `row' + 1
290. 
. replace stat_name = "n_worse_both" in `row'
291. replace stat_value = `n_worse_both' in `row'
292. replace stat_description = "Counties worse on both out AND
>  in migration" in `row'
293. local row = `row' + 1
294. 
. replace stat_name = "n_worse_both_sig" in `row'
295. replace stat_value = `n_worse_both_sig' in `row'
296. replace stat_description = "Counties worse on both (p<0.05
>  for both)" in `row'
297. local row = `row' + 1
298. 
. ** ==========================================================
> ==================
. ** DISTRIBUTION STATISTICS - OUT-MIGRATION
. ** ==========================================================
> ==================
. 
. replace stat_name = "dist_out_mean" in `row'
299. replace stat_value = `dist_out_mean' in `row'
300. replace stat_description = "Distribution mean: out-migrati
> on coef" in `row'
301. local row = `row' + 1
302. 
. replace stat_name = "dist_out_sd" in `row'
303. replace stat_value = `dist_out_sd' in `row'
304. replace stat_description = "Distribution SD: out-migration
>  coef" in `row'
305. local row = `row' + 1
306. 
. replace stat_name = "dist_out_min" in `row'
307. replace stat_value = `dist_out_min' in `row'
308. replace stat_description = "Distribution min: out-migratio
> n coef" in `row'
309. local row = `row' + 1
310. 
. replace stat_name = "dist_out_max" in `row'
311. replace stat_value = `dist_out_max' in `row'
312. replace stat_description = "Distribution max: out-migratio
> n coef" in `row'
313. local row = `row' + 1
314. 
. replace stat_name = "dist_out_p25" in `row'
315. replace stat_value = `dist_out_p25' in `row'
316. replace stat_description = "Distribution 25th pctile: out-
> migration coef" in `row'
317. local row = `row' + 1
318. 
. replace stat_name = "dist_out_p50" in `row'
319. replace stat_value = `dist_out_p50' in `row'
320. replace stat_description = "Distribution median: out-migra
> tion coef" in `row'
321. local row = `row' + 1
322. 
. replace stat_name = "dist_out_p75" in `row'
323. replace stat_value = `dist_out_p75' in `row'
324. replace stat_description = "Distribution 75th pctile: out-
> migration coef" in `row'
325. local row = `row' + 1
326. 
. ** ==========================================================
> ==================
. ** DISTRIBUTION STATISTICS - IN-MIGRATION
. ** ==========================================================
> ==================
. 
. replace stat_name = "dist_in_mean" in `row'
327. replace stat_value = `dist_in_mean' in `row'
328. replace stat_description = "Distribution mean: in-migratio
> n coef" in `row'
329. local row = `row' + 1
330. 
. replace stat_name = "dist_in_sd" in `row'
331. replace stat_value = `dist_in_sd' in `row'
332. replace stat_description = "Distribution SD: in-migration 
> coef" in `row'
333. local row = `row' + 1
334. 
. replace stat_name = "dist_in_min" in `row'
335. replace stat_value = `dist_in_min' in `row'
336. replace stat_description = "Distribution min: in-migration
>  coef" in `row'
337. local row = `row' + 1
338. 
. replace stat_name = "dist_in_max" in `row'
339. replace stat_value = `dist_in_max' in `row'
340. replace stat_description = "Distribution max: in-migration
>  coef" in `row'
341. local row = `row' + 1
342. 
. replace stat_name = "dist_in_p25" in `row'
343. replace stat_value = `dist_in_p25' in `row'
344. replace stat_description = "Distribution 25th pctile: in-m
> igration coef" in `row'
345. local row = `row' + 1
346. 
. replace stat_name = "dist_in_p50" in `row'
347. replace stat_value = `dist_in_p50' in `row'
348. replace stat_description = "Distribution median: in-migrat
> ion coef" in `row'
349. local row = `row' + 1
350. 
. replace stat_name = "dist_in_p75" in `row'
351. replace stat_value = `dist_in_p75' in `row'
352. replace stat_description = "Distribution 75th pctile: in-m
> igration coef" in `row'
353. local row = `row' + 1
354. 
. ** ==========================================================
> ==================
. ** DISTRIBUTION STATISTICS - T-STATISTICS
. ** ==========================================================
> ==================
. 
. replace stat_name = "dist_t_out_mean" in `row'
355. replace stat_value = `dist_t_out_mean' in `row'
356. replace stat_description = "Distribution mean: out-migrati
> on t-stat" in `row'
357. local row = `row' + 1
358. 
. replace stat_name = "dist_t_out_sd" in `row'
359. replace stat_value = `dist_t_out_sd' in `row'
360. replace stat_description = "Distribution SD: out-migration
>  t-stat" in `row'
361. local row = `row' + 1
362. 
. replace stat_name = "dist_t_out_p50" in `row'
363. replace stat_value = `dist_t_out_p50' in `row'
364. replace stat_description = "Distribution median: out-migra
> tion t-stat" in `row'
365. local row = `row' + 1
366. 
. replace stat_name = "dist_t_in_mean" in `row'
367. replace stat_value = `dist_t_in_mean' in `row'
368. replace stat_description = "Distribution mean: in-migratio
> n t-stat" in `row'
369. local row = `row' + 1
370. 
. replace stat_name = "dist_t_in_sd" in `row'
371. replace stat_value = `dist_t_in_sd' in `row'
372. replace stat_description = "Distribution SD: in-migration 
> t-stat" in `row'
373. local row = `row' + 1
374. 
. replace stat_name = "dist_t_in_p50" in `row'
375. replace stat_value = `dist_t_in_p50' in `row'
376. replace stat_description = "Distribution median: in-migrat
> ion t-stat" in `row'
377. local row = `row' + 1
378. 
. ** Drop empty rows
. drop if stat_name == ""
379. 
. ** Add sample identifier
. gen sample = "`sample'"
380. 
. ** Export to Excel
. ** First iteration: create new file; subsequent: add sheet
. if "`sample'" == "all" {
381.         export excel using "${results}flows/flow_analysis_
> stats.xlsx", ///
>                 sheet("`sample'") sheetreplace firstrow(varia
> bles)
382. }
383. else {
384.         export excel using "${results}flows/flow_analysis_
> stats.xlsx", ///
>                 sheet("`sample'") sheetmodify firstrow(variab
> les)
385. }
386. 
. dis "Exported descriptive statistics to flow_analysis_stats.x
> lsx, sheet: `sample'"
387. 
. ** ==========================================================
> ==================
. ** EXPORT COUNTY LISTS WITH LARGER COEFFICIENTS TO ADDITIONAL
>  SHEETS
. ** ==========================================================
> ==================
. 
. ** Load county coefficients and merge with county identifiers
. use `county_coefs_for_export', clear
388. merge m:1 fips using "${data}working/ids", keep(master mat
> ch) nogen ///
>         keepusing(state_name county_name state_fips county_fi
> ps)
389. 
. ** Order variables for cleaner output
. order fips state_name county_name state_fips county_fips mult
> nomah ///
>         b_out se_out t_out p_out pctile_b_out pctile_t_out //
> /
>         b_in se_in t_in p_in pctile_b_in pctile_t_in
390. 
. ** Save merged data for subsequent sheets
. tempfile county_coefs_merged
391. save `county_coefs_merged'
392. 
. ** Sheet 1: Counties with larger out-migration coefficients t
> han Multnomah
. use `county_coefs_merged', clear
393. keep if b_out > `m_b_out' & !missing(b_out)
394. 
. if _N > 0 {
395.         gsort -b_out
396. 
.         ** Keep relevant variables
.         keep fips state_name county_name b_out se_out t_out p
> _out pctile_b_out pctile_t_out
397. 
.         ** Export
.         export excel using "${results}flows/flow_analysis_sta
> ts.xlsx", ///
>                 sheet("larger_out_`sample'") sheetmodify firs
> trow(variables)
398. 
.         dis "Exported `=_N' counties with larger out-migratio
> n coef to sheet: larger_out_`sample'"
399. }
400. else {
401.         dis "No counties with larger out-migration coef th
> an Multnomah - skipping sheet: larger_out_`sample'"
402. }
403. 
. ** Sheet 2: Counties with smaller in-migration coefficients t
> han Multnomah
. use `county_coefs_merged', clear
404. keep if b_in < `m_b_in' & !missing(b_in)
405. 
. if _N > 0 {
406.         gsort b_in
407. 
.         ** Keep relevant variables
.         keep fips state_name county_name b_in se_in t_in p_in
>  pctile_b_in pctile_t_in
408. 
.         ** Export
.         export excel using "${results}flows/flow_analysis_sta
> ts.xlsx", ///
>                 sheet("smaller_in_`sample'") sheetmodify firs
> trow(variables)
409. 
.         dis "Exported `=_N' counties with smaller in-migratio
> n coef to sheet: smaller_in_`sample'"
410. }
411. else {
412.         dis "No counties with smaller in-migration coef th
> an Multnomah - skipping sheet: smaller_in_`sample'"
413. }
414. 
. ** Sheet 3: Counties worse on BOTH dimensions (larger out AND
>  smaller in)
. use `county_coefs_merged', clear
415. keep if b_out > `m_b_out' & b_in < `m_b_in' & !missing(b_o
> ut) & !missing(b_in)
416. 
. if _N > 0 {
417.         gsort -b_out
418. 
.         ** Keep relevant variables
.         keep fips state_name county_name ///
>                 b_out se_out t_out p_out pctile_b_out pctile_
> t_out ///
>                 b_in se_in t_in p_in pctile_b_in pctile_t_in
419. 
.         ** Export
.         export excel using "${results}flows/flow_analysis_sta
> ts.xlsx", ///
>                 sheet("worse_both_`sample'") sheetmodify firs
> trow(variables)
420. 
.         dis "Exported `=_N' counties worse on both dimensions
>  to sheet: worse_both_`sample'"
421. }
422. else {
423.         dis "No counties worse on both dimensions than Mul
> tnomah - skipping sheet: worse_both_`sample'"
424. }
425. 
. ** Sheet 4: Counties with larger out-migration t-statistics t
> han Multnomah
. use `county_coefs_merged', clear
426. keep if t_out > `m_t_out' & !missing(t_out)
427. 
. if _N > 0 {
428.         gsort -t_out
429. 
.         ** Keep relevant variables
.         keep fips state_name county_name b_out se_out t_out p
> _out pctile_b_out pctile_t_out
430. 
.         ** Export
.         export excel using "${results}flows/flow_analysis_sta
> ts.xlsx", ///
>                 sheet("larger_t_out_`sample'") sheetmodify fi
> rstrow(variables)
431. 
.         dis "Exported `=_N' counties with larger out-migratio
> n t-stat to sheet: larger_t_out_`sample'"
432. }
433. else {
434.         dis "No counties with larger out-migration t-stat 
> than Multnomah - skipping sheet: larger_t_out_`sample'"
435. }
436. 
. ** Sheet 5: Counties with smaller in-migration t-statistics t
> han Multnomah
. use `county_coefs_merged', clear
437. keep if t_in < `m_t_in' & !missing(t_in)
438. 
. if _N > 0 {
439.         gsort t_in
440. 
.         ** Keep relevant variables
.         keep fips state_name county_name b_in se_in t_in p_in
>  pctile_b_in pctile_t_in
441. 
.         ** Export
.         export excel using "${results}flows/flow_analysis_sta
> ts.xlsx", ///
>                 sheet("smaller_t_in_`sample'") sheetmodify fi
> rstrow(variables)
442. 
.         dis "Exported `=_N' counties with smaller in-migratio
> n t-stat to sheet: smaller_t_in_`sample'"
443. }
444. else {
445.         dis "No counties with smaller in-migration t-stat 
> than Multnomah - skipping sheet: smaller_t_in_`sample'"
446. }
447. 
. *************************************************************
> *******************
. ** REGRESSION 2: Multnomah X Year (Event Study)
. *************************************************************
> *******************
. 
. ** Load main data for event study regressions
. use `main_data', clear
448. 
. ** Loop over outcome variables
. foreach outcome in n1 n2 agi {
449. 
.         ** Set outcome label for graphs
.         if "`outcome'" == "n1" local outcome_label "Number of
>  Returns"
450.         if "`outcome'" == "n2" local outcome_label "Number
>  of Exemptions"
451.         if "`outcome'" == "agi" local outcome_label "Adjus
> ted Gross Income"
452. 
.         ** Regression 2a: With covariates
.         ppmlhdfe `outcome' x_out_* x_in_*                    
>                                            ///
>                 `covars'                                     
>                                                              
>       ///
>                 if mover == 1 `sample_cond',                 
>                                            ///
>                 absorb(year flow_id) vce(cluster flow_id)
453.         estimates store `outcome'_es_with_covars
454. 
.         ** Regression 2b: Without covariates
.         ppmlhdfe `outcome' x_out_* x_in_*                    
>                                            ///
>                 if mover == 1 `sample_cond',                 
>                                            ///
>                 absorb(year flow_id) vce(cluster flow_id)
455.         estimates store `outcome'_es_no_covars
456. 
.         ** Create coefficient dataset for plotting
.         clear
457.         set obs 7
458.         gen year = 2015 + _n
459. 
.         ** Out-migration coefficients (with covariates)
.         gen out_coef_wc = .
460.         gen out_ci_lo_wc = .
461.         gen out_ci_hi_wc = .
462. 
.         ** In-migration coefficients (with covariates)
.         gen in_coef_wc = .
463.         gen in_ci_lo_wc = .
464.         gen in_ci_hi_wc = .
465. 
.         ** Out-migration coefficients (without covariates)
.         gen out_coef_nc = .
466.         gen out_ci_lo_nc = .
467.         gen out_ci_hi_nc = .
468. 
.         ** In-migration coefficients (without covariates)
.         gen in_coef_nc = .
469.         gen in_ci_lo_nc = .
470.         gen in_ci_hi_nc = .
471. 
.         ** Fill in coefficients (2020 = base year = 0)
.         foreach y in 2016 2017 2018 2019 2021 2022 {
472. 
.                 ** With covariates
.                 estimates restore `outcome'_es_with_covars
473.                 replace out_coef_wc = _b[x_out_`y'] if yea
> r == `y'
474.                 replace out_ci_lo_wc = _b[x_out_`y'] - 1.9
> 6 * _se[x_out_`y'] if year == `y'
475.                 replace out_ci_hi_wc = _b[x_out_`y'] + 1.9
> 6 * _se[x_out_`y'] if year == `y'
476. 
.                 replace in_coef_wc = _b[x_in_`y'] if year == 
> `y'
477.                 replace in_ci_lo_wc = _b[x_in_`y'] - 1.96 
> * _se[x_in_`y'] if year == `y'
478.                 replace in_ci_hi_wc = _b[x_in_`y'] + 1.96 
> * _se[x_in_`y'] if year == `y'
479. 
.                 ** Without covariates
.                 estimates restore `outcome'_es_no_covars
480.                 replace out_coef_nc = _b[x_out_`y'] if yea
> r == `y'
481.                 replace out_ci_lo_nc = _b[x_out_`y'] - 1.9
> 6 * _se[x_out_`y'] if year == `y'
482.                 replace out_ci_hi_nc = _b[x_out_`y'] + 1.9
> 6 * _se[x_out_`y'] if year == `y'
483. 
.                 replace in_coef_nc = _b[x_in_`y'] if year == 
> `y'
484.                 replace in_ci_lo_nc = _b[x_in_`y'] - 1.96 
> * _se[x_in_`y'] if year == `y'
485.                 replace in_ci_hi_nc = _b[x_in_`y'] + 1.96 
> * _se[x_in_`y'] if year == `y'
486.         }
487. 
.         ** Base year (2020) = 0
.         foreach v in out_coef_wc out_ci_lo_wc out_ci_hi_wc   
>                    ///
>                                  in_coef_wc in_ci_lo_wc in_ci
> _hi_wc                     ///
>                                  out_coef_nc out_ci_lo_nc out
> _ci_hi_nc                  ///
>                                  in_coef_nc in_ci_lo_nc in_ci
> _hi_nc {
488.                 replace `v' = 0 if year == 2020
489.         }
490. 
.         ** Offset years slightly for visibility
.         gen year_out = year - 0.1
491.         gen year_in = year + 0.1
492. 
.         ** Plot 1: Out-migration (with and without covariates
> )
.         twoway  (rcap out_ci_lo_wc out_ci_hi_wc year_out, lc(
> navy))                     ///
>                         (connected out_coef_wc year_out, mc(n
> avy) lc(navy) ms(O))               ///
>                         (rcap out_ci_lo_nc out_ci_hi_nc year_
> in, lc(maroon))                    ///
>                         (connected out_coef_nc year_in, mc(ma
> roon) lc(maroon) ms(T)),   ///
>                 yline(0, lc(gs10) lp(dash))                  
>                                                            //
> /
>                 xline(2020.5, lc(black) lp(solid))           
>                                                            //
> /
>                 xlabel(2016(1)2022)                          
>                                                              
>       ///
>                 ytitle("Coefficient (relative to 2020)")     
>                                                    ///
>                 xtitle("Year")                               
>                                                              
>               ///
>                 legend(order(2 "With Covariates" 4 "Without C
> ovariates")                        ///
>                         pos(6) rows(1))                      
>                                                              
>               ///
>                 title("Out-Migration from Multnomah County`ti
> tle_suffix'")                      ///
>                 subtitle("`outcome_label'")                  
>                                                              
>       ///
>                 graphregion(color(white))
493. 
.         graph export "${results}flows/fig_multnomah_out_`outc
> ome'`file_suffix'.png", replace
494. 
.         ** Plot 2: In-migration (with and without covariates)
.         twoway  (rcap in_ci_lo_wc in_ci_hi_wc year_out, lc(na
> vy))                               ///
>                         (connected in_coef_wc year_out, mc(na
> vy) lc(navy) ms(O))                ///
>                         (rcap in_ci_lo_nc in_ci_hi_nc year_in
> , lc(maroon))                              ///
>                         (connected in_coef_nc year_in, mc(mar
> oon) lc(maroon) ms(T)),    ///
>                 yline(0, lc(gs10) lp(dash))                  
>                                                            //
> /
>                 xline(2020.5, lc(black) lp(solid))           
>                                                            //
> /
>                 xlabel(2016(1)2022)                          
>                                                              
>       ///
>                 ytitle("Coefficient (relative to 2020)")     
>                                                    ///
>                 xtitle("Year")                               
>                                                              
>               ///
>                 legend(order(2 "With Covariates" 4 "Without C
> ovariates")                        ///
>                         pos(6) rows(1))                      
>                                                              
>               ///
>                 title("In-Migration to Multnomah County`title
> _suffix'")                         ///
>                 subtitle("`outcome_label'")                  
>                                                              
>       ///
>                 graphregion(color(white))
495. 
.         graph export "${results}flows/fig_multnomah_in_`outco
> me'`file_suffix'.png", replace
496. 
.         ** Plot 3: Both flows (with covariates only, as in or
> iginal)
.         twoway  (rcap out_ci_lo_wc out_ci_hi_wc year_out, lc(
> navy))                             ///
>                         (connected out_coef_wc year_out, mc(n
> avy) lc(navy) ms(O))               ///
>                         (rcap in_ci_lo_wc in_ci_hi_wc year_in
> , lc(maroon))                              ///
>                         (connected in_coef_wc year_in, mc(mar
> oon) lc(maroon) ms(T)),    ///
>                 yline(0, lc(gs10) lp(dash))                  
>                                                            //
> /
>                 xline(2020.5, lc(black) lp(solid))           
>                                                            //
> /
>                 xlabel(2016(1)2022)                          
>                                                              
>       ///
>                 ytitle("Coefficient (relative to 2020)")     
>                                                    ///
>                 xtitle("Year")                               
>                                                              
>               ///
>                 legend(order(2 "Out-migration" 4 "In-migratio
> n")                                        ///
>                         pos(6) rows(1))                      
>                                                              
>               ///
>                 title("Migration Flows: Multnomah County`titl
> e_suffix'")                        ///
>                 subtitle("`outcome_label'")                  
>                                                              
>       ///
>                 graphregion(color(white))
497. 
.         graph export "${results}flows/fig_multnomah_both_`out
> come'`file_suffix'.png", replace
498. 
.         ** Reload main data for next outcome
.         use `main_data', clear
499. 
. } // END OUTCOME LOOP
500. 
. } // END SAMPLE LOOP (all vs acs)

===============================================================
> =========
RUNNING ANALYSIS FOR SAMPLE: acs
Sample condition: & acs_flow == 1
Covariates: unemp_* pop_* per_capita_income_* prop_rate_mean_o 
> prop_rate_mean_d
===============================================================
> =========

(dropped 3389 observations that are either singletons or separa
> ted by a fixed effect)
Iteration 1:   deviance = 1.9778e+06  eps = .         iters = 4
>     tol = 1.0e-04                                            
>                    min(eta) =  -2.88  P   
Iteration 2:   deviance = 3.3937e+05  eps = 4.83e+00  iters = 3
>     tol = 1.0e-04                                            
>                    min(eta) =  -3.48      
Iteration 3:   deviance = 2.9123e+05  eps = 1.65e-01  iters = 3
>     tol = 1.0e-04                                            
>                    min(eta) =  -3.71      
Iteration 4:   deviance = 2.9102e+05  eps = 7.29e-04  iters = 2
>     tol = 1.0e-04                                            
>                    min(eta) =  -3.74      
Iteration 5:   deviance = 2.9102e+05  eps = 5.68e-08  iters = 2
>     tol = 1.0e-04                                            
>                    min(eta) =  -3.74      
Iteration 6:   deviance = 2.9102e+05  eps = 9.61e-16  iters = 1
>     tol = 1.0e-05                                            
>                    min(eta) =  -3.74   S  
Iteration 7:   deviance = 2.9102e+05  eps = 1.37e-16  iters = 1
>     tol = 1.0e-09                                            
>                    min(eta) =  -3.74   S O
---------------------------------------------------------------
> ---------------------------------------------
(legend: p: exact partial-out   s: exact solver   h: step-halvi
> ng   o: epsilon below tolerance)
Converged in 7 iterations and 16 HDFE sub-iterations (tol = 1.0
> e-08)

HDFE PPML regression                              No. of obs   
>    =                                                         
>         129,600
Absorbing 2 HDFE groups                           Residual df  
>    =                                                         
>          22,046
Statistics robust to heteroskedasticity           Wald chi2(10)
>    =                                                         
>          679.39
Deviance             =  291015.7779               Prob > chi2  
>    =                                                         
>          0.0000
Log pseudolikelihood = -533368.3743               Pseudo R2    
>    =                                                         
>          0.9851

Number of clusters (flow_id)=     22,047
                           (Std. err. adjusted for 22,047 clust
> ers in flow_id)
---------------------------------------------------------------
> ---------------
             |               Robust
          n1 | Coefficient  std. err.      z    P>|z|     [95% 
> con                                                          
>    f. interval]
-------------+-------------------------------------------------
> ---------------
1.out_mult~t |  -.0022129   .0235929    -0.09   0.925     -.048
> 454                                                          
>        .0440283
1.in_multn~t |  -.0846358   .0168906    -5.01   0.000    -.1177
> 409                                                          
>       -.0515308
     unemp_o |   .0229647   .0013063    17.58   0.000     .0204
> 044                                                          
>        .0255251
     unemp_d |  -.0190961   .0014121   -13.52   0.000    -.0218
> 638                                                          
>       -.0163284
       pop_o |   7.22e-09   2.60e-08     0.28   0.781    -4.38e
> -08                                                          
>        5.83e-08
       pop_d |   3.86e-07   3.88e-08     9.95   0.000     3.10e
> -07                                                          
>        4.62e-07
per_capita~o |   1.12e-06   5.10e-07     2.19   0.028     1.19e
> -07                                                          
>        2.12e-06
per_capita~d |  -1.67e-06   4.07e-07    -4.10   0.000    -2.46e
> -06                                                          
>       -8.69e-07
prop_rate_~o |  -.0056646   .0020497    -2.76   0.006     -.009
> 682                                                          
>       -.0016473
prop_rate_~d |  -.0001682   .0020167    -0.08   0.934    -.0041
> 209                                                          
>        .0037844
       _cons |   6.125872   .0784274    78.11   0.000     5.972
> 157                                                          
>        6.279587
---------------------------------------------------------------
> ---------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
        year |         7           1           6     |
     flow_id |     22047       22047           0    *|
-----------------------------------------------------+
* = FE nested within cluster; treated as redundant for DoF comp
> utation
(dropped 3389 observations that are either singletons or separa
> ted by a fixed effect)
Iteration 1:   deviance = 1.9948e+06  eps = .         iters = 4
>     tol = 1.0e-04                                            
>                    min(eta) =  -2.86  P   
Iteration 2:   deviance = 3.5534e+05  eps = 4.61e+00  iters = 3
>     tol = 1.0e-04                                            
>                    min(eta) =  -3.44      
Iteration 3:   deviance = 3.0721e+05  eps = 1.57e-01  iters = 3
>     tol = 1.0e-04                                            
>                    min(eta) =  -3.68      
Iteration 4:   deviance = 3.0700e+05  eps = 6.90e-04  iters = 2
>     tol = 1.0e-04                                            
>                    min(eta) =  -3.71      
Iteration 5:   deviance = 3.0700e+05  eps = 5.37e-08  iters = 2
>     tol = 1.0e-04                                            
>                    min(eta) =  -3.71      
Iteration 6:   deviance = 3.0700e+05  eps = 7.81e-16  iters = 1
>     tol = 1.0e-05                                            
>                    min(eta) =  -3.71   S  
Iteration 7:   deviance = 3.0700e+05  eps = 0.00e+00  iters = 1
>     tol = 1.0e-09                                            
>                    min(eta) =  -3.71   S O
---------------------------------------------------------------
> ---------------------------------------------
(legend: p: exact partial-out   s: exact solver   h: step-halvi
> ng   o: epsilon below tolerance)
Converged in 7 iterations and 16 HDFE sub-iterations (tol = 1.0
> e-08)

HDFE PPML regression                              No. of obs   
>    =                                                         
>         129,600
Absorbing 2 HDFE groups                           Residual df  
>    =                                                         
>          22,046
Statistics robust to heteroskedasticity           Wald chi2(2) 
>    =                                                         
>           34.36
Deviance             =  306996.4457               Prob > chi2  
>    =                                                         
>          0.0000
Log pseudolikelihood = -541358.7081               Pseudo R2    
>    =                                                         
>          0.9849

Number of clusters (flow_id)=     22,047
                           (Std. err. adjusted for 22,047 clust
> ers in flow_id)
---------------------------------------------------------------
> ---------------
             |               Robust
          n1 | Coefficient  std. err.      z    P>|z|     [95% 
> con                                                          
>    f. interval]
-------------+-------------------------------------------------
> ---------------
1.out_mult~t |   .0032104   .0243075     0.13   0.895    -.0444
> 315                                                          
>        .0508523
1.in_multn~t |  -.0965589   .0164903    -5.86   0.000    -.1288
> 792                                                          
>       -.0642386
       _cons |    6.70651   .0000597  1.1e+05   0.000     6.706
> 393                                                          
>        6.706627
---------------------------------------------------------------
> ---------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
        year |         7           1           6     |
     flow_id |     22047       22047           0    *|
-----------------------------------------------------+
* = FE nested within cluster; treated as redundant for DoF comp
> utation
file
    C:/Users/ji252/Documents/GitHub/multnomah-county-tax/resu
    > lts/flows/fig_multnomah_post_n1_acs.png saved as PNG
    format
(dropped 3389 observations that are either singletons or separa
> ted by a fixed effect)
Iteration 1:   deviance = 3.6622e+06  eps = .         iters = 4
>     tol = 1.0e-04                                            
>                    min(eta) =  -3.00  P   
Iteration 2:   deviance = 7.1966e+05  eps = 4.09e+00  iters = 3
>     tol = 1.0e-04                                            
>                    min(eta) =  -3.70      
Iteration 3:   deviance = 6.2926e+05  eps = 1.44e-01  iters = 3
>     tol = 1.0e-04                                            
>                    min(eta) =  -4.08      
Iteration 4:   deviance = 6.2873e+05  eps = 8.40e-04  iters = 2
>     tol = 1.0e-04                                            
>                    min(eta) =  -4.17      
Iteration 5:   deviance = 6.2873e+05  eps = 1.99e-07  iters = 2
>     tol = 1.0e-04                                            
>                    min(eta) =  -4.17      
Iteration 6:   deviance = 6.2873e+05  eps = 1.03e-13  iters = 1
>     tol = 1.0e-05                                            
>                    min(eta) =  -4.17   S  
Iteration 7:   deviance = 6.2873e+05  eps = 1.16e-16  iters = 1
>     tol = 1.0e-08                                            
>                    min(eta) =  -4.17   S O
---------------------------------------------------------------
> ---------------------------------------------
(legend: p: exact partial-out   s: exact solver   h: step-halvi
> ng   o: epsilon below tolerance)
Converged in 7 iterations and 16 HDFE sub-iterations (tol = 1.0
> e-08)

HDFE PPML regression                              No. of obs   
>    =                                                         
>         129,600
Absorbing 2 HDFE groups                           Residual df  
>    =                                                         
>          22,046
Statistics robust to heteroskedasticity           Wald chi2(10)
>    =                                                         
>          645.69
Deviance             =  628730.0175               Prob > chi2  
>    =                                                         
>          0.0000
Log pseudolikelihood = -737640.9381               Pseudo R2    
>    =                                                         
>          0.9885

Number of clusters (flow_id)=     22,047
                           (Std. err. adjusted for 22,047 clust
> ers in flow_id)
---------------------------------------------------------------
> ---------------
             |               Robust
          n2 | Coefficient  std. err.      z    P>|z|     [95% 
> con                                                          
>    f. interval]
-------------+-------------------------------------------------
> ---------------
1.out_mult~t |  -.0016164   .0193979    -0.08   0.934    -.0396
> 356                                                          
>        .0364027
1.in_multn~t |   -.084359   .0158222    -5.33   0.000      -.11
> 537                                                          
>        -.053348
     unemp_o |   .0216645   .0013954    15.53   0.000     .0189
> 295                                                          
>        .0243995
     unemp_d |  -.0207735   .0015576   -13.34   0.000    -.0238
> 264                                                          
>       -.0177206
       pop_o |  -6.75e-09   2.84e-08    -0.24   0.812    -6.24e
> -08                                                          
>        4.89e-08
       pop_d |   4.05e-07   3.62e-08    11.19   0.000     3.34e
> -07                                                          
>        4.76e-07
per_capita~o |   1.62e-06   5.18e-07     3.12   0.002     6.00e
> -07                                                          
>        2.63e-06
per_capita~d |  -2.04e-06   4.34e-07    -4.70   0.000    -2.89e
> -06                                                          
>       -1.19e-06
prop_rate_~o |  -.0054931   .0021535    -2.55   0.011    -.0097
> 139                                                          
>       -.0012723
prop_rate_~d |  -.0005758   .0021315    -0.27   0.787    -.0047
> 535                                                          
>        .0036019
       _cons |   6.744748   .0806006    83.68   0.000     6.586
> 774                                                          
>        6.902722
---------------------------------------------------------------
> ---------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
        year |         7           1           6     |
     flow_id |     22047       22047           0    *|
-----------------------------------------------------+
* = FE nested within cluster; treated as redundant for DoF comp
> utation
(dropped 3389 observations that are either singletons or separa
> ted by a fixed effect)
Iteration 1:   deviance = 3.6934e+06  eps = .         iters = 4
>     tol = 1.0e-04                                            
>                    min(eta) =  -2.99  P   
Iteration 2:   deviance = 7.4908e+05  eps = 3.93e+00  iters = 3
>     tol = 1.0e-04                                            
>                    min(eta) =  -3.69      
Iteration 3:   deviance = 6.5872e+05  eps = 1.37e-01  iters = 3
>     tol = 1.0e-04                                            
>                    min(eta) =  -4.06      
Iteration 4:   deviance = 6.5819e+05  eps = 8.00e-04  iters = 2
>     tol = 1.0e-04                                            
>                    min(eta) =  -4.14      
Iteration 5:   deviance = 6.5819e+05  eps = 1.89e-07  iters = 2
>     tol = 1.0e-04                                            
>                    min(eta) =  -4.15      
Iteration 6:   deviance = 6.5819e+05  eps = 9.72e-14  iters = 1
>     tol = 1.0e-05                                            
>                    min(eta) =  -4.15   S  
Iteration 7:   deviance = 6.5819e+05  eps = 0.00e+00  iters = 1
>     tol = 1.0e-08                                            
>                    min(eta) =  -4.15   S O
---------------------------------------------------------------
> ---------------------------------------------
(legend: p: exact partial-out   s: exact solver   h: step-halvi
> ng   o: epsilon below tolerance)
Converged in 7 iterations and 16 HDFE sub-iterations (tol = 1.0
> e-08)

HDFE PPML regression                              No. of obs   
>    =                                                         
>         129,600
Absorbing 2 HDFE groups                           Residual df  
>    =                                                         
>          22,046
Statistics robust to heteroskedasticity           Wald chi2(2) 
>    =                                                         
>           39.84
Deviance             =  658193.6762               Prob > chi2  
>    =                                                         
>          0.0000
Log pseudolikelihood = -752372.7674               Pseudo R2    
>    =                                                         
>          0.9883

Number of clusters (flow_id)=     22,047
                           (Std. err. adjusted for 22,047 clust
> ers in flow_id)
---------------------------------------------------------------
> ---------------
             |               Robust
          n2 | Coefficient  std. err.      z    P>|z|     [95% 
> con                                                          
>    f. interval]
-------------+-------------------------------------------------
> ---------------
1.out_mult~t |   .0028857    .019154     0.15   0.880    -.0346
> 556                                                          
>        .0404269
1.in_multn~t |  -.0991782   .0157384    -6.30   0.000     -.130
> 025                                                          
>       -.0683315
       _cons |   7.303822   .0000424  1.7e+05   0.000     7.303
> 738                                                          
>        7.303905
---------------------------------------------------------------
> ---------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
        year |         7           1           6     |
     flow_id |     22047       22047           0    *|
-----------------------------------------------------+
* = FE nested within cluster; treated as redundant for DoF comp
> utation
file
    C:/Users/ji252/Documents/GitHub/multnomah-county-tax/resu
    > lts/flows/fig_multnomah_post_n2_acs.png saved as PNG
    format
(dropped 3389 observations that are either singletons or separa
> ted by a fixed effect)
Iteration 1:   deviance = 2.6805e+08  eps = .         iters = 4
>     tol = 1.0e-04                                            
>                    min(eta) =  -3.32  P   
Iteration 2:   deviance = 1.0401e+08  eps = 1.58e+00  iters = 3
>     tol = 1.0e-04                                            
>                    min(eta) =  -4.14      
Iteration 3:   deviance = 9.5891e+07  eps = 8.47e-02  iters = 3
>     tol = 1.0e-04                                            
>                    min(eta) =  -4.78      
Iteration 4:   deviance = 9.5722e+07  eps = 1.77e-03  iters = 2
>     tol = 1.0e-04                                            
>                    min(eta) =  -5.11      
Iteration 5:   deviance = 9.5721e+07  eps = 5.84e-06  iters = 2
>     tol = 1.0e-04                                            
>                    min(eta) =  -5.21      
Iteration 6:   deviance = 9.5721e+07  eps = 9.66e-10  iters = 2
>     tol = 1.0e-05                                            
>                    min(eta) =  -5.22   S  
Iteration 7:   deviance = 9.5721e+07  eps = 2.70e-15  iters = 1
>     tol = 1.0e-07                                            
>                    min(eta) =  -5.22   S  
Iteration 8:   deviance = 9.5721e+07  eps = 1.42e-16  iters = 1
>     tol = 1.0e-09                                            
>                    min(eta) =  -5.22   S O
---------------------------------------------------------------
> ---------------------------------------------
(legend: p: exact partial-out   s: exact solver   h: step-halvi
> ng   o: epsilon below tolerance)
Converged in 8 iterations and 18 HDFE sub-iterations (tol = 1.0
> e-08)

HDFE PPML regression                              No. of obs   
>    =                                                         
>         129,600
Absorbing 2 HDFE groups                           Residual df  
>    =                                                         
>          22,046
Statistics robust to heteroskedasticity           Wald chi2(10)
>    =                                                         
>          511.65
Deviance             =  95721037.43               Prob > chi2  
>    =                                                         
>          0.0000
Log pseudolikelihood = -48521300.98               Pseudo R2    
>    =                                                         
>          0.9838

Number of clusters (flow_id)=     22,047
                           (Std. err. adjusted for 22,047 clust
> ers in flow_id)
---------------------------------------------------------------
> ---------------
             |               Robust
         agi | Coefficient  std. err.      z    P>|z|     [95% 
> con                                                          
>    f. interval]
-------------+-------------------------------------------------
> ---------------
1.out_mult~t |    .116637   .0563226     2.07   0.038     .0062
> 467                                                          
>        .2270274
1.in_multn~t |  -.1908973   .0225148    -8.48   0.000    -.2350
> 255                                                          
>       -.1467691
     unemp_o |   .0379792   .0068692     5.53   0.000     .0245
> 158                                                          
>        .0514425
     unemp_d |  -.0406767   .0051414    -7.91   0.000    -.0507
> 536                                                          
>       -.0305999
       pop_o |  -2.79e-07   6.28e-08    -4.45   0.000    -4.02e
> -07                                                          
>       -1.56e-07
       pop_d |   5.24e-07   8.90e-08     5.89   0.000     3.50e
> -07                                                          
>        6.99e-07
per_capita~o |   7.56e-06   9.75e-07     7.75   0.000     5.65e
> -06                                                          
>        9.47e-06
per_capita~d |   9.16e-07   1.13e-06     0.81   0.417    -1.30e
> -06                                                          
>        3.13e-06
prop_rate_~o |   -.013418   .0062772    -2.14   0.033    -.0257
> 211                                                          
>       -.0011149
prop_rate_~d |   .0080536   .0054192     1.49   0.137    -.0025
> 678                                                          
>         .018675
       _cons |   10.23336   .2129496    48.06   0.000     9.815
> 987                                                          
>        10.65073
---------------------------------------------------------------
> ---------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
        year |         7           1           6     |
     flow_id |     22047       22047           0    *|
-----------------------------------------------------+
* = FE nested within cluster; treated as redundant for DoF comp
> utation
(dropped 3389 observations that are either singletons or separa
> ted by a fixed effect)
Iteration 1:   deviance = 2.7605e+08  eps = .         iters = 4
>     tol = 1.0e-04                                            
>                    min(eta) =  -3.25  P   
Iteration 2:   deviance = 1.1017e+08  eps = 1.51e+00  iters = 3
>     tol = 1.0e-04                                            
>                    min(eta) =  -4.15      
Iteration 3:   deviance = 1.0194e+08  eps = 8.07e-02  iters = 3
>     tol = 1.0e-04                                            
>                    min(eta) =  -4.83      
Iteration 4:   deviance = 1.0178e+08  eps = 1.66e-03  iters = 2
>     tol = 1.0e-04                                            
>                    min(eta) =  -5.17      
Iteration 5:   deviance = 1.0178e+08  eps = 5.36e-06  iters = 2
>     tol = 1.0e-04                                            
>                    min(eta) =  -5.25      
Iteration 6:   deviance = 1.0178e+08  eps = 9.20e-10  iters = 2
>     tol = 1.0e-05                                            
>                    min(eta) =  -5.25   S  
Iteration 7:   deviance = 1.0178e+08  eps = 2.54e-15  iters = 1
>     tol = 1.0e-07                                            
>                    min(eta) =  -5.25   S  
Iteration 8:   deviance = 1.0178e+08  eps = 0.00e+00  iters = 1
>     tol = 1.0e-09                                            
>                    min(eta) =  -5.25   S O
---------------------------------------------------------------
> ---------------------------------------------
(legend: p: exact partial-out   s: exact solver   h: step-halvi
> ng   o: epsilon below tolerance)
Converged in 8 iterations and 18 HDFE sub-iterations (tol = 1.0
> e-08)

HDFE PPML regression                              No. of obs   
>    =                                                         
>         129,600
Absorbing 2 HDFE groups                           Residual df  
>    =                                                         
>          22,046
Statistics robust to heteroskedasticity           Wald chi2(2) 
>    =                                                         
>           79.19
Deviance             =  101775047.8               Prob > chi2  
>    =                                                         
>          0.0000
Log pseudolikelihood = -51548306.18               Pseudo R2    
>    =                                                         
>          0.9827

Number of clusters (flow_id)=     22,047
                           (Std. err. adjusted for 22,047 clust
> ers in flow_id)
---------------------------------------------------------------
> ---------------
             |               Robust
         agi | Coefficient  std. err.      z    P>|z|     [95% 
> con                                                          
>    f. interval]
-------------+-------------------------------------------------
> ---------------
1.out_mult~t |   .1151791   .0612446     1.88   0.060    -.0048
> 582                                                          
>        .2352163
1.in_multn~t |  -.1994398   .0231161    -8.63   0.000    -.2447
> 464                                                          
>       -.1541331
       _cons |   11.16124   .0001579  7.1e+04   0.000     11.16
> 093                                                          
>        11.16155
---------------------------------------------------------------
> ---------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
        year |         7           1           6     |
     flow_id |     22047       22047           0    *|
-----------------------------------------------------+
* = FE nested within cluster; treated as redundant for DoF comp
> utation
file
    C:/Users/ji252/Documents/GitHub/multnomah-county-tax/resu
    > lts/flows/fig_multnomah_post_agi_acs.png saved as PNG
    format
1003 1015 1097 4005 4013 4025 5007 5119 5143 6001 6007 6013 601
> 7 6019 6023 6025 6029 6031 6037 6039 6041 6047 6055 6059 6061
>  6065 6067 6071 6073 6075 6077 6079 6081 6083 6085 6087 6089 
> 6095 6097 6099 6107 6111 6113 8069 10001 10003 10005 11001 12
> 001 12009 12011 12015 12017 12019 12021 12031 12033 12053 120
> 57 12061 12071 12073 12081 12083 12085 12091 12095 12097 1209
> 9 12101 12103 12105 12111 12113 12115 12117 13015 13021 13045
>  13051 13057 13059 13063 13067 13073 13077 13097 13113 13117 
> 13135 13139 13151 13185 13223 13245 13313 16019 17031 17043 1
> 7089 17097 17111 17113 17119 17143 17161 17167 17179 17197 18
> 003 18019 18035 18039 18063 18081 18089 18091 18095 18097 181
> 05 18127 18141 18157 18163 18167 19013 19103 19113 19163 2004
> 5 20091 20209 21015 21067 21111 21117 21227 22005 22017 22033
>  22055 22071 22073 22103 23001 23011 24003 24005 24013 24015 
> 24017 24021 24025 24027 24031 24033 24510 25003 25025 26005 2
> 6021 26065 26075 26077 26081 26093 26099 26115 26121 26125 26
> 139 26145 26147 26161 26163 27003 27037 27053 27109 27123 271
> 63 28033 28047 28059 29095 29099 29183 29189 29510 31055 3110
> 9 31153 32003 32031 34003 34005 34007 34013 34015 34017 34019
>  34021 34023 34025 34027 34029 34031 34035 34037 34039 34041 
> 35013 35043 36001 36005 36013 36029 36047 36055 36059 36061 3
> 6063 36071 36075 36081 36083 36085 36087 36089 36091 36093 36
> 103 36109 37001 37019 37021 37035 37051 37057 37063 37067 370
> 71 37081 37085 37119 37135 37147 37151 37159 37183 37191 3801
> 7 39003 39017 39023 39035 39041 39045 39049 39057 39061 39089
>  39093 39103 39109 39113 39133 39139 39153 39165 39169 40017 
> 40027 40109 41005 41019 41029 41039 41047 41051 41067 42003 4
> 2011 42017 42019 42021 42027 42029 42043 42045 42049 42051 42
> 071 42075 42085 42089 42091 42101 42107 42129 42133 44003 440
> 07 44009 45083 47009 47037 47065 47149 47157 47187 47189 4802
> 7 48029 48039 48041 48061 48085 48091 48113 48121 48135 48139
>  48141 48157 48167 48183 48187 48201 48209 48215 48245 48251 
> 48257 48303 48309 48329 48339 48355 48367 48375 48381 48423 4
> 8439 48441 48451 48453 48479 48485 48491 49011 49035 49049 49
> 053 49057 51013 51041 51087 51107 51510 51650 51700 51760 518
> 10 53011 53033 53035 53053 53061 53063 53067 53073 53077 5500
> 9 55025 55059 55063 55073 55079 55087 55101 55105 55117 55127
>  55133 55139

*** DEBUG MODE: Sampling 20 random counties (plus Multnomah) **
> *

file C:\Users\ji252\AppData\Local\Temp\ST_828_000003.tmp
    saved as .dta format
Number of observations (_N) was 0, now 386.
(386 missing values generated)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(365 observations deleted)
5007 6007 6013 6031 6041 6071 13067 13117 17161 18035 19113 261
> 45 27053 34019 35043 41051 42091 48085 48091 48381 48491
DEBUG: Running regressions for 21 counties (sampled from 386) (
> acs sample)...
(file C:\Users\ji252\AppData\Local\Temp\ST_828_000004.tmp not
    found)

==========================================
Multnomah County Results:
==========================================

    Variable |        Obs        Mean    Std. dev.       Min   
>      Max
-------------+-------------------------------------------------
> --------
       b_out |          1     .116637           .    .116637   
>  .116637
       t_out |          1    2.070873           .   2.070873   
> 2.070873
        b_in |          1   -.1908973           .  -.1908973  -
> .1908973
        t_in |          1   -8.478744           .  -8.478744  -
> 8.478744
pctile_b_out |          1         100           .        100   
>      100
-------------+-------------------------------------------------
> --------
pctile_t_out |          1         100           .        100   
>      100
 pctile_b_in |          1    19.04762           .   19.04762   
> 19.04762
 pctile_t_in |          1    9.523809           .   9.523809   
> 9.523809

Distribution of coefficients (all counties):

          Out-migration coefficient (County x Post)
-------------------------------------------------------------
      Percentiles      Smallest
 1%    -.3142822      -.3142822
 5%    -.2641376      -.2641376
10%    -.2140841      -.2140841       Obs                  21
25%    -.1421599      -.1707367       Sum of wgt.          21

50%    -.0813747                      Mean          -.0751167
                        Largest       Std. dev.      .1176242
75%     .0237417       .0597266
90%     .0782953       .0782953       Variance       .0138355
95%     .0827278       .0827278       Skewness      -.1735925
99%      .116637        .116637       Kurtosis       2.266812

          In-migration coefficient (County x Post)
-------------------------------------------------------------
      Percentiles      Smallest
 1%    -.2246167      -.2246167
 5%    -.2201321      -.2201321
10%    -.2103909      -.2103909       Obs                  21
25%    -.1611585      -.1908973       Sum of wgt.          21

50%    -.0541749                      Mean           -.056733
                        Largest       Std. dev.      .1248631
75%    -.0004078        .022949
90%     .1186597       .1186597       Variance       .0155908
95%     .1767142       .1767142       Skewness       .5146815
99%     .2106411       .2106411       Kurtosis       2.569059

Distribution of t-stats (all counties):

                  Out-migration t-statistic
-------------------------------------------------------------
      Percentiles      Smallest
 1%    -12.57733      -12.57733
 5%    -6.612787      -6.612787
10%    -5.895919      -5.895919       Obs                  21
25%    -4.276211      -4.493517       Sum of wgt.          21

50%      -1.2536                      Mean          -2.131269
                        Largest       Std. dev.      3.488082
75%     .7572727       .8894819
90%     1.445995       1.445995       Variance       12.16672
95%     2.016212       2.016212       Skewness      -1.254522
99%     2.070873       2.070873       Kurtosis       4.826414

                  In-migration t-statistic
-------------------------------------------------------------
      Percentiles      Smallest
 1%    -9.035348      -9.035348
 5%    -8.478744      -8.478744
10%    -6.274827      -6.274827       Obs                  21
25%    -4.289802      -5.506386       Sum of wgt.          21

50%    -1.983237                      Mean          -2.170867
                        Largest       Std. dev.      3.342738
75%    -.0075374       .4482386
90%     1.649559       1.649559       Variance       11.17389
95%     2.468509       2.468509       Skewness      -.4743263
99%     3.162416       3.162416       Kurtosis       2.498913
  variable multnomah was float now byte
  variable rank_b_out was float now byte
  variable rank_b_in was float now byte
  variable rank_t_out was float now byte
  variable rank_t_in was float now byte
  (315 bytes saved)
file
    C:/Users/ji252/Documents/GitHub/multnomah-county-tax/data
    > /working/county_flow_coefficients_acs.dta saved
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/data/
> working/county_flow_coefficients_acs.csv saved
County coefficients saved to C:/Users/ji252/Documents/GitHub/mu
> ltnomah-county-tax/data/working/county_flow_coefficients_acs.
> dta
(bin=50, start=-.31428224, width=.00861839)
file
    C:/Users/ji252/Documents/GitHub/multnomah-county-tax/resu
    > lts/flows/fig_hist_out_b_acs.png saved as PNG format
(bin=50, start=-.22461669, width=.00870516)
file
    C:/Users/ji252/Documents/GitHub/multnomah-county-tax/resu
    > lts/flows/fig_hist_in_b_acs.png saved as PNG format
file
    C:/Users/ji252/Documents/GitHub/multnomah-county-tax/resu
    > lts/flows/fig_scatter_out_in_b_acs.png saved as PNG
    format
(bin=50, start=-12.577332, width=.29296409)
file
    C:/Users/ji252/Documents/GitHub/multnomah-county-tax/resu
    > lts/flows/fig_hist_out_t_acs.png saved as PNG format
(bin=50, start=-9.0353479, width=.24395527)
file
    C:/Users/ji252/Documents/GitHub/multnomah-county-tax/resu
    > lts/flows/fig_hist_in_t_acs.png saved as PNG format
file
    C:/Users/ji252/Documents/GitHub/multnomah-county-tax/resu
    > lts/flows/fig_scatter_out_in_t_acs.png saved as PNG
    format

          Out-migration coefficient (County x Post)
-------------------------------------------------------------
      Percentiles      Smallest
 1%    -.3142822      -.3142822
 5%    -.2641376      -.2641376
10%    -.2140841      -.2140841       Obs                  21
25%    -.1421599      -.1707367       Sum of wgt.          21

50%    -.0813747                      Mean          -.0751167
                        Largest       Std. dev.      .1176242
75%     .0237417       .0597266
90%     .0782953       .0782953       Variance       .0138355
95%     .0827278       .0827278       Skewness      -.1735925
99%      .116637        .116637       Kurtosis       2.266812

          In-migration coefficient (County x Post)
-------------------------------------------------------------
      Percentiles      Smallest
 1%    -.2246167      -.2246167
 5%    -.2201321      -.2201321
10%    -.2103909      -.2103909       Obs                  21
25%    -.1611585      -.1908973       Sum of wgt.          21

50%    -.0541749                      Mean           -.056733
                        Largest       Std. dev.      .1248631
75%    -.0004078        .022949
90%     .1186597       .1186597       Variance       .0155908
95%     .1767142       .1767142       Skewness       .5146815
99%     .2106411       .2106411       Kurtosis       2.569059

                  Out-migration t-statistic
-------------------------------------------------------------
      Percentiles      Smallest
 1%    -12.57733      -12.57733
 5%    -6.612787      -6.612787
10%    -5.895919      -5.895919       Obs                  21
25%    -4.276211      -4.493517       Sum of wgt.          21

50%      -1.2536                      Mean          -2.131269
                        Largest       Std. dev.      3.488082
75%     .7572727       .8894819
90%     1.445995       1.445995       Variance       12.16672
95%     2.016212       2.016212       Skewness      -1.254522
99%     2.070873       2.070873       Kurtosis       4.826414

                  In-migration t-statistic
-------------------------------------------------------------
      Percentiles      Smallest
 1%    -9.035348      -9.035348
 5%    -8.478744      -8.478744
10%    -6.274827      -6.274827       Obs                  21
25%    -4.289802      -5.506386       Sum of wgt.          21

50%    -1.983237                      Mean          -2.170867
                        Largest       Std. dev.      3.342738
75%    -.0075374       .4482386
90%     1.649559       1.649559       Variance       11.17389
95%     2.468509       2.468509       Skewness      -.4743263
99%     3.162416       3.162416       Kurtosis       2.498913
file C:\Users\ji252\AppData\Local\Temp\ST_828_000005.tmp
    saved as .dta format
Number of observations (_N) was 0, now 40.
(40 missing values generated)
(40 missing values generated)
(40 missing values generated)
variable stat_name was str1 now str7
(1 real change made)
(1 real change made)
variable stat_description was str1 now str35
(1 real change made)
variable stat_name was str7 now str8
(1 real change made)
(1 real change made)
variable stat_description was str35 now str38
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
variable stat_name was str8 now str14
(1 real change made)
(1 real change made)
variable stat_description was str38 now str39
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
variable stat_description was str39 now str42
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
variable stat_name was str14 now str15
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
variable stat_description was str42 now str54
(1 real change made)
variable stat_name was str15 now str16
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 observation deleted)
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/resul
> ts/flows/flow_analysis_stats.xlsx saved
Exported descriptive statistics to flow_analysis_stats.xlsx, sh
> eet: acs

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                                21  
    -----------------------------------------
file C:\Users\ji252\AppData\Local\Temp\ST_828_000006.tmp
    saved as .dta format
(21 observations deleted)
No counties with larger out-migration coef than Multnomah - ski
> pping sheet: larger_out_acs
(17 observations deleted)
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/resul
> ts/flows/flow_analysis_stats.xlsx saved
Exported 4 counties with smaller in-migration coef to sheet: sm
> aller_in_acs
(21 observations deleted)
No counties worse on both dimensions than Multnomah - skipping 
> sheet: worse_both_acs
(21 observations deleted)
No counties with larger out-migration t-stat than Multnomah - s
> kipping sheet: larger_t_out_acs
(20 observations deleted)
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/resul
> ts/flows/flow_analysis_stats.xlsx saved
Exported 1 counties with smaller in-migration t-stat to sheet: 
> smaller_t_in_acs
(dropped 3389 observations that are either singletons or separa
> ted by a fixed effect)
Iteration 1:   deviance = 1.9775e+06  eps = .         iters = 4
>     tol = 1.0e-04                                            
>                    min(eta) =  -2.88  P   
Iteration 2:   deviance = 3.3913e+05  eps = 4.83e+00  iters = 3
>     tol = 1.0e-04                                            
>                    min(eta) =  -3.47      
Iteration 3:   deviance = 2.9099e+05  eps = 1.65e-01  iters = 3
>     tol = 1.0e-04                                            
>                    min(eta) =  -3.71      
Iteration 4:   deviance = 2.9077e+05  eps = 7.29e-04  iters = 2
>     tol = 1.0e-04                                            
>                    min(eta) =  -3.74      
Iteration 5:   deviance = 2.9077e+05  eps = 5.69e-08  iters = 2
>     tol = 1.0e-04                                            
>                    min(eta) =  -3.74      
Iteration 6:   deviance = 2.9077e+05  eps = 1.24e-15  iters = 1
>     tol = 1.0e-05                                            
>                    min(eta) =  -3.74   S  
Iteration 7:   deviance = 2.9077e+05  eps = 2.75e-16  iters = 1
>     tol = 1.0e-09                                            
>                    min(eta) =  -3.74   S O
---------------------------------------------------------------
> ---------------------------------------------
(legend: p: exact partial-out   s: exact solver   h: step-halvi
> ng   o: epsilon below tolerance)
Converged in 7 iterations and 16 HDFE sub-iterations (tol = 1.0
> e-08)

HDFE PPML regression                              No. of obs   
>    =                                                         
>         129,600
Absorbing 2 HDFE groups                           Residual df  
>    =                                                         
>          22,046
Statistics robust to heteroskedasticity           Wald chi2(20)
>    =                                                         
>          935.60
Deviance             =  290774.4263               Prob > chi2  
>    =                                                         
>          0.0000
Log pseudolikelihood = -533247.6985               Pseudo R2    
>    =                                                         
>          0.9851

Number of clusters (flow_id)=     22,047
                           (Std. err. adjusted for 22,047 clust
> ers in flow_id)
---------------------------------------------------------------
> ---------------
             |               Robust
          n1 | Coefficient  std. err.      z    P>|z|     [95% 
> con                                                          
>    f. interval]
-------------+-------------------------------------------------
> ---------------
  x_out_2016 |   .0216813   .0235243     0.92   0.357    -.0244
> 255                                                          
>        .0677882
  x_out_2017 |   .0754026   .0137838     5.47   0.000     .0483
> 867                                                          
>        .1024184
  x_out_2018 |   .0064161   .0122318     0.52   0.600    -.0175
> 579                                                          
>        .0303901
  x_out_2019 |   -.007318   .0171262    -0.43   0.669    -.0408
> 848                                                          
>        .0262487
  x_out_2021 |   .0425224   .0152848     2.78   0.005     .0125
> 649                                                          
>          .07248
  x_out_2022 |  -.0036282   .0324137    -0.11   0.911    -.0671
> 579                                                          
>        .0599015
   x_in_2016 |   .0846162   .0218546     3.87   0.000      .041
> 782                                                          
>        .1274504
   x_in_2017 |   .0341028   .0212663     1.60   0.109    -.0075
> 783                                                          
>        .0757839
   x_in_2018 |    .002899   .0138536     0.21   0.834    -.0242
> 536                                                          
>        .0300515
   x_in_2019 |   .0203849   .0136763     1.49   0.136    -.0064
> 202                                                          
>          .04719
   x_in_2021 |  -.0550648   .0166367    -3.31   0.001    -.0876
> 721                                                          
>       -.0224574
   x_in_2022 |  -.0575413   .0283466    -2.03   0.042    -.1130
> 995                                                          
>       -.0019831
     unemp_o |   .0229936   .0013081    17.58   0.000     .0204
> 298                                                          
>        .0255575
     unemp_d |  -.0190333    .001416   -13.44   0.000    -.0218
> 086                                                          
>       -.0162579
       pop_o |   7.19e-09   2.60e-08     0.28   0.782    -4.39e
> -08                                                          
>        5.82e-08
       pop_d |   3.85e-07   3.87e-08     9.95   0.000     3.10e
> -07                                                          
>        4.61e-07
per_capita~o |   1.13e-06   5.11e-07     2.21   0.027     1.26e
> -07                                                          
>        2.13e-06
per_capita~d |  -1.66e-06   4.07e-07    -4.07   0.000    -2.45e
> -06                                                          
>       -8.59e-07
prop_rate_~o |  -.0055057   .0020538    -2.68   0.007    -.0095
> 311                                                          
>       -.0014803
prop_rate_~d |  -.0001415   .0020209    -0.07   0.944    -.0041
> 024                                                          
>        .0038194
       _cons |   6.123871   .0784472    78.06   0.000     5.970
> 117                                                          
>        6.277624
---------------------------------------------------------------
> ---------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
        year |         7           1           6     |
     flow_id |     22047       22047           0    *|
-----------------------------------------------------+
* = FE nested within cluster; treated as redundant for DoF comp
> utation
(dropped 3389 observations that are either singletons or separa
> ted by a fixed effect)
Iteration 1:   deviance = 1.9944e+06  eps = .         iters = 4
>     tol = 1.0e-04                                            
>                    min(eta) =  -2.86  P   
Iteration 2:   deviance = 3.5504e+05  eps = 4.62e+00  iters = 3
>     tol = 1.0e-04                                            
>                    min(eta) =  -3.44      
Iteration 3:   deviance = 3.0691e+05  eps = 1.57e-01  iters = 3
>     tol = 1.0e-04                                            
>                    min(eta) =  -3.68      
Iteration 4:   deviance = 3.0670e+05  eps = 6.90e-04  iters = 2
>     tol = 1.0e-04                                            
>                    min(eta) =  -3.71      
Iteration 5:   deviance = 3.0670e+05  eps = 5.38e-08  iters = 2
>     tol = 1.0e-04                                            
>                    min(eta) =  -3.71      
Iteration 6:   deviance = 3.0670e+05  eps = 7.82e-16  iters = 1
>     tol = 1.0e-05                                            
>                    min(eta) =  -3.71   S  
Iteration 7:   deviance = 3.0670e+05  eps = 2.61e-16  iters = 1
>     tol = 1.0e-09                                            
>                    min(eta) =  -3.71   S O
---------------------------------------------------------------
> ---------------------------------------------
(legend: p: exact partial-out   s: exact solver   h: step-halvi
> ng   o: epsilon below tolerance)
Converged in 7 iterations and 16 HDFE sub-iterations (tol = 1.0
> e-08)

HDFE PPML regression                              No. of obs   
>    =                                                         
>         129,600
Absorbing 2 HDFE groups                           Residual df  
>    =                                                         
>          22,046
Statistics robust to heteroskedasticity           Wald chi2(12)
>    =                                                         
>          270.13
Deviance             =  306702.3224               Prob > chi2  
>    =                                                         
>          0.0000
Log pseudolikelihood = -541211.6465               Pseudo R2    
>    =                                                         
>          0.9849

Number of clusters (flow_id)=     22,047
                           (Std. err. adjusted for 22,047 clust
> ers in flow_id)
---------------------------------------------------------------
> ---------------
             |               Robust
          n1 | Coefficient  std. err.      z    P>|z|     [95% 
> con                                                          
>    f. interval]
-------------+-------------------------------------------------
> ---------------
  x_out_2016 |   .0006873   .0224723     0.03   0.976    -.0433
> 577                                                          
>        .0447323
  x_out_2017 |   .0569814   .0148049     3.85   0.000     .0279
> 643                                                          
>        .0859984
  x_out_2018 |  -.0116661   .0159217    -0.73   0.464     -.042
> 872                                                          
>        .0195398
  x_out_2019 |  -.0246004   .0203952    -1.21   0.228    -.0645
> 741                                                          
>        .0153734
  x_out_2021 |   .0345233    .016497     2.09   0.036     .0021
> 898                                                          
>        .0668568
  x_out_2022 |   -.014277   .0355923    -0.40   0.688    -.0840
> 367                                                          
>        .0554827
   x_in_2016 |   .1145287   .0187551     6.11   0.000     .0777
> 694                                                          
>         .151288
   x_in_2017 |   .0603117   .0207866     2.90   0.004     .0195
> 707                                                          
>        .1010526
   x_in_2018 |   .0239054   .0153574     1.56   0.120    -.0061
> 945                                                          
>        .0540053
   x_in_2019 |   .0394928    .014881     2.65   0.008     .0103
> 267                                                          
>         .068659
   x_in_2021 |  -.0478143    .015323    -3.12   0.002    -.0778
> 468                                                          
>       -.0177817
   x_in_2022 |  -.0499275   .0244579    -2.04   0.041    -.0978
> 641                                                          
>       -.0019909
       _cons |    6.70613   .0001131  5.9e+04   0.000     6.705
> 908                                                          
>        6.706351
---------------------------------------------------------------
> ---------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
        year |         7           1           6     |
     flow_id |     22047       22047           0    *|
-----------------------------------------------------+
* = FE nested within cluster; treated as redundant for DoF comp
> utation
Number of observations (_N) was 0, now 7.
(7 missing values generated)
(7 missing values generated)
(7 missing values generated)
(7 missing values generated)
(7 missing values generated)
(7 missing values generated)
(7 missing values generated)
(7 missing values generated)
(7 missing values generated)
(7 missing values generated)
(7 missing values generated)
(7 missing values generated)
(results n1_es_with_covars are active now)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(results n1_es_no_covars are active now)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(results n1_es_with_covars are active now)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(results n1_es_no_covars are active now)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(results n1_es_with_covars are active now)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(results n1_es_no_covars are active now)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(results n1_es_with_covars are active now)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(results n1_es_no_covars are active now)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(results n1_es_with_covars are active now)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(results n1_es_no_covars are active now)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(results n1_es_with_covars are active now)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(results n1_es_no_covars are active now)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
file
    C:/Users/ji252/Documents/GitHub/multnomah-county-tax/resu
    > lts/flows/fig_multnomah_out_n1_acs.png saved as PNG
    format
file
    C:/Users/ji252/Documents/GitHub/multnomah-county-tax/resu
    > lts/flows/fig_multnomah_in_n1_acs.png saved as PNG
    format
file
    C:/Users/ji252/Documents/GitHub/multnomah-county-tax/resu
    > lts/flows/fig_multnomah_both_n1_acs.png saved as PNG
    format
(dropped 3389 observations that are either singletons or separa
> ted by a fixed effect)
Iteration 1:   deviance = 3.6616e+06  eps = .         iters = 4
>     tol = 1.0e-04                                            
>                    min(eta) =  -3.00  P   
Iteration 2:   deviance = 7.1914e+05  eps = 4.09e+00  iters = 3
>     tol = 1.0e-04                                            
>                    min(eta) =  -3.70      
Iteration 3:   deviance = 6.2873e+05  eps = 1.44e-01  iters = 3
>     tol = 1.0e-04                                            
>                    min(eta) =  -4.08      
Iteration 4:   deviance = 6.2821e+05  eps = 8.41e-04  iters = 2
>     tol = 1.0e-04                                            
>                    min(eta) =  -4.17      
Iteration 5:   deviance = 6.2821e+05  eps = 1.99e-07  iters = 2
>     tol = 1.0e-04                                            
>                    min(eta) =  -4.17      
Iteration 6:   deviance = 6.2821e+05  eps = 1.03e-13  iters = 1
>     tol = 1.0e-05                                            
>                    min(eta) =  -4.17   S  
Iteration 7:   deviance = 6.2821e+05  eps = 0.00e+00  iters = 1
>     tol = 1.0e-08                                            
>                    min(eta) =  -4.17   S O
---------------------------------------------------------------
> ---------------------------------------------
(legend: p: exact partial-out   s: exact solver   h: step-halvi
> ng   o: epsilon below tolerance)
Converged in 7 iterations and 16 HDFE sub-iterations (tol = 1.0
> e-08)

HDFE PPML regression                              No. of obs   
>    =                                                         
>         129,600
Absorbing 2 HDFE groups                           Residual df  
>    =                                                         
>          22,046
Statistics robust to heteroskedasticity           Wald chi2(20)
>    =                                                         
>          878.51
Deviance             =  628206.6664               Prob > chi2  
>    =                                                         
>          0.0000
Log pseudolikelihood = -737379.2625               Pseudo R2    
>    =                                                         
>          0.9885

Number of clusters (flow_id)=     22,047
                           (Std. err. adjusted for 22,047 clust
> ers in flow_id)
---------------------------------------------------------------
> ---------------
             |               Robust
          n2 | Coefficient  std. err.      z    P>|z|     [95% 
> con                                                          
>    f. interval]
-------------+-------------------------------------------------
> ---------------
  x_out_2016 |   .0590591   .0219986     2.68   0.007     .0159
> 427                                                          
>        .1021756
  x_out_2017 |   .0944793   .0156804     6.03   0.000     .0637
> 464                                                          
>        .1252123
  x_out_2018 |   .0132395   .0123118     1.08   0.282    -.0108
> 913                                                          
>        .0373703
  x_out_2019 |  -.0065173   .0209758    -0.31   0.756    -.0476
> 291                                                          
>        .0345944
  x_out_2021 |   .0595244   .0139373     4.27   0.000     .0322
> 077                                                          
>        .0868411
  x_out_2022 |    .006459   .0289337     0.22   0.823      -.05
> 025                                                          
>         .063168
   x_in_2016 |   .0959863   .0224964     4.27   0.000     .0518
> 942                                                          
>        .1400784
   x_in_2017 |   .0354647   .0175548     2.02   0.043     .0010
> 579                                                          
>        .0698714
   x_in_2018 |   .0151202   .0148031     1.02   0.307    -.0138
> 935                                                          
>        .0441338
   x_in_2019 |   .0323672   .0129112     2.51   0.012     .0070
> 617                                                          
>        .0576727
   x_in_2021 |  -.0501441   .0176639    -2.84   0.005    -.0847
> 648                                                          
>       -.0155234
   x_in_2022 |   -.047307   .0268481    -1.76   0.078    -.0999
> 283                                                          
>        .0053143
     unemp_o |   .0217058   .0013967    15.54   0.000     .0189
> 684                                                          
>        .0244432
     unemp_d |  -.0207307   .0015615   -13.28   0.000     -.023
> 791                                                          
>       -.0176703
       pop_o |  -6.86e-09   2.84e-08    -0.24   0.810    -6.26e
> -08                                                          
>        4.89e-08
       pop_d |   4.05e-07   3.62e-08    11.18   0.000     3.34e
> -07                                                          
>        4.76e-07
per_capita~o |   1.63e-06   5.18e-07     3.14   0.002     6.10e
> -07                                                          
>        2.64e-06
per_capita~d |  -2.03e-06   4.34e-07    -4.67   0.000    -2.88e
> -06                                                          
>       -1.18e-06
prop_rate_~o |  -.0053243    .002158    -2.47   0.014    -.0095
> 539                                                          
>       -.0010947
prop_rate_~d |  -.0005593   .0021348    -0.26   0.793    -.0047
> 435                                                          
>        .0036249
       _cons |   6.742645   .0806562    83.60   0.000     6.584
> 561                                                          
>        6.900728
---------------------------------------------------------------
> ---------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
        year |         7           1           6     |
     flow_id |     22047       22047           0    *|
-----------------------------------------------------+
* = FE nested within cluster; treated as redundant for DoF comp
> utation
(dropped 3389 observations that are either singletons or separa
> ted by a fixed effect)
Iteration 1:   deviance = 3.6928e+06  eps = .         iters = 4
>     tol = 1.0e-04                                            
>                    min(eta) =  -2.99  P   
Iteration 2:   deviance = 7.4847e+05  eps = 3.93e+00  iters = 3
>     tol = 1.0e-04                                            
>                    min(eta) =  -3.69      
Iteration 3:   deviance = 6.5811e+05  eps = 1.37e-01  iters = 3
>     tol = 1.0e-04                                            
>                    min(eta) =  -4.06      
Iteration 4:   deviance = 6.5758e+05  eps = 8.01e-04  iters = 2
>     tol = 1.0e-04                                            
>                    min(eta) =  -4.14      
Iteration 5:   deviance = 6.5758e+05  eps = 1.89e-07  iters = 2
>     tol = 1.0e-04                                            
>                    min(eta) =  -4.15      
Iteration 6:   deviance = 6.5758e+05  eps = 9.73e-14  iters = 1
>     tol = 1.0e-05                                            
>                    min(eta) =  -4.15   S  
Iteration 7:   deviance = 6.5758e+05  eps = 0.00e+00  iters = 1
>     tol = 1.0e-08                                            
>                    min(eta) =  -4.15   S O
---------------------------------------------------------------
> ---------------------------------------------
(legend: p: exact partial-out   s: exact solver   h: step-halvi
> ng   o: epsilon below tolerance)
Converged in 7 iterations and 16 HDFE sub-iterations (tol = 1.0
> e-08)

HDFE PPML regression                              No. of obs   
>    =                                                         
>         129,600
Absorbing 2 HDFE groups                           Residual df  
>    =                                                         
>          22,046
Statistics robust to heteroskedasticity           Wald chi2(12)
>    =                                                         
>          235.62
Deviance             =  657583.8915               Prob > chi2  
>    =                                                         
>          0.0000
Log pseudolikelihood = -752067.8751               Pseudo R2    
>    =                                                         
>          0.9883

Number of clusters (flow_id)=     22,047
                           (Std. err. adjusted for 22,047 clust
> ers in flow_id)
---------------------------------------------------------------
> ---------------
             |               Robust
          n2 | Coefficient  std. err.      z    P>|z|     [95% 
> con                                                          
>    f. interval]
-------------+-------------------------------------------------
> ---------------
  x_out_2016 |   .0373266   .0184606     2.02   0.043     .0011
> 446                                                          
>        .0735087
  x_out_2017 |   .0759461   .0140242     5.42   0.000     .0484
> 592                                                          
>         .103433
  x_out_2018 |  -.0062191   .0145871    -0.43   0.670    -.0348
> 092                                                          
>        .0223711
  x_out_2019 |  -.0253307   .0229546    -1.10   0.270    -.0703
> 208                                                          
>        .0196595
  x_out_2021 |   .0507793   .0149756     3.39   0.001     .0214
> 278                                                          
>        .0801309
  x_out_2022 |  -.0067742   .0323187    -0.21   0.834    -.0701
> 176                                                          
>        .0565692
   x_in_2016 |   .1293669   .0194492     6.65   0.000     .0912
> 471                                                          
>        .1674867
   x_in_2017 |     .06503    .017004     3.82   0.000     .0317
> 027                                                          
>        .0983573
   x_in_2018 |    .038089   .0171927     2.22   0.027      .004
> 392                                                          
>        .0717861
   x_in_2019 |   .0535092   .0150661     3.55   0.000     .0239
> 801                                                          
>        .0830383
   x_in_2021 |  -.0431737    .016665    -2.59   0.010    -.0758
> 365                                                          
>        -.010511
   x_in_2022 |  -.0406385   .0232158    -1.75   0.080    -.0861
> 405                                                          
>        .0048635
       _cons |   7.303372   .0000937  7.8e+04   0.000     7.303
> 188                                                          
>        7.303556
---------------------------------------------------------------
> ---------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
        year |         7           1           6     |
     flow_id |     22047       22047           0    *|
-----------------------------------------------------+
* = FE nested within cluster; treated as redundant for DoF comp
> utation
Number of observations (_N) was 0, now 7.
(7 missing values generated)
(7 missing values generated)
(7 missing values generated)
(7 missing values generated)
(7 missing values generated)
(7 missing values generated)
(7 missing values generated)
(7 missing values generated)
(7 missing values generated)
(7 missing values generated)
(7 missing values generated)
(7 missing values generated)
(results n2_es_with_covars are active now)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(results n2_es_no_covars are active now)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(results n2_es_with_covars are active now)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(results n2_es_no_covars are active now)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(results n2_es_with_covars are active now)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(results n2_es_no_covars are active now)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(results n2_es_with_covars are active now)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(results n2_es_no_covars are active now)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(results n2_es_with_covars are active now)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(results n2_es_no_covars are active now)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(results n2_es_with_covars are active now)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(results n2_es_no_covars are active now)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
file
    C:/Users/ji252/Documents/GitHub/multnomah-county-tax/resu
    > lts/flows/fig_multnomah_out_n2_acs.png saved as PNG
    format
file
    C:/Users/ji252/Documents/GitHub/multnomah-county-tax/resu
    > lts/flows/fig_multnomah_in_n2_acs.png saved as PNG
    format
file
    C:/Users/ji252/Documents/GitHub/multnomah-county-tax/resu
    > lts/flows/fig_multnomah_both_n2_acs.png saved as PNG
    format
(dropped 3389 observations that are either singletons or separa
> ted by a fixed effect)
Iteration 1:   deviance = 2.6802e+08  eps = .         iters = 4
>     tol = 1.0e-04                                            
>                    min(eta) =  -3.32  P   
Iteration 2:   deviance = 1.0398e+08  eps = 1.58e+00  iters = 3
>     tol = 1.0e-04                                            
>                    min(eta) =  -4.14      
Iteration 3:   deviance = 9.5862e+07  eps = 8.47e-02  iters = 3
>     tol = 1.0e-04                                            
>                    min(eta) =  -4.79      
Iteration 4:   deviance = 9.5693e+07  eps = 1.77e-03  iters = 2
>     tol = 1.0e-04                                            
>                    min(eta) =  -5.11      
Iteration 5:   deviance = 9.5692e+07  eps = 5.84e-06  iters = 2
>     tol = 1.0e-04                                            
>                    min(eta) =  -5.21      
Iteration 6:   deviance = 9.5692e+07  eps = 9.67e-10  iters = 2
>     tol = 1.0e-05                                            
>                    min(eta) =  -5.22   S  
Iteration 7:   deviance = 9.5692e+07  eps = 2.56e-15  iters = 1
>     tol = 1.0e-07                                            
>                    min(eta) =  -5.22   S  
Iteration 8:   deviance = 9.5692e+07  eps = 0.00e+00  iters = 1
>     tol = 1.0e-09                                            
>                    min(eta) =  -5.22   S O
---------------------------------------------------------------
> ---------------------------------------------
(legend: p: exact partial-out   s: exact solver   h: step-halvi
> ng   o: epsilon below tolerance)
Converged in 8 iterations and 18 HDFE sub-iterations (tol = 1.0
> e-08)

HDFE PPML regression                              No. of obs   
>    =                                                         
>         129,600
Absorbing 2 HDFE groups                           Residual df  
>    =                                                         
>          22,046
Statistics robust to heteroskedasticity           Wald chi2(20)
>    =                                                         
>          793.90
Deviance             =  95692345.52               Prob > chi2  
>    =                                                         
>          0.0000
Log pseudolikelihood = -48506955.03               Pseudo R2    
>    =                                                         
>          0.9838

Number of clusters (flow_id)=     22,047
                           (Std. err. adjusted for 22,047 clust
> ers in flow_id)
---------------------------------------------------------------
> ---------------
             |               Robust
         agi | Coefficient  std. err.      z    P>|z|     [95% 
> con                                                          
>    f. interval]
-------------+-------------------------------------------------
> ---------------
  x_out_2016 |   .0040056   .0480877     0.08   0.934    -.0902
> 445                                                          
>        .0982558
  x_out_2017 |   .1119817   .0286847     3.90   0.000     .0557
> 607                                                          
>        .1682027
  x_out_2018 |   .0861931   .0578538     1.49   0.136    -.0271
> 982                                                          
>        .1995843
  x_out_2019 |   .0741679   .0403691     1.84   0.066    -.0049
> 541                                                          
>          .15329
  x_out_2021 |   .1755181   .0214335     8.19   0.000     .1335
> 092                                                          
>         .217527
  x_out_2022 |   .1727474   .0644051     2.68   0.007     .0465
> 158                                                          
>         .298979
   x_in_2016 |   .1068567   .0287734     3.71   0.000     .0504
> 618                                                          
>        .1632515
   x_in_2017 |   .0598298   .0346418     1.73   0.084    -.0080
> 668                                                          
>        .1277263
   x_in_2018 |   .0029687   .0376167     0.08   0.937    -.0707
> 587                                                          
>        .0766962
   x_in_2019 |   .0405833   .0296853     1.37   0.172    -.0175
> 989                                                          
>        .0987654
   x_in_2021 |  -.1285752   .0350195    -3.67   0.000    -.1972
> 122                                                          
>       -.0599382
   x_in_2022 |  -.1697776   .0385657    -4.40   0.000    -.2453
> 651                                                          
>       -.0941902
     unemp_o |   .0379987   .0068736     5.53   0.000     .0245
> 267                                                          
>        .0514708
     unemp_d |  -.0406669   .0051563    -7.89   0.000    -.0507
> 731                                                          
>       -.0305607
       pop_o |  -2.79e-07   6.28e-08    -4.44   0.000    -4.02e
> -07                                                          
>       -1.56e-07
       pop_d |   5.24e-07   8.90e-08     5.89   0.000     3.49e
> -07                                                          
>        6.98e-07
per_capita~o |   7.56e-06   9.75e-07     7.76   0.000     5.65e
> -06                                                          
>        9.47e-06
per_capita~d |   9.19e-07   1.13e-06     0.81   0.416    -1.29e
> -06                                                          
>        3.13e-06
prop_rate_~o |  -.0133421   .0062851    -2.12   0.034    -.0256
> 606                                                          
>       -.0010235
prop_rate_~d |   .0081334    .005426     1.50   0.134    -.0025
> 013                                                          
>        .0187681
       _cons |   10.23183    .212935    48.05   0.000     9.814
> 487                                                          
>        10.64918
---------------------------------------------------------------
> ---------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
        year |         7           1           6     |
     flow_id |     22047       22047           0    *|
-----------------------------------------------------+
* = FE nested within cluster; treated as redundant for DoF comp
> utation
(dropped 3389 observations that are either singletons or separa
> ted by a fixed effect)
Iteration 1:   deviance = 2.7601e+08  eps = .         iters = 4
>     tol = 1.0e-04                                            
>                    min(eta) =  -3.28  P   
Iteration 2:   deviance = 1.1014e+08  eps = 1.51e+00  iters = 3
>     tol = 1.0e-04                                            
>                    min(eta) =  -4.15      
Iteration 3:   deviance = 1.0191e+08  eps = 8.07e-02  iters = 3
>     tol = 1.0e-04                                            
>                    min(eta) =  -4.83      
Iteration 4:   deviance = 1.0174e+08  eps = 1.66e-03  iters = 2
>     tol = 1.0e-04                                            
>                    min(eta) =  -5.17      
Iteration 5:   deviance = 1.0174e+08  eps = 5.36e-06  iters = 2
>     tol = 1.0e-04                                            
>                    min(eta) =  -5.25      
Iteration 6:   deviance = 1.0174e+08  eps = 9.20e-10  iters = 2
>     tol = 1.0e-05                                            
>                    min(eta) =  -5.25   S  
Iteration 7:   deviance = 1.0174e+08  eps = 2.54e-15  iters = 1
>     tol = 1.0e-07                                            
>                    min(eta) =  -5.25   S  
Iteration 8:   deviance = 1.0174e+08  eps = 0.00e+00  iters = 1
>     tol = 1.0e-09                                            
>                    min(eta) =  -5.25   S O
---------------------------------------------------------------
> ---------------------------------------------
(legend: p: exact partial-out   s: exact solver   h: step-halvi
> ng   o: epsilon below tolerance)
Converged in 8 iterations and 18 HDFE sub-iterations (tol = 1.0
> e-08)

HDFE PPML regression                              No. of obs   
>    =                                                         
>         129,600
Absorbing 2 HDFE groups                           Residual df  
>    =                                                         
>          22,046
Statistics robust to heteroskedasticity           Wald chi2(12)
>    =                                                         
>          283.29
Deviance             =  101743999.7               Prob > chi2  
>    =                                                         
>          0.0000
Log pseudolikelihood =  -51532782.1               Pseudo R2    
>    =                                                         
>          0.9828

Number of clusters (flow_id)=     22,047
                           (Std. err. adjusted for 22,047 clust
> ers in flow_id)
---------------------------------------------------------------
> ---------------
             |               Robust
         agi | Coefficient  std. err.      z    P>|z|     [95% 
> con                                                          
>    f. interval]
-------------+-------------------------------------------------
> ---------------
  x_out_2016 |  -.0431608   .0451648    -0.96   0.339    -.1316
> 821                                                          
>        .0453605
  x_out_2017 |   .0740926   .0257856     2.87   0.004     .0235
> 537                                                          
>        .1246314
  x_out_2018 |   .0441215   .0554411     0.80   0.426     -.064
> 541                                                          
>         .152784
  x_out_2019 |   .0391689   .0443094     0.88   0.377     -.047
> 676                                                          
>        .1260138
  x_out_2021 |   .1451036   .0257289     5.64   0.000     .0946
> 758                                                          
>        .1955313
  x_out_2022 |   .1387811   .0714183     1.94   0.052    -.0011
> 963                                                          
>        .2787584
   x_in_2016 |   .1408432   .0306178     4.60   0.000     .0808
> 334                                                          
>        .2008529
   x_in_2017 |    .088106   .0399843     2.20   0.028     .0097
> 382                                                          
>        .1664738
   x_in_2018 |   .0300755   .0429007     0.70   0.483    -.0540
> 084                                                          
>        .1141593
   x_in_2019 |   .0626958    .034931     1.79   0.073    -.0057
> 678                                                          
>        .1311593
   x_in_2021 |  -.1125724    .033865    -3.32   0.001    -.1789
> 465                                                          
>       -.0461983
   x_in_2022 |  -.1593401   .0344418    -4.63   0.000    -.2268
> 447                                                          
>       -.0918355
       _cons |   11.16068   .0002025  5.5e+04   0.000     11.16
> 028                                                          
>        11.16108
---------------------------------------------------------------
> ---------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
        year |         7           1           6     |
     flow_id |     22047       22047           0    *|
-----------------------------------------------------+
* = FE nested within cluster; treated as redundant for DoF comp
> utation
Number of observations (_N) was 0, now 7.
(7 missing values generated)
(7 missing values generated)
(7 missing values generated)
(7 missing values generated)
(7 missing values generated)
(7 missing values generated)
(7 missing values generated)
(7 missing values generated)
(7 missing values generated)
(7 missing values generated)
(7 missing values generated)
(7 missing values generated)
(results agi_es_with_covars are active now)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(results agi_es_no_covars are active now)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(results agi_es_with_covars are active now)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(results agi_es_no_covars are active now)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(results agi_es_with_covars are active now)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(results agi_es_no_covars are active now)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(results agi_es_with_covars are active now)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(results agi_es_no_covars are active now)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(results agi_es_with_covars are active now)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(results agi_es_no_covars are active now)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(results agi_es_with_covars are active now)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(results agi_es_no_covars are active now)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
file
    C:/Users/ji252/Documents/GitHub/multnomah-county-tax/resu
    > lts/flows/fig_multnomah_out_agi_acs.png saved as PNG
    format
file
    C:/Users/ji252/Documents/GitHub/multnomah-county-tax/resu
    > lts/flows/fig_multnomah_in_agi_acs.png saved as PNG
    format
file
    C:/Users/ji252/Documents/GitHub/multnomah-county-tax/resu
    > lts/flows/fig_multnomah_both_agi_acs.png saved as PNG
    format

===============================================================
> =========
RUNNING ANALYSIS FOR SAMPLE: all
Sample condition: 
Covariates: unemp_* pop_* per_capita_income_*
===============================================================
> =========

(dropped 10447 observations that are either singletons or separ
> ated by a fixed effect)
Iteration 1:   deviance = 2.8754e+06  eps = .         iters = 4
>     tol = 1.0e-04                                            
>                    min(eta) =  -2.82  P   
Iteration 2:   deviance = 6.3174e+05  eps = 3.55e+00  iters = 3
>     tol = 1.0e-04                                            
>                    min(eta) =  -3.25      
Iteration 3:   deviance = 5.8911e+05  eps = 7.24e-02  iters = 3
>     tol = 1.0e-04                                            
>                    min(eta) =  -3.39      
Iteration 4:   deviance = 5.8906e+05  eps = 8.34e-05  iters = 2
>     tol = 1.0e-04                                            
>                    min(eta) =  -3.40      
Iteration 5:   deviance = 5.8906e+05  eps = 5.95e-10  iters = 2
>     tol = 1.0e-05                                            
>                    min(eta) =  -3.40      
Iteration 6:   deviance = 5.8906e+05  eps = 1.93e-16  iters = 1
>     tol = 1.0e-06                                            
>                    min(eta) =  -3.40   S  
Iteration 7:   deviance = 5.8906e+05  eps = 0.00e+00  iters = 1
>     tol = 1.0e-09                                            
>                    min(eta) =  -3.40   S O
---------------------------------------------------------------
> ---------------------------------------------
(legend: p: exact partial-out   s: exact solver   h: step-halvi
> ng   o: epsilon below tolerance)
Converged in 7 iterations and 16 HDFE sub-iterations (tol = 1.0
> e-08)

HDFE PPML regression                              No. of obs   
>    =                                                         
>         331,655
Absorbing 2 HDFE groups                           Residual df  
>    =                                                         
>          57,484
Statistics robust to heteroskedasticity           Wald chi2(8) 
>    =                                                         
>         1117.95
Deviance             =  589060.4702               Prob > chi2  
>    =                                                         
>          0.0000
Log pseudolikelihood = -1266915.146               Pseudo R2    
>    =                                                         
>          0.9778

Number of clusters (flow_id)=     57,485
                           (Std. err. adjusted for 57,485 clust
> ers in flow_id)
---------------------------------------------------------------
> ---------------
             |               Robust
          n1 | Coefficient  std. err.      z    P>|z|     [95% 
> con                                                          
>    f. interval]
-------------+-------------------------------------------------
> ---------------
1.out_mult~t |   .0112807    .022745     0.50   0.620    -.0332
> 988                                                          
>        .0558601
1.in_multn~t |  -.0763629   .0162191    -4.71   0.000    -.1081
> 518                                                          
>        -.044574
     unemp_o |   .0234736   .0009508    24.69   0.000     .0216
> 101                                                          
>         .025337
     unemp_d |  -.0210478    .000978   -21.52   0.000    -.0229
> 646                                                          
>       -.0191309
       pop_o |   6.38e-08   3.11e-08     2.05   0.040     2.80e
> -09                                                          
>        1.25e-07
       pop_d |   3.63e-07   3.24e-08    11.20   0.000     3.00e
> -07                                                          
>        4.27e-07
per_capita~o |   2.13e-06   3.64e-07     5.86   0.000     1.42e
> -06                                                          
>        2.84e-06
per_capita~d |  -1.56e-06   2.83e-07    -5.51   0.000    -2.12e
> -06                                                          
>       -1.01e-06
       _cons |   5.640978   .0535479   105.34   0.000     5.536
> 026                                                          
>         5.74593
---------------------------------------------------------------
> ---------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
        year |         7           1           6     |
     flow_id |     57485       57485           0    *|
-----------------------------------------------------+
* = FE nested within cluster; treated as redundant for DoF comp
> utation
(dropped 10447 observations that are either singletons or separ
> ated by a fixed effect)
Iteration 1:   deviance = 2.9001e+06  eps = .         iters = 4
>     tol = 1.0e-04                                            
>                    min(eta) =  -2.75  P   
Iteration 2:   deviance = 6.5484e+05  eps = 3.43e+00  iters = 3
>     tol = 1.0e-04                                            
>                    min(eta) =  -3.22      
Iteration 3:   deviance = 6.1220e+05  eps = 6.97e-02  iters = 3
>     tol = 1.0e-04                                            
>                    min(eta) =  -3.36      
Iteration 4:   deviance = 6.1215e+05  eps = 8.01e-05  iters = 2
>     tol = 1.0e-04                                            
>                    min(eta) =  -3.37      
Iteration 5:   deviance = 6.1215e+05  eps = 5.70e-10  iters = 2
>     tol = 1.0e-05                                            
>                    min(eta) =  -3.37      
Iteration 6:   deviance = 6.1215e+05  eps = 1.86e-16  iters = 1
>     tol = 1.0e-06                                            
>                    min(eta) =  -3.37   S  
Iteration 7:   deviance = 6.1215e+05  eps = 1.86e-16  iters = 1
>     tol = 1.0e-09                                            
>                    min(eta) =  -3.37   S O
---------------------------------------------------------------
> ---------------------------------------------
(legend: p: exact partial-out   s: exact solver   h: step-halvi
> ng   o: epsilon below tolerance)
Converged in 7 iterations and 16 HDFE sub-iterations (tol = 1.0
> e-08)

HDFE PPML regression                              No. of obs   
>    =                                                         
>         331,655
Absorbing 2 HDFE groups                           Residual df  
>    =                                                         
>          57,484
Statistics robust to heteroskedasticity           Wald chi2(2) 
>    =                                                         
>           32.03
Deviance             =  612152.2382               Prob > chi2  
>    =                                                         
>          0.0000
Log pseudolikelihood =  -1278461.03               Pseudo R2    
>    =                                                         
>          0.9776

Number of clusters (flow_id)=     57,485
                           (Std. err. adjusted for 57,485 clust
> ers in flow_id)
---------------------------------------------------------------
> ---------------
             |               Robust
          n1 | Coefficient  std. err.      z    P>|z|     [95% 
> con                                                          
>    f. interval]
-------------+-------------------------------------------------
> ---------------
1.out_mult~t |   .0182474   .0234116     0.78   0.436    -.0276
> 384                                                          
>        .0641333
1.in_multn~t |  -.0863437   .0154255    -5.60   0.000    -.1165
> 772                                                          
>       -.0561103
       _cons |   6.165859   .0000373  1.7e+05   0.000     6.165
> 786                                                          
>        6.165932
---------------------------------------------------------------
> ---------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
        year |         7           1           6     |
     flow_id |     57485       57485           0    *|
-----------------------------------------------------+
* = FE nested within cluster; treated as redundant for DoF comp
> utation
file
    C:/Users/ji252/Documents/GitHub/multnomah-county-tax/resu
    > lts/flows/fig_multnomah_post_n1.png saved as PNG format
(dropped 10447 observations that are either singletons or separ
> ated by a fixed effect)
Iteration 1:   deviance = 5.4787e+06  eps = .         iters = 4
>     tol = 1.0e-04                                            
>                    min(eta) =  -2.91  P   
Iteration 2:   deviance = 1.4132e+06  eps = 2.88e+00  iters = 3
>     tol = 1.0e-04                                            
>                    min(eta) =  -3.54      
Iteration 3:   deviance = 1.3306e+06  eps = 6.20e-02  iters = 3
>     tol = 1.0e-04                                            
>                    min(eta) =  -3.81      
Iteration 4:   deviance = 1.3305e+06  eps = 1.14e-04  iters = 2
>     tol = 1.0e-04                                            
>                    min(eta) =  -3.85      
Iteration 5:   deviance = 1.3305e+06  eps = 4.79e-09  iters = 1
>     tol = 1.0e-04                                            
>                    min(eta) =  -3.85      
Iteration 6:   deviance = 1.3305e+06  eps = 1.65e-14  iters = 1
>     tol = 1.0e-05                                            
>                    min(eta) =  -3.85   S  
Iteration 7:   deviance = 1.3305e+06  eps = 1.55e-16  iters = 2
>     tol = 1.0e-09                                            
>                    min(eta) =  -3.85   S O
---------------------------------------------------------------
> ---------------------------------------------
(legend: p: exact partial-out   s: exact solver   h: step-halvi
> ng   o: epsilon below tolerance)
Converged in 7 iterations and 16 HDFE sub-iterations (tol = 1.0
> e-08)

HDFE PPML regression                              No. of obs   
>    =                                                         
>         331,655
Absorbing 2 HDFE groups                           Residual df  
>    =                                                         
>          57,484
Statistics robust to heteroskedasticity           Wald chi2(8) 
>    =                                                         
>         1091.86
Deviance             =   1330486.72               Prob > chi2  
>    =                                                         
>          0.0000
Log pseudolikelihood = -1733747.739               Pseudo R2    
>    =                                                         
>          0.9830

Number of clusters (flow_id)=     57,485
                           (Std. err. adjusted for 57,485 clust
> ers in flow_id)
---------------------------------------------------------------
> ---------------
             |               Robust
          n2 | Coefficient  std. err.      z    P>|z|     [95% 
> con                                                          
>    f. interval]
-------------+-------------------------------------------------
> ---------------
1.out_mult~t |    .015437    .020791     0.74   0.458    -.0253
> 127                                                          
>        .0561866
1.in_multn~t |  -.0740198   .0154241    -4.80   0.000    -.1042
> 505                                                          
>       -.0437892
     unemp_o |   .0221146   .0009958    22.21   0.000     .0201
> 629                                                          
>        .0240664
     unemp_d |  -.0230597   .0010507   -21.95   0.000    -.0251
> 189                                                          
>       -.0210004
       pop_o |   5.15e-08   3.16e-08     1.63   0.103    -1.04e
> -08                                                          
>        1.13e-07
       pop_d |   3.62e-07   3.00e-08    12.05   0.000     3.03e
> -07                                                          
>        4.20e-07
per_capita~o |   2.54e-06   3.76e-07     6.76   0.000     1.80e
> -06                                                          
>        3.28e-06
per_capita~d |  -2.02e-06   3.03e-07    -6.64   0.000    -2.61e
> -06                                                          
>       -1.42e-06
       _cons |   6.280974    .053925   116.48   0.000     6.175
> 282                                                          
>        6.386665
---------------------------------------------------------------
> ---------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
        year |         7           1           6     |
     flow_id |     57485       57485           0    *|
-----------------------------------------------------+
* = FE nested within cluster; treated as redundant for DoF comp
> utation
(dropped 10447 observations that are either singletons or separ
> ated by a fixed effect)
Iteration 1:   deviance = 5.5233e+06  eps = .         iters = 4
>     tol = 1.0e-04                                            
>                    min(eta) =  -2.89  P   
Iteration 2:   deviance = 1.4553e+06  eps = 2.80e+00  iters = 3
>     tol = 1.0e-04                                            
>                    min(eta) =  -3.50      
Iteration 3:   deviance = 1.3728e+06  eps = 6.01e-02  iters = 3
>     tol = 1.0e-04                                            
>                    min(eta) =  -3.76      
Iteration 4:   deviance = 1.3726e+06  eps = 1.10e-04  iters = 2
>     tol = 1.0e-04                                            
>                    min(eta) =  -3.80      
Iteration 5:   deviance = 1.3726e+06  eps = 4.60e-09  iters = 1
>     tol = 1.0e-04                                            
>                    min(eta) =  -3.80      
Iteration 6:   deviance = 1.3726e+06  eps = 1.57e-14  iters = 1
>     tol = 1.0e-05                                            
>                    min(eta) =  -3.80   S  
Iteration 7:   deviance = 1.3726e+06  eps = 1.50e-16  iters = 1
>     tol = 1.0e-09                                            
>                    min(eta) =  -3.80   S O
---------------------------------------------------------------
> ---------------------------------------------
(legend: p: exact partial-out   s: exact solver   h: step-halvi
> ng   o: epsilon below tolerance)
Converged in 7 iterations and 15 HDFE sub-iterations (tol = 1.0
> e-08)

HDFE PPML regression                              No. of obs   
>    =                                                         
>         331,655
Absorbing 2 HDFE groups                           Residual df  
>    =                                                         
>          57,484
Statistics robust to heteroskedasticity           Wald chi2(2) 
>    =                                                         
>           35.14
Deviance             =  1372638.294               Prob > chi2  
>    =                                                         
>          0.0000
Log pseudolikelihood = -1754823.525               Pseudo R2    
>    =                                                         
>          0.9828

Number of clusters (flow_id)=     57,485
                           (Std. err. adjusted for 57,485 clust
> ers in flow_id)
---------------------------------------------------------------
> ---------------
             |               Robust
          n2 | Coefficient  std. err.      z    P>|z|     [95% 
> con                                                          
>    f. interval]
-------------+-------------------------------------------------
> ---------------
1.out_mult~t |   .0218918   .0207797     1.05   0.292    -.0188
> 356                                                          
>        .0626192
1.in_multn~t |  -.0864384    .014852    -5.82   0.000    -.1155
> 479                                                          
>        -.057329
       _cons |   6.749585   .0000282  2.4e+05   0.000      6.74
> 953                                                          
>         6.74964
---------------------------------------------------------------
> ---------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
        year |         7           1           6     |
     flow_id |     57485       57485           0    *|
-----------------------------------------------------+
* = FE nested within cluster; treated as redundant for DoF comp
> utation
file
    C:/Users/ji252/Documents/GitHub/multnomah-county-tax/resu
    > lts/flows/fig_multnomah_post_n2.png saved as PNG format
(dropped 10447 observations that are either singletons or separ
> ated by a fixed effect)
Iteration 1:   deviance = 4.0054e+08  eps = .         iters = 4
>     tol = 1.0e-04                                            
>                    min(eta) =  -3.59  P   
Iteration 2:   deviance = 1.6976e+08  eps = 1.36e+00  iters = 3
>     tol = 1.0e-04                                            
>                    min(eta) =  -4.22      
Iteration 3:   deviance = 1.6099e+08  eps = 5.44e-02  iters = 3
>     tol = 1.0e-04                                            
>                    min(eta) =  -5.14      
Iteration 4:   deviance = 1.6087e+08  eps = 7.90e-04  iters = 2
>     tol = 1.0e-04                                            
>                    min(eta) =  -5.94      
Iteration 5:   deviance = 1.6086e+08  eps = 3.38e-06  iters = 2
>     tol = 1.0e-04                                            
>                    min(eta) =  -6.50      
Iteration 6:   deviance = 1.6086e+08  eps = 5.80e-08  iters = 2
>     tol = 1.0e-05                                            
>                    min(eta) =  -6.73   S  
Iteration 7:   deviance = 1.6086e+08  eps = 6.22e-10  iters = 2
>     tol = 1.0e-07                                            
>                    min(eta) =  -6.76   S O
---------------------------------------------------------------
> ---------------------------------------------
(legend: p: exact partial-out   s: exact solver   h: step-halvi
> ng   o: epsilon below tolerance)
Converged in 7 iterations and 18 HDFE sub-iterations (tol = 1.0
> e-08)

HDFE PPML regression                              No. of obs   
>    =                                                         
>         331,655
Absorbing 2 HDFE groups                           Residual df  
>    =                                                         
>          57,484
Statistics robust to heteroskedasticity           Wald chi2(8) 
>    =                                                         
>          369.69
Deviance             =  160864664.2               Prob > chi2  
>    =                                                         
>          0.0000
Log pseudolikelihood = -82077725.61               Pseudo R2    
>    =                                                         
>          0.9826

Number of clusters (flow_id)=     57,485
                           (Std. err. adjusted for 57,485 clust
> ers in flow_id)
---------------------------------------------------------------
> ---------------
             |               Robust
         agi | Coefficient  std. err.      z    P>|z|     [95% 
> con                                                          
>    f. interval]
-------------+-------------------------------------------------
> ---------------
1.out_mult~t |   .1613764   .0553811     2.91   0.004     .0528
> 315                                                          
>        .2699214
1.in_multn~t |  -.1838134   .0212845    -8.64   0.000    -.2255
> 303                                                          
>       -.1420964
     unemp_o |   .0423607   .0054837     7.72   0.000     .0316
> 128                                                          
>        .0531085
     unemp_d |  -.0442395   .0038193   -11.58   0.000    -.0517
> 253                                                          
>       -.0367538
       pop_o |  -2.80e-07   6.37e-08    -4.39   0.000    -4.05e
> -07                                                          
>       -1.55e-07
       pop_d |   4.64e-07   7.73e-08     6.00   0.000     3.12e
> -07                                                          
>        6.15e-07
per_capita~o |   8.22e-06   9.26e-07     8.88   0.000     6.41e
> -06                                                          
>          .00001
per_capita~d |   1.41e-06   8.43e-07     1.67   0.095    -2.46e
> -07                                                          
>        3.06e-06
       _cons |   9.822877   .1427415    68.82   0.000     9.543
> 109                                                          
>        10.10264
---------------------------------------------------------------
> ---------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
        year |         7           1           6     |
     flow_id |     57485       57485           0    *|
-----------------------------------------------------+
* = FE nested within cluster; treated as redundant for DoF comp
> utation
(dropped 10447 observations that are either singletons or separ
> ated by a fixed effect)
Iteration 1:   deviance = 4.1413e+08  eps = .         iters = 4
>     tol = 1.0e-04                                            
>                    min(eta) =  -3.29  P   
Iteration 2:   deviance = 1.7950e+08  eps = 1.31e+00  iters = 3
>     tol = 1.0e-04                                            
>                    min(eta) =  -4.22      
Iteration 3:   deviance = 1.7046e+08  eps = 5.30e-02  iters = 3
>     tol = 1.0e-04                                            
>                    min(eta) =  -5.14      
Iteration 4:   deviance = 1.7033e+08  eps = 7.55e-04  iters = 2
>     tol = 1.0e-04                                            
>                    min(eta) =  -5.94      
Iteration 5:   deviance = 1.7033e+08  eps = 3.11e-06  iters = 2
>     tol = 1.0e-04                                            
>                    min(eta) =  -6.50      
Iteration 6:   deviance = 1.7033e+08  eps = 5.48e-08  iters = 2
>     tol = 1.0e-05                                            
>                    min(eta) =  -6.73   S  
Iteration 7:   deviance = 1.7033e+08  eps = 5.88e-10  iters = 2
>     tol = 1.0e-07                                            
>                    min(eta) =  -6.76   S O
---------------------------------------------------------------
> ---------------------------------------------
(legend: p: exact partial-out   s: exact solver   h: step-halvi
> ng   o: epsilon below tolerance)
Converged in 7 iterations and 18 HDFE sub-iterations (tol = 1.0
> e-08)

HDFE PPML regression                              No. of obs   
>    =                                                         
>         331,655
Absorbing 2 HDFE groups                           Residual df  
>    =                                                         
>          57,484
Statistics robust to heteroskedasticity           Wald chi2(2) 
>    =                                                         
>           83.73
Deviance             =  170331590.8               Prob > chi2  
>    =                                                         
>          0.0000
Log pseudolikelihood = -86811188.95               Pseudo R2    
>    =                                                         
>          0.9816

Number of clusters (flow_id)=     57,485
                           (Std. err. adjusted for 57,485 clust
> ers in flow_id)
---------------------------------------------------------------
> ---------------
             |               Robust
         agi | Coefficient  std. err.      z    P>|z|     [95% 
> con                                                          
>    f. interval]
-------------+-------------------------------------------------
> ---------------
1.out_mult~t |   .1691276   .0589561     2.87   0.004     .0535
> 757                                                          
>        .2846795
1.in_multn~t |  -.1838849     .02136    -8.61   0.000    -.2257
> 498                                                          
>         -.14202
       _cons |     10.648    .000114  9.3e+04   0.000     10.64
> 778                                                          
>        10.64822
---------------------------------------------------------------
> ---------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
        year |         7           1           6     |
     flow_id |     57485       57485           0    *|
-----------------------------------------------------+
* = FE nested within cluster; treated as redundant for DoF comp
> utation
file
    C:/Users/ji252/Documents/GitHub/multnomah-county-tax/resu
    > lts/flows/fig_multnomah_post_agi.png saved as PNG
    format
1001 1003 1005 1007 1009 1011 1013 1015 1017 1019 1021 1023 102
> 5 1027 1029 1031 1033 1035 1037 1039 1041 1043 1045 1047 1049
>  1051 1053 1055 1057 1059 1061 1063 1065 1067 1069 1071 1073 
> 1075 1077 1079 1081 1083 1085 1087 1089 1091 1093 1095 1097 1
> 099 1101 1103 1105 1107 1109 1111 1113 1115 1117 1119 1121 11
> 23 1125 1127 1129 1131 1133 4001 4003 4005 4007 4009 4011 401
> 2 4013 4015 4017 4019 4021 4023 4025 4027 5001 5003 5005 5007
>  5009 5011 5013 5015 5017 5019 5021 5023 5025 5027 5029 5031 
> 5033 5035 5037 5039 5041 5043 5045 5047 5049 5051 5053 5055 5
> 057 5059 5061 5063 5065 5067 5069 5071 5073 5075 5077 5079 50
> 81 5083 5085 5087 5089 5091 5093 5095 5097 5099 5101 5103 510
> 5 5107 5109 5111 5113 5115 5117 5119 5121 5123 5125 5127 5129
>  5131 5133 5135 5137 5139 5141 5143 5145 5147 5149 6001 6005 
> 6007 6009 6011 6013 6015 6017 6019 6021 6023 6025 6027 6029 6
> 031 6033 6035 6037 6039 6041 6043 6045 6047 6049 6051 6053 60
> 55 6057 6059 6061 6063 6065 6067 6069 6071 6073 6075 6077 607
> 9 6081 6083 6085 6087 6089 6091 6093 6095 6097 6099 6101 6103
>  6105 6107 6109 6111 6113 6115 8001 8003 8005 8007 8011 8013 
> 8014 8015 8019 8021 8023 8025 8027 8029 8031 8035 8037 8039 8
> 041 8043 8045 8047 8049 8051 8055 8059 8065 8067 8069 8071 80
> 73 8075 8077 8081 8083 8085 8087 8089 8091 8093 8095 8097 809
> 9 8101 8103 8105 8107 8109 8113 8117 8119 8121 8123 8125 1000
> 1 10003 10005 11001 12001 12003 12005 12007 12009 12011 12013
>  12015 12017 12019 12021 12023 12027 12029 12031 12033 12035 
> 12037 12039 12041 12043 12045 12047 12049 12051 12053 12055 1
> 2057 12059 12061 12063 12065 12067 12069 12071 12073 12075 12
> 077 12079 12081 12083 12085 12086 12087 12089 12091 12093 120
> 95 12097 12099 12101 12103 12105 12107 12109 12111 12113 1211
> 5 12117 12119 12121 12123 12125 12127 12129 12131 12133 13001
>  13003 13005 13007 13009 13011 13013 13015 13017 13019 13021 
> 13023 13025 13027 13029 13031 13033 13035 13037 13039 13043 1
> 3045 13047 13049 13051 13053 13055 13057 13059 13063 13065 13
> 067 13069 13071 13073 13075 13077 13079 13081 13083 13085 130
> 87 13089 13091 13093 13095 13097 13099 13101 13103 13105 1310
> 7 13109 13111 13113 13115 13117 13119 13121 13123 13127 13129
>  13131 13133 13135 13137 13139 13141 13143 13145 13147 13149 
> 13151 13153 13155 13157 13159 13161 13163 13165 13167 13169 1
> 3171 13173 13175 13177 13179 13181 13183 13185 13187 13189 13
> 191 13193 13195 13197 13199 13201 13205 13207 13209 13211 132
> 13 13215 13217 13219 13221 13223 13225 13227 13229 13231 1323
> 3 13235 13237 13239 13241 13243 13245 13247 13249 13251 13253
>  13255 13257 13259 13261 13263 13267 13269 13271 13273 13275 
> 13277 13279 13281 13283 13285 13287 13289 13291 13293 13295 1
> 3297 13299 13301 13303 13305 13309 13311 13313 13315 13317 13
> 319 13321 16001 16003 16005 16007 16009 16011 16013 16015 160
> 17 16019 16021 16027 16029 16031 16035 16039 16041 16043 1604
> 5 16047 16049 16051 16053 16055 16057 16059 16061 16063 16065
>  16067 16069 16071 16073 16075 16077 16079 16081 16083 16085 
> 16087 17001 17003 17005 17007 17009 17011 17013 17015 17017 1
> 7019 17021 17023 17025 17027 17029 17031 17033 17035 17037 17
> 039 17041 17043 17045 17047 17049 17051 17053 17055 17057 170
> 59 17061 17063 17065 17067 17069 17071 17073 17075 17077 1707
> 9 17081 17083 17085 17087 17089 17091 17093 17095 17097 17099
>  17101 17103 17105 17107 17109 17111 17113 17115 17117 17119 
> 17121 17123 17125 17127 17129 17131 17133 17135 17137 17139 1
> 7141 17143 17145 17147 17149 17151 17153 17155 17157 17159 17
> 161 17163 17165 17167 17169 17171 17173 17175 17177 17179 171
> 81 17183 17185 17187 17189 17191 17193 17195 17197 17199 1720
> 1 17203 18001 18003 18005 18007 18009 18011 18013 18015 18017
>  18019 18021 18023 18025 18027 18029 18031 18033 18035 18037 
> 18039 18041 18043 18045 18047 18049 18051 18053 18055 18057 1
> 8059 18061 18063 18065 18067 18069 18071 18073 18075 18077 18
> 079 18081 18083 18085 18087 18089 18091 18093 18095 18097 180
> 99 18101 18103 18105 18107 18109 18111 18113 18115 18117 1811
> 9 18121 18123 18125 18127 18129 18131 18133 18135 18137 18139
>  18141 18143 18145 18147 18149 18151 18153 18155 18157 18159 
> 18161 18163 18165 18167 18169 18171 18173 18175 18177 18179 1
> 8181 18183 19001 19003 19005 19007 19009 19011 19013 19015 19
> 017 19019 19021 19023 19025 19027 19029 19031 19033 19035 190
> 37 19039 19041 19043 19045 19047 19049 19051 19053 19055 1905
> 7 19059 19061 19063 19065 19067 19069 19071 19073 19075 19077
>  19079 19081 19083 19085 19087 19089 19091 19093 19095 19097 
> 19099 19101 19103 19105 19107 19109 19111 19113 19115 19117 1
> 9119 19121 19123 19125 19127 19129 19131 19133 19135 19137 19
> 139 19141 19143 19145 19147 19149 19151 19153 19155 19157 191
> 59 19161 19163 19165 19167 19169 19171 19173 19175 19177 1917
> 9 19181 19183 19185 19187 19189 19191 19193 19195 19197 20001
>  20003 20005 20009 20011 20013 20015 20017 20019 20021 20027 
> 20029 20031 20035 20037 20041 20043 20045 20051 20053 20055 2
> 0057 20059 20061 20067 20069 20073 20077 20079 20085 20087 20
> 091 20093 20095 20099 20103 20105 20107 20109 20111 20113 201
> 15 20117 20119 20121 20125 20131 20133 20139 20143 20145 2014
> 9 20151 20155 20157 20159 20161 20163 20165 20167 20169 20171
>  20173 20175 20177 20185 20191 20193 20195 20197 20201 20205 
> 20207 20209 21001 21003 21005 21007 21009 21011 21013 21015 2
> 1017 21019 21021 21023 21025 21027 21029 21031 21033 21035 21
> 037 21039 21041 21043 21045 21047 21049 21051 21053 21055 210
> 57 21059 21061 21063 21065 21067 21069 21071 21073 21075 2107
> 7 21079 21081 21083 21085 21087 21089 21091 21093 21095 21097
>  21099 21101 21103 21105 21107 21109 21111 21113 21115 21117 
> 21119 21121 21123 21125 21127 21129 21131 21133 21135 21137 2
> 1139 21141 21143 21145 21147 21149 21151 21153 21155 21157 21
> 159 21161 21163 21165 21167 21169 21171 21173 21175 21177 211
> 79 21181 21183 21185 21187 21191 21193 21195 21197 21199 2120
> 3 21205 21207 21209 21211 21213 21215 21217 21219 21221 21223
>  21225 21227 21229 21231 21233 21235 21237 21239 22001 22003 
> 22005 22007 22009 22011 22013 22015 22017 22019 22021 22023 2
> 2025 22027 22029 22031 22033 22035 22037 22039 22041 22043 22
> 045 22047 22049 22051 22053 22055 22057 22059 22061 22063 220
> 65 22067 22069 22071 22073 22075 22077 22079 22081 22083 2208
> 5 22087 22089 22091 22093 22095 22097 22099 22101 22103 22105
>  22109 22111 22113 22115 22117 22119 22121 22123 22125 22127 
> 23001 23003 23005 23007 23009 23011 23013 23015 23017 23019 2
> 3021 23023 23025 23027 23029 23031 24001 24003 24005 24009 24
> 011 24013 24015 24017 24019 24021 24023 24025 24027 24029 240
> 31 24033 24035 24037 24039 24041 24043 24045 24047 24510 2500
> 1 25003 25005 25007 25009 25011 25013 25015 25017 25019 25021
>  25023 25025 25027 26001 26003 26005 26007 26009 26011 26013 
> 26015 26017 26019 26021 26023 26025 26027 26029 26031 26033 2
> 6035 26037 26039 26041 26043 26045 26047 26049 26051 26053 26
> 055 26057 26059 26061 26063 26065 26067 26069 26071 26073 260
> 75 26077 26079 26081 26083 26085 26087 26089 26091 26093 2609
> 7 26099 26101 26103 26105 26107 26109 26111 26113 26115 26117
>  26119 26121 26123 26125 26127 26129 26133 26135 26137 26139 
> 26141 26143 26145 26147 26149 26151 26153 26155 26157 26159 2
> 6161 26163 26165 27001 27003 27005 27007 27009 27011 27013 27
> 015 27017 27019 27021 27023 27025 27027 27029 27031 27033 270
> 35 27037 27039 27041 27043 27045 27047 27049 27051 27053 2705
> 5 27057 27059 27061 27063 27065 27067 27071 27073 27075 27077
>  27079 27081 27083 27085 27087 27089 27091 27093 27095 27097 
> 27099 27101 27103 27105 27107 27109 27111 27113 27115 27117 2
> 7119 27121 27123 27125 27127 27129 27131 27133 27135 27137 27
> 139 27141 27143 27145 27147 27149 27151 27153 27157 27159 271
> 61 27163 27165 27167 27169 27171 27173 28001 28003 28005 2800
> 7 28009 28011 28013 28015 28017 28019 28021 28023 28025 28027
>  28029 28031 28033 28035 28037 28039 28041 28043 28045 28047 
> 28049 28051 28053 28057 28059 28061 28063 28065 28067 28069 2
> 8071 28073 28075 28077 28079 28081 28083 28085 28087 28089 28
> 091 28093 28095 28097 28099 28101 28103 28105 28107 28109 281
> 11 28113 28115 28117 28119 28121 28123 28125 28127 28129 2813
> 1 28133 28135 28137 28139 28141 28143 28145 28147 28149 28151
>  28153 28155 28157 28159 28161 28163 29001 29003 29007 29009 
> 29011 29013 29015 29017 29019 29021 29023 29025 29027 29029 2
> 9031 29033 29035 29037 29039 29041 29043 29045 29047 29049 29
> 051 29053 29055 29057 29059 29061 29063 29065 29067 29069 290
> 71 29073 29075 29077 29079 29081 29083 29085 29087 29089 2909
> 1 29093 29095 29097 29099 29101 29103 29105 29107 29109 29111
>  29113 29115 29117 29119 29121 29123 29125 29127 29131 29133 
> 29135 29137 29139 29141 29143 29145 29147 29149 29151 29153 2
> 9155 29157 29159 29161 29163 29165 29167 29169 29171 29173 29
> 175 29177 29179 29181 29183 29185 29186 29187 29189 29195 291
> 97 29199 29201 29203 29205 29207 29209 29211 29213 29215 2921
> 7 29219 29221 29223 29225 29229 29510 30001 30003 30005 30007
>  30009 30013 30015 30017 30021 30023 30027 30029 30031 30035 
> 30039 30041 30043 30047 30049 30051 30053 30057 30061 30063 3
> 0065 30067 30073 30077 30081 30083 30085 30087 30089 30093 30
> 095 30097 30099 30101 30105 30111 31001 31003 31011 31013 310
> 19 31021 31023 31025 31027 31033 31035 31037 31039 31041 3104
> 3 31045 31047 31051 31053 31055 31059 31061 31063 31065 31067
>  31073 31079 31081 31087 31089 31093 31095 31097 31099 31101 
> 31105 31107 31109 31111 31119 31121 31123 31125 31127 31131 3
> 1137 31139 31141 31143 31145 31147 31151 31153 31155 31157 31
> 159 31161 31163 31167 31169 31173 31177 31179 31181 31185 320
> 01 32003 32005 32007 32011 32013 32015 32017 32019 32021 3202
> 3 32027 32029 32031 32033 32510 33001 33003 33005 33007 33009
>  33011 33013 33015 33017 33019 34001 34003 34005 34007 34009 
> 34011 34013 34015 34017 34019 34021 34023 34025 34027 34029 3
> 4031 34033 34035 34037 34039 34041 35001 35005 35006 35007 35
> 009 35013 35015 35017 35019 35025 35027 35028 35029 35031 350
> 33 35035 35037 35039 35041 35043 35045 35047 35049 35051 3505
> 3 35055 35057 35061 36001 36003 36005 36007 36009 36011 36013
>  36015 36017 36019 36021 36023 36025 36027 36029 36031 36033 
> 36035 36037 36039 36041 36043 36045 36047 36049 36051 36053 3
> 6055 36057 36059 36061 36063 36065 36067 36069 36071 36073 36
> 075 36077 36079 36081 36083 36085 36087 36089 36091 36093 360
> 95 36097 36099 36101 36103 36105 36107 36109 36111 36113 3611
> 5 36117 36119 36121 36123 37001 37003 37005 37007 37009 37011
>  37013 37015 37017 37019 37021 37023 37025 37027 37029 37031 
> 37033 37035 37037 37039 37041 37043 37045 37047 37049 37051 3
> 7053 37055 37057 37059 37061 37063 37065 37067 37069 37071 37
> 073 37075 37077 37079 37081 37083 37085 37087 37089 37091 370
> 93 37095 37097 37099 37101 37103 37105 37107 37109 37111 3711
> 3 37115 37117 37119 37121 37123 37125 37127 37129 37131 37133
>  37135 37137 37139 37141 37143 37145 37147 37149 37151 37153 
> 37155 37157 37159 37161 37163 37165 37167 37169 37171 37173 3
> 7175 37177 37179 37181 37183 37185 37187 37189 37191 37193 37
> 195 37197 37199 38003 38005 38009 38013 38015 38017 38021 380
> 25 38029 38035 38041 38043 38045 38049 38053 38055 38057 3805
> 9 38061 38067 38071 38073 38075 38077 38079 38081 38085 38089
>  38093 38097 38099 38101 38105 39001 39003 39005 39007 39009 
> 39011 39013 39015 39017 39019 39021 39023 39025 39027 39029 3
> 9031 39033 39035 39037 39039 39041 39043 39045 39047 39049 39
> 051 39053 39055 39057 39059 39061 39063 39065 39067 39069 390
> 71 39073 39075 39077 39079 39081 39083 39085 39087 39089 3909
> 1 39093 39095 39097 39099 39101 39103 39105 39107 39109 39111
>  39113 39115 39117 39119 39121 39123 39125 39127 39129 39131 
> 39133 39135 39137 39139 39141 39143 39145 39147 39149 39151 3
> 9153 39155 39157 39159 39161 39163 39165 39167 39169 39171 39
> 173 39175 40001 40003 40005 40007 40009 40011 40013 40015 400
> 17 40019 40021 40023 40027 40029 40031 40033 40035 40037 4003
> 9 40041 40043 40045 40047 40049 40051 40053 40055 40059 40061
>  40063 40065 40067 40069 40071 40073 40075 40077 40079 40081 
> 40083 40085 40087 40089 40091 40093 40095 40097 40099 40101 4
> 0103 40105 40107 40109 40111 40113 40115 40117 40119 40121 40
> 123 40125 40127 40129 40131 40133 40135 40137 40139 40141 401
> 43 40145 40147 40149 40151 40153 41001 41003 41005 41007 4100
> 9 41011 41013 41015 41017 41019 41025 41027 41029 41031 41033
>  41035 41037 41039 41041 41043 41045 41047 41049 41051 41053 
> 41057 41059 41061 41063 41065 41067 41071 42001 42003 42005 4
> 2007 42009 42011 42013 42015 42017 42019 42021 42023 42025 42
> 027 42029 42031 42033 42035 42037 42039 42041 42043 42045 420
> 47 42049 42051 42053 42055 42057 42059 42061 42063 42065 4206
> 7 42069 42071 42073 42075 42077 42079 42081 42083 42085 42087
>  42089 42091 42093 42095 42097 42099 42101 42103 42105 42107 
> 42109 42111 42113 42115 42117 42119 42121 42123 42125 42127 4
> 2129 42131 42133 44001 44003 44005 44007 44009 45001 45003 45
> 005 45007 45009 45011 45013 45015 45017 45019 45021 45023 450
> 25 45027 45029 45031 45033 45035 45037 45039 45041 45043 4504
> 5 45047 45049 45051 45053 45055 45057 45059 45061 45063 45065
>  45067 45069 45071 45073 45075 45077 45079 45081 45083 45085 
> 45087 45089 45091 46003 46005 46007 46009 46011 46013 46015 4
> 6019 46023 46025 46027 46029 46033 46035 46037 46039 46041 46
> 045 46047 46051 46057 46061 46065 46067 46071 46077 46079 460
> 81 46083 46085 46087 46089 46091 46093 46099 46101 46102 4610
> 3 46109 46111 46115 46117 46121 46125 46127 46135 47001 47003
>  47005 47007 47009 47011 47013 47015 47017 47019 47021 47023 
> 47025 47027 47029 47031 47033 47035 47037 47039 47041 47043 4
> 7045 47047 47049 47051 47053 47055 47057 47059 47061 47063 47
> 065 47067 47069 47071 47073 47075 47077 47079 47081 47083 470
> 85 47087 47089 47091 47093 47095 47097 47099 47101 47103 4710
> 5 47107 47109 47111 47113 47115 47117 47119 47121 47123 47125
>  47127 47129 47131 47133 47137 47139 47141 47143 47145 47147 
> 47149 47151 47153 47155 47157 47159 47161 47163 47165 47167 4
> 7169 47171 47173 47175 47177 47179 47181 47183 47185 47187 47
> 189 48001 48003 48005 48007 48009 48011 48013 48015 48017 480
> 19 48021 48023 48025 48027 48029 48031 48035 48037 48039 4804
> 1 48043 48047 48049 48051 48053 48055 48057 48059 48061 48063
>  48065 48067 48069 48071 48073 48077 48079 48081 48083 48085 
> 48089 48091 48093 48095 48097 48099 48103 48105 48107 48111 4
> 8113 48115 48117 48119 48121 48123 48127 48129 48131 48133 48
> 135 48139 48141 48143 48145 48147 48149 48151 48153 48157 481
> 59 48161 48163 48165 48167 48169 48171 48175 48177 48179 4818
> 1 48183 48185 48187 48189 48193 48197 48199 48201 48203 48205
>  48207 48209 48213 48215 48217 48219 48221 48223 48225 48227 
> 48229 48231 48233 48235 48237 48239 48241 48245 48247 48249 4
> 8251 48253 48255 48257 48259 48265 48267 48273 48277 48279 48
> 281 48283 48285 48287 48289 48291 48293 48295 48297 48299 483
> 03 48305 48307 48309 48313 48315 48317 48321 48323 48325 4832
> 9 48331 48333 48335 48337 48339 48341 48343 48347 48349 48351
>  48353 48355 48357 48359 48361 48363 48365 48367 48369 48371 
> 48373 48375 48377 48379 48381 48383 48387 48389 48391 48395 4
> 8397 48399 48401 48403 48405 48407 48409 48413 48415 48417 48
> 419 48423 48425 48427 48429 48435 48437 48439 48441 48445 484
> 49 48451 48453 48455 48457 48459 48461 48463 48465 48467 4846
> 9 48471 48473 48475 48477 48479 48481 48483 48485 48487 48489
>  48491 48493 48495 48497 48499 48501 48503 48505 48507 49001 
> 49003 49005 49007 49011 49013 49015 49017 49019 49021 49023 4
> 9025 49027 49029 49035 49037 49039 49041 49043 49045 49047 49
> 049 49051 49053 49057 50001 50003 50005 50007 50009 50011 500
> 13 50015 50017 50019 50021 50023 50025 50027 51001 51007 5100
> 9 51011 51013 51019 51021 51023 51025 51027 51029 51033 51036
>  51037 51041 51043 51047 51049 51051 51057 51061 51063 51065 
> 51067 51071 51073 51075 51077 51079 51083 51085 51087 51093 5
> 1097 51099 51101 51103 51105 51107 51109 51111 51113 51115 51
> 117 51119 51125 51127 51131 51133 51135 51137 51139 51141 511
> 45 51147 51155 51157 51159 51167 51169 51171 51173 51179 5118
> 1 51183 51185 51187 51193 51197 51510 51550 51650 51700 51710
>  51740 51760 51770 51800 51810 53001 53003 53005 53007 53009 
> 53011 53013 53015 53017 53019 53021 53025 53027 53029 53031 5
> 3033 53035 53037 53039 53041 53043 53045 53047 53049 53051 53
> 053 53055 53057 53059 53061 53063 53065 53067 53069 53071 530
> 73 53075 53077 54001 54003 54005 54007 54009 54011 54013 5401
> 5 54017 54019 54021 54023 54025 54027 54029 54031 54033 54035
>  54037 54039 54041 54043 54045 54047 54049 54051 54053 54055 
> 54057 54059 54061 54063 54065 54067 54069 54071 54073 54075 5
> 4077 54079 54081 54083 54085 54087 54089 54091 54093 54095 54
> 097 54099 54101 54103 54105 54107 54109 55001 55003 55005 550
> 07 55009 55011 55013 55015 55017 55019 55021 55023 55025 5502
> 7 55029 55031 55033 55035 55037 55039 55041 55043 55045 55047
>  55049 55051 55053 55055 55057 55059 55061 55063 55065 55067 
> 55069 55071 55073 55075 55077 55078 55079 55081 55083 55085 5
> 5087 55089 55091 55093 55095 55097 55099 55101 55103 55105 55
> 107 55109 55111 55113 55115 55117 55119 55121 55123 55125 551
> 27 55129 55131 55133 55135 55137 55139 55141 56001 56003 5600
> 5 56007 56009 56011 56013 56015 56019 56021 56023 56025 56029
>  56031 56033 56035 56037 56039 56041 56043 56045

*** DEBUG MODE: Sampling 20 random counties (plus Multnomah) **
> *

file C:\Users\ji252\AppData\Local\Temp\ST_828_000007.tmp
    saved as .dta format
Number of observations (_N) was 0, now 2,849.
(2,849 missing values generated)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(2,828 observations deleted)
1021 1041 1055 13231 17067 20151 21177 27079 27105 31087 39033 
> 40077 41051 42021 44001 46061 47045 48027 51061 54059 56023
DEBUG: Running regressions for 21 counties (sampled from 2849) 
> (all sample)...
(file C:\Users\ji252\AppData\Local\Temp\ST_828_000008.tmp not
    found)

==========================================
Multnomah County Results:
==========================================

    Variable |        Obs        Mean    Std. dev.       Min   
>      Max
-------------+-------------------------------------------------
> --------
       b_out |          1    .1613764           .   .1613764   
> .1613764
       t_out |          1    2.913926           .   2.913926   
> 2.913926
        b_in |          1   -.1838134           .  -.1838134  -
> .1838134
        t_in |          1   -8.636003           .  -8.636003  -
> 8.636003
pctile_b_out |          1     95.2381           .    95.2381   
>  95.2381
-------------+-------------------------------------------------
> --------
pctile_t_out |          1         100           .        100   
>      100
 pctile_b_in |          1    23.80952           .   23.80952   
> 23.80952
 pctile_t_in |          1    14.28571           .   14.28571   
> 14.28571

Distribution of coefficients (all counties):

          Out-migration coefficient (County x Post)
-------------------------------------------------------------
      Percentiles      Smallest
 1%    -.7926702      -.7926702
 5%    -.4988738      -.4988738
10%    -.4077033      -.4077033       Obs                  21
25%    -.2089103      -.3100331       Sum of wgt.          21

50%    -.1197293                      Mean          -.1508407
                        Largest       Std. dev.      .2256898
75%    -.0589062       .0134311
90%     .1292066       .1292066       Variance       .0509359
95%     .1613764       .1613764       Skewness      -.9644411
99%     .2216122       .2216122       Kurtosis       4.562134

          In-migration coefficient (County x Post)
-------------------------------------------------------------
      Percentiles      Smallest
 1%    -.3186663      -.3186663
 5%    -.2689302      -.2689302
10%     -.228109       -.228109       Obs                  21
25%    -.1322084      -.2075951       Sum of wgt.          21

50%     .0155765                      Mean          -.0058853
                        Largest       Std. dev.      .1776843
75%     .1165051       .1516572
90%     .1966833       .1966833       Variance       .0315717
95%     .2361702       .2361702       Skewness        .072616
99%     .3669993       .3669993       Kurtosis       2.402623

Distribution of t-stats (all counties):

                  Out-migration t-statistic
-------------------------------------------------------------
      Percentiles      Smallest
 1%     -112.914       -112.914
 5%     -78.8421       -78.8421
10%    -42.01147      -42.01147       Obs                  21
25%    -4.473849      -5.866754       Sum of wgt.          21

50%    -1.590244                      Mean          -12.51322
                        Largest       Std. dev.      29.64331
75%     -1.04587       .0854502
90%     1.031328       1.031328       Variance       878.7257
95%     1.390249       1.390249       Skewness      -2.563792
99%     2.913926       2.913926       Kurtosis       8.297737

                  In-migration t-statistic
-------------------------------------------------------------
      Percentiles      Smallest
 1%    -39.87964      -39.87964
 5%    -32.16034      -32.16034
10%    -8.636003      -8.636003       Obs                  21
25%     -1.10306      -1.524888       Sum of wgt.          21

50%     .1823179                      Mean            .211132
                        Largest       Std. dev.      21.06779
75%      1.34873       1.913753
90%     2.177564       2.177564       Variance       443.8517
95%     3.302844       3.302844       Skewness       2.076049
99%     78.39538       78.39538       Kurtosis       10.94048
  variable multnomah was float now byte
  variable rank_b_out was float now byte
  variable rank_b_in was float now byte
  variable rank_t_out was float now byte
  variable rank_t_in was float now byte
  (315 bytes saved)
file
    C:/Users/ji252/Documents/GitHub/multnomah-county-tax/data
    > /working/county_flow_coefficients.dta saved
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/data/
> working/county_flow_coefficients.csv saved
County coefficients saved to C:/Users/ji252/Documents/GitHub/mu
> ltnomah-county-tax/data/working/county_flow_coefficients.dta
(bin=50, start=-.79267025, width=.02028565)
file
    C:/Users/ji252/Documents/GitHub/multnomah-county-tax/resu
    > lts/flows/fig_hist_out_b.png saved as PNG format
(bin=50, start=-.31866628, width=.01371331)
file
    C:/Users/ji252/Documents/GitHub/multnomah-county-tax/resu
    > lts/flows/fig_hist_in_b.png saved as PNG format
file
    C:/Users/ji252/Documents/GitHub/multnomah-county-tax/resu
    > lts/flows/fig_scatter_out_in_b.png saved as PNG format
(bin=50, start=-112.91403, width=2.3165592)
file
    C:/Users/ji252/Documents/GitHub/multnomah-county-tax/resu
    > lts/flows/fig_hist_out_t.png saved as PNG format
(bin=50, start=-39.879642, width=2.3655004)
file
    C:/Users/ji252/Documents/GitHub/multnomah-county-tax/resu
    > lts/flows/fig_hist_in_t.png saved as PNG format
file
    C:/Users/ji252/Documents/GitHub/multnomah-county-tax/resu
    > lts/flows/fig_scatter_out_in_t.png saved as PNG format

          Out-migration coefficient (County x Post)
-------------------------------------------------------------
      Percentiles      Smallest
 1%    -.7926702      -.7926702
 5%    -.4988738      -.4988738
10%    -.4077033      -.4077033       Obs                  21
25%    -.2089103      -.3100331       Sum of wgt.          21

50%    -.1197293                      Mean          -.1508407
                        Largest       Std. dev.      .2256898
75%    -.0589062       .0134311
90%     .1292066       .1292066       Variance       .0509359
95%     .1613764       .1613764       Skewness      -.9644411
99%     .2216122       .2216122       Kurtosis       4.562134

          In-migration coefficient (County x Post)
-------------------------------------------------------------
      Percentiles      Smallest
 1%    -.3186663      -.3186663
 5%    -.2689302      -.2689302
10%     -.228109       -.228109       Obs                  21
25%    -.1322084      -.2075951       Sum of wgt.          21

50%     .0155765                      Mean          -.0058853
                        Largest       Std. dev.      .1776843
75%     .1165051       .1516572
90%     .1966833       .1966833       Variance       .0315717
95%     .2361702       .2361702       Skewness        .072616
99%     .3669993       .3669993       Kurtosis       2.402623

                  Out-migration t-statistic
-------------------------------------------------------------
      Percentiles      Smallest
 1%     -112.914       -112.914
 5%     -78.8421       -78.8421
10%    -42.01147      -42.01147       Obs                  21
25%    -4.473849      -5.866754       Sum of wgt.          21

50%    -1.590244                      Mean          -12.51322
                        Largest       Std. dev.      29.64331
75%     -1.04587       .0854502
90%     1.031328       1.031328       Variance       878.7257
95%     1.390249       1.390249       Skewness      -2.563792
99%     2.913926       2.913926       Kurtosis       8.297737

                  In-migration t-statistic
-------------------------------------------------------------
      Percentiles      Smallest
 1%    -39.87964      -39.87964
 5%    -32.16034      -32.16034
10%    -8.636003      -8.636003       Obs                  21
25%     -1.10306      -1.524888       Sum of wgt.          21

50%     .1823179                      Mean            .211132
                        Largest       Std. dev.      21.06779
75%      1.34873       1.913753
90%     2.177564       2.177564       Variance       443.8517
95%     3.302844       3.302844       Skewness       2.076049
99%     78.39538       78.39538       Kurtosis       10.94048
file C:\Users\ji252\AppData\Local\Temp\ST_828_000009.tmp
    saved as .dta format
Number of observations (_N) was 0, now 40.
(40 missing values generated)
(40 missing values generated)
(40 missing values generated)
variable stat_name was str1 now str7
(1 real change made)
(1 real change made)
variable stat_description was str1 now str35
(1 real change made)
variable stat_name was str7 now str8
(1 real change made)
(1 real change made)
variable stat_description was str35 now str38
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
variable stat_name was str8 now str14
(1 real change made)
(1 real change made)
variable stat_description was str38 now str39
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
variable stat_description was str39 now str42
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
variable stat_name was str14 now str15
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
variable stat_description was str42 now str54
(1 real change made)
variable stat_name was str15 now str16
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 observation deleted)
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/resul
> ts/flows/flow_analysis_stats.xlsx saved
Exported descriptive statistics to flow_analysis_stats.xlsx, sh
> eet: all

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                                21  
    -----------------------------------------
file C:\Users\ji252\AppData\Local\Temp\ST_828_00000a.tmp
    saved as .dta format
(20 observations deleted)
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/resul
> ts/flows/flow_analysis_stats.xlsx saved
Exported 1 counties with larger out-migration coef to sheet: la
> rger_out_all
(16 observations deleted)
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/resul
> ts/flows/flow_analysis_stats.xlsx saved
Exported 5 counties with smaller in-migration coef to sheet: sm
> aller_in_all
(21 observations deleted)
No counties worse on both dimensions than Multnomah - skipping 
> sheet: worse_both_all
(21 observations deleted)
No counties with larger out-migration t-stat than Multnomah - s
> kipping sheet: larger_t_out_all
(19 observations deleted)
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/resul
> ts/flows/flow_analysis_stats.xlsx saved
Exported 2 counties with smaller in-migration t-stat to sheet: 
> smaller_t_in_all
(dropped 10447 observations that are either singletons or separ
> ated by a fixed effect)
Iteration 1:   deviance = 2.8750e+06  eps = .         iters = 4
>     tol = 1.0e-04                                            
>                    min(eta) =  -2.82  P   
Iteration 2:   deviance = 6.3143e+05  eps = 3.55e+00  iters = 3
>     tol = 1.0e-04                                            
>                    min(eta) =  -3.25      
Iteration 3:   deviance = 5.8880e+05  eps = 7.24e-02  iters = 3
>     tol = 1.0e-04                                            
>                    min(eta) =  -3.39      
Iteration 4:   deviance = 5.8875e+05  eps = 8.34e-05  iters = 2
>     tol = 1.0e-04                                            
>                    min(eta) =  -3.40      
Iteration 5:   deviance = 5.8875e+05  eps = 5.95e-10  iters = 2
>     tol = 1.0e-05                                            
>                    min(eta) =  -3.40      
Iteration 6:   deviance = 5.8875e+05  eps = 1.93e-16  iters = 1
>     tol = 1.0e-06                                            
>                    min(eta) =  -3.40   S  
Iteration 7:   deviance = 5.8875e+05  eps = 0.00e+00  iters = 1
>     tol = 1.0e-09                                            
>                    min(eta) =  -3.40   S O
---------------------------------------------------------------
> ---------------------------------------------
(legend: p: exact partial-out   s: exact solver   h: step-halvi
> ng   o: epsilon below tolerance)
Converged in 7 iterations and 16 HDFE sub-iterations (tol = 1.0
> e-08)

HDFE PPML regression                              No. of obs   
>    =                                                         
>         331,655
Absorbing 2 HDFE groups                           Residual df  
>    =                                                         
>          57,484
Statistics robust to heteroskedasticity           Wald chi2(18)
>    =                                                         
>         1369.29
Deviance             =  588750.1864               Prob > chi2  
>    =                                                         
>          0.0000
Log pseudolikelihood = -1266760.004               Pseudo R2    
>    =                                                         
>          0.9778

Number of clusters (flow_id)=     57,485
                           (Std. err. adjusted for 57,485 clust
> ers in flow_id)
---------------------------------------------------------------
> ---------------
             |               Robust
          n1 | Coefficient  std. err.      z    P>|z|     [95% 
> con                                                          
>    f. interval]
-------------+-------------------------------------------------
> ---------------
  x_out_2016 |   .0077922   .0263958     0.30   0.768    -.0439
> 427                                                          
>        .0595271
  x_out_2017 |    .078197   .0134486     5.81   0.000     .0518
> 383                                                          
>        .1045556
  x_out_2018 |   .0010925   .0126651     0.09   0.931    -.0237
> 307                                                          
>        .0259157
  x_out_2019 |  -.0124979   .0145334    -0.86   0.390    -.0409
> 829                                                          
>         .015987
  x_out_2021 |   .0528212   .0139452     3.79   0.000     .0254
> 891                                                          
>        .0801534
  x_out_2022 |   .0054972   .0268138     0.21   0.838    -.0470
> 568                                                          
>        .0580512
   x_in_2016 |   .0867557   .0192393     4.51   0.000     .0490
> 474                                                          
>        .1244641
   x_in_2017 |   .0339171   .0187846     1.81   0.071       -.0
> 029                                                          
>        .0707342
   x_in_2018 |   .0101895   .0126008     0.81   0.419    -.0145
> 077                                                          
>        .0348866
   x_in_2019 |   .0288109   .0121896     2.36   0.018     .0049
> 198                                                          
>        .0527021
   x_in_2021 |  -.0504132   .0153158    -3.29   0.001    -.0804
> 316                                                          
>       -.0203949
   x_in_2022 |  -.0390371   .0274721    -1.42   0.155    -.0928
> 814                                                          
>        .0148073
     unemp_o |   .0234832   .0009523    24.66   0.000     .0216
> 166                                                          
>        .0253497
     unemp_d |  -.0209885   .0009798   -21.42   0.000    -.0229
> 089                                                          
>       -.0190681
       pop_o |   6.38e-08   3.11e-08     2.05   0.040     2.82e
> -09                                                          
>        1.25e-07
       pop_d |   3.63e-07   3.24e-08    11.21   0.000     3.00e
> -07                                                          
>        4.27e-07
per_capita~o |   2.14e-06   3.64e-07     5.87   0.000     1.42e
> -06                                                          
>        2.85e-06
per_capita~d |  -1.55e-06   2.83e-07    -5.48   0.000    -2.11e
> -06                                                          
>       -9.99e-07
       _cons |   5.639644   .0535688   105.28   0.000     5.534
> 651                                                          
>        5.744637
---------------------------------------------------------------
> ---------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
        year |         7           1           6     |
     flow_id |     57485       57485           0    *|
-----------------------------------------------------+
* = FE nested within cluster; treated as redundant for DoF comp
> utation
(dropped 10447 observations that are either singletons or separ
> ated by a fixed effect)
Iteration 1:   deviance = 2.8997e+06  eps = .         iters = 4
>     tol = 1.0e-04                                            
>                    min(eta) =  -2.76  P   
Iteration 2:   deviance = 6.5448e+05  eps = 3.43e+00  iters = 3
>     tol = 1.0e-04                                            
>                    min(eta) =  -3.22      
Iteration 3:   deviance = 6.1184e+05  eps = 6.97e-02  iters = 3
>     tol = 1.0e-04                                            
>                    min(eta) =  -3.36      
Iteration 4:   deviance = 6.1179e+05  eps = 8.02e-05  iters = 2
>     tol = 1.0e-04                                            
>                    min(eta) =  -3.37      
Iteration 5:   deviance = 6.1179e+05  eps = 5.70e-10  iters = 2
>     tol = 1.0e-05                                            
>                    min(eta) =  -3.37      
Iteration 6:   deviance = 6.1179e+05  eps = 3.72e-16  iters = 1
>     tol = 1.0e-06                                            
>                    min(eta) =  -3.37   S  
Iteration 7:   deviance = 6.1179e+05  eps = 1.86e-16  iters = 1
>     tol = 1.0e-09                                            
>                    min(eta) =  -3.37   S O
---------------------------------------------------------------
> ---------------------------------------------
(legend: p: exact partial-out   s: exact solver   h: step-halvi
> ng   o: epsilon below tolerance)
Converged in 7 iterations and 16 HDFE sub-iterations (tol = 1.0
> e-08)

HDFE PPML regression                              No. of obs   
>    =                                                         
>         331,655
Absorbing 2 HDFE groups                           Residual df  
>    =                                                         
>          57,484
Statistics robust to heteroskedasticity           Wald chi2(12)
>    =                                                         
>          292.60
Deviance             =   611790.574               Prob > chi2  
>    =                                                         
>          0.0000
Log pseudolikelihood = -1278280.198               Pseudo R2    
>    =                                                         
>          0.9776

Number of clusters (flow_id)=     57,485
                           (Std. err. adjusted for 57,485 clust
> ers in flow_id)
---------------------------------------------------------------
> ---------------
             |               Robust
          n1 | Coefficient  std. err.      z    P>|z|     [95% 
> con                                                          
>    f. interval]
-------------+-------------------------------------------------
> ---------------
  x_out_2016 |  -.0207227   .0251516    -0.82   0.410    -.0700
> 189                                                          
>        .0285734
  x_out_2017 |   .0514417   .0139207     3.70   0.000     .0241
> 575                                                          
>        .0787258
  x_out_2018 |   -.021128   .0145344    -1.45   0.146    -.0496
> 149                                                          
>        .0073588
  x_out_2019 |  -.0355977   .0163706    -2.17   0.030    -.0676
> 835                                                          
>       -.0035119
  x_out_2021 |   .0427475   .0150927     2.83   0.005     .0131
> 664                                                          
>        .0723286
  x_out_2022 |  -.0103509   .0297355    -0.35   0.728    -.0686
> 313                                                          
>        .0479295
   x_in_2016 |   .1133658   .0169213     6.70   0.000     .0802
> 007                                                          
>         .146531
   x_in_2017 |   .0587878   .0183291     3.21   0.001     .0228
> 634                                                          
>        .0947122
   x_in_2018 |   .0297679   .0136095     2.19   0.029     .0030
> 937                                                          
>        .0564421
   x_in_2019 |   .0488322   .0129534     3.77   0.000      .023
> 444                                                          
>        .0742204
   x_in_2021 |  -.0419343   .0139285    -3.01   0.003    -.0692
> 337                                                          
>       -.0146349
   x_in_2022 |  -.0308355   .0237204    -1.30   0.194    -.0773
> 267                                                          
>        .0156557
       _cons |   6.165648    .000064  9.6e+04   0.000     6.165
> 522                                                          
>        6.165773
---------------------------------------------------------------
> ---------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
        year |         7           1           6     |
     flow_id |     57485       57485           0    *|
-----------------------------------------------------+
* = FE nested within cluster; treated as redundant for DoF comp
> utation
Number of observations (_N) was 0, now 7.
(7 missing values generated)
(7 missing values generated)
(7 missing values generated)
(7 missing values generated)
(7 missing values generated)
(7 missing values generated)
(7 missing values generated)
(7 missing values generated)
(7 missing values generated)
(7 missing values generated)
(7 missing values generated)
(7 missing values generated)
(results n1_es_with_covars are active now)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(results n1_es_no_covars are active now)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(results n1_es_with_covars are active now)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(results n1_es_no_covars are active now)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(results n1_es_with_covars are active now)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(results n1_es_no_covars are active now)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(results n1_es_with_covars are active now)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(results n1_es_no_covars are active now)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(results n1_es_with_covars are active now)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(results n1_es_no_covars are active now)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(results n1_es_with_covars are active now)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(results n1_es_no_covars are active now)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
file
    C:/Users/ji252/Documents/GitHub/multnomah-county-tax/resu
    > lts/flows/fig_multnomah_out_n1.png saved as PNG format
file
    C:/Users/ji252/Documents/GitHub/multnomah-county-tax/resu
    > lts/flows/fig_multnomah_in_n1.png saved as PNG format
file
    C:/Users/ji252/Documents/GitHub/multnomah-county-tax/resu
    > lts/flows/fig_multnomah_both_n1.png saved as PNG format
(dropped 10447 observations that are either singletons or separ
> ated by a fixed effect)
Iteration 1:   deviance = 5.4779e+06  eps = .         iters = 4
>     tol = 1.0e-04                                            
>                    min(eta) =  -2.91  P   
Iteration 2:   deviance = 1.4125e+06  eps = 2.88e+00  iters = 3
>     tol = 1.0e-04                                            
>                    min(eta) =  -3.54      
Iteration 3:   deviance = 1.3300e+06  eps = 6.20e-02  iters = 3
>     tol = 1.0e-04                                            
>                    min(eta) =  -3.81      
Iteration 4:   deviance = 1.3298e+06  eps = 1.14e-04  iters = 2
>     tol = 1.0e-04                                            
>                    min(eta) =  -3.85      
Iteration 5:   deviance = 1.3298e+06  eps = 4.79e-09  iters = 1
>     tol = 1.0e-04                                            
>                    min(eta) =  -3.85      
Iteration 6:   deviance = 1.3298e+06  eps = 1.64e-14  iters = 1
>     tol = 1.0e-05                                            
>                    min(eta) =  -3.85   S  
Iteration 7:   deviance = 1.3298e+06  eps = 0.00e+00  iters = 2
>     tol = 1.0e-09                                            
>                    min(eta) =  -3.85   S O
---------------------------------------------------------------
> ---------------------------------------------
(legend: p: exact partial-out   s: exact solver   h: step-halvi
> ng   o: epsilon below tolerance)
Converged in 7 iterations and 16 HDFE sub-iterations (tol = 1.0
> e-08)

HDFE PPML regression                              No. of obs   
>    =                                                         
>         331,655
Absorbing 2 HDFE groups                           Residual df  
>    =                                                         
>          57,484
Statistics robust to heteroskedasticity           Wald chi2(18)
>    =                                                         
>         1380.66
Deviance             =  1329800.732               Prob > chi2  
>    =                                                         
>          0.0000
Log pseudolikelihood = -1733404.744               Pseudo R2    
>    =                                                         
>          0.9830

Number of clusters (flow_id)=     57,485
                           (Std. err. adjusted for 57,485 clust
> ers in flow_id)
---------------------------------------------------------------
> ---------------
             |               Robust
          n2 | Coefficient  std. err.      z    P>|z|     [95% 
> con                                                          
>    f. interval]
-------------+-------------------------------------------------
> ---------------
  x_out_2016 |   .0411434   .0274745     1.50   0.134    -.0127
> 056                                                          
>        .0949924
  x_out_2017 |   .0971678   .0161089     6.03   0.000     .0655
> 949                                                          
>        .1287408
  x_out_2018 |   .0054287   .0136316     0.40   0.690    -.0212
> 887                                                          
>        .0321462
  x_out_2019 |  -.0150577   .0178773    -0.84   0.400    -.0500
> 966                                                          
>        .0199811
  x_out_2021 |   .0711657   .0125455     5.67   0.000     .0465
> 769                                                          
>        .0957545
  x_out_2022 |   .0177255   .0236654     0.75   0.454    -.0286
> 578                                                          
>        .0641089
   x_in_2016 |   .1040875   .0203277     5.12   0.000      .064
> 246                                                          
>        .1439291
   x_in_2017 |   .0401574   .0159455     2.52   0.012     .0089
> 047                                                          
>          .07141
   x_in_2018 |    .025335   .0133579     1.90   0.058     -.000
> 846                                                          
>         .051516
   x_in_2019 |   .0410372   .0114538     3.58   0.000     .0185
> 883                                                          
>        .0634862
   x_in_2021 |  -.0404705   .0162094    -2.50   0.013    -.0722
> 403                                                          
>       -.0087006
   x_in_2022 |  -.0238473   .0266927    -0.89   0.372     -.076
> 164                                                          
>        .0284693
     unemp_o |   .0221362    .000997    22.20   0.000      .020
> 182                                                          
>        .0240904
     unemp_d |  -.0230047   .0010524   -21.86   0.000    -.0250
> 674                                                          
>        -.020942
       pop_o |   5.15e-08   3.16e-08     1.63   0.103    -1.04e
> -08                                                          
>        1.13e-07
       pop_d |   3.62e-07   3.00e-08    12.05   0.000     3.03e
> -07                                                          
>        4.20e-07
per_capita~o |   2.55e-06   3.77e-07     6.77   0.000     1.81e
> -06                                                          
>        3.29e-06
per_capita~d |  -2.00e-06   3.04e-07    -6.60   0.000    -2.60e
> -06                                                          
>       -1.41e-06
       _cons |   6.279335    .053955   116.38   0.000     6.173
> 585                                                          
>        6.385084
---------------------------------------------------------------
> ---------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
        year |         7           1           6     |
     flow_id |     57485       57485           0    *|
-----------------------------------------------------+
* = FE nested within cluster; treated as redundant for DoF comp
> utation
(dropped 10447 observations that are either singletons or separ
> ated by a fixed effect)
Iteration 1:   deviance = 5.5224e+06  eps = .         iters = 4
>     tol = 1.0e-04                                            
>                    min(eta) =  -2.89  P   
Iteration 2:   deviance = 1.4545e+06  eps = 2.80e+00  iters = 3
>     tol = 1.0e-04                                            
>                    min(eta) =  -3.50      
Iteration 3:   deviance = 1.3720e+06  eps = 6.01e-02  iters = 3
>     tol = 1.0e-04                                            
>                    min(eta) =  -3.76      
Iteration 4:   deviance = 1.3719e+06  eps = 1.11e-04  iters = 2
>     tol = 1.0e-04                                            
>                    min(eta) =  -3.80      
Iteration 5:   deviance = 1.3719e+06  eps = 4.60e-09  iters = 1
>     tol = 1.0e-04                                            
>                    min(eta) =  -3.80      
Iteration 6:   deviance = 1.3719e+06  eps = 1.60e-14  iters = 1
>     tol = 1.0e-05                                            
>                    min(eta) =  -3.80   S  
Iteration 7:   deviance = 1.3719e+06  eps = 1.50e-16  iters = 2
>     tol = 1.0e-09                                            
>                    min(eta) =  -3.80   S O
---------------------------------------------------------------
> ---------------------------------------------
(legend: p: exact partial-out   s: exact solver   h: step-halvi
> ng   o: epsilon below tolerance)
Converged in 7 iterations and 16 HDFE sub-iterations (tol = 1.0
> e-08)

HDFE PPML regression                              No. of obs   
>    =                                                         
>         331,655
Absorbing 2 HDFE groups                           Residual df  
>    =                                                         
>          57,484
Statistics robust to heteroskedasticity           Wald chi2(12)
>    =                                                         
>          310.12
Deviance             =  1371865.239               Prob > chi2  
>    =                                                         
>          0.0000
Log pseudolikelihood = -1754436.998               Pseudo R2    
>    =                                                         
>          0.9828

Number of clusters (flow_id)=     57,485
                           (Std. err. adjusted for 57,485 clust
> ers in flow_id)
---------------------------------------------------------------
> ---------------
             |               Robust
          n2 | Coefficient  std. err.      z    P>|z|     [95% 
> con                                                          
>    f. interval]
-------------+-------------------------------------------------
> ---------------
  x_out_2016 |   .0124671   .0247094     0.50   0.614    -.0359
> 624                                                          
>        .0608965
  x_out_2017 |   .0712384   .0145931     4.88   0.000     .0426
> 364                                                          
>        .0998404
  x_out_2018 |  -.0174078   .0139605    -1.25   0.212    -.0447
> 699                                                          
>        .0099543
  x_out_2019 |  -.0386172   .0183871    -2.10   0.036    -.0746
> 552                                                          
>       -.0025792
  x_out_2021 |   .0610758    .013507     4.52   0.000     .0346
> 025                                                          
>         .087549
  x_out_2022 |   .0006962   .0267529     0.03   0.979    -.0517
> 385                                                          
>         .053131
   x_in_2016 |   .1350954   .0178189     7.58   0.000     .1001
> 709                                                          
>        .1700199
   x_in_2017 |   .0694252   .0153947     4.51   0.000     .0392
> 521                                                          
>        .0995983
   x_in_2018 |    .048123    .015017     3.20   0.001     .0186
> 902                                                          
>        .0775557
   x_in_2019 |   .0642632   .0130424     4.93   0.000     .0387
> 007                                                          
>        .0898258
   x_in_2021 |  -.0315087   .0150406    -2.09   0.036    -.0609
> 878                                                          
>       -.0020296
   x_in_2022 |  -.0147227    .023039    -0.64   0.523    -.0598
> 784                                                          
>        .0304329
       _cons |   6.749325   .0000521  1.3e+05   0.000     6.749
> 223                                                          
>        6.749427
---------------------------------------------------------------
> ---------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
        year |         7           1           6     |
     flow_id |     57485       57485           0    *|
-----------------------------------------------------+
* = FE nested within cluster; treated as redundant for DoF comp
> utation
Number of observations (_N) was 0, now 7.
(7 missing values generated)
(7 missing values generated)
(7 missing values generated)
(7 missing values generated)
(7 missing values generated)
(7 missing values generated)
(7 missing values generated)
(7 missing values generated)
(7 missing values generated)
(7 missing values generated)
(7 missing values generated)
(7 missing values generated)
(results n2_es_with_covars are active now)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(results n2_es_no_covars are active now)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(results n2_es_with_covars are active now)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(results n2_es_no_covars are active now)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(results n2_es_with_covars are active now)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(results n2_es_no_covars are active now)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(results n2_es_with_covars are active now)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(results n2_es_no_covars are active now)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(results n2_es_with_covars are active now)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(results n2_es_no_covars are active now)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(results n2_es_with_covars are active now)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(results n2_es_no_covars are active now)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
file
    C:/Users/ji252/Documents/GitHub/multnomah-county-tax/resu
    > lts/flows/fig_multnomah_out_n2.png saved as PNG format
file
    C:/Users/ji252/Documents/GitHub/multnomah-county-tax/resu
    > lts/flows/fig_multnomah_in_n2.png saved as PNG format
file
    C:/Users/ji252/Documents/GitHub/multnomah-county-tax/resu
    > lts/flows/fig_multnomah_both_n2.png saved as PNG format
(dropped 10447 observations that are either singletons or separ
> ated by a fixed effect)
Iteration 1:   deviance = 4.0051e+08  eps = .         iters = 4
>     tol = 1.0e-04                                            
>                    min(eta) =  -3.59  P   
Iteration 2:   deviance = 1.6973e+08  eps = 1.36e+00  iters = 3
>     tol = 1.0e-04                                            
>                    min(eta) =  -4.22      
Iteration 3:   deviance = 1.6097e+08  eps = 5.44e-02  iters = 3
>     tol = 1.0e-04                                            
>                    min(eta) =  -5.14      
Iteration 4:   deviance = 1.6084e+08  eps = 7.90e-04  iters = 2
>     tol = 1.0e-04                                            
>                    min(eta) =  -5.94      
Iteration 5:   deviance = 1.6084e+08  eps = 3.38e-06  iters = 2
>     tol = 1.0e-04                                            
>                    min(eta) =  -6.50      
Iteration 6:   deviance = 1.6084e+08  eps = 5.80e-08  iters = 2
>     tol = 1.0e-05                                            
>                    min(eta) =  -6.73   S  
Iteration 7:   deviance = 1.6084e+08  eps = 6.22e-10  iters = 2
>     tol = 1.0e-07                                            
>                    min(eta) =  -6.76   S O
---------------------------------------------------------------
> ---------------------------------------------
(legend: p: exact partial-out   s: exact solver   h: step-halvi
> ng   o: epsilon below tolerance)
Converged in 7 iterations and 18 HDFE sub-iterations (tol = 1.0
> e-08)

HDFE PPML regression                              No. of obs   
>    =                                                         
>         331,655
Absorbing 2 HDFE groups                           Residual df  
>    =                                                         
>          57,484
Statistics robust to heteroskedasticity           Wald chi2(18)
>    =                                                         
>          555.94
Deviance             =  160838134.5               Prob > chi2  
>    =                                                         
>          0.0000
Log pseudolikelihood = -82064460.77               Pseudo R2    
>    =                                                         
>          0.9826

Number of clusters (flow_id)=     57,485
                           (Std. err. adjusted for 57,485 clust
> ers in flow_id)
---------------------------------------------------------------
> ---------------
             |               Robust
         agi | Coefficient  std. err.      z    P>|z|     [95% 
> con                                                          
>    f. interval]
-------------+-------------------------------------------------
> ---------------
  x_out_2016 |  -.0793981   .0751445    -1.06   0.291    -.2266
> 786                                                          
>        .0678825
  x_out_2017 |   .0432722   .0553985     0.78   0.435     -.065
> 307                                                          
>        .1518513
  x_out_2018 |  -.0030317   .0695915    -0.04   0.965    -.1394
> 286                                                          
>        .1333652
  x_out_2019 |   .0206898   .0479097     0.43   0.666    -.0732
> 114                                                          
>         .114591
  x_out_2021 |   .1602645   .0253912     6.31   0.000     .1104
> 987                                                          
>        .2100304
  x_out_2022 |   .1649861     .05136     3.21   0.001     .0643
> 222                                                          
>        .2656499
   x_in_2016 |    .115614   .0266841     4.33   0.000     .0633
> 142                                                          
>        .1679138
   x_in_2017 |    .054514   .0317076     1.72   0.086    -.0076
> 318                                                          
>        .1166597
   x_in_2018 |   .0203735   .0341646     0.60   0.551    -.0465
> 879                                                          
>         .087335
   x_in_2019 |   .0596929    .028621     2.09   0.037     .0035
> 968                                                          
>        .1157891
   x_in_2021 |  -.1288232   .0318561    -4.04   0.000      -.19
> 126                                                          
>       -.0663863
   x_in_2022 |   -.141886   .0382333    -3.71   0.000     -.216
> 822                                                          
>       -.0669501
     unemp_o |   .0423254   .0054902     7.71   0.000     .0315
> 647                                                          
>        .0530861
     unemp_d |   -.044156   .0038263   -11.54   0.000    -.0516
> 555                                                          
>       -.0366565
       pop_o |  -2.80e-07   6.37e-08    -4.39   0.000    -4.05e
> -07                                                          
>       -1.55e-07
       pop_d |   4.64e-07   7.73e-08     6.00   0.000     3.12e
> -07                                                          
>        6.15e-07
per_capita~o |   8.23e-06   9.26e-07     8.89   0.000     6.41e
> -06                                                          
>          .00001
per_capita~d |   1.41e-06   8.43e-07     1.67   0.095    -2.46e
> -07                                                          
>        3.06e-06
       _cons |   9.822058    .142746    68.81   0.000     9.542
> 281                                                          
>        10.10183
---------------------------------------------------------------
> ---------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
        year |         7           1           6     |
     flow_id |     57485       57485           0    *|
-----------------------------------------------------+
* = FE nested within cluster; treated as redundant for DoF comp
> utation
(dropped 10447 observations that are either singletons or separ
> ated by a fixed effect)
Iteration 1:   deviance = 4.1408e+08  eps = .         iters = 4
>     tol = 1.0e-04                                            
>                    min(eta) =  -3.33  P   
Iteration 2:   deviance = 1.7946e+08  eps = 1.31e+00  iters = 3
>     tol = 1.0e-04                                            
>                    min(eta) =  -4.22      
Iteration 3:   deviance = 1.7042e+08  eps = 5.30e-02  iters = 3
>     tol = 1.0e-04                                            
>                    min(eta) =  -5.14      
Iteration 4:   deviance = 1.7029e+08  eps = 7.55e-04  iters = 2
>     tol = 1.0e-04                                            
>                    min(eta) =  -5.94      
Iteration 5:   deviance = 1.7029e+08  eps = 3.11e-06  iters = 2
>     tol = 1.0e-04                                            
>                    min(eta) =  -6.50      
Iteration 6:   deviance = 1.7029e+08  eps = 5.48e-08  iters = 2
>     tol = 1.0e-05                                            
>                    min(eta) =  -6.73   S  
Iteration 7:   deviance = 1.7029e+08  eps = 5.88e-10  iters = 2
>     tol = 1.0e-07                                            
>                    min(eta) =  -6.76   S O
---------------------------------------------------------------
> ---------------------------------------------
(legend: p: exact partial-out   s: exact solver   h: step-halvi
> ng   o: epsilon below tolerance)
Converged in 7 iterations and 18 HDFE sub-iterations (tol = 1.0
> e-08)

HDFE PPML regression                              No. of obs   
>    =                                                         
>         331,655
Absorbing 2 HDFE groups                           Residual df  
>    =                                                         
>          57,484
Statistics robust to heteroskedasticity           Wald chi2(12)
>    =                                                         
>          225.66
Deviance             =  170292619.8               Prob > chi2  
>    =                                                         
>          0.0000
Log pseudolikelihood = -86791703.41               Pseudo R2    
>    =                                                         
>          0.9816

Number of clusters (flow_id)=     57,485
                           (Std. err. adjusted for 57,485 clust
> ers in flow_id)
---------------------------------------------------------------
> ---------------
             |               Robust
         agi | Coefficient  std. err.      z    P>|z|     [95% 
> con                                                          
>    f. interval]
-------------+-------------------------------------------------
> ---------------
  x_out_2016 |  -.1365848   .0719544    -1.90   0.058    -.2776
> 129                                                          
>        .0044433
  x_out_2017 |  -.0100139   .0529181    -0.19   0.850    -.1137
> 315                                                          
>        .0937037
  x_out_2018 |  -.0457715   .0657346    -0.70   0.486    -.1746
> 091                                                          
>         .083066
  x_out_2019 |  -.0224142   .0481263    -0.47   0.641      -.11
> 674                                                          
>        .0719117
  x_out_2021 |   .1329048   .0280093     4.75   0.000     .0780
> 075                                                          
>        .1878021
  x_out_2022 |   .1326738   .0570336     2.33   0.020     .0208
> 899                                                          
>        .2444577
   x_in_2016 |    .145421   .0276229     5.26   0.000      .091
> 281                                                          
>        .1995609
   x_in_2017 |   .0854908   .0351823     2.43   0.015     .0165
> 347                                                          
>        .1544469
   x_in_2018 |   .0447531   .0380788     1.18   0.240    -.0298
> 801                                                          
>        .1193862
   x_in_2019 |   .0868904   .0320241     2.71   0.007     .0241
> 242                                                          
>        .1496565
   x_in_2021 |  -.1045955   .0305042    -3.43   0.001    -.1643
> 825                                                          
>       -.0448085
   x_in_2022 |   -.121919   .0337755    -3.61   0.000    -.1881
> 178                                                          
>       -.0557201
       _cons |   10.64789    .000167  6.4e+04   0.000     10.64
> 756                                                          
>        10.64822
---------------------------------------------------------------
> ---------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
        year |         7           1           6     |
     flow_id |     57485       57485           0    *|
-----------------------------------------------------+
* = FE nested within cluster; treated as redundant for DoF comp
> utation
Number of observations (_N) was 0, now 7.
(7 missing values generated)
(7 missing values generated)
(7 missing values generated)
(7 missing values generated)
(7 missing values generated)
(7 missing values generated)
(7 missing values generated)
(7 missing values generated)
(7 missing values generated)
(7 missing values generated)
(7 missing values generated)
(7 missing values generated)
(results agi_es_with_covars are active now)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(results agi_es_no_covars are active now)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(results agi_es_with_covars are active now)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(results agi_es_no_covars are active now)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(results agi_es_with_covars are active now)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(results agi_es_no_covars are active now)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(results agi_es_with_covars are active now)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(results agi_es_no_covars are active now)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(results agi_es_with_covars are active now)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(results agi_es_no_covars are active now)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(results agi_es_with_covars are active now)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(results agi_es_no_covars are active now)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
file
    C:/Users/ji252/Documents/GitHub/multnomah-county-tax/resu
    > lts/flows/fig_multnomah_out_agi.png saved as PNG format
file
    C:/Users/ji252/Documents/GitHub/multnomah-county-tax/resu
    > lts/flows/fig_multnomah_in_agi.png saved as PNG format
file
    C:/Users/ji252/Documents/GitHub/multnomah-county-tax/resu
    > lts/flows/fig_multnomah_both_agi.png saved as PNG
    format

. 
. 
. ** Close log
. clear

. log close log_02
      name:  log_02
       log:  C:/Users/ji252/Documents/GitHub/multnomah-county-t
> ax/code/logs/02_log_flow_2026-01-30.log
  log type:  text
 closed on:  31 Jan 2026, 10:07:18
---------------------------------------------------------------

. 
end of do-file

. do "C:\Users\ji252\Documents\GitHub\multnomah-county-tax\code
> \02_flow_analysis.do"

. /************************************************************
> *******************
> File Name:              02_flow_analysis.do
> Creator:                John Iselin
> Date Update:    January 31, 2026
> 
> Called by: 00_multnomah.do
> 
> Purpose: Perform flow-based analysis on IRS data.
> 
> Outputs:
> All outputs are produced twice: once for all counties and onc
> e for ACS counties
> only (with _acs suffix). ACS sample includes property tax rat
> e controls.
> 
> - county_flow_coefficients[_acs].dta/csv: flow coefficients f
> or all counties
>   (b_out, b_in, se_out, se_in, t-stats, p-values, percentile 
> ranks)
> - fig_multnomah_post_*[_acs].png: flow coefficient plots for 
> Multnomah
> - fig_hist_out_*[_acs].png: Histogram of out-migration coeffi
> cients (with percentile)
> - fig_hist_in_*[_acs].png: Histogram of in-migration coeffici
> ents (with percentile)
> - fig_scatter_out_in_*[_acs].png: Scatter plot of out vs in c
> oefficients
> - fig_multnomah_out_*[_acs].png: Event study plots for out-mi
> gration
> - fig_multnomah_in_*[_acs].png: Event study plots for in-migr
> ation
> - fig_multnomah_both_*[_acs].png: Combined event study plots
> 
> Excel output (flow_analysis_stats.xlsx):
> - all/acs: Summary statistics for Multnomah and distribution
> - larger_out_all/acs: Counties with larger out-migration coef
> ficients
> - smaller_in_all/acs: Counties with smaller in-migration coef
> ficients
> - worse_both_all/acs: Counties worse on both dimensions
> - larger_t_out_all/acs: Counties with larger out-migration t-
> statistics
> - smaller_t_in_all/acs: Counties with smaller in-migration t-
> statistics
> 
> Debug mode:
> - Set local debug = 1 to run on a random subset of counties f
> or faster testing
> - Set local debug_n to control the number of random counties 
> (default: 50)
> - Multnomah County is always included in the debug sample
> - Set debug = 0 for full production runs
> 
> Authors: John Iselin
> 
> For more information, contact john.iselin@yale.edu
> 
> *************************************************************
> ******************/
. 
. 
. ** Start log file
. capture log close log_02

. log using "${logs}02_log_flow_${date}", replace text name(log
> _02)
---------------------------------------------------------------
      name:  log_02
       log:  C:/Users/ji252/Documents/GitHub/multnomah-county-t
> ax/code/logs/02_log_flow_2026-01-30.log
  log type:  text
 opened on:  31 Jan 2026, 10:11:14

. 
. ** Parameters
. local reps = 100

. 
. ** Debug mode: set to 1 to run on a random subset of counties
>  for faster testing
. ** Set to 0 for full production run
. local debug = 0

. local debug_n = 20  // Number of random counties to sample in
>  debug mode (plus Multnomah)

. 
. ** Load ACS data to get the set of counties
. use "${data}working/acs_county_gross_18plus", clear

. 
. ** Keep required variables
. keep year fips

. 
. ** Keep only always-observed fips
. bysort fips: gen ct = _N

. tab ct

         ct |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |        168        3.48        3.48
          7 |        287        5.95        9.43
         10 |      4,370       90.57      100.00
------------+-----------------------------------
      Total |      4,825      100.00

. keep if ct == 10
(455 observations deleted)

. 
. ** Keep fips
. keep fips

. 
. ** Drop duplicates
. duplicates drop

Duplicates in terms of all variables

(3,933 observations deleted)

. 
. ** Save to tempfile
. tempfile acs_fips

. save `acs_fips'
file C:\Users\ji252\AppData\Local\Temp\ST_828_000001.tmp
    saved as .dta format

. clear

. 
. ** Load IRS Data
. use "${data}working/irs_county_flow.dta", clear

. 
. ** Sample restrictions
. drop if inlist(state_fips_o, 2, 15)     // Alaska and Hawaii
(3,109 observations deleted)

. drop if inlist(state_fips_d, 2, 15)     // Alaska and Hawaii
(2,293 observations deleted)

. 
. ** Clean up variables
. drop fips

. 
. ** Mover indicators
. gen mover = fips_o != fips_d

. 
. ** Generate flow id
. egen flow_id = group(fips_d fips_o)

. 
. ** Declare panel and fill in missing values
. xtset flow_id year

Panel variable: flow_id (unbalanced)
 Time variable: year, 2016 to 2022, but with gaps
         Delta: 1 unit

. tsfill, full

. 
. ** Keep required variables
. keep fips_d fips_o flow_id year mover n1 n2 agi

. 
. ** Replace with 0s
. replace n1 = 0 if missing(n1)
(140,172 real changes made)

. replace n2 = 0 if missing(n2)
(140,172 real changes made)

. replace agi = 0 if missing(agi)
(140,172 real changes made)

. replace agi = 0 if agi < 0
(89 real changes made)

. 
. ** Merge with time-varying controls
. 
. ** Keep if in donor pool in both origin and destination
. foreach x in "o" "d" {
  2. 
.         ** Fill in missing fips
.         bysort flow_id: egen tmp = mean(fips_`x')
  3.         replace fips_`x' = tmp if missing(fips_`x')
  4.         drop tmp
  5. 
.         ** Merge with relevent variables
.         gen fips = fips_`x'
  6.         merge m:1 fips using "${data}working/ids",        
>                                       ///
>                 keep(match) gen(merge_ids_`x')
  7.         merge m:1 year fips using "${data}working/bls_unem
> ployment",    ///
>                 keep(match) gen(merge_bls_`x')
  8.         merge m:1 year fips using "${data}working/bea_econ
> omics",               ///
>                 keep(match) gen(merge_bea_`x')
  9.         merge m:1 fips using `acs_fips', keep(master match
> ) gen(merge_acs_`x')
 10.         merge m:1 year fips using "${data}working/property
> _tax_rates_overall", ///
>                 gen(proptx_merge_`x') keep(master match) keep
> using(prop_rate_mean )
 11. 
.         ** Rename
.         rename state_name state_name_`x'
 12.         rename state_fips state_fips_`x'
 13.         rename county_name county_name_`x'
 14.         rename county_fips county_fips_`x'
 15.         rename unemp unemp_`x'
 16.         rename population pop_`x'
 17.         rename per_capita_income per_capita_income_`x'
 18.         rename prop_rate_mean prop_rate_mean_`x'
 19.         drop fips
 20. 
. } // END ORIGIN-DESTINATION LOOP
(140,172 real changes made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                           497,448  (merge_ids_o==3)
    -----------------------------------------
(variable fips was float, now double to accommodate using
       data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                           491,939  (merge_bls_o==3)
    -----------------------------------------

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                           484,407  (merge_bea_o==3)
    -----------------------------------------

    Result                      Number of obs
    -----------------------------------------
    Not matched                       202,846
        from master                   202,846  (merge_acs_o==1)
        from using                          0  (merge_acs_o==2)

    Matched                           281,561  (merge_acs_o==3)
    -----------------------------------------

    Result                      Number of obs
    -----------------------------------------
    Not matched                       189,234
        from master                   189,234  (proptx_merge_o=
> =1)
        from using                          0  (proptx_merge_o=
> =2)

    Matched                           295,173  (proptx_merge_o=
> =3)
    -----------------------------------------
(136,291 real changes made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                           484,407  (merge_ids_d==3)
    -----------------------------------------
(variable fips was float, now double to accommodate using
       data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                           480,970  (merge_bls_d==3)
    -----------------------------------------

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                           475,524  (merge_bea_d==3)
    -----------------------------------------

    Result                      Number of obs
    -----------------------------------------
    Not matched                       207,879
        from master                   207,879  (merge_acs_d==1)
        from using                          0  (merge_acs_d==2)

    Matched                           267,645  (merge_acs_d==3)
    -----------------------------------------

    Result                      Number of obs
    -----------------------------------------
    Not matched                       193,163
        from master                   193,163  (proptx_merge_d=
> =1)
        from using                          0  (proptx_merge_d=
> =2)

    Matched                           282,361  (proptx_merge_d=
> =3)
    -----------------------------------------

. 
. ** Tag flows to-and-from acs counties
. gen acs_flow = merge_acs_d == 3 & merge_acs_o == 3

. label var acs_flow "Flows to and from ACS counties"

. 
. ** Multnomah indicators
. gen out_multnomah = (state_fips_o == 41 & county_fips_o == 51
> )

. gen in_multnomah = (state_fips_d == 41 & county_fips_d == 51)

. 
. ** Post-indicators
. gen post = year > 2020

. 
. ** Interactions
. gen in_multnomah_post = in_multnomah * post

. gen out_multnomah_post = out_multnomah * post

. 
. ** Create interactions manually (base year = 2020)
. forvalues y = 2016/2022 {
  2.         gen x_out_`y' = out_multnomah * (year == `y')
  3.         gen x_in_`y' = in_multnomah * (year == `y')
  4. }

. 
. ** Drop base year (2020)
. drop x_out_2020 x_in_2020

. 
. ** Save main analysis dataset to tempfile
. tempfile main_data

. save `main_data'
file C:\Users\ji252\AppData\Local\Temp\ST_828_000002.tmp
    saved as .dta format

. 
. *************************************************************
> *******************
. ** MAIN ANALYSIS LOOP: Run regressions for (1) all counties, 
> (2) ACS counties
. ** The second iteration restricts to flows where acs_flow == 
> 1 and adds
. ** property tax rate controls (prop_rate_mean_o and prop_rate
> _mean_d)
. *************************************************************
> *******************
. 
. foreach sample in "acs" "all" {
  2. 
.         ** Set sample-specific parameters
.         if "`sample'" == "all" {
  3.                 local sample_cond ""
  4.                 local covars "unemp_* pop_* per_capita_inc
> ome_*"
  5.                 local file_suffix ""
  6.                 local title_suffix ""
  7.         }
  8.         else if "`sample'" == "acs" {
  9.                 local sample_cond "& acs_flow == 1"
 10.                 local covars "unemp_* pop_* per_capita_inc
> ome_* prop_rate_mean_o prop_rate_mean_d"
 11.                 local file_suffix "_acs"
 12.                 local title_suffix " (ACS Counties)"
 13.         }
 14. 
.         dis ""
 15.         dis "=============================================
> ==========================="
 16.         dis "RUNNING ANALYSIS FOR SAMPLE: `sample'"
 17.         dis "Sample condition: `sample_cond'"
 18.         dis "Covariates: `covars'"
 19.         dis "=============================================
> ==========================="
 20.         dis ""
 21. 
. *************************************************************
> *******************
. ** REGRESSION 1: Multnomah X Post (flow DID)
. *************************************************************
> *******************
. 
. ** Load main data
. use `main_data', clear
 22. 
. ** Loop over outcome variables
. foreach outcome in n1 n2 agi {
 23. 
.         ** Set outcome label for graphs
.         if "`outcome'" == "n1" local outcome_label "Number of
>  Returns"
 24.         if "`outcome'" == "n2" local outcome_label "Number
>  of Exemptions"
 25.         if "`outcome'" == "agi" local outcome_label "Adjus
> ted Gross Income"
 26. 
.         ** Regression 1a: With covariates
.         ppmlhdfe `outcome' i.out_multnomah_post i.in_multnoma
> h_post     ///
>                 `covars'                                     
>                                                              
>       ///
>                 if mover == 1 `sample_cond',                 
>                                            ///
>                 absorb(year flow_id) vce(cluster flow_id)
 27.         estimates store `outcome'_with_covars
 28. 
.         ** Regression 1b: Without covariates
.         ppmlhdfe `outcome' i.out_multnomah_post i.in_multnoma
> h_post     ///
>                 if mover == 1 `sample_cond',                 
>                                            ///
>                 absorb(year flow_id) vce(cluster flow_id)
 29.         estimates store `outcome'_no_covars
 30. 
.         ** Plot both regressions
.         coefplot        (`outcome'_with_covars, label("With C
> ovariates")        ///
>                                         mc(navy) ciopts(lc(na
> vy)))                                              ///
>                                 (`outcome'_no_covars, label("
> Without Covariates")       ///
>                                         mc(maroon) ciopts(lc(
> maroon))),                                 ///
>                 keep(1.out_multnomah_post 1.in_multnomah_post
> )                          ///
>                 ciopts(recast(rcap))                         
>                                                    ///
>                 yline(0, lc(gs10) lp(dash))                  
>                                            ///
>                 xline(0, lc(gs10) lp(dash))                  
>                                            ///
>                 coeflabels(     1.out_multnomah_post = "Out-m
> igration"                  ///
>                                         1.in_multnomah_post =
>  "In-migration")                   ///
>                 ytitle("Coefficient")                        
>                                                    ///
>                 xtitle("")                                   
>                                                              
>       ///
>                 legend(pos(6) rows(1))                       
>                                                    ///
>                 title("Migration Flows: Multnomah County x Po
> st`title_suffix'") ///
>                 subtitle("`outcome_label'")                  
>                                                    ///
>                 graphregion(color(white))
 31. 
.         graph export "${results}flows/fig_multnomah_post_`out
> come'`file_suffix'.png", replace
 32. 
. 
. } // END OUTCOME LOOP
 33. 
. *************************************************************
> *******************
. ** REGRESSION 1b: Loop over all counties (Permutation-style a
> nalysis)
. ** Purpose: Run same flow regression for each county to creat
> e distribution
. **          of treatment effects for comparison with Multnoma
> h
. *************************************************************
> *******************
. 
. ** Load main data fresh for permutation analysis
. use `main_data', clear
 34. 
. ** Get list of unique origin fips codes (respecting sample co
> ndition)
. if "`sample'" == "all" {
 35.         levelsof fips_o, local(fips_list)
 36. }
 37. else {
 38.         levelsof fips_o if acs_flow == 1, local(fips_list)
 39. }
 40. local n_fips_full : word count `fips_list'
 41. 
. ** Debug mode: randomly sample a subset of counties (always i
> nclude Multnomah)
. if `debug' == 1 {
 42.         dis ""
 43.         dis "*** DEBUG MODE: Sampling `debug_n' random cou
> nties (plus Multnomah) ***"
 44.         dis ""
 45. 
.         ** Save current data
.         tempfile main_data_tmp
 46.         save `main_data_tmp'
 47. 
.         ** Create dataset with all fips codes for sampling
.         clear
 48.         local n_fips_tmp : word count `fips_list'
 49.         set obs `n_fips_tmp'
 50.         gen fips = .
 51.         local i = 1
 52.         foreach f of local fips_list {
 53.                 replace fips = `f' in `i'
 54.                 local i = `i' + 1
 55.         }
 56. 
.         ** Tag Multnomah (always include)
.         gen multnomah = (fips == 41051)
 57. 
.         ** Generate random number for sampling
.         set seed 12345  // For reproducibility; change or rem
> ove for different random samples
 58.         gen random = runiform()
 59. 
.         ** Sort: Multnomah first, then random order
.         gsort -multnomah random
 60. 
.         ** Keep Multnomah + debug_n random counties
.         keep if _n <= `debug_n' + 1 | multnomah == 1
 61. 
.         ** Extract new fips list
.         levelsof fips, local(fips_list)
 62. 
.         ** Reload main data
.         use `main_data_tmp', clear
 63. }
 64. 
. local n_fips : word count `fips_list'
 65. if `debug' == 1 {
 66.         dis "DEBUG: Running regressions for `n_fips' count
> ies (sampled from `n_fips_full') (`sample' sample)..."
 67. }
 68. else {
 69.         dis "Running regressions for `n_fips' counties (`s
> ample' sample)..."
 70. }
 71. 
. ** Initialize tempfile to store results
. tempfile county_results
 72. postfile county_coefs fips b_out se_out b_in se_in using `
> county_results', replace
 73. 
. ** Counter for display
. local ct = 1
 74. 
. foreach f of local fips_list {
 75. 
.         ** Display status every 100 counties
.         if mod(`ct', 100) == 0 {
 76.                 dis "Processing county `ct' of `n_fips' (f
> ips = `f')..."
 77.         }
 78. 
.         ** Generate treatment vars
.         gen out_tmp = fips_o == `f'
 79.         gen in_tmp = fips_d == `f'
 80. 
.         ** Interactions
.         gen out_post_tmp = out_tmp * post
 81.         gen in_post_tmp = in_tmp * post
 82. 
.         ** Run regression with capture to handle potential er
> rors
.         capture {
 83.                 ** Regression: With covariates
.                  ppmlhdfe agi i.out_post_tmp i.in_post_tmp   
>    ///
>                         `covars'                             
>                                                    ///
>                         if mover == 1 `sample_cond',         
>                            ///
>                         absorb(year flow_id) vce(cluster flow
> _id)
 84. 
.                 ** Store coefficients and SEs
.                 local tmp_b_out = _b[1.out_post_tmp]
 85.                 local tmp_se_out = _se[1.out_post_tmp]
 86.                 local tmp_b_in = _b[1.in_post_tmp]
 87.                 local tmp_se_in = _se[1.in_post_tmp]
 88. 
.                 ** Post results
.                 post county_coefs (`f') (`tmp_b_out') (`tmp_s
> e_out') (`tmp_b_in') (`tmp_se_in')
 89.         }
 90. 
.         ** If regression failed, post missing values
.         if _rc != 0 {
 91.                 post county_coefs (`f') (.) (.) (.) (.)
 92.                 dis "Warning: Regression failed for fips `
> f'"
 93.         }
 94. 
. 
.         ** Drop temporary vars
.         drop out_tmp in_tmp out_post_tmp in_post_tmp
 95. 
.         ** Update count
.         local ct = `ct' + 1
 96. 
. } // END FIPS LOOP
 97. 
. ** Close postfile
. postclose county_coefs
 98. 
. ** Load results
. use `county_results', clear
 99. 
. ** Add identifiers
. gen multnomah = (fips == 41051)
100. label var fips "County FIPS code"
101. label var b_out "Out-migration coefficient (County x Post)
> "
102. label var se_out "Out-migration SE"
103. label var b_in "In-migration coefficient (County x Post)"
104. label var se_in "In-migration SE"
105. label var multnomah "Multnomah County indicator"
106. 
. ** Calculate t-statistics and p-values
. gen t_out = b_out / se_out
107. gen t_in = b_in / se_in
108. gen p_out = 2 * (1 - normal(abs(t_out)))
109. gen p_in = 2 * (1 - normal(abs(t_in)))
110. 
. label var t_out "Out-migration t-statistic"
111. label var t_in "In-migration t-statistic"
112. label var p_out "Out-migration p-value"
113. label var p_in "In-migration p-value"
114. 
. ** Calculate percentile ranks for Multnomah
. foreach x in "b" "t" {
115.         egen rank_`x'_out = rank(`x'_out)
116.         egen rank_`x'_in = rank(`x'_in)
117.         qui count if !missing(`x'_out)
118.         gen pctile_`x'_out = 100 * rank_`x'_out / r(N)
119.         qui count if !missing(`x'_in)
120.         gen pctile_`x'_in = 100 * rank_`x'_in / r(N)
121. 
. }
122. 
. label var pctile_b_out "Percentile rank of out-migration coef
> "
123. label var pctile_b_in "Percentile rank of in-migration coe
> f"
124. label var pctile_t_out "Percentile rank of out-migration t
> -stat"
125. label var pctile_t_in "Percentile rank of in-migration t-s
> tat"
126. 
. ** Display Multnomah's position
. dis ""
127. dis "=========================================="
128. dis "Multnomah County Results:"
129. dis "=========================================="
130. summ b_out t_out b_in t_in pctile_*_out pctile_*_in if mul
> tnomah == 1
131. 
. ** Display distribution summary
. dis ""
132. dis "Distribution of coefficients (all counties):"
133. summ b_out b_in, detail
134. 
. dis ""
135. dis "Distribution of t-stats (all counties):"
136. summ t_out t_in, detail
137. 
. ** Save county coefficients dataset
. compress
138. save "${data}working/county_flow_coefficients`file_suffix'
> .dta", replace
139. export delimited using "${data}working/county_flow_coeffic
> ients`file_suffix'.csv", replace
140. 
. dis "County coefficients saved to ${data}working/county_flow_
> coefficients`file_suffix'.dta"
141. 
. *************************************************************
> *******************
. ** SECTION: Multnomah vs Distribution Plots (Histogram Compar
> ison)
. ** Purpose: Plot Multnomah's coefficients against distributio
> n of all counties
. *************************************************************
> *******************
. 
. ** Load the county coefficients (already in memory, but reloa
> d for clarity)
. use "${data}working/county_flow_coefficients`file_suffix'.dta
> ", clear
142. 
. ** Loop over beta and t-stats
. foreach x in "b" "t" {
143. 
.         ** Label
.         if "`x'" == "b" local txt "Coefficients"
144.         else if "`x'" == "t" local txt = "T-Statistics"
145. 
.         ** Store Multnomah's coefficients for reference lines
.         summ `x'_out if multnomah == 1, meanonly
146.         local multnomah_`x'_out = r(mean)
147.         summ `x'_in if multnomah == 1, meanonly
148.         local multnomah_`x'_in = r(mean)
149.         summ pctile_`x'_out if multnomah == 1, meanonly
150.         local multnomah_pctile_out = r(mean)
151.         summ pctile_`x'_in if multnomah == 1, meanonly
152.         local multnomah_pctile_in = r(mean)
153. 
. 
.         ** Plot 1: Out-migration coefficient distribution wit
> h Multnomah
.         histogram `x'_out if !missing(`x'_out),              
>                                                    ///
>                 bin(50)                                      
>                                                              
>               ///
>                 fcolor(navy%50) lcolor(navy)                 
>                                                    ///
>                 xline(`multnomah_`x'_out', lcolor(red) lwidth
> (thick) lpattern(solid)) ///
>                 xtitle("Out-migration `txt' (County x Post)")
>                    ///
>                 ytitle("Frequency")                          
>                                                            //
> /
>                 title("Distribution of Out-Migration `txt'`ti
> tle_suffix'")              ///
>                 subtitle("Red line = Multnomah County (percen
> tile: `: display %4.1f `multnomah_pctile_out'')") ///
>                 graphregion(color(white))
154. 
.         graph export "${results}flows/fig_hist_out_`x'`file_s
> uffix'.png", replace
155. 
.         ** Plot 2: In-migration coefficient distribution with
>  Multnomah
.         histogram `x'_in if !missing(`x'_in),                
>                                                    ///
>                 bin(50)                                      
>                                                              
>               ///
>                 fcolor(maroon%50) lcolor(maroon)             
>                                                    ///
>                 xline(`multnomah_`x'_in', lcolor(red) lwidth(
> thick) lpattern(solid)) ///
>                 xtitle("In-migration `txt' (County x Post)") 
>                            ///
>                 ytitle("Frequency")                          
>                                                            //
> /
>                 title("Distribution of In-Migration `txt'`tit
> le_suffix'")               ///
>                 subtitle("Red line = Multnomah County (percen
> tile: `: display %4.1f `multnomah_pctile_in'')") ///
>                 graphregion(color(white))
156. 
.         graph export "${results}flows/fig_hist_in_`x'`file_su
> ffix'.png", replace
157. 
.         ** Plot 3: Combined scatter of out vs in coefficients
.         twoway  (scatter `x'_in `x'_out if multnomah == 0,   
>                                            ///
>                                 mc(navy%30) ms(O) msize(small
> ))                                                 ///
>                         (scatter `x'_in `x'_out if multnomah 
> == 1,                                              ///
>                                 mc(red) ms(D) msize(large)), 
>                                                    ///
>                 xline(0, lc(gs10) lp(dash))                  
>                                                    ///
>                 yline(0, lc(gs10) lp(dash))                  
>                                                    ///
>                 xtitle("Out-migration `txt'")                
>                                    ///
>                 ytitle("In-migration `txt'")                 
>                                            ///
>                 title("Out- vs In-Migration Effects by County
> `title_suffix'")   ///
>                 legend(order(1 "Other Counties" 2 "Multnomah 
> County") pos(6) rows(1)) ///
>                 graphregion(color(white))
158. 
.         graph export "${results}flows/fig_scatter_out_in_`x'`
> file_suffix'.png", replace
159. 
. 
. } // END BETA / T-STAT LOOP
160. 
. *************************************************************
> *******************
. ** SECTION: Export Descriptive Statistics to Excel
. ** Purpose: Export Multnomah vs Distribution stats to Excel f
> ile
. *************************************************************
> *******************
. 
. ** Get Multnomah's statistics
. 
. ** Loop over migration type
. foreach x in "in" "out" {
161. 
.         summ se_`x' if multnomah == 1, meanonly
162.         local m_se_`x' = r(mean)
163. 
.         summ p_`x' if multnomah == 1, meanonly
164.         local m_p_`x' = r(mean)
165. 
.         ** Loop over beta / t-stat
.         foreach y in "b" "t" {
166. 
.                 summ `y'_`x' if multnomah == 1, meanonly
167.                 local m_`y'_`x' = r(mean)
168. 
.                 summ pctile_`y'_`x' if multnomah == 1, meanon
> ly
169.                 local m_pctile_`y'_`x' = r(mean)
170. 
.         } // END BETA / T-STAT LOOP
171. 
. 
. } // END IN/OUT LOOP
172. 
. ** Count statistics
. qui count if !missing(b_out)
173. local n_counties_out = r(N)
174. qui count if !missing(b_in)
175. local n_counties_in = r(N)
176. qui count if !missing(b_out) & !missing(b_in)
177. local n_counties_both = r(N)
178. 
. ** Count counties with more extreme coefficients than Multnom
> ah
. ** For out-migration: larger (more positive) is "worse"
. ** For in-migration: smaller (more negative) is "worse"
. qui count if b_out > `m_b_out' & !missing(b_out)
179. local n_larger_out = r(N)
180. qui count if b_out > `m_b_out' & !missing(b_out) & p_out <
>  0.05
181. local n_larger_out_sig = r(N)
182. 
. qui count if b_in < `m_b_in' & !missing(b_in)
183. local n_smaller_in = r(N)
184. qui count if b_in < `m_b_in' & !missing(b_in) & p_in < 0.0
> 5
185. local n_smaller_in_sig = r(N)
186. 
. ** Counties with both more out AND less in (worse on both dim
> ensions)
. qui count if b_out > `m_b_out' & b_in < `m_b_in' & !missing(b
> _out) & !missing(b_in)
187. local n_worse_both = r(N)
188. qui count if b_out > `m_b_out' & b_in < `m_b_in' & !missin
> g(b_out) & !missing(b_in) & p_out < 0.05 & p_in < 0.05
189. local n_worse_both_sig = r(N)
190. 
. ** Distribution statistics for out-migration
. summ b_out, detail
191. local dist_out_mean = r(mean)
192. local dist_out_sd = r(sd)
193. local dist_out_min = r(min)
194. local dist_out_max = r(max)
195. local dist_out_p25 = r(p25)
196. local dist_out_p50 = r(p50)
197. local dist_out_p75 = r(p75)
198. 
. ** Distribution statistics for in-migration
. summ b_in, detail
199. local dist_in_mean = r(mean)
200. local dist_in_sd = r(sd)
201. local dist_in_min = r(min)
202. local dist_in_max = r(max)
203. local dist_in_p25 = r(p25)
204. local dist_in_p50 = r(p50)
205. local dist_in_p75 = r(p75)
206. 
. ** Distribution statistics for t-stats
. summ t_out, detail
207. local dist_t_out_mean = r(mean)
208. local dist_t_out_sd = r(sd)
209. local dist_t_out_p50 = r(p50)
210. 
. summ t_in, detail
211. local dist_t_in_mean = r(mean)
212. local dist_t_in_sd = r(sd)
213. local dist_t_in_p50 = r(p50)
214. 
. ** Save county coefficients to tempfile for later use in expo
> rt sheets
. tempfile county_coefs_for_export
215. save `county_coefs_for_export'
216. 
. ** Create a new dataset with the statistics
. clear
217. set obs 40
218. 
. ** Create variables
. gen stat_name = ""
219. gen stat_value = .
220. gen stat_description = ""
221. 
. ** Row counter
. local row = 1
222. 
. ** ==========================================================
> ==================
. ** MULTNOMAH STATISTICS
. ** ==========================================================
> ==================
. 
. replace stat_name = "m_b_out" in `row'
223. replace stat_value = `m_b_out' in `row'
224. replace stat_description = "Multnomah out-migration coeffi
> cient" in `row'
225. local row = `row' + 1
226. 
. replace stat_name = "m_se_out" in `row'
227. replace stat_value = `m_se_out' in `row'
228. replace stat_description = "Multnomah out-migration standa
> rd error" in `row'
229. local row = `row' + 1
230. 
. replace stat_name = "m_t_out" in `row'
231. replace stat_value = `m_t_out' in `row'
232. replace stat_description = "Multnomah out-migration t-stat
> istic" in `row'
233. local row = `row' + 1
234. 
. replace stat_name = "m_p_out" in `row'
235. replace stat_value = `m_p_out' in `row'
236. replace stat_description = "Multnomah out-migration p-valu
> e" in `row'
237. local row = `row' + 1
238. 
. replace stat_name = "m_pctile_b_out" in `row'
239. replace stat_value = `m_pctile_b_out' in `row'
240. replace stat_description = "Multnomah out-migration percen
> tile rank" in `row'
241. local row = `row' + 1
242. 
. replace stat_name = "m_b_in" in `row'
243. replace stat_value = `m_b_in' in `row'
244. replace stat_description = "Multnomah in-migration coeffic
> ient" in `row'
245. local row = `row' + 1
246. 
. replace stat_name = "m_se_in" in `row'
247. replace stat_value = `m_se_in' in `row'
248. replace stat_description = "Multnomah in-migration standar
> d error" in `row'
249. local row = `row' + 1
250. 
. replace stat_name = "m_t_in" in `row'
251. replace stat_value = `m_t_in' in `row'
252. replace stat_description = "Multnomah in-migration t-stati
> stic" in `row'
253. local row = `row' + 1
254. 
. replace stat_name = "m_p_in" in `row'
255. replace stat_value = `m_p_in' in `row'
256. replace stat_description = "Multnomah in-migration p-value
> " in `row'
257. local row = `row' + 1
258. 
. replace stat_name = "m_pctile_b_in" in `row'
259. replace stat_value = `m_pctile_b_in' in `row'
260. replace stat_description = "Multnomah in-migration percent
> ile rank" in `row'
261. local row = `row' + 1
262. 
. ** ==========================================================
> ==================
. ** COUNT STATISTICS
. ** ==========================================================
> ==================
. 
. replace stat_name = "n_counties_out" in `row'
263. replace stat_value = `n_counties_out' in `row'
264. replace stat_description = "Number of counties with out-mi
> gration coef" in `row'
265. local row = `row' + 1
266. 
. replace stat_name = "n_counties_in" in `row'
267. replace stat_value = `n_counties_in' in `row'
268. replace stat_description = "Number of counties with in-mig
> ration coef" in `row'
269. local row = `row' + 1
270. 
. replace stat_name = "n_counties_both" in `row'
271. replace stat_value = `n_counties_both' in `row'
272. replace stat_description = "Number of counties with both c
> oefs" in `row'
273. local row = `row' + 1
274. 
. replace stat_name = "n_larger_out" in `row'
275. replace stat_value = `n_larger_out' in `row'
276. replace stat_description = "Counties with larger out-migra
> tion coef than Multnomah" in `row'
277. local row = `row' + 1
278. 
. replace stat_name = "n_larger_out_sig" in `row'
279. replace stat_value = `n_larger_out_sig' in `row'
280. replace stat_description = "Counties with larger out-migra
> tion coef (p<0.05)" in `row'
281. local row = `row' + 1
282. 
. replace stat_name = "n_smaller_in" in `row'
283. replace stat_value = `n_smaller_in' in `row'
284. replace stat_description = "Counties with smaller in-migra
> tion coef than Multnomah" in `row'
285. local row = `row' + 1
286. 
. replace stat_name = "n_smaller_in_sig" in `row'
287. replace stat_value = `n_smaller_in_sig' in `row'
288. replace stat_description = "Counties with smaller in-migra
> tion coef (p<0.05)" in `row'
289. local row = `row' + 1
290. 
. replace stat_name = "n_worse_both" in `row'
291. replace stat_value = `n_worse_both' in `row'
292. replace stat_description = "Counties worse on both out AND
>  in migration" in `row'
293. local row = `row' + 1
294. 
. replace stat_name = "n_worse_both_sig" in `row'
295. replace stat_value = `n_worse_both_sig' in `row'
296. replace stat_description = "Counties worse on both (p<0.05
>  for both)" in `row'
297. local row = `row' + 1
298. 
. ** ==========================================================
> ==================
. ** DISTRIBUTION STATISTICS - OUT-MIGRATION
. ** ==========================================================
> ==================
. 
. replace stat_name = "dist_out_mean" in `row'
299. replace stat_value = `dist_out_mean' in `row'
300. replace stat_description = "Distribution mean: out-migrati
> on coef" in `row'
301. local row = `row' + 1
302. 
. replace stat_name = "dist_out_sd" in `row'
303. replace stat_value = `dist_out_sd' in `row'
304. replace stat_description = "Distribution SD: out-migration
>  coef" in `row'
305. local row = `row' + 1
306. 
. replace stat_name = "dist_out_min" in `row'
307. replace stat_value = `dist_out_min' in `row'
308. replace stat_description = "Distribution min: out-migratio
> n coef" in `row'
309. local row = `row' + 1
310. 
. replace stat_name = "dist_out_max" in `row'
311. replace stat_value = `dist_out_max' in `row'
312. replace stat_description = "Distribution max: out-migratio
> n coef" in `row'
313. local row = `row' + 1
314. 
. replace stat_name = "dist_out_p25" in `row'
315. replace stat_value = `dist_out_p25' in `row'
316. replace stat_description = "Distribution 25th pctile: out-
> migration coef" in `row'
317. local row = `row' + 1
318. 
. replace stat_name = "dist_out_p50" in `row'
319. replace stat_value = `dist_out_p50' in `row'
320. replace stat_description = "Distribution median: out-migra
> tion coef" in `row'
321. local row = `row' + 1
322. 
. replace stat_name = "dist_out_p75" in `row'
323. replace stat_value = `dist_out_p75' in `row'
324. replace stat_description = "Distribution 75th pctile: out-
> migration coef" in `row'
325. local row = `row' + 1
326. 
. ** ==========================================================
> ==================
. ** DISTRIBUTION STATISTICS - IN-MIGRATION
. ** ==========================================================
> ==================
. 
. replace stat_name = "dist_in_mean" in `row'
327. replace stat_value = `dist_in_mean' in `row'
328. replace stat_description = "Distribution mean: in-migratio
> n coef" in `row'
329. local row = `row' + 1
330. 
. replace stat_name = "dist_in_sd" in `row'
331. replace stat_value = `dist_in_sd' in `row'
332. replace stat_description = "Distribution SD: in-migration 
> coef" in `row'
333. local row = `row' + 1
334. 
. replace stat_name = "dist_in_min" in `row'
335. replace stat_value = `dist_in_min' in `row'
336. replace stat_description = "Distribution min: in-migration
>  coef" in `row'
337. local row = `row' + 1
338. 
. replace stat_name = "dist_in_max" in `row'
339. replace stat_value = `dist_in_max' in `row'
340. replace stat_description = "Distribution max: in-migration
>  coef" in `row'
341. local row = `row' + 1
342. 
. replace stat_name = "dist_in_p25" in `row'
343. replace stat_value = `dist_in_p25' in `row'
344. replace stat_description = "Distribution 25th pctile: in-m
> igration coef" in `row'
345. local row = `row' + 1
346. 
. replace stat_name = "dist_in_p50" in `row'
347. replace stat_value = `dist_in_p50' in `row'
348. replace stat_description = "Distribution median: in-migrat
> ion coef" in `row'
349. local row = `row' + 1
350. 
. replace stat_name = "dist_in_p75" in `row'
351. replace stat_value = `dist_in_p75' in `row'
352. replace stat_description = "Distribution 75th pctile: in-m
> igration coef" in `row'
353. local row = `row' + 1
354. 
. ** ==========================================================
> ==================
. ** DISTRIBUTION STATISTICS - T-STATISTICS
. ** ==========================================================
> ==================
. 
. replace stat_name = "dist_t_out_mean" in `row'
355. replace stat_value = `dist_t_out_mean' in `row'
356. replace stat_description = "Distribution mean: out-migrati
> on t-stat" in `row'
357. local row = `row' + 1
358. 
. replace stat_name = "dist_t_out_sd" in `row'
359. replace stat_value = `dist_t_out_sd' in `row'
360. replace stat_description = "Distribution SD: out-migration
>  t-stat" in `row'
361. local row = `row' + 1
362. 
. replace stat_name = "dist_t_out_p50" in `row'
363. replace stat_value = `dist_t_out_p50' in `row'
364. replace stat_description = "Distribution median: out-migra
> tion t-stat" in `row'
365. local row = `row' + 1
366. 
. replace stat_name = "dist_t_in_mean" in `row'
367. replace stat_value = `dist_t_in_mean' in `row'
368. replace stat_description = "Distribution mean: in-migratio
> n t-stat" in `row'
369. local row = `row' + 1
370. 
. replace stat_name = "dist_t_in_sd" in `row'
371. replace stat_value = `dist_t_in_sd' in `row'
372. replace stat_description = "Distribution SD: in-migration 
> t-stat" in `row'
373. local row = `row' + 1
374. 
. replace stat_name = "dist_t_in_p50" in `row'
375. replace stat_value = `dist_t_in_p50' in `row'
376. replace stat_description = "Distribution median: in-migrat
> ion t-stat" in `row'
377. local row = `row' + 1
378. 
. ** Drop empty rows
. drop if stat_name == ""
379. 
. ** Add sample identifier
. gen sample = "`sample'"
380. 
. ** Export to Excel
. ** First iteration: create new file; subsequent: add sheet
. if "`sample'" == "all" {
381.         export excel using "${results}flows/flow_analysis_
> stats.xlsx", ///
>                 sheet("`sample'") sheetreplace firstrow(varia
> bles)
382. }
383. else {
384.         export excel using "${results}flows/flow_analysis_
> stats.xlsx", ///
>                 sheet("`sample'") sheetmodify firstrow(variab
> les)
385. }
386. 
. dis "Exported descriptive statistics to flow_analysis_stats.x
> lsx, sheet: `sample'"
387. 
. ** ==========================================================
> ==================
. ** EXPORT COUNTY LISTS WITH LARGER COEFFICIENTS TO ADDITIONAL
>  SHEETS
. ** ==========================================================
> ==================
. 
. ** Load county coefficients and merge with county identifiers
. use `county_coefs_for_export', clear
388. merge m:1 fips using "${data}working/ids", keep(master mat
> ch) nogen ///
>         keepusing(state_name county_name state_fips county_fi
> ps)
389. 
. ** Order variables for cleaner output
. order fips state_name county_name state_fips county_fips mult
> nomah ///
>         b_out se_out t_out p_out pctile_b_out pctile_t_out //
> /
>         b_in se_in t_in p_in pctile_b_in pctile_t_in
390. 
. ** Save merged data for subsequent sheets
. tempfile county_coefs_merged
391. save `county_coefs_merged'
392. 
. ** Sheet 1: Counties with larger out-migration coefficients t
> han Multnomah
. use `county_coefs_merged', clear
393. keep if b_out > `m_b_out' & !missing(b_out)
394. 
. if _N > 0 {
395.         gsort -b_out
396. 
.         ** Keep relevant variables
.         keep fips state_name county_name b_out se_out t_out p
> _out pctile_b_out pctile_t_out
397. 
.         ** Export
.         export excel using "${results}flows/flow_analysis_sta
> ts.xlsx", ///
>                 sheet("larger_out_`sample'") sheetmodify firs
> trow(variables)
398. 
.         dis "Exported `=_N' counties with larger out-migratio
> n coef to sheet: larger_out_`sample'"
399. }
400. else {
401.         dis "No counties with larger out-migration coef th
> an Multnomah - skipping sheet: larger_out_`sample'"
402. }
403. 
. ** Sheet 2: Counties with smaller in-migration coefficients t
> han Multnomah
. use `county_coefs_merged', clear
404. keep if b_in < `m_b_in' & !missing(b_in)
405. 
. if _N > 0 {
406.         gsort b_in
407. 
.         ** Keep relevant variables
.         keep fips state_name county_name b_in se_in t_in p_in
>  pctile_b_in pctile_t_in
408. 
.         ** Export
.         export excel using "${results}flows/flow_analysis_sta
> ts.xlsx", ///
>                 sheet("smaller_in_`sample'") sheetmodify firs
> trow(variables)
409. 
.         dis "Exported `=_N' counties with smaller in-migratio
> n coef to sheet: smaller_in_`sample'"
410. }
411. else {
412.         dis "No counties with smaller in-migration coef th
> an Multnomah - skipping sheet: smaller_in_`sample'"
413. }
414. 
. ** Sheet 3: Counties worse on BOTH dimensions (larger out AND
>  smaller in)
. use `county_coefs_merged', clear
415. keep if b_out > `m_b_out' & b_in < `m_b_in' & !missing(b_o
> ut) & !missing(b_in)
416. 
. if _N > 0 {
417.         gsort -b_out
418. 
.         ** Keep relevant variables
.         keep fips state_name county_name ///
>                 b_out se_out t_out p_out pctile_b_out pctile_
> t_out ///
>                 b_in se_in t_in p_in pctile_b_in pctile_t_in
419. 
.         ** Export
.         export excel using "${results}flows/flow_analysis_sta
> ts.xlsx", ///
>                 sheet("worse_both_`sample'") sheetmodify firs
> trow(variables)
420. 
.         dis "Exported `=_N' counties worse on both dimensions
>  to sheet: worse_both_`sample'"
421. }
422. else {
423.         dis "No counties worse on both dimensions than Mul
> tnomah - skipping sheet: worse_both_`sample'"
424. }
425. 
. ** Sheet 4: Counties with larger out-migration t-statistics t
> han Multnomah
. use `county_coefs_merged', clear
426. keep if t_out > `m_t_out' & !missing(t_out)
427. 
. if _N > 0 {
428.         gsort -t_out
429. 
.         ** Keep relevant variables
.         keep fips state_name county_name b_out se_out t_out p
> _out pctile_b_out pctile_t_out
430. 
.         ** Export
.         export excel using "${results}flows/flow_analysis_sta
> ts.xlsx", ///
>                 sheet("larger_t_out_`sample'") sheetmodify fi
> rstrow(variables)
431. 
.         dis "Exported `=_N' counties with larger out-migratio
> n t-stat to sheet: larger_t_out_`sample'"
432. }
433. else {
434.         dis "No counties with larger out-migration t-stat 
> than Multnomah - skipping sheet: larger_t_out_`sample'"
435. }
436. 
. ** Sheet 5: Counties with smaller in-migration t-statistics t
> han Multnomah
. use `county_coefs_merged', clear
437. keep if t_in < `m_t_in' & !missing(t_in)
438. 
. if _N > 0 {
439.         gsort t_in
440. 
.         ** Keep relevant variables
.         keep fips state_name county_name b_in se_in t_in p_in
>  pctile_b_in pctile_t_in
441. 
.         ** Export
.         export excel using "${results}flows/flow_analysis_sta
> ts.xlsx", ///
>                 sheet("smaller_t_in_`sample'") sheetmodify fi
> rstrow(variables)
442. 
.         dis "Exported `=_N' counties with smaller in-migratio
> n t-stat to sheet: smaller_t_in_`sample'"
443. }
444. else {
445.         dis "No counties with smaller in-migration t-stat 
> than Multnomah - skipping sheet: smaller_t_in_`sample'"
446. }
447. 
. *************************************************************
> *******************
. ** REGRESSION 2: Multnomah X Year (Event Study)
. *************************************************************
> *******************
. 
. ** Load main data for event study regressions
. use `main_data', clear
448. 
. ** Loop over outcome variables
. foreach outcome in n1 n2 agi {
449. 
.         ** Set outcome label for graphs
.         if "`outcome'" == "n1" local outcome_label "Number of
>  Returns"
450.         if "`outcome'" == "n2" local outcome_label "Number
>  of Exemptions"
451.         if "`outcome'" == "agi" local outcome_label "Adjus
> ted Gross Income"
452. 
.         ** Regression 2a: With covariates
.         ppmlhdfe `outcome' x_out_* x_in_*                    
>                                            ///
>                 `covars'                                     
>                                                              
>       ///
>                 if mover == 1 `sample_cond',                 
>                                            ///
>                 absorb(year flow_id) vce(cluster flow_id)
453.         estimates store `outcome'_es_with_covars
454. 
.         ** Regression 2b: Without covariates
.         ppmlhdfe `outcome' x_out_* x_in_*                    
>                                            ///
>                 if mover == 1 `sample_cond',                 
>                                            ///
>                 absorb(year flow_id) vce(cluster flow_id)
455.         estimates store `outcome'_es_no_covars
456. 
.         ** Create coefficient dataset for plotting
.         clear
457.         set obs 7
458.         gen year = 2015 + _n
459. 
.         ** Out-migration coefficients (with covariates)
.         gen out_coef_wc = .
460.         gen out_ci_lo_wc = .
461.         gen out_ci_hi_wc = .
462. 
.         ** In-migration coefficients (with covariates)
.         gen in_coef_wc = .
463.         gen in_ci_lo_wc = .
464.         gen in_ci_hi_wc = .
465. 
.         ** Out-migration coefficients (without covariates)
.         gen out_coef_nc = .
466.         gen out_ci_lo_nc = .
467.         gen out_ci_hi_nc = .
468. 
.         ** In-migration coefficients (without covariates)
.         gen in_coef_nc = .
469.         gen in_ci_lo_nc = .
470.         gen in_ci_hi_nc = .
471. 
.         ** Fill in coefficients (2020 = base year = 0)
.         foreach y in 2016 2017 2018 2019 2021 2022 {
472. 
.                 ** With covariates
.                 estimates restore `outcome'_es_with_covars
473.                 replace out_coef_wc = _b[x_out_`y'] if yea
> r == `y'
474.                 replace out_ci_lo_wc = _b[x_out_`y'] - 1.9
> 6 * _se[x_out_`y'] if year == `y'
475.                 replace out_ci_hi_wc = _b[x_out_`y'] + 1.9
> 6 * _se[x_out_`y'] if year == `y'
476. 
.                 replace in_coef_wc = _b[x_in_`y'] if year == 
> `y'
477.                 replace in_ci_lo_wc = _b[x_in_`y'] - 1.96 
> * _se[x_in_`y'] if year == `y'
478.                 replace in_ci_hi_wc = _b[x_in_`y'] + 1.96 
> * _se[x_in_`y'] if year == `y'
479. 
.                 ** Without covariates
.                 estimates restore `outcome'_es_no_covars
480.                 replace out_coef_nc = _b[x_out_`y'] if yea
> r == `y'
481.                 replace out_ci_lo_nc = _b[x_out_`y'] - 1.9
> 6 * _se[x_out_`y'] if year == `y'
482.                 replace out_ci_hi_nc = _b[x_out_`y'] + 1.9
> 6 * _se[x_out_`y'] if year == `y'
483. 
.                 replace in_coef_nc = _b[x_in_`y'] if year == 
> `y'
484.                 replace in_ci_lo_nc = _b[x_in_`y'] - 1.96 
> * _se[x_in_`y'] if year == `y'
485.                 replace in_ci_hi_nc = _b[x_in_`y'] + 1.96 
> * _se[x_in_`y'] if year == `y'
486.         }
487. 
.         ** Base year (2020) = 0
.         foreach v in out_coef_wc out_ci_lo_wc out_ci_hi_wc   
>                    ///
>                                  in_coef_wc in_ci_lo_wc in_ci
> _hi_wc                     ///
>                                  out_coef_nc out_ci_lo_nc out
> _ci_hi_nc                  ///
>                                  in_coef_nc in_ci_lo_nc in_ci
> _hi_nc {
488.                 replace `v' = 0 if year == 2020
489.         }
490. 
.         ** Offset years slightly for visibility
.         gen year_out = year - 0.1
491.         gen year_in = year + 0.1
492. 
.         ** Plot 1: Out-migration (with and without covariates
> )
.         twoway  (rcap out_ci_lo_wc out_ci_hi_wc year_out, lc(
> navy))                     ///
>                         (connected out_coef_wc year_out, mc(n
> avy) lc(navy) ms(O))               ///
>                         (rcap out_ci_lo_nc out_ci_hi_nc year_
> in, lc(maroon))                    ///
>                         (connected out_coef_nc year_in, mc(ma
> roon) lc(maroon) ms(T)),   ///
>                 yline(0, lc(gs10) lp(dash))                  
>                                                            //
> /
>                 xline(2020.5, lc(black) lp(solid))           
>                                                            //
> /
>                 xlabel(2016(1)2022)                          
>                                                              
>       ///
>                 ytitle("Coefficient (relative to 2020)")     
>                                                    ///
>                 xtitle("Year")                               
>                                                              
>               ///
>                 legend(order(2 "With Covariates" 4 "Without C
> ovariates")                        ///
>                         pos(6) rows(1))                      
>                                                              
>               ///
>                 title("Out-Migration from Multnomah County`ti
> tle_suffix'")                      ///
>                 subtitle("`outcome_label'")                  
>                                                              
>       ///
>                 graphregion(color(white))
493. 
.         graph export "${results}flows/fig_multnomah_out_`outc
> ome'`file_suffix'.png", replace
494. 
.         ** Plot 2: In-migration (with and without covariates)
.         twoway  (rcap in_ci_lo_wc in_ci_hi_wc year_out, lc(na
> vy))                               ///
>                         (connected in_coef_wc year_out, mc(na
> vy) lc(navy) ms(O))                ///
>                         (rcap in_ci_lo_nc in_ci_hi_nc year_in
> , lc(maroon))                              ///
>                         (connected in_coef_nc year_in, mc(mar
> oon) lc(maroon) ms(T)),    ///
>                 yline(0, lc(gs10) lp(dash))                  
>                                                            //
> /
>                 xline(2020.5, lc(black) lp(solid))           
>                                                            //
> /
>                 xlabel(2016(1)2022)                          
>                                                              
>       ///
>                 ytitle("Coefficient (relative to 2020)")     
>                                                    ///
>                 xtitle("Year")                               
>                                                              
>               ///
>                 legend(order(2 "With Covariates" 4 "Without C
> ovariates")                        ///
>                         pos(6) rows(1))                      
>                                                              
>               ///
>                 title("In-Migration to Multnomah County`title
> _suffix'")                         ///
>                 subtitle("`outcome_label'")                  
>                                                              
>       ///
>                 graphregion(color(white))
495. 
.         graph export "${results}flows/fig_multnomah_in_`outco
> me'`file_suffix'.png", replace
496. 
.         ** Plot 3: Both flows (with covariates only, as in or
> iginal)
.         twoway  (rcap out_ci_lo_wc out_ci_hi_wc year_out, lc(
> navy))                             ///
>                         (connected out_coef_wc year_out, mc(n
> avy) lc(navy) ms(O))               ///
>                         (rcap in_ci_lo_wc in_ci_hi_wc year_in
> , lc(maroon))                              ///
>                         (connected in_coef_wc year_in, mc(mar
> oon) lc(maroon) ms(T)),    ///
>                 yline(0, lc(gs10) lp(dash))                  
>                                                            //
> /
>                 xline(2020.5, lc(black) lp(solid))           
>                                                            //
> /
>                 xlabel(2016(1)2022)                          
>                                                              
>       ///
>                 ytitle("Coefficient (relative to 2020)")     
>                                                    ///
>                 xtitle("Year")                               
>                                                              
>               ///
>                 legend(order(2 "Out-migration" 4 "In-migratio
> n")                                        ///
>                         pos(6) rows(1))                      
>                                                              
>               ///
>                 title("Migration Flows: Multnomah County`titl
> e_suffix'")                        ///
>                 subtitle("`outcome_label'")                  
>                                                              
>       ///
>                 graphregion(color(white))
497. 
.         graph export "${results}flows/fig_multnomah_both_`out
> come'`file_suffix'.png", replace
498. 
.         ** Reload main data for next outcome
.         use `main_data', clear
499. 
. } // END OUTCOME LOOP
500. 
. } // END SAMPLE LOOP (all vs acs)

===============================================================
> =========
RUNNING ANALYSIS FOR SAMPLE: acs
Sample condition: & acs_flow == 1
Covariates: unemp_* pop_* per_capita_income_* prop_rate_mean_o 
> prop_rate_mean_d
===============================================================
> =========

(dropped 3389 observations that are either singletons or separa
> ted by a fixed effect)
Iteration 1:   deviance = 1.9778e+06  eps = .         iters = 4
>     tol = 1.0e-04                                            
>                    min(eta) =  -2.88  P   
Iteration 2:   deviance = 3.3937e+05  eps = 4.83e+00  iters = 3
>     tol = 1.0e-04                                            
>                    min(eta) =  -3.48      
Iteration 3:   deviance = 2.9123e+05  eps = 1.65e-01  iters = 3
>     tol = 1.0e-04                                            
>                    min(eta) =  -3.71      
Iteration 4:   deviance = 2.9102e+05  eps = 7.29e-04  iters = 2
>     tol = 1.0e-04                                            
>                    min(eta) =  -3.74      
Iteration 5:   deviance = 2.9102e+05  eps = 5.68e-08  iters = 2
>     tol = 1.0e-04                                            
>                    min(eta) =  -3.74      
Iteration 6:   deviance = 2.9102e+05  eps = 6.87e-16  iters = 1
>     tol = 1.0e-05                                            
>                    min(eta) =  -3.74   S  
Iteration 7:   deviance = 2.9102e+05  eps = 2.75e-16  iters = 1
>     tol = 1.0e-09                                            
>                    min(eta) =  -3.74   S O
---------------------------------------------------------------
> ---------------------------------------------
(legend: p: exact partial-out   s: exact solver   h: step-halvi
> ng   o: epsilon below tolerance)
Converged in 7 iterations and 16 HDFE sub-iterations (tol = 1.0
> e-08)

HDFE PPML regression                              No. of obs   
>    =                                                         
>         129,600
Absorbing 2 HDFE groups                           Residual df  
>    =                                                         
>          22,046
Statistics robust to heteroskedasticity           Wald chi2(10)
>    =                                                         
>          679.39
Deviance             =  291015.7779               Prob > chi2  
>    =                                                         
>          0.0000
Log pseudolikelihood = -533368.3743               Pseudo R2    
>    =                                                         
>          0.9851

Number of clusters (flow_id)=     22,047
                           (Std. err. adjusted for 22,047 clust
> ers in flow_id)
---------------------------------------------------------------
> ---------------
             |               Robust
          n1 | Coefficient  std. err.      z    P>|z|     [95% 
> con                                                          
>    f. interval]
-------------+-------------------------------------------------
> ---------------
1.out_mult~t |  -.0022129   .0235929    -0.09   0.925     -.048
> 454                                                          
>        .0440283
1.in_multn~t |  -.0846358   .0168906    -5.01   0.000    -.1177
> 409                                                          
>       -.0515308
     unemp_o |   .0229647   .0013063    17.58   0.000     .0204
> 044                                                          
>        .0255251
     unemp_d |  -.0190961   .0014121   -13.52   0.000    -.0218
> 638                                                          
>       -.0163284
       pop_o |   7.22e-09   2.60e-08     0.28   0.781    -4.38e
> -08                                                          
>        5.83e-08
       pop_d |   3.86e-07   3.88e-08     9.95   0.000     3.10e
> -07                                                          
>        4.62e-07
per_capita~o |   1.12e-06   5.10e-07     2.19   0.028     1.19e
> -07                                                          
>        2.12e-06
per_capita~d |  -1.67e-06   4.07e-07    -4.10   0.000    -2.46e
> -06                                                          
>       -8.69e-07
prop_rate_~o |  -.0056646   .0020497    -2.76   0.006     -.009
> 682                                                          
>       -.0016473
prop_rate_~d |  -.0001682   .0020167    -0.08   0.934    -.0041
> 209                                                          
>        .0037844
       _cons |   6.125872   .0784274    78.11   0.000     5.972
> 157                                                          
>        6.279587
---------------------------------------------------------------
> ---------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
        year |         7           1           6     |
     flow_id |     22047       22047           0    *|
-----------------------------------------------------+
* = FE nested within cluster; treated as redundant for DoF comp
> utation
(dropped 3389 observations that are either singletons or separa
> ted by a fixed effect)
Iteration 1:   deviance = 1.9948e+06  eps = .         iters = 4
>     tol = 1.0e-04                                            
>                    min(eta) =  -2.86  P   
Iteration 2:   deviance = 3.5534e+05  eps = 4.61e+00  iters = 3
>     tol = 1.0e-04                                            
>                    min(eta) =  -3.44      
Iteration 3:   deviance = 3.0721e+05  eps = 1.57e-01  iters = 3
>     tol = 1.0e-04                                            
>                    min(eta) =  -3.68      
Iteration 4:   deviance = 3.0700e+05  eps = 6.90e-04  iters = 2
>     tol = 1.0e-04                                            
>                    min(eta) =  -3.71      
Iteration 5:   deviance = 3.0700e+05  eps = 5.37e-08  iters = 2
>     tol = 1.0e-04                                            
>                    min(eta) =  -3.71      
Iteration 6:   deviance = 3.0700e+05  eps = 9.11e-16  iters = 1
>     tol = 1.0e-05                                            
>                    min(eta) =  -3.71   S  
Iteration 7:   deviance = 3.0700e+05  eps = 1.30e-16  iters = 1
>     tol = 1.0e-09                                            
>                    min(eta) =  -3.71   S O
---------------------------------------------------------------
> ---------------------------------------------
(legend: p: exact partial-out   s: exact solver   h: step-halvi
> ng   o: epsilon below tolerance)
Converged in 7 iterations and 16 HDFE sub-iterations (tol = 1.0
> e-08)

HDFE PPML regression                              No. of obs   
>    =                                                         
>         129,600
Absorbing 2 HDFE groups                           Residual df  
>    =                                                         
>          22,046
Statistics robust to heteroskedasticity           Wald chi2(2) 
>    =                                                         
>           34.36
Deviance             =  306996.4457               Prob > chi2  
>    =                                                         
>          0.0000
Log pseudolikelihood = -541358.7081               Pseudo R2    
>    =                                                         
>          0.9849

Number of clusters (flow_id)=     22,047
                           (Std. err. adjusted for 22,047 clust
> ers in flow_id)
---------------------------------------------------------------
> ---------------
             |               Robust
          n1 | Coefficient  std. err.      z    P>|z|     [95% 
> con                                                          
>    f. interval]
-------------+-------------------------------------------------
> ---------------
1.out_mult~t |   .0032104   .0243075     0.13   0.895    -.0444
> 315                                                          
>        .0508523
1.in_multn~t |  -.0965589   .0164903    -5.86   0.000    -.1288
> 792                                                          
>       -.0642386
       _cons |    6.70651   .0000597  1.1e+05   0.000     6.706
> 393                                                          
>        6.706627
---------------------------------------------------------------
> ---------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
        year |         7           1           6     |
     flow_id |     22047       22047           0    *|
-----------------------------------------------------+
* = FE nested within cluster; treated as redundant for DoF comp
> utation
file
    C:/Users/ji252/Documents/GitHub/multnomah-county-tax/resu
    > lts/flows/fig_multnomah_post_n1_acs.png saved as PNG
    format
(dropped 3389 observations that are either singletons or separa
> ted by a fixed effect)
Iteration 1:   deviance = 3.6622e+06  eps = .         iters = 4
>     tol = 1.0e-04                                            
>                    min(eta) =  -3.00  P   
Iteration 2:   deviance = 7.1966e+05  eps = 4.09e+00  iters = 3
>     tol = 1.0e-04                                            
>                    min(eta) =  -3.70      
Iteration 3:   deviance = 6.2926e+05  eps = 1.44e-01  iters = 3
>     tol = 1.0e-04                                            
>                    min(eta) =  -4.08      
Iteration 4:   deviance = 6.2873e+05  eps = 8.40e-04  iters = 2
>     tol = 1.0e-04                                            
>                    min(eta) =  -4.17      
Iteration 5:   deviance = 6.2873e+05  eps = 1.99e-07  iters = 2
>     tol = 1.0e-04                                            
>                    min(eta) =  -4.17      
Iteration 6:   deviance = 6.2873e+05  eps = 1.03e-13  iters = 1
>     tol = 1.0e-05                                            
>                    min(eta) =  -4.17   S  
Iteration 7:   deviance = 6.2873e+05  eps = 1.16e-16  iters = 1
>     tol = 1.0e-08                                            
>                    min(eta) =  -4.17   S O
---------------------------------------------------------------
> ---------------------------------------------
(legend: p: exact partial-out   s: exact solver   h: step-halvi
> ng   o: epsilon below tolerance)
Converged in 7 iterations and 16 HDFE sub-iterations (tol = 1.0
> e-08)

HDFE PPML regression                              No. of obs   
>    =                                                         
>         129,600
Absorbing 2 HDFE groups                           Residual df  
>    =                                                         
>          22,046
Statistics robust to heteroskedasticity           Wald chi2(10)
>    =                                                         
>          645.69
Deviance             =  628730.0175               Prob > chi2  
>    =                                                         
>          0.0000
Log pseudolikelihood = -737640.9381               Pseudo R2    
>    =                                                         
>          0.9885

Number of clusters (flow_id)=     22,047
                           (Std. err. adjusted for 22,047 clust
> ers in flow_id)
---------------------------------------------------------------
> ---------------
             |               Robust
          n2 | Coefficient  std. err.      z    P>|z|     [95% 
> con                                                          
>    f. interval]
-------------+-------------------------------------------------
> ---------------
1.out_mult~t |  -.0016164   .0193979    -0.08   0.934    -.0396
> 356                                                          
>        .0364027
1.in_multn~t |   -.084359   .0158222    -5.33   0.000      -.11
> 537                                                          
>        -.053348
     unemp_o |   .0216645   .0013954    15.53   0.000     .0189
> 295                                                          
>        .0243995
     unemp_d |  -.0207735   .0015576   -13.34   0.000    -.0238
> 264                                                          
>       -.0177206
       pop_o |  -6.75e-09   2.84e-08    -0.24   0.812    -6.24e
> -08                                                          
>        4.89e-08
       pop_d |   4.05e-07   3.62e-08    11.19   0.000     3.34e
> -07                                                          
>        4.76e-07
per_capita~o |   1.62e-06   5.18e-07     3.12   0.002     6.00e
> -07                                                          
>        2.63e-06
per_capita~d |  -2.04e-06   4.34e-07    -4.70   0.000    -2.89e
> -06                                                          
>       -1.19e-06
prop_rate_~o |  -.0054931   .0021535    -2.55   0.011    -.0097
> 139                                                          
>       -.0012723
prop_rate_~d |  -.0005758   .0021315    -0.27   0.787    -.0047
> 535                                                          
>        .0036019
       _cons |   6.744748   .0806006    83.68   0.000     6.586
> 774                                                          
>        6.902722
---------------------------------------------------------------
> ---------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
        year |         7           1           6     |
     flow_id |     22047       22047           0    *|
-----------------------------------------------------+
* = FE nested within cluster; treated as redundant for DoF comp
> utation
(dropped 3389 observations that are either singletons or separa
> ted by a fixed effect)
Iteration 1:   deviance = 3.6934e+06  eps = .         iters = 4
>     tol = 1.0e-04                                            
>                    min(eta) =  -2.99  P   
Iteration 2:   deviance = 7.4908e+05  eps = 3.93e+00  iters = 3
>     tol = 1.0e-04                                            
>                    min(eta) =  -3.69      
Iteration 3:   deviance = 6.5872e+05  eps = 1.37e-01  iters = 3
>     tol = 1.0e-04                                            
>                    min(eta) =  -4.06      
Iteration 4:   deviance = 6.5819e+05  eps = 8.00e-04  iters = 2
>     tol = 1.0e-04                                            
>                    min(eta) =  -4.14      
Iteration 5:   deviance = 6.5819e+05  eps = 1.89e-07  iters = 2
>     tol = 1.0e-04                                            
>                    min(eta) =  -4.15      
Iteration 6:   deviance = 6.5819e+05  eps = 9.72e-14  iters = 1
>     tol = 1.0e-05                                            
>                    min(eta) =  -4.15   S  
Iteration 7:   deviance = 6.5819e+05  eps = 2.21e-16  iters = 1
>     tol = 1.0e-08                                            
>                    min(eta) =  -4.15   S O
---------------------------------------------------------------
> ---------------------------------------------
(legend: p: exact partial-out   s: exact solver   h: step-halvi
> ng   o: epsilon below tolerance)
Converged in 7 iterations and 16 HDFE sub-iterations (tol = 1.0
> e-08)

HDFE PPML regression                              No. of obs   
>    =                                                         
>         129,600
Absorbing 2 HDFE groups                           Residual df  
>    =                                                         
>          22,046
Statistics robust to heteroskedasticity           Wald chi2(2) 
>    =                                                         
>           39.84
Deviance             =  658193.6762               Prob > chi2  
>    =                                                         
>          0.0000
Log pseudolikelihood = -752372.7674               Pseudo R2    
>    =                                                         
>          0.9883

Number of clusters (flow_id)=     22,047
                           (Std. err. adjusted for 22,047 clust
> ers in flow_id)
---------------------------------------------------------------
> ---------------
             |               Robust
          n2 | Coefficient  std. err.      z    P>|z|     [95% 
> con                                                          
>    f. interval]
-------------+-------------------------------------------------
> ---------------
1.out_mult~t |   .0028857    .019154     0.15   0.880    -.0346
> 556                                                          
>        .0404269
1.in_multn~t |  -.0991782   .0157384    -6.30   0.000     -.130
> 025                                                          
>       -.0683315
       _cons |   7.303822   .0000424  1.7e+05   0.000     7.303
> 738                                                          
>        7.303905
---------------------------------------------------------------
> ---------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
        year |         7           1           6     |
     flow_id |     22047       22047           0    *|
-----------------------------------------------------+
* = FE nested within cluster; treated as redundant for DoF comp
> utation
file
    C:/Users/ji252/Documents/GitHub/multnomah-county-tax/resu
    > lts/flows/fig_multnomah_post_n2_acs.png saved as PNG
    format
(dropped 3389 observations that are either singletons or separa
> ted by a fixed effect)
Iteration 1:   deviance = 2.6805e+08  eps = .         iters = 4
>     tol = 1.0e-04                                            
>                    min(eta) =  -3.32  P   
Iteration 2:   deviance = 1.0401e+08  eps = 1.58e+00  iters = 3
>     tol = 1.0e-04                                            
>                    min(eta) =  -4.14      
Iteration 3:   deviance = 9.5891e+07  eps = 8.47e-02  iters = 3
>     tol = 1.0e-04                                            
>                    min(eta) =  -4.78      
Iteration 4:   deviance = 9.5722e+07  eps = 1.77e-03  iters = 2
>     tol = 1.0e-04                                            
>                    min(eta) =  -5.11      
Iteration 5:   deviance = 9.5721e+07  eps = 5.84e-06  iters = 2
>     tol = 1.0e-04                                            
>                    min(eta) =  -5.21      
Iteration 6:   deviance = 9.5721e+07  eps = 9.66e-10  iters = 2
>     tol = 1.0e-05                                            
>                    min(eta) =  -5.22   S  
Iteration 7:   deviance = 9.5721e+07  eps = 2.56e-15  iters = 1
>     tol = 1.0e-07                                            
>                    min(eta) =  -5.22   S  
Iteration 8:   deviance = 9.5721e+07  eps = 0.00e+00  iters = 1
>     tol = 1.0e-09                                            
>                    min(eta) =  -5.22   S O
---------------------------------------------------------------
> ---------------------------------------------
(legend: p: exact partial-out   s: exact solver   h: step-halvi
> ng   o: epsilon below tolerance)
Converged in 8 iterations and 18 HDFE sub-iterations (tol = 1.0
> e-08)

HDFE PPML regression                              No. of obs   
>    =                                                         
>         129,600
Absorbing 2 HDFE groups                           Residual df  
>    =                                                         
>          22,046
Statistics robust to heteroskedasticity           Wald chi2(10)
>    =                                                         
>          511.65
Deviance             =  95721037.43               Prob > chi2  
>    =                                                         
>          0.0000
Log pseudolikelihood = -48521300.98               Pseudo R2    
>    =                                                         
>          0.9838

Number of clusters (flow_id)=     22,047
                           (Std. err. adjusted for 22,047 clust
> ers in flow_id)
---------------------------------------------------------------
> ---------------
             |               Robust
         agi | Coefficient  std. err.      z    P>|z|     [95% 
> con                                                          
>    f. interval]
-------------+-------------------------------------------------
> ---------------
1.out_mult~t |    .116637   .0563226     2.07   0.038     .0062
> 467                                                          
>        .2270274
1.in_multn~t |  -.1908973   .0225148    -8.48   0.000    -.2350
> 255                                                          
>       -.1467691
     unemp_o |   .0379792   .0068692     5.53   0.000     .0245
> 158                                                          
>        .0514425
     unemp_d |  -.0406767   .0051414    -7.91   0.000    -.0507
> 536                                                          
>       -.0305999
       pop_o |  -2.79e-07   6.28e-08    -4.45   0.000    -4.02e
> -07                                                          
>       -1.56e-07
       pop_d |   5.24e-07   8.90e-08     5.89   0.000     3.50e
> -07                                                          
>        6.99e-07
per_capita~o |   7.56e-06   9.75e-07     7.75   0.000     5.65e
> -06                                                          
>        9.47e-06
per_capita~d |   9.16e-07   1.13e-06     0.81   0.417    -1.30e
> -06                                                          
>        3.13e-06
prop_rate_~o |   -.013418   .0062772    -2.14   0.033    -.0257
> 211                                                          
>       -.0011149
prop_rate_~d |   .0080536   .0054192     1.49   0.137    -.0025
> 678                                                          
>         .018675
       _cons |   10.23336   .2129496    48.06   0.000     9.815
> 987                                                          
>        10.65073
---------------------------------------------------------------
> ---------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
        year |         7           1           6     |
     flow_id |     22047       22047           0    *|
-----------------------------------------------------+
* = FE nested within cluster; treated as redundant for DoF comp
> utation
(dropped 3389 observations that are either singletons or separa
> ted by a fixed effect)
Iteration 1:   deviance = 2.7605e+08  eps = .         iters = 4
>     tol = 1.0e-04                                            
>                    min(eta) =  -3.25  P   
Iteration 2:   deviance = 1.1017e+08  eps = 1.51e+00  iters = 3
>     tol = 1.0e-04                                            
>                    min(eta) =  -4.15      
Iteration 3:   deviance = 1.0194e+08  eps = 8.07e-02  iters = 3
>     tol = 1.0e-04                                            
>                    min(eta) =  -4.83      
Iteration 4:   deviance = 1.0178e+08  eps = 1.66e-03  iters = 2
>     tol = 1.0e-04                                            
>                    min(eta) =  -5.17      
Iteration 5:   deviance = 1.0178e+08  eps = 5.36e-06  iters = 2
>     tol = 1.0e-04                                            
>                    min(eta) =  -5.25      
Iteration 6:   deviance = 1.0178e+08  eps = 9.20e-10  iters = 2
>     tol = 1.0e-05                                            
>                    min(eta) =  -5.25   S  
Iteration 7:   deviance = 1.0178e+08  eps = 2.54e-15  iters = 1
>     tol = 1.0e-07                                            
>                    min(eta) =  -5.25   S  
Iteration 8:   deviance = 1.0178e+08  eps = 0.00e+00  iters = 1
>     tol = 1.0e-09                                            
>                    min(eta) =  -5.25   S O
---------------------------------------------------------------
> ---------------------------------------------
(legend: p: exact partial-out   s: exact solver   h: step-halvi
> ng   o: epsilon below tolerance)
Converged in 8 iterations and 18 HDFE sub-iterations (tol = 1.0
> e-08)

HDFE PPML regression                              No. of obs   
>    =                                                         
>         129,600
Absorbing 2 HDFE groups                           Residual df  
>    =                                                         
>          22,046
Statistics robust to heteroskedasticity           Wald chi2(2) 
>    =                                                         
>           79.19
Deviance             =  101775047.8               Prob > chi2  
>    =                                                         
>          0.0000
Log pseudolikelihood = -51548306.18               Pseudo R2    
>    =                                                         
>          0.9827

Number of clusters (flow_id)=     22,047
                           (Std. err. adjusted for 22,047 clust
> ers in flow_id)
---------------------------------------------------------------
> ---------------
             |               Robust
         agi | Coefficient  std. err.      z    P>|z|     [95% 
> con                                                          
>    f. interval]
-------------+-------------------------------------------------
> ---------------
1.out_mult~t |   .1151791   .0612446     1.88   0.060    -.0048
> 582                                                          
>        .2352163
1.in_multn~t |  -.1994398   .0231161    -8.63   0.000    -.2447
> 464                                                          
>       -.1541331
       _cons |   11.16124   .0001579  7.1e+04   0.000     11.16
> 093                                                          
>        11.16155
---------------------------------------------------------------
> ---------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
        year |         7           1           6     |
     flow_id |     22047       22047           0    *|
-----------------------------------------------------+
* = FE nested within cluster; treated as redundant for DoF comp
> utation
file
    C:/Users/ji252/Documents/GitHub/multnomah-county-tax/resu
    > lts/flows/fig_multnomah_post_agi_acs.png saved as PNG
    format
1003 1015 1097 4005 4013 4025 5007 5119 5143 6001 6007 6013 601
> 7 6019 6023 6025 6029 6031 6037 6039 6041 6047 6055 6059 6061
>  6065 6067 6071 6073 6075 6077 6079 6081 6083 6085 6087 6089 
> 6095 6097 6099 6107 6111 6113 8069 10001 10003 10005 11001 12
> 001 12009 12011 12015 12017 12019 12021 12031 12033 12053 120
> 57 12061 12071 12073 12081 12083 12085 12091 12095 12097 1209
> 9 12101 12103 12105 12111 12113 12115 12117 13015 13021 13045
>  13051 13057 13059 13063 13067 13073 13077 13097 13113 13117 
> 13135 13139 13151 13185 13223 13245 13313 16019 17031 17043 1
> 7089 17097 17111 17113 17119 17143 17161 17167 17179 17197 18
> 003 18019 18035 18039 18063 18081 18089 18091 18095 18097 181
> 05 18127 18141 18157 18163 18167 19013 19103 19113 19163 2004
> 5 20091 20209 21015 21067 21111 21117 21227 22005 22017 22033
>  22055 22071 22073 22103 23001 23011 24003 24005 24013 24015 
> 24017 24021 24025 24027 24031 24033 24510 25003 25025 26005 2
> 6021 26065 26075 26077 26081 26093 26099 26115 26121 26125 26
> 139 26145 26147 26161 26163 27003 27037 27053 27109 27123 271
> 63 28033 28047 28059 29095 29099 29183 29189 29510 31055 3110
> 9 31153 32003 32031 34003 34005 34007 34013 34015 34017 34019
>  34021 34023 34025 34027 34029 34031 34035 34037 34039 34041 
> 35013 35043 36001 36005 36013 36029 36047 36055 36059 36061 3
> 6063 36071 36075 36081 36083 36085 36087 36089 36091 36093 36
> 103 36109 37001 37019 37021 37035 37051 37057 37063 37067 370
> 71 37081 37085 37119 37135 37147 37151 37159 37183 37191 3801
> 7 39003 39017 39023 39035 39041 39045 39049 39057 39061 39089
>  39093 39103 39109 39113 39133 39139 39153 39165 39169 40017 
> 40027 40109 41005 41019 41029 41039 41047 41051 41067 42003 4
> 2011 42017 42019 42021 42027 42029 42043 42045 42049 42051 42
> 071 42075 42085 42089 42091 42101 42107 42129 42133 44003 440
> 07 44009 45083 47009 47037 47065 47149 47157 47187 47189 4802
> 7 48029 48039 48041 48061 48085 48091 48113 48121 48135 48139
>  48141 48157 48167 48183 48187 48201 48209 48215 48245 48251 
> 48257 48303 48309 48329 48339 48355 48367 48375 48381 48423 4
> 8439 48441 48451 48453 48479 48485 48491 49011 49035 49049 49
> 053 49057 51013 51041 51087 51107 51510 51650 51700 51760 518
> 10 53011 53033 53035 53053 53061 53063 53067 53073 53077 5500
> 9 55025 55059 55063 55073 55079 55087 55101 55105 55117 55127
>  55133 55139
Running regressions for 386 counties (acs sample)...
(file C:\Users\ji252\AppData\Local\Temp\ST_828_000003.tmp not
    found)
Processing county 100 of 386 (fips = 17089)...
Processing county 200 of 386 (fips = 34017)...
Processing county 300 of 386 (fips = 42129)...

==========================================
Multnomah County Results:
==========================================

    Variable |        Obs        Mean    Std. dev.       Min   
>      Max
-------------+-------------------------------------------------
> --------
       b_out |          1     .116637           .    .116637   
>  .116637
       t_out |          1    2.070873           .   2.070873   
> 2.070873
        b_in |          1   -.1908973           .  -.1908973  -
> .1908973
        t_in |          1   -8.478744           .  -8.478744  -
> 8.478744
pctile_b_out |          1    93.26425           .   93.26425   
> 93.26425
-------------+-------------------------------------------------
> --------
pctile_t_out |          1    93.00518           .   93.00518   
> 93.00518
 pctile_b_in |          1    6.735751           .   6.735751   
> 6.735751
 pctile_t_in |          1    3.626943           .   3.626943   
> 3.626943

Distribution of coefficients (all counties):

          Out-migration coefficient (County x Post)
-------------------------------------------------------------
      Percentiles      Smallest
 1%    -.3068653      -1.085196
 5%    -.2371705      -.3452315
10%    -.1933728      -.3142822       Obs                 386
25%    -.1308724      -.3068653       Sum of wgt.         386

50%     -.068173                      Mean          -.0615695
                        Largest       Std. dev.      .1306556
75%     .0033888       .2401696
90%     .0819461       .2480409       Variance       .0170709
95%     .1283096       .3075692       Skewness       .0617987
99%     .2401696       .9156172       Kurtosis       19.59754

          In-migration coefficient (County x Post)
-------------------------------------------------------------
      Percentiles      Smallest
 1%    -.3479243      -.8163297
 5%    -.2103909      -.4469585
10%    -.1670359      -.3582215       Obs                 386
25%    -.1076507      -.3479243       Sum of wgt.         386

50%    -.0408166                      Mean          -.0244704
                        Largest       Std. dev.      .1365747
75%     .0488692       .3261347
90%     .1672236       .3376232       Variance       .0186526
95%     .2106411       .3755583       Skewness      -.0355125
99%     .3261347       .4674779       Kurtosis       6.046852

Distribution of t-stats (all counties):

                  Out-migration t-statistic
-------------------------------------------------------------
      Percentiles      Smallest
 1%     -14.9795      -23.43215
 5%    -7.192556      -18.90471
10%    -5.775691      -15.46177       Obs                 386
25%    -3.292215       -14.9795       Sum of wgt.         386

50%    -1.590027                      Mean          -1.867984
                        Largest       Std. dev.      3.476731
75%     .0598428       6.878835
90%     1.699664       7.040114       Variance       12.08766
95%     2.884984       7.999939       Skewness      -1.339702
99%     6.878835       8.272927       Kurtosis       9.162123

                  In-migration t-statistic
-------------------------------------------------------------
      Percentiles      Smallest
 1%    -11.16764      -16.30601
 5%    -6.765165       -14.7201
10%    -5.092554      -12.92676       Obs                 386
25%    -2.936938      -11.16764       Sum of wgt.         386

50%    -.9176782                      Mean          -1.109723
                        Largest       Std. dev.      3.565328
75%      .858092       8.511084
90%     2.738593       9.027787       Variance       12.71157
95%     4.366858       9.468974       Skewness      -.3321887
99%     8.511084       11.43118       Kurtosis       5.130012
  variable multnomah was float now byte
  variable rank_b_out was float now int
  variable rank_b_in was float now int
  variable rank_t_out was float now int
  variable rank_t_in was float now int
  (4,246 bytes saved)
file
    C:/Users/ji252/Documents/GitHub/multnomah-county-tax/data
    > /working/county_flow_coefficients_acs.dta saved
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/data/
> working/county_flow_coefficients_acs.csv saved
County coefficients saved to C:/Users/ji252/Documents/GitHub/mu
> ltnomah-county-tax/data/working/county_flow_coefficients_acs.
> dta
(bin=50, start=-1.085196, width=.04001626)
file
    C:/Users/ji252/Documents/GitHub/multnomah-county-tax/resu
    > lts/flows/fig_hist_out_b_acs.png saved as PNG format
(bin=50, start=-.81632972, width=.02567615)
file
    C:/Users/ji252/Documents/GitHub/multnomah-county-tax/resu
    > lts/flows/fig_hist_in_b_acs.png saved as PNG format
file
    C:/Users/ji252/Documents/GitHub/multnomah-county-tax/resu
    > lts/flows/fig_scatter_out_in_b_acs.png saved as PNG
    format
(bin=50, start=-23.432154, width=.63410162)
file
    C:/Users/ji252/Documents/GitHub/multnomah-county-tax/resu
    > lts/flows/fig_hist_out_t_acs.png saved as PNG format
(bin=50, start=-16.306009, width=.55474382)
file
    C:/Users/ji252/Documents/GitHub/multnomah-county-tax/resu
    > lts/flows/fig_hist_in_t_acs.png saved as PNG format
file
    C:/Users/ji252/Documents/GitHub/multnomah-county-tax/resu
    > lts/flows/fig_scatter_out_in_t_acs.png saved as PNG
    format

          Out-migration coefficient (County x Post)
-------------------------------------------------------------
      Percentiles      Smallest
 1%    -.3068653      -1.085196
 5%    -.2371705      -.3452315
10%    -.1933728      -.3142822       Obs                 386
25%    -.1308724      -.3068653       Sum of wgt.         386

50%     -.068173                      Mean          -.0615695
                        Largest       Std. dev.      .1306556
75%     .0033888       .2401696
90%     .0819461       .2480409       Variance       .0170709
95%     .1283096       .3075692       Skewness       .0617987
99%     .2401696       .9156172       Kurtosis       19.59754

          In-migration coefficient (County x Post)
-------------------------------------------------------------
      Percentiles      Smallest
 1%    -.3479243      -.8163297
 5%    -.2103909      -.4469585
10%    -.1670359      -.3582215       Obs                 386
25%    -.1076507      -.3479243       Sum of wgt.         386

50%    -.0408166                      Mean          -.0244704
                        Largest       Std. dev.      .1365747
75%     .0488692       .3261347
90%     .1672236       .3376232       Variance       .0186526
95%     .2106411       .3755583       Skewness      -.0355125
99%     .3261347       .4674779       Kurtosis       6.046852

                  Out-migration t-statistic
-------------------------------------------------------------
      Percentiles      Smallest
 1%     -14.9795      -23.43215
 5%    -7.192556      -18.90471
10%    -5.775691      -15.46177       Obs                 386
25%    -3.292215       -14.9795       Sum of wgt.         386

50%    -1.590027                      Mean          -1.867984
                        Largest       Std. dev.      3.476731
75%     .0598428       6.878835
90%     1.699664       7.040114       Variance       12.08766
95%     2.884984       7.999939       Skewness      -1.339702
99%     6.878835       8.272927       Kurtosis       9.162123

                  In-migration t-statistic
-------------------------------------------------------------
      Percentiles      Smallest
 1%    -11.16764      -16.30601
 5%    -6.765165       -14.7201
10%    -5.092554      -12.92676       Obs                 386
25%    -2.936938      -11.16764       Sum of wgt.         386

50%    -.9176782                      Mean          -1.109723
                        Largest       Std. dev.      3.565328
75%      .858092       8.511084
90%     2.738593       9.027787       Variance       12.71157
95%     4.366858       9.468974       Skewness      -.3321887
99%     8.511084       11.43118       Kurtosis       5.130012
file C:\Users\ji252\AppData\Local\Temp\ST_828_000004.tmp
    saved as .dta format
Number of observations (_N) was 0, now 40.
(40 missing values generated)
(40 missing values generated)
(40 missing values generated)
variable stat_name was str1 now str7
(1 real change made)
(1 real change made)
variable stat_description was str1 now str35
(1 real change made)
variable stat_name was str7 now str8
(1 real change made)
(1 real change made)
variable stat_description was str35 now str38
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
variable stat_name was str8 now str14
(1 real change made)
(1 real change made)
variable stat_description was str38 now str39
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
variable stat_description was str39 now str42
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
variable stat_name was str14 now str15
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
variable stat_description was str42 now str54
(1 real change made)
variable stat_name was str15 now str16
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 observation deleted)
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/resul
> ts/flows/flow_analysis_stats.xlsx saved
Exported descriptive statistics to flow_analysis_stats.xlsx, sh
> eet: acs

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                               386  
    -----------------------------------------
file C:\Users\ji252\AppData\Local\Temp\ST_828_000005.tmp
    saved as .dta format
(360 observations deleted)
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/resul
> ts/flows/flow_analysis_stats.xlsx saved
Exported 26 counties with larger out-migration coef to sheet: l
> arger_out_acs
(360 observations deleted)
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/resul
> ts/flows/flow_analysis_stats.xlsx saved
Exported 26 counties with smaller in-migration coef to sheet: s
> maller_in_acs
(384 observations deleted)
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/resul
> ts/flows/flow_analysis_stats.xlsx saved
Exported 2 counties worse on both dimensions to sheet: worse_bo
> th_acs
(359 observations deleted)
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/resul
> ts/flows/flow_analysis_stats.xlsx saved
Exported 27 counties with larger out-migration t-stat to sheet:
>  larger_t_out_acs
(373 observations deleted)
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/resul
> ts/flows/flow_analysis_stats.xlsx saved
Exported 13 counties with smaller in-migration t-stat to sheet:
>  smaller_t_in_acs
(dropped 3389 observations that are either singletons or separa
> ted by a fixed effect)
Iteration 1:   deviance = 1.9775e+06  eps = .         iters = 4
>     tol = 1.0e-04                                            
>                    min(eta) =  -2.88  P   
Iteration 2:   deviance = 3.3913e+05  eps = 4.83e+00  iters = 3
>     tol = 1.0e-04                                            
>                    min(eta) =  -3.47      
Iteration 3:   deviance = 2.9099e+05  eps = 1.65e-01  iters = 3
>     tol = 1.0e-04                                            
>                    min(eta) =  -3.71      
Iteration 4:   deviance = 2.9077e+05  eps = 7.29e-04  iters = 2
>     tol = 1.0e-04                                            
>                    min(eta) =  -3.74      
Iteration 5:   deviance = 2.9077e+05  eps = 5.69e-08  iters = 2
>     tol = 1.0e-04                                            
>                    min(eta) =  -3.74      
Iteration 6:   deviance = 2.9077e+05  eps = 8.25e-16  iters = 1
>     tol = 1.0e-05                                            
>                    min(eta) =  -3.74   S  
Iteration 7:   deviance = 2.9077e+05  eps = 1.37e-16  iters = 1
>     tol = 1.0e-09                                            
>                    min(eta) =  -3.74   S O
---------------------------------------------------------------
> ---------------------------------------------
(legend: p: exact partial-out   s: exact solver   h: step-halvi
> ng   o: epsilon below tolerance)
Converged in 7 iterations and 16 HDFE sub-iterations (tol = 1.0
> e-08)

HDFE PPML regression                              No. of obs   
>    =                                                         
>         129,600
Absorbing 2 HDFE groups                           Residual df  
>    =                                                         
>          22,046
Statistics robust to heteroskedasticity           Wald chi2(20)
>    =                                                         
>          935.60
Deviance             =  290774.4263               Prob > chi2  
>    =                                                         
>          0.0000
Log pseudolikelihood = -533247.6985               Pseudo R2    
>    =                                                         
>          0.9851

Number of clusters (flow_id)=     22,047
                           (Std. err. adjusted for 22,047 clust
> ers in flow_id)
---------------------------------------------------------------
> ---------------
             |               Robust
          n1 | Coefficient  std. err.      z    P>|z|     [95% 
> con                                                          
>    f. interval]
-------------+-------------------------------------------------
> ---------------
  x_out_2016 |   .0216813   .0235243     0.92   0.357    -.0244
> 255                                                          
>        .0677882
  x_out_2017 |   .0754026   .0137838     5.47   0.000     .0483
> 867                                                          
>        .1024184
  x_out_2018 |   .0064161   .0122318     0.52   0.600    -.0175
> 579                                                          
>        .0303901
  x_out_2019 |   -.007318   .0171262    -0.43   0.669    -.0408
> 848                                                          
>        .0262487
  x_out_2021 |   .0425224   .0152848     2.78   0.005     .0125
> 649                                                          
>          .07248
  x_out_2022 |  -.0036282   .0324137    -0.11   0.911    -.0671
> 579                                                          
>        .0599015
   x_in_2016 |   .0846162   .0218546     3.87   0.000      .041
> 782                                                          
>        .1274504
   x_in_2017 |   .0341028   .0212663     1.60   0.109    -.0075
> 783                                                          
>        .0757839
   x_in_2018 |    .002899   .0138536     0.21   0.834    -.0242
> 536                                                          
>        .0300515
   x_in_2019 |   .0203849   .0136763     1.49   0.136    -.0064
> 202                                                          
>          .04719
   x_in_2021 |  -.0550648   .0166367    -3.31   0.001    -.0876
> 721                                                          
>       -.0224574
   x_in_2022 |  -.0575413   .0283466    -2.03   0.042    -.1130
> 995                                                          
>       -.0019831
     unemp_o |   .0229936   .0013081    17.58   0.000     .0204
> 298                                                          
>        .0255575
     unemp_d |  -.0190333    .001416   -13.44   0.000    -.0218
> 086                                                          
>       -.0162579
       pop_o |   7.19e-09   2.60e-08     0.28   0.782    -4.39e
> -08                                                          
>        5.82e-08
       pop_d |   3.85e-07   3.87e-08     9.95   0.000     3.10e
> -07                                                          
>        4.61e-07
per_capita~o |   1.13e-06   5.11e-07     2.21   0.027     1.26e
> -07                                                          
>        2.13e-06
per_capita~d |  -1.66e-06   4.07e-07    -4.07   0.000    -2.45e
> -06                                                          
>       -8.59e-07
prop_rate_~o |  -.0055057   .0020538    -2.68   0.007    -.0095
> 311                                                          
>       -.0014803
prop_rate_~d |  -.0001415   .0020209    -0.07   0.944    -.0041
> 024                                                          
>        .0038194
       _cons |   6.123871   .0784472    78.06   0.000     5.970
> 117                                                          
>        6.277624
---------------------------------------------------------------
> ---------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
        year |         7           1           6     |
     flow_id |     22047       22047           0    *|
-----------------------------------------------------+
* = FE nested within cluster; treated as redundant for DoF comp
> utation
(dropped 3389 observations that are either singletons or separa
> ted by a fixed effect)
Iteration 1:   deviance = 1.9944e+06  eps = .         iters = 4
>     tol = 1.0e-04                                            
>                    min(eta) =  -2.86  P   
Iteration 2:   deviance = 3.5504e+05  eps = 4.62e+00  iters = 3
>     tol = 1.0e-04                                            
>                    min(eta) =  -3.44      
Iteration 3:   deviance = 3.0691e+05  eps = 1.57e-01  iters = 3
>     tol = 1.0e-04                                            
>                    min(eta) =  -3.68      
Iteration 4:   deviance = 3.0670e+05  eps = 6.90e-04  iters = 2
>     tol = 1.0e-04                                            
>                    min(eta) =  -3.71      
Iteration 5:   deviance = 3.0670e+05  eps = 5.38e-08  iters = 2
>     tol = 1.0e-04                                            
>                    min(eta) =  -3.71      
Iteration 6:   deviance = 3.0670e+05  eps = 6.51e-16  iters = 1
>     tol = 1.0e-05                                            
>                    min(eta) =  -3.71   S  
Iteration 7:   deviance = 3.0670e+05  eps = 1.30e-16  iters = 1
>     tol = 1.0e-09                                            
>                    min(eta) =  -3.71   S O
---------------------------------------------------------------
> ---------------------------------------------
(legend: p: exact partial-out   s: exact solver   h: step-halvi
> ng   o: epsilon below tolerance)
Converged in 7 iterations and 16 HDFE sub-iterations (tol = 1.0
> e-08)

HDFE PPML regression                              No. of obs   
>    =                                                         
>         129,600
Absorbing 2 HDFE groups                           Residual df  
>    =                                                         
>          22,046
Statistics robust to heteroskedasticity           Wald chi2(12)
>    =                                                         
>          270.13
Deviance             =  306702.3224               Prob > chi2  
>    =                                                         
>          0.0000
Log pseudolikelihood = -541211.6465               Pseudo R2    
>    =                                                         
>          0.9849

Number of clusters (flow_id)=     22,047
                           (Std. err. adjusted for 22,047 clust
> ers in flow_id)
---------------------------------------------------------------
> ---------------
             |               Robust
          n1 | Coefficient  std. err.      z    P>|z|     [95% 
> con                                                          
>    f. interval]
-------------+-------------------------------------------------
> ---------------
  x_out_2016 |   .0006873   .0224723     0.03   0.976    -.0433
> 577                                                          
>        .0447323
  x_out_2017 |   .0569814   .0148049     3.85   0.000     .0279
> 643                                                          
>        .0859984
  x_out_2018 |  -.0116661   .0159217    -0.73   0.464     -.042
> 872                                                          
>        .0195398
  x_out_2019 |  -.0246004   .0203952    -1.21   0.228    -.0645
> 741                                                          
>        .0153734
  x_out_2021 |   .0345233    .016497     2.09   0.036     .0021
> 898                                                          
>        .0668568
  x_out_2022 |   -.014277   .0355923    -0.40   0.688    -.0840
> 367                                                          
>        .0554827
   x_in_2016 |   .1145287   .0187551     6.11   0.000     .0777
> 694                                                          
>         .151288
   x_in_2017 |   .0603117   .0207866     2.90   0.004     .0195
> 707                                                          
>        .1010526
   x_in_2018 |   .0239054   .0153574     1.56   0.120    -.0061
> 945                                                          
>        .0540053
   x_in_2019 |   .0394928    .014881     2.65   0.008     .0103
> 267                                                          
>         .068659
   x_in_2021 |  -.0478143    .015323    -3.12   0.002    -.0778
> 468                                                          
>       -.0177817
   x_in_2022 |  -.0499275   .0244579    -2.04   0.041    -.0978
> 641                                                          
>       -.0019909
       _cons |    6.70613   .0001131  5.9e+04   0.000     6.705
> 908                                                          
>        6.706351
---------------------------------------------------------------
> ---------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
        year |         7           1           6     |
     flow_id |     22047       22047           0    *|
-----------------------------------------------------+
* = FE nested within cluster; treated as redundant for DoF comp
> utation
Number of observations (_N) was 0, now 7.
(7 missing values generated)
(7 missing values generated)
(7 missing values generated)
(7 missing values generated)
(7 missing values generated)
(7 missing values generated)
(7 missing values generated)
(7 missing values generated)
(7 missing values generated)
(7 missing values generated)
(7 missing values generated)
(7 missing values generated)
(results n1_es_with_covars are active now)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(results n1_es_no_covars are active now)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(results n1_es_with_covars are active now)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(results n1_es_no_covars are active now)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(results n1_es_with_covars are active now)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(results n1_es_no_covars are active now)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(results n1_es_with_covars are active now)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(results n1_es_no_covars are active now)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(results n1_es_with_covars are active now)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(results n1_es_no_covars are active now)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(results n1_es_with_covars are active now)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(results n1_es_no_covars are active now)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
file
    C:/Users/ji252/Documents/GitHub/multnomah-county-tax/resu
    > lts/flows/fig_multnomah_out_n1_acs.png saved as PNG
    format
file
    C:/Users/ji252/Documents/GitHub/multnomah-county-tax/resu
    > lts/flows/fig_multnomah_in_n1_acs.png saved as PNG
    format
file
    C:/Users/ji252/Documents/GitHub/multnomah-county-tax/resu
    > lts/flows/fig_multnomah_both_n1_acs.png saved as PNG
    format
(dropped 3389 observations that are either singletons or separa
> ted by a fixed effect)
Iteration 1:   deviance = 3.6616e+06  eps = .         iters = 4
>     tol = 1.0e-04                                            
>                    min(eta) =  -3.00  P   
Iteration 2:   deviance = 7.1914e+05  eps = 4.09e+00  iters = 3
>     tol = 1.0e-04                                            
>                    min(eta) =  -3.70      
Iteration 3:   deviance = 6.2873e+05  eps = 1.44e-01  iters = 3
>     tol = 1.0e-04                                            
>                    min(eta) =  -4.08      
Iteration 4:   deviance = 6.2821e+05  eps = 8.41e-04  iters = 2
>     tol = 1.0e-04                                            
>                    min(eta) =  -4.17      
Iteration 5:   deviance = 6.2821e+05  eps = 1.99e-07  iters = 2
>     tol = 1.0e-04                                            
>                    min(eta) =  -4.17      
Iteration 6:   deviance = 6.2821e+05  eps = 1.03e-13  iters = 1
>     tol = 1.0e-05                                            
>                    min(eta) =  -4.17   S  
Iteration 7:   deviance = 6.2821e+05  eps = 1.16e-16  iters = 1
>     tol = 1.0e-08                                            
>                    min(eta) =  -4.17   S O
---------------------------------------------------------------
> ---------------------------------------------
(legend: p: exact partial-out   s: exact solver   h: step-halvi
> ng   o: epsilon below tolerance)
Converged in 7 iterations and 16 HDFE sub-iterations (tol = 1.0
> e-08)

HDFE PPML regression                              No. of obs   
>    =                                                         
>         129,600
Absorbing 2 HDFE groups                           Residual df  
>    =                                                         
>          22,046
Statistics robust to heteroskedasticity           Wald chi2(20)
>    =                                                         
>          878.51
Deviance             =  628206.6664               Prob > chi2  
>    =                                                         
>          0.0000
Log pseudolikelihood = -737379.2625               Pseudo R2    
>    =                                                         
>          0.9885

Number of clusters (flow_id)=     22,047
                           (Std. err. adjusted for 22,047 clust
> ers in flow_id)
---------------------------------------------------------------
> ---------------
             |               Robust
          n2 | Coefficient  std. err.      z    P>|z|     [95% 
> con                                                          
>    f. interval]
-------------+-------------------------------------------------
> ---------------
  x_out_2016 |   .0590591   .0219986     2.68   0.007     .0159
> 427                                                          
>        .1021756
  x_out_2017 |   .0944793   .0156804     6.03   0.000     .0637
> 464                                                          
>        .1252123
  x_out_2018 |   .0132395   .0123118     1.08   0.282    -.0108
> 913                                                          
>        .0373703
  x_out_2019 |  -.0065173   .0209758    -0.31   0.756    -.0476
> 291                                                          
>        .0345944
  x_out_2021 |   .0595244   .0139373     4.27   0.000     .0322
> 077                                                          
>        .0868411
  x_out_2022 |    .006459   .0289337     0.22   0.823      -.05
> 025                                                          
>         .063168
   x_in_2016 |   .0959863   .0224964     4.27   0.000     .0518
> 942                                                          
>        .1400784
   x_in_2017 |   .0354647   .0175548     2.02   0.043     .0010
> 579                                                          
>        .0698714
   x_in_2018 |   .0151202   .0148031     1.02   0.307    -.0138
> 935                                                          
>        .0441338
   x_in_2019 |   .0323672   .0129112     2.51   0.012     .0070
> 617                                                          
>        .0576727
   x_in_2021 |  -.0501441   .0176639    -2.84   0.005    -.0847
> 648                                                          
>       -.0155234
   x_in_2022 |   -.047307   .0268481    -1.76   0.078    -.0999
> 283                                                          
>        .0053143
     unemp_o |   .0217058   .0013967    15.54   0.000     .0189
> 684                                                          
>        .0244432
     unemp_d |  -.0207307   .0015615   -13.28   0.000     -.023
> 791                                                          
>       -.0176703
       pop_o |  -6.86e-09   2.84e-08    -0.24   0.810    -6.26e
> -08                                                          
>        4.89e-08
       pop_d |   4.05e-07   3.62e-08    11.18   0.000     3.34e
> -07                                                          
>        4.76e-07
per_capita~o |   1.63e-06   5.18e-07     3.14   0.002     6.10e
> -07                                                          
>        2.64e-06
per_capita~d |  -2.03e-06   4.34e-07    -4.67   0.000    -2.88e
> -06                                                          
>       -1.18e-06
prop_rate_~o |  -.0053243    .002158    -2.47   0.014    -.0095
> 539                                                          
>       -.0010947
prop_rate_~d |  -.0005593   .0021348    -0.26   0.793    -.0047
> 435                                                          
>        .0036249
       _cons |   6.742645   .0806562    83.60   0.000     6.584
> 561                                                          
>        6.900728
---------------------------------------------------------------
> ---------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
        year |         7           1           6     |
     flow_id |     22047       22047           0    *|
-----------------------------------------------------+
* = FE nested within cluster; treated as redundant for DoF comp
> utation
(dropped 3389 observations that are either singletons or separa
> ted by a fixed effect)
Iteration 1:   deviance = 3.6928e+06  eps = .         iters = 4
>     tol = 1.0e-04                                            
>                    min(eta) =  -2.99  P   
Iteration 2:   deviance = 7.4847e+05  eps = 3.93e+00  iters = 3
>     tol = 1.0e-04                                            
>                    min(eta) =  -3.69      
Iteration 3:   deviance = 6.5811e+05  eps = 1.37e-01  iters = 3
>     tol = 1.0e-04                                            
>                    min(eta) =  -4.06      
Iteration 4:   deviance = 6.5758e+05  eps = 8.01e-04  iters = 2
>     tol = 1.0e-04                                            
>                    min(eta) =  -4.14      
Iteration 5:   deviance = 6.5758e+05  eps = 1.89e-07  iters = 2
>     tol = 1.0e-04                                            
>                    min(eta) =  -4.15      
Iteration 6:   deviance = 6.5758e+05  eps = 9.73e-14  iters = 1
>     tol = 1.0e-05                                            
>                    min(eta) =  -4.15   S  
Iteration 7:   deviance = 6.5758e+05  eps = 2.21e-16  iters = 1
>     tol = 1.0e-08                                            
>                    min(eta) =  -4.15   S O
---------------------------------------------------------------
> ---------------------------------------------
(legend: p: exact partial-out   s: exact solver   h: step-halvi
> ng   o: epsilon below tolerance)
Converged in 7 iterations and 16 HDFE sub-iterations (tol = 1.0
> e-08)

HDFE PPML regression                              No. of obs   
>    =                                                         
>         129,600
Absorbing 2 HDFE groups                           Residual df  
>    =                                                         
>          22,046
Statistics robust to heteroskedasticity           Wald chi2(12)
>    =                                                         
>          235.62
Deviance             =  657583.8915               Prob > chi2  
>    =                                                         
>          0.0000
Log pseudolikelihood = -752067.8751               Pseudo R2    
>    =                                                         
>          0.9883

Number of clusters (flow_id)=     22,047
                           (Std. err. adjusted for 22,047 clust
> ers in flow_id)
---------------------------------------------------------------
> ---------------
             |               Robust
          n2 | Coefficient  std. err.      z    P>|z|     [95% 
> con                                                          
>    f. interval]
-------------+-------------------------------------------------
> ---------------
  x_out_2016 |   .0373266   .0184606     2.02   0.043     .0011
> 446                                                          
>        .0735087
  x_out_2017 |   .0759461   .0140242     5.42   0.000     .0484
> 592                                                          
>         .103433
  x_out_2018 |  -.0062191   .0145871    -0.43   0.670    -.0348
> 092                                                          
>        .0223711
  x_out_2019 |  -.0253307   .0229546    -1.10   0.270    -.0703
> 208                                                          
>        .0196595
  x_out_2021 |   .0507793   .0149756     3.39   0.001     .0214
> 278                                                          
>        .0801309
  x_out_2022 |  -.0067742   .0323187    -0.21   0.834    -.0701
> 176                                                          
>        .0565692
   x_in_2016 |   .1293669   .0194492     6.65   0.000     .0912
> 471                                                          
>        .1674867
   x_in_2017 |     .06503    .017004     3.82   0.000     .0317
> 027                                                          
>        .0983573
   x_in_2018 |    .038089   .0171927     2.22   0.027      .004
> 392                                                          
>        .0717861
   x_in_2019 |   .0535092   .0150661     3.55   0.000     .0239
> 801                                                          
>        .0830383
   x_in_2021 |  -.0431737    .016665    -2.59   0.010    -.0758
> 365                                                          
>        -.010511
   x_in_2022 |  -.0406385   .0232158    -1.75   0.080    -.0861
> 405                                                          
>        .0048635
       _cons |   7.303372   .0000937  7.8e+04   0.000     7.303
> 188                                                          
>        7.303556
---------------------------------------------------------------
> ---------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
        year |         7           1           6     |
     flow_id |     22047       22047           0    *|
-----------------------------------------------------+
* = FE nested within cluster; treated as redundant for DoF comp
> utation
Number of observations (_N) was 0, now 7.
(7 missing values generated)
(7 missing values generated)
(7 missing values generated)
(7 missing values generated)
(7 missing values generated)
(7 missing values generated)
(7 missing values generated)
(7 missing values generated)
(7 missing values generated)
(7 missing values generated)
(7 missing values generated)
(7 missing values generated)
(results n2_es_with_covars are active now)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(results n2_es_no_covars are active now)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(results n2_es_with_covars are active now)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(results n2_es_no_covars are active now)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(results n2_es_with_covars are active now)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(results n2_es_no_covars are active now)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(results n2_es_with_covars are active now)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(results n2_es_no_covars are active now)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(results n2_es_with_covars are active now)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(results n2_es_no_covars are active now)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(results n2_es_with_covars are active now)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(results n2_es_no_covars are active now)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
file
    C:/Users/ji252/Documents/GitHub/multnomah-county-tax/resu
    > lts/flows/fig_multnomah_out_n2_acs.png saved as PNG
    format
file
    C:/Users/ji252/Documents/GitHub/multnomah-county-tax/resu
    > lts/flows/fig_multnomah_in_n2_acs.png saved as PNG
    format
file
    C:/Users/ji252/Documents/GitHub/multnomah-county-tax/resu
    > lts/flows/fig_multnomah_both_n2_acs.png saved as PNG
    format
(dropped 3389 observations that are either singletons or separa
> ted by a fixed effect)
Iteration 1:   deviance = 2.6802e+08  eps = .         iters = 4
>     tol = 1.0e-04                                            
>                    min(eta) =  -3.32  P   
Iteration 2:   deviance = 1.0398e+08  eps = 1.58e+00  iters = 3
>     tol = 1.0e-04                                            
>                    min(eta) =  -4.14      
Iteration 3:   deviance = 9.5862e+07  eps = 8.47e-02  iters = 3
>     tol = 1.0e-04                                            
>                    min(eta) =  -4.79      
Iteration 4:   deviance = 9.5693e+07  eps = 1.77e-03  iters = 2
>     tol = 1.0e-04                                            
>                    min(eta) =  -5.11      
Iteration 5:   deviance = 9.5692e+07  eps = 5.84e-06  iters = 2
>     tol = 1.0e-04                                            
>                    min(eta) =  -5.21      
Iteration 6:   deviance = 9.5692e+07  eps = 9.67e-10  iters = 2
>     tol = 1.0e-05                                            
>                    min(eta) =  -5.22   S  
Iteration 7:   deviance = 9.5692e+07  eps = 2.70e-15  iters = 1
>     tol = 1.0e-07                                            
>                    min(eta) =  -5.22   S  
Iteration 8:   deviance = 9.5692e+07  eps = 1.42e-16  iters = 1
>     tol = 1.0e-09                                            
>                    min(eta) =  -5.22   S O
---------------------------------------------------------------
> ---------------------------------------------
(legend: p: exact partial-out   s: exact solver   h: step-halvi
> ng   o: epsilon below tolerance)
Converged in 8 iterations and 18 HDFE sub-iterations (tol = 1.0
> e-08)

HDFE PPML regression                              No. of obs   
>    =                                                         
>         129,600
Absorbing 2 HDFE groups                           Residual df  
>    =                                                         
>          22,046
Statistics robust to heteroskedasticity           Wald chi2(20)
>    =                                                         
>          793.90
Deviance             =  95692345.52               Prob > chi2  
>    =                                                         
>          0.0000
Log pseudolikelihood = -48506955.03               Pseudo R2    
>    =                                                         
>          0.9838

Number of clusters (flow_id)=     22,047
                           (Std. err. adjusted for 22,047 clust
> ers in flow_id)
---------------------------------------------------------------
> ---------------
             |               Robust
         agi | Coefficient  std. err.      z    P>|z|     [95% 
> con                                                          
>    f. interval]
-------------+-------------------------------------------------
> ---------------
  x_out_2016 |   .0040056   .0480877     0.08   0.934    -.0902
> 445                                                          
>        .0982558
  x_out_2017 |   .1119817   .0286847     3.90   0.000     .0557
> 607                                                          
>        .1682027
  x_out_2018 |   .0861931   .0578538     1.49   0.136    -.0271
> 982                                                          
>        .1995843
  x_out_2019 |   .0741679   .0403691     1.84   0.066    -.0049
> 541                                                          
>          .15329
  x_out_2021 |   .1755181   .0214335     8.19   0.000     .1335
> 092                                                          
>         .217527
  x_out_2022 |   .1727474   .0644051     2.68   0.007     .0465
> 158                                                          
>         .298979
   x_in_2016 |   .1068567   .0287734     3.71   0.000     .0504
> 618                                                          
>        .1632515
   x_in_2017 |   .0598298   .0346418     1.73   0.084    -.0080
> 668                                                          
>        .1277263
   x_in_2018 |   .0029687   .0376167     0.08   0.937    -.0707
> 587                                                          
>        .0766962
   x_in_2019 |   .0405833   .0296853     1.37   0.172    -.0175
> 989                                                          
>        .0987654
   x_in_2021 |  -.1285752   .0350195    -3.67   0.000    -.1972
> 122                                                          
>       -.0599382
   x_in_2022 |  -.1697776   .0385657    -4.40   0.000    -.2453
> 651                                                          
>       -.0941902
     unemp_o |   .0379987   .0068736     5.53   0.000     .0245
> 267                                                          
>        .0514708
     unemp_d |  -.0406669   .0051563    -7.89   0.000    -.0507
> 731                                                          
>       -.0305607
       pop_o |  -2.79e-07   6.28e-08    -4.44   0.000    -4.02e
> -07                                                          
>       -1.56e-07
       pop_d |   5.24e-07   8.90e-08     5.89   0.000     3.49e
> -07                                                          
>        6.98e-07
per_capita~o |   7.56e-06   9.75e-07     7.76   0.000     5.65e
> -06                                                          
>        9.47e-06
per_capita~d |   9.19e-07   1.13e-06     0.81   0.416    -1.29e
> -06                                                          
>        3.13e-06
prop_rate_~o |  -.0133421   .0062851    -2.12   0.034    -.0256
> 606                                                          
>       -.0010235
prop_rate_~d |   .0081334    .005426     1.50   0.134    -.0025
> 013                                                          
>        .0187681
       _cons |   10.23183    .212935    48.05   0.000     9.814
> 487                                                          
>        10.64918
---------------------------------------------------------------
> ---------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
        year |         7           1           6     |
     flow_id |     22047       22047           0    *|
-----------------------------------------------------+
* = FE nested within cluster; treated as redundant for DoF comp
> utation
(dropped 3389 observations that are either singletons or separa
> ted by a fixed effect)
Iteration 1:   deviance = 2.7601e+08  eps = .         iters = 4
>     tol = 1.0e-04                                            
>                    min(eta) =  -3.28  P   
Iteration 2:   deviance = 1.1014e+08  eps = 1.51e+00  iters = 3
>     tol = 1.0e-04                                            
>                    min(eta) =  -4.15      
Iteration 3:   deviance = 1.0191e+08  eps = 8.07e-02  iters = 3
>     tol = 1.0e-04                                            
>                    min(eta) =  -4.83      
Iteration 4:   deviance = 1.0174e+08  eps = 1.66e-03  iters = 2
>     tol = 1.0e-04                                            
>                    min(eta) =  -5.17      
Iteration 5:   deviance = 1.0174e+08  eps = 5.36e-06  iters = 2
>     tol = 1.0e-04                                            
>                    min(eta) =  -5.25      
Iteration 6:   deviance = 1.0174e+08  eps = 9.20e-10  iters = 2
>     tol = 1.0e-05                                            
>                    min(eta) =  -5.25   S  
Iteration 7:   deviance = 1.0174e+08  eps = 2.41e-15  iters = 1
>     tol = 1.0e-07                                            
>                    min(eta) =  -5.25   S  
Iteration 8:   deviance = 1.0174e+08  eps = 1.34e-16  iters = 1
>     tol = 1.0e-09                                            
>                    min(eta) =  -5.25   S O
---------------------------------------------------------------
> ---------------------------------------------
(legend: p: exact partial-out   s: exact solver   h: step-halvi
> ng   o: epsilon below tolerance)
Converged in 8 iterations and 18 HDFE sub-iterations (tol = 1.0
> e-08)

HDFE PPML regression                              No. of obs   
>    =                                                         
>         129,600
Absorbing 2 HDFE groups                           Residual df  
>    =                                                         
>          22,046
Statistics robust to heteroskedasticity           Wald chi2(12)
>    =                                                         
>          283.29
Deviance             =  101743999.7               Prob > chi2  
>    =                                                         
>          0.0000
Log pseudolikelihood =  -51532782.1               Pseudo R2    
>    =                                                         
>          0.9828

Number of clusters (flow_id)=     22,047
                           (Std. err. adjusted for 22,047 clust
> ers in flow_id)
---------------------------------------------------------------
> ---------------
             |               Robust
         agi | Coefficient  std. err.      z    P>|z|     [95% 
> con                                                          
>    f. interval]
-------------+-------------------------------------------------
> ---------------
  x_out_2016 |  -.0431608   .0451648    -0.96   0.339    -.1316
> 821                                                          
>        .0453605
  x_out_2017 |   .0740926   .0257856     2.87   0.004     .0235
> 537                                                          
>        .1246314
  x_out_2018 |   .0441215   .0554411     0.80   0.426     -.064
> 541                                                          
>         .152784
  x_out_2019 |   .0391689   .0443094     0.88   0.377     -.047
> 676                                                          
>        .1260138
  x_out_2021 |   .1451036   .0257289     5.64   0.000     .0946
> 758                                                          
>        .1955313
  x_out_2022 |   .1387811   .0714183     1.94   0.052    -.0011
> 963                                                          
>        .2787584
   x_in_2016 |   .1408432   .0306178     4.60   0.000     .0808
> 334                                                          
>        .2008529
   x_in_2017 |    .088106   .0399843     2.20   0.028     .0097
> 382                                                          
>        .1664738
   x_in_2018 |   .0300755   .0429007     0.70   0.483    -.0540
> 084                                                          
>        .1141593
   x_in_2019 |   .0626958    .034931     1.79   0.073    -.0057
> 678                                                          
>        .1311593
   x_in_2021 |  -.1125724    .033865    -3.32   0.001    -.1789
> 465                                                          
>       -.0461983
   x_in_2022 |  -.1593401   .0344418    -4.63   0.000    -.2268
> 447                                                          
>       -.0918355
       _cons |   11.16068   .0002025  5.5e+04   0.000     11.16
> 028                                                          
>        11.16108
---------------------------------------------------------------
> ---------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
        year |         7           1           6     |
     flow_id |     22047       22047           0    *|
-----------------------------------------------------+
* = FE nested within cluster; treated as redundant for DoF comp
> utation
Number of observations (_N) was 0, now 7.
(7 missing values generated)
(7 missing values generated)
(7 missing values generated)
(7 missing values generated)
(7 missing values generated)
(7 missing values generated)
(7 missing values generated)
(7 missing values generated)
(7 missing values generated)
(7 missing values generated)
(7 missing values generated)
(7 missing values generated)
(results agi_es_with_covars are active now)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(results agi_es_no_covars are active now)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(results agi_es_with_covars are active now)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(results agi_es_no_covars are active now)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(results agi_es_with_covars are active now)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(results agi_es_no_covars are active now)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(results agi_es_with_covars are active now)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(results agi_es_no_covars are active now)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(results agi_es_with_covars are active now)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(results agi_es_no_covars are active now)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(results agi_es_with_covars are active now)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(results agi_es_no_covars are active now)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
file
    C:/Users/ji252/Documents/GitHub/multnomah-county-tax/resu
    > lts/flows/fig_multnomah_out_agi_acs.png saved as PNG
    format
file
    C:/Users/ji252/Documents/GitHub/multnomah-county-tax/resu
    > lts/flows/fig_multnomah_in_agi_acs.png saved as PNG
    format
file
    C:/Users/ji252/Documents/GitHub/multnomah-county-tax/resu
    > lts/flows/fig_multnomah_both_agi_acs.png saved as PNG
    format

===============================================================
> =========
RUNNING ANALYSIS FOR SAMPLE: all
Sample condition: 
Covariates: unemp_* pop_* per_capita_income_*
===============================================================
> =========

(dropped 10447 observations that are either singletons or separ
> ated by a fixed effect)
Iteration 1:   deviance = 2.8754e+06  eps = .         iters = 4
>     tol = 1.0e-04                                            
>                    min(eta) =  -2.82  P   
Iteration 2:   deviance = 6.3174e+05  eps = 3.55e+00  iters = 3
>     tol = 1.0e-04                                            
>                    min(eta) =  -3.25      
Iteration 3:   deviance = 5.8911e+05  eps = 7.24e-02  iters = 3
>     tol = 1.0e-04                                            
>                    min(eta) =  -3.39      
Iteration 4:   deviance = 5.8906e+05  eps = 8.34e-05  iters = 2
>     tol = 1.0e-04                                            
>                    min(eta) =  -3.40      
Iteration 5:   deviance = 5.8906e+05  eps = 5.95e-10  iters = 2
>     tol = 1.0e-05                                            
>                    min(eta) =  -3.40      
Iteration 6:   deviance = 5.8906e+05  eps = 1.93e-16  iters = 1
>     tol = 1.0e-06                                            
>                    min(eta) =  -3.40   S  
Iteration 7:   deviance = 5.8906e+05  eps = 3.86e-16  iters = 1
>     tol = 1.0e-09                                            
>                    min(eta) =  -3.40   S O
---------------------------------------------------------------
> ---------------------------------------------
(legend: p: exact partial-out   s: exact solver   h: step-halvi
> ng   o: epsilon below tolerance)
Converged in 7 iterations and 16 HDFE sub-iterations (tol = 1.0
> e-08)

HDFE PPML regression                              No. of obs   
>    =                                                         
>         331,655
Absorbing 2 HDFE groups                           Residual df  
>    =                                                         
>          57,484
Statistics robust to heteroskedasticity           Wald chi2(8) 
>    =                                                         
>         1117.95
Deviance             =  589060.4702               Prob > chi2  
>    =                                                         
>          0.0000
Log pseudolikelihood = -1266915.146               Pseudo R2    
>    =                                                         
>          0.9778

Number of clusters (flow_id)=     57,485
                           (Std. err. adjusted for 57,485 clust
> ers in flow_id)
---------------------------------------------------------------
> ---------------
             |               Robust
          n1 | Coefficient  std. err.      z    P>|z|     [95% 
> con                                                          
>    f. interval]
-------------+-------------------------------------------------
> ---------------
1.out_mult~t |   .0112807    .022745     0.50   0.620    -.0332
> 988                                                          
>        .0558601
1.in_multn~t |  -.0763629   .0162191    -4.71   0.000    -.1081
> 518                                                          
>        -.044574
     unemp_o |   .0234736   .0009508    24.69   0.000     .0216
> 101                                                          
>         .025337
     unemp_d |  -.0210478    .000978   -21.52   0.000    -.0229
> 646                                                          
>       -.0191309
       pop_o |   6.38e-08   3.11e-08     2.05   0.040     2.80e
> -09                                                          
>        1.25e-07
       pop_d |   3.63e-07   3.24e-08    11.20   0.000     3.00e
> -07                                                          
>        4.27e-07
per_capita~o |   2.13e-06   3.64e-07     5.86   0.000     1.42e
> -06                                                          
>        2.84e-06
per_capita~d |  -1.56e-06   2.83e-07    -5.51   0.000    -2.12e
> -06                                                          
>       -1.01e-06
       _cons |   5.640978   .0535479   105.34   0.000     5.536
> 026                                                          
>         5.74593
---------------------------------------------------------------
> ---------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
        year |         7           1           6     |
     flow_id |     57485       57485           0    *|
-----------------------------------------------------+
* = FE nested within cluster; treated as redundant for DoF comp
> utation
(dropped 10447 observations that are either singletons or separ
> ated by a fixed effect)
Iteration 1:   deviance = 2.9001e+06  eps = .         iters = 4
>     tol = 1.0e-04                                            
>                    min(eta) =  -2.75  P   
Iteration 2:   deviance = 6.5484e+05  eps = 3.43e+00  iters = 3
>     tol = 1.0e-04                                            
>                    min(eta) =  -3.22      
Iteration 3:   deviance = 6.1220e+05  eps = 6.97e-02  iters = 3
>     tol = 1.0e-04                                            
>                    min(eta) =  -3.36      
Iteration 4:   deviance = 6.1215e+05  eps = 8.01e-05  iters = 2
>     tol = 1.0e-04                                            
>                    min(eta) =  -3.37      
Iteration 5:   deviance = 6.1215e+05  eps = 5.70e-10  iters = 2
>     tol = 1.0e-05                                            
>                    min(eta) =  -3.37      
Iteration 6:   deviance = 6.1215e+05  eps = 0.00e+00  iters = 1
>     tol = 1.0e-06                                            
>                    min(eta) =  -3.37   S  
Iteration 7:   deviance = 6.1215e+05  eps = 1.86e-16  iters = 1
>     tol = 1.0e-09                                            
>                    min(eta) =  -3.37   S O
---------------------------------------------------------------
> ---------------------------------------------
(legend: p: exact partial-out   s: exact solver   h: step-halvi
> ng   o: epsilon below tolerance)
Converged in 7 iterations and 16 HDFE sub-iterations (tol = 1.0
> e-08)

HDFE PPML regression                              No. of obs   
>    =                                                         
>         331,655
Absorbing 2 HDFE groups                           Residual df  
>    =                                                         
>          57,484
Statistics robust to heteroskedasticity           Wald chi2(2) 
>    =                                                         
>           32.03
Deviance             =  612152.2382               Prob > chi2  
>    =                                                         
>          0.0000
Log pseudolikelihood =  -1278461.03               Pseudo R2    
>    =                                                         
>          0.9776

Number of clusters (flow_id)=     57,485
                           (Std. err. adjusted for 57,485 clust
> ers in flow_id)
---------------------------------------------------------------
> ---------------
             |               Robust
          n1 | Coefficient  std. err.      z    P>|z|     [95% 
> con                                                          
>    f. interval]
-------------+-------------------------------------------------
> ---------------
1.out_mult~t |   .0182474   .0234116     0.78   0.436    -.0276
> 384                                                          
>        .0641333
1.in_multn~t |  -.0863437   .0154255    -5.60   0.000    -.1165
> 772                                                          
>       -.0561103
       _cons |   6.165859   .0000373  1.7e+05   0.000     6.165
> 786                                                          
>        6.165932
---------------------------------------------------------------
> ---------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
        year |         7           1           6     |
     flow_id |     57485       57485           0    *|
-----------------------------------------------------+
* = FE nested within cluster; treated as redundant for DoF comp
> utation
file
    C:/Users/ji252/Documents/GitHub/multnomah-county-tax/resu
    > lts/flows/fig_multnomah_post_n1.png saved as PNG format
(dropped 10447 observations that are either singletons or separ
> ated by a fixed effect)
Iteration 1:   deviance = 5.4787e+06  eps = .         iters = 4
>     tol = 1.0e-04                                            
>                    min(eta) =  -2.91  P   
Iteration 2:   deviance = 1.4132e+06  eps = 2.88e+00  iters = 3
>     tol = 1.0e-04                                            
>                    min(eta) =  -3.54      
Iteration 3:   deviance = 1.3306e+06  eps = 6.20e-02  iters = 3
>     tol = 1.0e-04                                            
>                    min(eta) =  -3.81      
Iteration 4:   deviance = 1.3305e+06  eps = 1.14e-04  iters = 2
>     tol = 1.0e-04                                            
>                    min(eta) =  -3.85      
Iteration 5:   deviance = 1.3305e+06  eps = 4.79e-09  iters = 1
>     tol = 1.0e-04                                            
>                    min(eta) =  -3.85      
Iteration 6:   deviance = 1.3305e+06  eps = 1.64e-14  iters = 1
>     tol = 1.0e-05                                            
>                    min(eta) =  -3.85   S  
Iteration 7:   deviance = 1.3305e+06  eps = 0.00e+00  iters = 2
>     tol = 1.0e-09                                            
>                    min(eta) =  -3.85   S O
---------------------------------------------------------------
> ---------------------------------------------
(legend: p: exact partial-out   s: exact solver   h: step-halvi
> ng   o: epsilon below tolerance)
Converged in 7 iterations and 16 HDFE sub-iterations (tol = 1.0
> e-08)

HDFE PPML regression                              No. of obs   
>    =                                                         
>         331,655
Absorbing 2 HDFE groups                           Residual df  
>    =                                                         
>          57,484
Statistics robust to heteroskedasticity           Wald chi2(8) 
>    =                                                         
>         1091.86
Deviance             =   1330486.72               Prob > chi2  
>    =                                                         
>          0.0000
Log pseudolikelihood = -1733747.739               Pseudo R2    
>    =                                                         
>          0.9830

Number of clusters (flow_id)=     57,485
                           (Std. err. adjusted for 57,485 clust
> ers in flow_id)
---------------------------------------------------------------
> ---------------
             |               Robust
          n2 | Coefficient  std. err.      z    P>|z|     [95% 
> con                                                          
>    f. interval]
-------------+-------------------------------------------------
> ---------------
1.out_mult~t |    .015437    .020791     0.74   0.458    -.0253
> 127                                                          
>        .0561866
1.in_multn~t |  -.0740198   .0154241    -4.80   0.000    -.1042
> 505                                                          
>       -.0437892
     unemp_o |   .0221146   .0009958    22.21   0.000     .0201
> 629                                                          
>        .0240664
     unemp_d |  -.0230597   .0010507   -21.95   0.000    -.0251
> 189                                                          
>       -.0210004
       pop_o |   5.15e-08   3.16e-08     1.63   0.103    -1.04e
> -08                                                          
>        1.13e-07
       pop_d |   3.62e-07   3.00e-08    12.05   0.000     3.03e
> -07                                                          
>        4.20e-07
per_capita~o |   2.54e-06   3.76e-07     6.76   0.000     1.80e
> -06                                                          
>        3.28e-06
per_capita~d |  -2.02e-06   3.03e-07    -6.64   0.000    -2.61e
> -06                                                          
>       -1.42e-06
       _cons |   6.280974    .053925   116.48   0.000     6.175
> 282                                                          
>        6.386665
---------------------------------------------------------------
> ---------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
        year |         7           1           6     |
     flow_id |     57485       57485           0    *|
-----------------------------------------------------+
* = FE nested within cluster; treated as redundant for DoF comp
> utation
(dropped 10447 observations that are either singletons or separ
> ated by a fixed effect)
Iteration 1:   deviance = 5.5233e+06  eps = .         iters = 4
>     tol = 1.0e-04                                            
>                    min(eta) =  -2.89  P   
Iteration 2:   deviance = 1.4553e+06  eps = 2.80e+00  iters = 3
>     tol = 1.0e-04                                            
>                    min(eta) =  -3.50      
Iteration 3:   deviance = 1.3728e+06  eps = 6.01e-02  iters = 3
>     tol = 1.0e-04                                            
>                    min(eta) =  -3.76      
Iteration 4:   deviance = 1.3726e+06  eps = 1.10e-04  iters = 2
>     tol = 1.0e-04                                            
>                    min(eta) =  -3.80      
Iteration 5:   deviance = 1.3726e+06  eps = 4.60e-09  iters = 1
>     tol = 1.0e-04                                            
>                    min(eta) =  -3.80      
Iteration 6:   deviance = 1.3726e+06  eps = 1.59e-14  iters = 1
>     tol = 1.0e-05                                            
>                    min(eta) =  -3.80   S  
Iteration 7:   deviance = 1.3726e+06  eps = 1.50e-16  iters = 1
>     tol = 1.0e-09                                            
>                    min(eta) =  -3.80   S O
---------------------------------------------------------------
> ---------------------------------------------
(legend: p: exact partial-out   s: exact solver   h: step-halvi
> ng   o: epsilon below tolerance)
Converged in 7 iterations and 15 HDFE sub-iterations (tol = 1.0
> e-08)

HDFE PPML regression                              No. of obs   
>    =                                                         
>         331,655
Absorbing 2 HDFE groups                           Residual df  
>    =                                                         
>          57,484
Statistics robust to heteroskedasticity           Wald chi2(2) 
>    =                                                         
>           35.14
Deviance             =  1372638.294               Prob > chi2  
>    =                                                         
>          0.0000
Log pseudolikelihood = -1754823.525               Pseudo R2    
>    =                                                         
>          0.9828

Number of clusters (flow_id)=     57,485
                           (Std. err. adjusted for 57,485 clust
> ers in flow_id)
---------------------------------------------------------------
> ---------------
             |               Robust
          n2 | Coefficient  std. err.      z    P>|z|     [95% 
> con                                                          
>    f. interval]
-------------+-------------------------------------------------
> ---------------
1.out_mult~t |   .0218918   .0207797     1.05   0.292    -.0188
> 356                                                          
>        .0626192
1.in_multn~t |  -.0864384    .014852    -5.82   0.000    -.1155
> 479                                                          
>        -.057329
       _cons |   6.749585   .0000282  2.4e+05   0.000      6.74
> 953                                                          
>         6.74964
---------------------------------------------------------------
> ---------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
        year |         7           1           6     |
     flow_id |     57485       57485           0    *|
-----------------------------------------------------+
* = FE nested within cluster; treated as redundant for DoF comp
> utation
file
    C:/Users/ji252/Documents/GitHub/multnomah-county-tax/resu
    > lts/flows/fig_multnomah_post_n2.png saved as PNG format
(dropped 10447 observations that are either singletons or separ
> ated by a fixed effect)
Iteration 1:   deviance = 4.0054e+08  eps = .         iters = 4
>     tol = 1.0e-04                                            
>                    min(eta) =  -3.59  P   
Iteration 2:   deviance = 1.6976e+08  eps = 1.36e+00  iters = 3
>     tol = 1.0e-04                                            
>                    min(eta) =  -4.22      
Iteration 3:   deviance = 1.6099e+08  eps = 5.44e-02  iters = 3
>     tol = 1.0e-04                                            
>                    min(eta) =  -5.14      
Iteration 4:   deviance = 1.6087e+08  eps = 7.90e-04  iters = 2
>     tol = 1.0e-04                                            
>                    min(eta) =  -5.94      
Iteration 5:   deviance = 1.6086e+08  eps = 3.38e-06  iters = 2
>     tol = 1.0e-04                                            
>                    min(eta) =  -6.50      
Iteration 6:   deviance = 1.6086e+08  eps = 5.80e-08  iters = 2
>     tol = 1.0e-05                                            
>                    min(eta) =  -6.73   S  
Iteration 7:   deviance = 1.6086e+08  eps = 6.22e-10  iters = 2
>     tol = 1.0e-07                                            
>                    min(eta) =  -6.76   S O
---------------------------------------------------------------
> ---------------------------------------------
(legend: p: exact partial-out   s: exact solver   h: step-halvi
> ng   o: epsilon below tolerance)
Converged in 7 iterations and 18 HDFE sub-iterations (tol = 1.0
> e-08)

HDFE PPML regression                              No. of obs   
>    =                                                         
>         331,655
Absorbing 2 HDFE groups                           Residual df  
>    =                                                         
>          57,484
Statistics robust to heteroskedasticity           Wald chi2(8) 
>    =                                                         
>          369.69
Deviance             =  160864664.2               Prob > chi2  
>    =                                                         
>          0.0000
Log pseudolikelihood = -82077725.61               Pseudo R2    
>    =                                                         
>          0.9826

Number of clusters (flow_id)=     57,485
                           (Std. err. adjusted for 57,485 clust
> ers in flow_id)
---------------------------------------------------------------
> ---------------
             |               Robust
         agi | Coefficient  std. err.      z    P>|z|     [95% 
> con                                                          
>    f. interval]
-------------+-------------------------------------------------
> ---------------
1.out_mult~t |   .1613764   .0553811     2.91   0.004     .0528
> 315                                                          
>        .2699214
1.in_multn~t |  -.1838134   .0212845    -8.64   0.000    -.2255
> 303                                                          
>       -.1420964
     unemp_o |   .0423607   .0054837     7.72   0.000     .0316
> 128                                                          
>        .0531085
     unemp_d |  -.0442395   .0038193   -11.58   0.000    -.0517
> 253                                                          
>       -.0367538
       pop_o |  -2.80e-07   6.37e-08    -4.39   0.000    -4.05e
> -07                                                          
>       -1.55e-07
       pop_d |   4.64e-07   7.73e-08     6.00   0.000     3.12e
> -07                                                          
>        6.15e-07
per_capita~o |   8.22e-06   9.26e-07     8.88   0.000     6.41e
> -06                                                          
>          .00001
per_capita~d |   1.41e-06   8.43e-07     1.67   0.095    -2.46e
> -07                                                          
>        3.06e-06
       _cons |   9.822877   .1427415    68.82   0.000     9.543
> 109                                                          
>        10.10264
---------------------------------------------------------------
> ---------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
        year |         7           1           6     |
     flow_id |     57485       57485           0    *|
-----------------------------------------------------+
* = FE nested within cluster; treated as redundant for DoF comp
> utation
(dropped 10447 observations that are either singletons or separ
> ated by a fixed effect)
Iteration 1:   deviance = 4.1413e+08  eps = .         iters = 4
>     tol = 1.0e-04                                            
>                    min(eta) =  -3.29  P   
Iteration 2:   deviance = 1.7950e+08  eps = 1.31e+00  iters = 3
>     tol = 1.0e-04                                            
>                    min(eta) =  -4.22      
Iteration 3:   deviance = 1.7046e+08  eps = 5.30e-02  iters = 3
>     tol = 1.0e-04                                            
>                    min(eta) =  -5.14      
Iteration 4:   deviance = 1.7033e+08  eps = 7.55e-04  iters = 2
>     tol = 1.0e-04                                            
>                    min(eta) =  -5.94      
Iteration 5:   deviance = 1.7033e+08  eps = 3.11e-06  iters = 2
>     tol = 1.0e-04                                            
>                    min(eta) =  -6.50      
Iteration 6:   deviance = 1.7033e+08  eps = 5.48e-08  iters = 2
>     tol = 1.0e-05                                            
>                    min(eta) =  -6.73   S  
Iteration 7:   deviance = 1.7033e+08  eps = 5.88e-10  iters = 2
>     tol = 1.0e-07                                            
>                    min(eta) =  -6.76   S O
---------------------------------------------------------------
> ---------------------------------------------
(legend: p: exact partial-out   s: exact solver   h: step-halvi
> ng   o: epsilon below tolerance)
Converged in 7 iterations and 18 HDFE sub-iterations (tol = 1.0
> e-08)

HDFE PPML regression                              No. of obs   
>    =                                                         
>         331,655
Absorbing 2 HDFE groups                           Residual df  
>    =                                                         
>          57,484
Statistics robust to heteroskedasticity           Wald chi2(2) 
>    =                                                         
>           83.73
Deviance             =  170331590.8               Prob > chi2  
>    =                                                         
>          0.0000
Log pseudolikelihood = -86811188.95               Pseudo R2    
>    =                                                         
>          0.9816

Number of clusters (flow_id)=     57,485
                           (Std. err. adjusted for 57,485 clust
> ers in flow_id)
---------------------------------------------------------------
> ---------------
             |               Robust
         agi | Coefficient  std. err.      z    P>|z|     [95% 
> con                                                          
>    f. interval]
-------------+-------------------------------------------------
> ---------------
1.out_mult~t |   .1691276   .0589561     2.87   0.004     .0535
> 757                                                          
>        .2846795
1.in_multn~t |  -.1838849     .02136    -8.61   0.000    -.2257
> 498                                                          
>         -.14202
       _cons |     10.648    .000114  9.3e+04   0.000     10.64
> 778                                                          
>        10.64822
---------------------------------------------------------------
> ---------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
        year |         7           1           6     |
     flow_id |     57485       57485           0    *|
-----------------------------------------------------+
* = FE nested within cluster; treated as redundant for DoF comp
> utation
file
    C:/Users/ji252/Documents/GitHub/multnomah-county-tax/resu
    > lts/flows/fig_multnomah_post_agi.png saved as PNG
    format
1001 1003 1005 1007 1009 1011 1013 1015 1017 1019 1021 1023 102
> 5 1027 1029 1031 1033 1035 1037 1039 1041 1043 1045 1047 1049
>  1051 1053 1055 1057 1059 1061 1063 1065 1067 1069 1071 1073 
> 1075 1077 1079 1081 1083 1085 1087 1089 1091 1093 1095 1097 1
> 099 1101 1103 1105 1107 1109 1111 1113 1115 1117 1119 1121 11
> 23 1125 1127 1129 1131 1133 4001 4003 4005 4007 4009 4011 401
> 2 4013 4015 4017 4019 4021 4023 4025 4027 5001 5003 5005 5007
>  5009 5011 5013 5015 5017 5019 5021 5023 5025 5027 5029 5031 
> 5033 5035 5037 5039 5041 5043 5045 5047 5049 5051 5053 5055 5
> 057 5059 5061 5063 5065 5067 5069 5071 5073 5075 5077 5079 50
> 81 5083 5085 5087 5089 5091 5093 5095 5097 5099 5101 5103 510
> 5 5107 5109 5111 5113 5115 5117 5119 5121 5123 5125 5127 5129
>  5131 5133 5135 5137 5139 5141 5143 5145 5147 5149 6001 6005 
> 6007 6009 6011 6013 6015 6017 6019 6021 6023 6025 6027 6029 6
> 031 6033 6035 6037 6039 6041 6043 6045 6047 6049 6051 6053 60
> 55 6057 6059 6061 6063 6065 6067 6069 6071 6073 6075 6077 607
> 9 6081 6083 6085 6087 6089 6091 6093 6095 6097 6099 6101 6103
>  6105 6107 6109 6111 6113 6115 8001 8003 8005 8007 8011 8013 
> 8014 8015 8019 8021 8023 8025 8027 8029 8031 8035 8037 8039 8
> 041 8043 8045 8047 8049 8051 8055 8059 8065 8067 8069 8071 80
> 73 8075 8077 8081 8083 8085 8087 8089 8091 8093 8095 8097 809
> 9 8101 8103 8105 8107 8109 8113 8117 8119 8121 8123 8125 1000
> 1 10003 10005 11001 12001 12003 12005 12007 12009 12011 12013
>  12015 12017 12019 12021 12023 12027 12029 12031 12033 12035 
> 12037 12039 12041 12043 12045 12047 12049 12051 12053 12055 1
> 2057 12059 12061 12063 12065 12067 12069 12071 12073 12075 12
> 077 12079 12081 12083 12085 12086 12087 12089 12091 12093 120
> 95 12097 12099 12101 12103 12105 12107 12109 12111 12113 1211
> 5 12117 12119 12121 12123 12125 12127 12129 12131 12133 13001
>  13003 13005 13007 13009 13011 13013 13015 13017 13019 13021 
> 13023 13025 13027 13029 13031 13033 13035 13037 13039 13043 1
> 3045 13047 13049 13051 13053 13055 13057 13059 13063 13065 13
> 067 13069 13071 13073 13075 13077 13079 13081 13083 13085 130
> 87 13089 13091 13093 13095 13097 13099 13101 13103 13105 1310
> 7 13109 13111 13113 13115 13117 13119 13121 13123 13127 13129
>  13131 13133 13135 13137 13139 13141 13143 13145 13147 13149 
> 13151 13153 13155 13157 13159 13161 13163 13165 13167 13169 1
> 3171 13173 13175 13177 13179 13181 13183 13185 13187 13189 13
> 191 13193 13195 13197 13199 13201 13205 13207 13209 13211 132
> 13 13215 13217 13219 13221 13223 13225 13227 13229 13231 1323
> 3 13235 13237 13239 13241 13243 13245 13247 13249 13251 13253
>  13255 13257 13259 13261 13263 13267 13269 13271 13273 13275 
> 13277 13279 13281 13283 13285 13287 13289 13291 13293 13295 1
> 3297 13299 13301 13303 13305 13309 13311 13313 13315 13317 13
> 319 13321 16001 16003 16005 16007 16009 16011 16013 16015 160
> 17 16019 16021 16027 16029 16031 16035 16039 16041 16043 1604
> 5 16047 16049 16051 16053 16055 16057 16059 16061 16063 16065
>  16067 16069 16071 16073 16075 16077 16079 16081 16083 16085 
> 16087 17001 17003 17005 17007 17009 17011 17013 17015 17017 1
> 7019 17021 17023 17025 17027 17029 17031 17033 17035 17037 17
> 039 17041 17043 17045 17047 17049 17051 17053 17055 17057 170
> 59 17061 17063 17065 17067 17069 17071 17073 17075 17077 1707
> 9 17081 17083 17085 17087 17089 17091 17093 17095 17097 17099
>  17101 17103 17105 17107 17109 17111 17113 17115 17117 17119 
> 17121 17123 17125 17127 17129 17131 17133 17135 17137 17139 1
> 7141 17143 17145 17147 17149 17151 17153 17155 17157 17159 17
> 161 17163 17165 17167 17169 17171 17173 17175 17177 17179 171
> 81 17183 17185 17187 17189 17191 17193 17195 17197 17199 1720
> 1 17203 18001 18003 18005 18007 18009 18011 18013 18015 18017
>  18019 18021 18023 18025 18027 18029 18031 18033 18035 18037 
> 18039 18041 18043 18045 18047 18049 18051 18053 18055 18057 1
> 8059 18061 18063 18065 18067 18069 18071 18073 18075 18077 18
> 079 18081 18083 18085 18087 18089 18091 18093 18095 18097 180
> 99 18101 18103 18105 18107 18109 18111 18113 18115 18117 1811
> 9 18121 18123 18125 18127 18129 18131 18133 18135 18137 18139
>  18141 18143 18145 18147 18149 18151 18153 18155 18157 18159 
> 18161 18163 18165 18167 18169 18171 18173 18175 18177 18179 1
> 8181 18183 19001 19003 19005 19007 19009 19011 19013 19015 19
> 017 19019 19021 19023 19025 19027 19029 19031 19033 19035 190
> 37 19039 19041 19043 19045 19047 19049 19051 19053 19055 1905
> 7 19059 19061 19063 19065 19067 19069 19071 19073 19075 19077
>  19079 19081 19083 19085 19087 19089 19091 19093 19095 19097 
> 19099 19101 19103 19105 19107 19109 19111 19113 19115 19117 1
> 9119 19121 19123 19125 19127 19129 19131 19133 19135 19137 19
> 139 19141 19143 19145 19147 19149 19151 19153 19155 19157 191
> 59 19161 19163 19165 19167 19169 19171 19173 19175 19177 1917
> 9 19181 19183 19185 19187 19189 19191 19193 19195 19197 20001
>  20003 20005 20009 20011 20013 20015 20017 20019 20021 20027 
> 20029 20031 20035 20037 20041 20043 20045 20051 20053 20055 2
> 0057 20059 20061 20067 20069 20073 20077 20079 20085 20087 20
> 091 20093 20095 20099 20103 20105 20107 20109 20111 20113 201
> 15 20117 20119 20121 20125 20131 20133 20139 20143 20145 2014
> 9 20151 20155 20157 20159 20161 20163 20165 20167 20169 20171
>  20173 20175 20177 20185 20191 20193 20195 20197 20201 20205 
> 20207 20209 21001 21003 21005 21007 21009 21011 21013 21015 2
> 1017 21019 21021 21023 21025 21027 21029 21031 21033 21035 21
> 037 21039 21041 21043 21045 21047 21049 21051 21053 21055 210
> 57 21059 21061 21063 21065 21067 21069 21071 21073 21075 2107
> 7 21079 21081 21083 21085 21087 21089 21091 21093 21095 21097
>  21099 21101 21103 21105 21107 21109 21111 21113 21115 21117 
> 21119 21121 21123 21125 21127 21129 21131 21133 21135 21137 2
> 1139 21141 21143 21145 21147 21149 21151 21153 21155 21157 21
> 159 21161 21163 21165 21167 21169 21171 21173 21175 21177 211
> 79 21181 21183 21185 21187 21191 21193 21195 21197 21199 2120
> 3 21205 21207 21209 21211 21213 21215 21217 21219 21221 21223
>  21225 21227 21229 21231 21233 21235 21237 21239 22001 22003 
> 22005 22007 22009 22011 22013 22015 22017 22019 22021 22023 2
> 2025 22027 22029 22031 22033 22035 22037 22039 22041 22043 22
> 045 22047 22049 22051 22053 22055 22057 22059 22061 22063 220
> 65 22067 22069 22071 22073 22075 22077 22079 22081 22083 2208
> 5 22087 22089 22091 22093 22095 22097 22099 22101 22103 22105
>  22109 22111 22113 22115 22117 22119 22121 22123 22125 22127 
> 23001 23003 23005 23007 23009 23011 23013 23015 23017 23019 2
> 3021 23023 23025 23027 23029 23031 24001 24003 24005 24009 24
> 011 24013 24015 24017 24019 24021 24023 24025 24027 24029 240
> 31 24033 24035 24037 24039 24041 24043 24045 24047 24510 2500
> 1 25003 25005 25007 25009 25011 25013 25015 25017 25019 25021
>  25023 25025 25027 26001 26003 26005 26007 26009 26011 26013 
> 26015 26017 26019 26021 26023 26025 26027 26029 26031 26033 2
> 6035 26037 26039 26041 26043 26045 26047 26049 26051 26053 26
> 055 26057 26059 26061 26063 26065 26067 26069 26071 26073 260
> 75 26077 26079 26081 26083 26085 26087 26089 26091 26093 2609
> 7 26099 26101 26103 26105 26107 26109 26111 26113 26115 26117
>  26119 26121 26123 26125 26127 26129 26133 26135 26137 26139 
> 26141 26143 26145 26147 26149 26151 26153 26155 26157 26159 2
> 6161 26163 26165 27001 27003 27005 27007 27009 27011 27013 27
> 015 27017 27019 27021 27023 27025 27027 27029 27031 27033 270
> 35 27037 27039 27041 27043 27045 27047 27049 27051 27053 2705
> 5 27057 27059 27061 27063 27065 27067 27071 27073 27075 27077
>  27079 27081 27083 27085 27087 27089 27091 27093 27095 27097 
> 27099 27101 27103 27105 27107 27109 27111 27113 27115 27117 2
> 7119 27121 27123 27125 27127 27129 27131 27133 27135 27137 27
> 139 27141 27143 27145 27147 27149 27151 27153 27157 27159 271
> 61 27163 27165 27167 27169 27171 27173 28001 28003 28005 2800
> 7 28009 28011 28013 28015 28017 28019 28021 28023 28025 28027
>  28029 28031 28033 28035 28037 28039 28041 28043 28045 28047 
> 28049 28051 28053 28057 28059 28061 28063 28065 28067 28069 2
> 8071 28073 28075 28077 28079 28081 28083 28085 28087 28089 28
> 091 28093 28095 28097 28099 28101 28103 28105 28107 28109 281
> 11 28113 28115 28117 28119 28121 28123 28125 28127 28129 2813
> 1 28133 28135 28137 28139 28141 28143 28145 28147 28149 28151
>  28153 28155 28157 28159 28161 28163 29001 29003 29007 29009 
> 29011 29013 29015 29017 29019 29021 29023 29025 29027 29029 2
> 9031 29033 29035 29037 29039 29041 29043 29045 29047 29049 29
> 051 29053 29055 29057 29059 29061 29063 29065 29067 29069 290
> 71 29073 29075 29077 29079 29081 29083 29085 29087 29089 2909
> 1 29093 29095 29097 29099 29101 29103 29105 29107 29109 29111
>  29113 29115 29117 29119 29121 29123 29125 29127 29131 29133 
> 29135 29137 29139 29141 29143 29145 29147 29149 29151 29153 2
> 9155 29157 29159 29161 29163 29165 29167 29169 29171 29173 29
> 175 29177 29179 29181 29183 29185 29186 29187 29189 29195 291
> 97 29199 29201 29203 29205 29207 29209 29211 29213 29215 2921
> 7 29219 29221 29223 29225 29229 29510 30001 30003 30005 30007
>  30009 30013 30015 30017 30021 30023 30027 30029 30031 30035 
> 30039 30041 30043 30047 30049 30051 30053 30057 30061 30063 3
> 0065 30067 30073 30077 30081 30083 30085 30087 30089 30093 30
> 095 30097 30099 30101 30105 30111 31001 31003 31011 31013 310
> 19 31021 31023 31025 31027 31033 31035 31037 31039 31041 3104
> 3 31045 31047 31051 31053 31055 31059 31061 31063 31065 31067
>  31073 31079 31081 31087 31089 31093 31095 31097 31099 31101 
> 31105 31107 31109 31111 31119 31121 31123 31125 31127 31131 3
> 1137 31139 31141 31143 31145 31147 31151 31153 31155 31157 31
> 159 31161 31163 31167 31169 31173 31177 31179 31181 31185 320
> 01 32003 32005 32007 32011 32013 32015 32017 32019 32021 3202
> 3 32027 32029 32031 32033 32510 33001 33003 33005 33007 33009
>  33011 33013 33015 33017 33019 34001 34003 34005 34007 34009 
> 34011 34013 34015 34017 34019 34021 34023 34025 34027 34029 3
> 4031 34033 34035 34037 34039 34041 35001 35005 35006 35007 35
> 009 35013 35015 35017 35019 35025 35027 35028 35029 35031 350
> 33 35035 35037 35039 35041 35043 35045 35047 35049 35051 3505
> 3 35055 35057 35061 36001 36003 36005 36007 36009 36011 36013
>  36015 36017 36019 36021 36023 36025 36027 36029 36031 36033 
> 36035 36037 36039 36041 36043 36045 36047 36049 36051 36053 3
> 6055 36057 36059 36061 36063 36065 36067 36069 36071 36073 36
> 075 36077 36079 36081 36083 36085 36087 36089 36091 36093 360
> 95 36097 36099 36101 36103 36105 36107 36109 36111 36113 3611
> 5 36117 36119 36121 36123 37001 37003 37005 37007 37009 37011
>  37013 37015 37017 37019 37021 37023 37025 37027 37029 37031 
> 37033 37035 37037 37039 37041 37043 37045 37047 37049 37051 3
> 7053 37055 37057 37059 37061 37063 37065 37067 37069 37071 37
> 073 37075 37077 37079 37081 37083 37085 37087 37089 37091 370
> 93 37095 37097 37099 37101 37103 37105 37107 37109 37111 3711
> 3 37115 37117 37119 37121 37123 37125 37127 37129 37131 37133
>  37135 37137 37139 37141 37143 37145 37147 37149 37151 37153 
> 37155 37157 37159 37161 37163 37165 37167 37169 37171 37173 3
> 7175 37177 37179 37181 37183 37185 37187 37189 37191 37193 37
> 195 37197 37199 38003 38005 38009 38013 38015 38017 38021 380
> 25 38029 38035 38041 38043 38045 38049 38053 38055 38057 3805
> 9 38061 38067 38071 38073 38075 38077 38079 38081 38085 38089
>  38093 38097 38099 38101 38105 39001 39003 39005 39007 39009 
> 39011 39013 39015 39017 39019 39021 39023 39025 39027 39029 3
> 9031 39033 39035 39037 39039 39041 39043 39045 39047 39049 39
> 051 39053 39055 39057 39059 39061 39063 39065 39067 39069 390
> 71 39073 39075 39077 39079 39081 39083 39085 39087 39089 3909
> 1 39093 39095 39097 39099 39101 39103 39105 39107 39109 39111
>  39113 39115 39117 39119 39121 39123 39125 39127 39129 39131 
> 39133 39135 39137 39139 39141 39143 39145 39147 39149 39151 3
> 9153 39155 39157 39159 39161 39163 39165 39167 39169 39171 39
> 173 39175 40001 40003 40005 40007 40009 40011 40013 40015 400
> 17 40019 40021 40023 40027 40029 40031 40033 40035 40037 4003
> 9 40041 40043 40045 40047 40049 40051 40053 40055 40059 40061
>  40063 40065 40067 40069 40071 40073 40075 40077 40079 40081 
> 40083 40085 40087 40089 40091 40093 40095 40097 40099 40101 4
> 0103 40105 40107 40109 40111 40113 40115 40117 40119 40121 40
> 123 40125 40127 40129 40131 40133 40135 40137 40139 40141 401
> 43 40145 40147 40149 40151 40153 41001 41003 41005 41007 4100
> 9 41011 41013 41015 41017 41019 41025 41027 41029 41031 41033
>  41035 41037 41039 41041 41043 41045 41047 41049 41051 41053 
> 41057 41059 41061 41063 41065 41067 41071 42001 42003 42005 4
> 2007 42009 42011 42013 42015 42017 42019 42021 42023 42025 42
> 027 42029 42031 42033 42035 42037 42039 42041 42043 42045 420
> 47 42049 42051 42053 42055 42057 42059 42061 42063 42065 4206
> 7 42069 42071 42073 42075 42077 42079 42081 42083 42085 42087
>  42089 42091 42093 42095 42097 42099 42101 42103 42105 42107 
> 42109 42111 42113 42115 42117 42119 42121 42123 42125 42127 4
> 2129 42131 42133 44001 44003 44005 44007 44009 45001 45003 45
> 005 45007 45009 45011 45013 45015 45017 45019 45021 45023 450
> 25 45027 45029 45031 45033 45035 45037 45039 45041 45043 4504
> 5 45047 45049 45051 45053 45055 45057 45059 45061 45063 45065
>  45067 45069 45071 45073 45075 45077 45079 45081 45083 45085 
> 45087 45089 45091 46003 46005 46007 46009 46011 46013 46015 4
> 6019 46023 46025 46027 46029 46033 46035 46037 46039 46041 46
> 045 46047 46051 46057 46061 46065 46067 46071 46077 46079 460
> 81 46083 46085 46087 46089 46091 46093 46099 46101 46102 4610
> 3 46109 46111 46115 46117 46121 46125 46127 46135 47001 47003
>  47005 47007 47009 47011 47013 47015 47017 47019 47021 47023 
> 47025 47027 47029 47031 47033 47035 47037 47039 47041 47043 4
> 7045 47047 47049 47051 47053 47055 47057 47059 47061 47063 47
> 065 47067 47069 47071 47073 47075 47077 47079 47081 47083 470
> 85 47087 47089 47091 47093 47095 47097 47099 47101 47103 4710
> 5 47107 47109 47111 47113 47115 47117 47119 47121 47123 47125
>  47127 47129 47131 47133 47137 47139 47141 47143 47145 47147 
> 47149 47151 47153 47155 47157 47159 47161 47163 47165 47167 4
> 7169 47171 47173 47175 47177 47179 47181 47183 47185 47187 47
> 189 48001 48003 48005 48007 48009 48011 48013 48015 48017 480
> 19 48021 48023 48025 48027 48029 48031 48035 48037 48039 4804
> 1 48043 48047 48049 48051 48053 48055 48057 48059 48061 48063
>  48065 48067 48069 48071 48073 48077 48079 48081 48083 48085 
> 48089 48091 48093 48095 48097 48099 48103 48105 48107 48111 4
> 8113 48115 48117 48119 48121 48123 48127 48129 48131 48133 48
> 135 48139 48141 48143 48145 48147 48149 48151 48153 48157 481
> 59 48161 48163 48165 48167 48169 48171 48175 48177 48179 4818
> 1 48183 48185 48187 48189 48193 48197 48199 48201 48203 48205
>  48207 48209 48213 48215 48217 48219 48221 48223 48225 48227 
> 48229 48231 48233 48235 48237 48239 48241 48245 48247 48249 4
> 8251 48253 48255 48257 48259 48265 48267 48273 48277 48279 48
> 281 48283 48285 48287 48289 48291 48293 48295 48297 48299 483
> 03 48305 48307 48309 48313 48315 48317 48321 48323 48325 4832
> 9 48331 48333 48335 48337 48339 48341 48343 48347 48349 48351
>  48353 48355 48357 48359 48361 48363 48365 48367 48369 48371 
> 48373 48375 48377 48379 48381 48383 48387 48389 48391 48395 4
> 8397 48399 48401 48403 48405 48407 48409 48413 48415 48417 48
> 419 48423 48425 48427 48429 48435 48437 48439 48441 48445 484
> 49 48451 48453 48455 48457 48459 48461 48463 48465 48467 4846
> 9 48471 48473 48475 48477 48479 48481 48483 48485 48487 48489
>  48491 48493 48495 48497 48499 48501 48503 48505 48507 49001 
> 49003 49005 49007 49011 49013 49015 49017 49019 49021 49023 4
> 9025 49027 49029 49035 49037 49039 49041 49043 49045 49047 49
> 049 49051 49053 49057 50001 50003 50005 50007 50009 50011 500
> 13 50015 50017 50019 50021 50023 50025 50027 51001 51007 5100
> 9 51011 51013 51019 51021 51023 51025 51027 51029 51033 51036
>  51037 51041 51043 51047 51049 51051 51057 51061 51063 51065 
> 51067 51071 51073 51075 51077 51079 51083 51085 51087 51093 5
> 1097 51099 51101 51103 51105 51107 51109 51111 51113 51115 51
> 117 51119 51125 51127 51131 51133 51135 51137 51139 51141 511
> 45 51147 51155 51157 51159 51167 51169 51171 51173 51179 5118
> 1 51183 51185 51187 51193 51197 51510 51550 51650 51700 51710
>  51740 51760 51770 51800 51810 53001 53003 53005 53007 53009 
> 53011 53013 53015 53017 53019 53021 53025 53027 53029 53031 5
> 3033 53035 53037 53039 53041 53043 53045 53047 53049 53051 53
> 053 53055 53057 53059 53061 53063 53065 53067 53069 53071 530
> 73 53075 53077 54001 54003 54005 54007 54009 54011 54013 5401
> 5 54017 54019 54021 54023 54025 54027 54029 54031 54033 54035
>  54037 54039 54041 54043 54045 54047 54049 54051 54053 54055 
> 54057 54059 54061 54063 54065 54067 54069 54071 54073 54075 5
> 4077 54079 54081 54083 54085 54087 54089 54091 54093 54095 54
> 097 54099 54101 54103 54105 54107 54109 55001 55003 55005 550
> 07 55009 55011 55013 55015 55017 55019 55021 55023 55025 5502
> 7 55029 55031 55033 55035 55037 55039 55041 55043 55045 55047
>  55049 55051 55053 55055 55057 55059 55061 55063 55065 55067 
> 55069 55071 55073 55075 55077 55078 55079 55081 55083 55085 5
> 5087 55089 55091 55093 55095 55097 55099 55101 55103 55105 55
> 107 55109 55111 55113 55115 55117 55119 55121 55123 55125 551
> 27 55129 55131 55133 55135 55137 55139 55141 56001 56003 5600
> 5 56007 56009 56011 56013 56015 56019 56021 56023 56025 56029
>  56031 56033 56035 56037 56039 56041 56043 56045
Running regressions for 2849 counties (all sample)...
(file C:\Users\ji252\AppData\Local\Temp\ST_828_000006.tmp not
    found)
Warning: Regression failed for fips 1023
Processing county 100 of 2849 (fips = 5035)...
Warning: Regression failed for fips 6049
Processing county 200 of 2849 (fips = 6087)...
Warning: Regression failed for fips 6091
Warning: Regression failed for fips 8023
Warning: Regression failed for fips 8025
Warning: Regression failed for fips 8095
Warning: Regression failed for fips 8099
Warning: Regression failed for fips 8113
Warning: Regression failed for fips 8121
Warning: Regression failed for fips 8125
Processing county 300 of 2849 (fips = 12057)...
Warning: Regression failed for fips 13007
Warning: Regression failed for fips 13037
Warning: Regression failed for fips 13065
Processing county 400 of 2849 (fips = 13127)...
Warning: Regression failed for fips 13243
Warning: Regression failed for fips 13259
Warning: Regression failed for fips 13317
Warning: Regression failed for fips 16007
Processing county 500 of 2849 (fips = 16011)...
Warning: Regression failed for fips 16071
Warning: Regression failed for fips 17013
Warning: Regression failed for fips 17069
Processing county 600 of 2849 (fips = 17131)...
Warning: Regression failed for fips 17151
Warning: Regression failed for fips 17153
Processing county 700 of 2849 (fips = 18127)...
Warning: Regression failed for fips 19003
Warning: Regression failed for fips 19009
Warning: Regression failed for fips 19093
Processing county 800 of 2849 (fips = 19143)...
Warning: Regression failed for fips 19159
Warning: Regression failed for fips 20019
Warning: Regression failed for fips 20067
Warning: Regression failed for fips 20105
Warning: Regression failed for fips 20109
Warning: Regression failed for fips 20119
Warning: Regression failed for fips 20165
Warning: Regression failed for fips 20171
Warning: Regression failed for fips 20185
Warning: Regression failed for fips 20193
Warning: Regression failed for fips 20195
Warning: Regression failed for fips 20201
Processing county 900 of 2849 (fips = 20207)...
Warning: Regression failed for fips 20207
Warning: Regression failed for fips 21057
Warning: Regression failed for fips 21129
Warning: Regression failed for fips 21159
Processing county 1000 of 2849 (fips = 21199)...
Warning: Regression failed for fips 21237
Processing county 1100 of 2849 (fips = 24003)...
Processing county 1200 of 2849 (fips = 26129)...
Warning: Regression failed for fips 26135
Warning: Regression failed for fips 26153
Warning: Regression failed for fips 27011
Warning: Regression failed for fips 27077
Warning: Regression failed for fips 27149
Processing county 1300 of 2849 (fips = 27169)...
Warning: Regression failed for fips 28053
Warning: Regression failed for fips 28125
Warning: Regression failed for fips 29033
Processing county 1400 of 2849 (fips = 29035)...
Warning: Regression failed for fips 29075
Warning: Regression failed for fips 29081
Warning: Regression failed for fips 29103
Warning: Regression failed for fips 29171
Warning: Regression failed for fips 29179
Warning: Regression failed for fips 29199
Processing county 1500 of 2849 (fips = 30009)...
Warning: Regression failed for fips 30051
Warning: Regression failed for fips 30085
Warning: Regression failed for fips 30097
Warning: Regression failed for fips 30101
Warning: Regression failed for fips 30105
Warning: Regression failed for fips 31011
Warning: Regression failed for fips 31027
Warning: Regression failed for fips 31033
Warning: Regression failed for fips 31045
Warning: Regression failed for fips 31061
Warning: Regression failed for fips 31063
Warning: Regression failed for fips 31065
Warning: Regression failed for fips 31073
Warning: Regression failed for fips 31089
Warning: Regression failed for fips 31105
Warning: Regression failed for fips 31147
Warning: Regression failed for fips 31161
Warning: Regression failed for fips 31163
Warning: Regression failed for fips 31169
Warning: Regression failed for fips 31173
Processing county 1600 of 2849 (fips = 31185)...
Warning: Regression failed for fips 32011
Warning: Regression failed for fips 32021
Warning: Regression failed for fips 36041
Processing county 1700 of 2849 (fips = 36049)...
Warning: Regression failed for fips 37005
Warning: Regression failed for fips 37075
Warning: Regression failed for fips 37095
Processing county 1800 of 2849 (fips = 37125)...
Warning: Regression failed for fips 37177
Warning: Regression failed for fips 38013
Warning: Regression failed for fips 38021
Warning: Regression failed for fips 38041
Warning: Regression failed for fips 38043
Warning: Regression failed for fips 38045
Warning: Regression failed for fips 38085
Processing county 1900 of 2849 (fips = 39059)...
Warning: Regression failed for fips 40043
Warning: Regression failed for fips 40059
Processing county 2000 of 2849 (fips = 40087)...
Warning: Regression failed for fips 40151
Warning: Regression failed for fips 41025
Warning: Regression failed for fips 42023
Processing county 2100 of 2849 (fips = 42069)...
Warning: Regression failed for fips 46003
Warning: Regression failed for fips 46007
Warning: Regression failed for fips 46015
Warning: Regression failed for fips 46023
Warning: Regression failed for fips 46037
Processing county 2200 of 2849 (fips = 46041)...
Warning: Regression failed for fips 46041
Warning: Regression failed for fips 46051
Warning: Regression failed for fips 46071
Warning: Regression failed for fips 46085
Warning: Regression failed for fips 46089
Warning: Regression failed for fips 46091
Warning: Regression failed for fips 46109
Warning: Regression failed for fips 46111
Warning: Regression failed for fips 47067
Processing county 2300 of 2849 (fips = 47143)...
Warning: Regression failed for fips 48023
Warning: Regression failed for fips 48079
Warning: Regression failed for fips 48105
Warning: Regression failed for fips 48129
Warning: Regression failed for fips 48151
Processing county 2400 of 2849 (fips = 48171)...
Warning: Regression failed for fips 48197
Warning: Regression failed for fips 48247
Warning: Regression failed for fips 48267
Warning: Regression failed for fips 48295
Warning: Regression failed for fips 48333
Warning: Regression failed for fips 48357
Warning: Regression failed for fips 48383
Processing county 2500 of 2849 (fips = 48405)...
Warning: Regression failed for fips 48413
Warning: Regression failed for fips 48429
Warning: Regression failed for fips 48435
Warning: Regression failed for fips 48461
Warning: Regression failed for fips 48483
Warning: Regression failed for fips 49017
Processing county 2600 of 2849 (fips = 51043)...
Warning: Regression failed for fips 51051
Processing county 2700 of 2849 (fips = 53075)...
Warning: Regression failed for fips 54013
Warning: Regression failed for fips 54071
Warning: Regression failed for fips 54075
Processing county 2800 of 2849 (fips = 55085)...
Warning: Regression failed for fips 56043
file C:\Users\ji252\AppData\Local\Temp\ST_828_000006.tmp not found
r(601);

end of do-file

r(601);

. help postfile

.  postutil dir

. do "C:\Users\ji252\AppData\Local\Temp\STD828_000004.tmp"

. ** INSTALLATION 
. * net install github, from("https://haghish.github.io/github/
> ")
. * github install haghish/rcall, stable
. * ssc install ftools
. * ssc install reghdfe
. * ssc install fre 
. * ssc install coefplot
. * ssc install sdid 
. * ssc install estout 
. * ssc install sdid_event
. * ssc install geodist
. ** net install parallel, from(https://raw.github.com/gvegayon
> /parallel/stable/) replace
. ** mata mata mlib index
. 
. ** Preliminaries 
. capture log close 
