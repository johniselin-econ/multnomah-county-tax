----------------------------------------------------------------------
      name:  log_02
       log:  C:/Users/ji252/Documents/GitHub/multnomah-county-tax/code
> /logs/02_log_did_2026-02-01.log
  log type:  text
 opened on:   4 Feb 2026, 08:24:58

. 
. 
. ********************************************************************
> ************
. ** LOAD AND PREPARE DATA
. ********************************************************************
> ************
. 
. ** Load ACS migration data
. use "${data}working/acs_migration_file", replace

. 
. ** Sample restrictions
. drop if year == 2015                                    // Sample: 2
> 016-2024
(2,334,973 observations deleted)

. drop if qmigplc1 == 4                                   // Error in 
> migration place
(401,283 observations deleted)

. drop if inlist(state_fips_o, 2, 15)     // Alaska and Hawaii
(137,699 observations deleted)

. drop if inlist(state_fips_d, 2, 15)     // Alaska and Hawaii
(3,633 observations deleted)

. 
. ********************************************************************
> ************
. ** DEFINE SAMPLES AND TREATMENT
. ********************************************************************
> ************
. 
. ** Multnomah county indicators
. gen multnomah_o = (state_fips_o == 41 & county_fips_o == 51)

. gen multnomah_d = (state_fips_d == 41 & county_fips_d == 51)

. 
. ** Analysis samples
. gen sample_1 = (multnomah_o == 1)       // Multnomah in origin (out-
> migration)

. gen sample_2 = (multnomah_o != 1) &     /// Not Multnomah in origin
>                            inlist(state_fips_o, 6, 41, 53)  // CA, O
> R, WA (in-migration)

. gen sample_3 = (multnomah_o != 1)               // Not Multnomah in 
> origin

. 
. label var sample_1 "Out-migration Sample"

. label var sample_2 "In-migration Sample (West Coast)"

. label var sample_3 "In-migration Sample (Lower 48 + DC)"

. 
. ** Outcome variables (scaled to percentages)
. gen out_1 = (same_county == 0) * 100

. label var out_1 "Moved out of Multnomah (%)"

. 
. gen out_2 = (multnomah_d == 1) * 100

. label var out_2 "Moved to Multnomah (%)"

. 
. ** Treatment variables
. gen post = year > 2020

. label var post "Post-2020"

. 
. gen high_ed = educd >= 101

. label var high_ed "College Degree"

. 
. gen treated = high_ed * post

. label var treated "College Degree × Post"

. 
. ********************************************************************
> ************
. ** COVARIATE CATEGORIES
. ********************************************************************
> ************
. 
. ** Age categories
. recode age ///
>     (18/24   = 1 "18-24") ///
>     (25/44   = 2 "25-44") ///
>     (45/64   = 3 "45-64") ///
>     (65/max  = 4 "65+"), ///
>     gen(cat_age)
(21,137,449 differences between age and cat_age)

. label var cat_age "Age categories"

. 
. ** Sex
. gen cat_sex = (sex == 2)

. label var cat_sex "Female indicator"

. label define lb_cat_sex 0 "Male" 1 "Female", replace

. label values cat_sex lb_cat_sex

. 
. ** Marital status
. recode marst ///
>     (1       = 1 "Married") ///
>     (2/3     = 2 "Separated") ///
>     (4/5     = 3 "Divorced / Widowed") ///
>     (6       = 4 "Single"), ///
>     gen(cat_married)
(9,179,293 differences between marst and cat_married)

. label var cat_married "Marriage categories"

. 
. ** Number of children
. recode nchild ///
>     (0       = 0 "0 Children") ///
>     (1       = 1 "1 Child") ///
>     (2       = 2 "2 Children") ///
>     (3/max   = 3 "3+ Children"), ///
>     gen(cat_child)
(412,696 differences between nchild and cat_child)

. label var cat_child "Number of Children"

. 
. ** Age of youngest child
. recode yngch ///
>     (99      = 0 "No Children") ///
>     (0/4     = 1 "0-4") ///
>     (5/12    = 2 "5-12") ///
>     (13/17   = 3 "13-17")       ///
>         (18/max  = 4 "18+"), ///
>     gen(cat_yngch)
(20,719,194 differences between yngch and cat_yngch)

. label var cat_yngch "Age of youngest child"

. 
. ** Education categories
. recode educd ///
>     (min/61  = 1 "Less than HS") ///
>     (62/71   = 2 "HS Diploma") ///
>     (80/100  = 3 "Some College") ///
>     (101/max = 4 "College Degree"), ///
>     gen(cat_educ)
(21,137,449 differences between educd and cat_educ)

. label var cat_educ "Education categories"

. 
. ********************************************************************
> ************
. ** REGRESSION 1: DIFFERENCE-IN-DIFFERENCES
. ********************************************************************
> ************
. 
. ** Store estimates for coefficient plot
. estimates clear

. 
. ** Out-migration regression (Sample 1: Multnomah residents)
. reghdfe out_1 treated if sample_1 == 1 [fw = perwt],    ///
>         vce(robust) absorb(year cat_*)
(MWFE estimator converged in 8 iterations)

HDFE Linear regression                            Number of obs   =  5
> ,566,055
Absorbing 7 HDFE groups                           F(   1,5566029) =   
>   681.01
                                                  Prob > F        =   
>   0.0000
                                                  R-squared       =   
>   0.0201
                                                  Adj R-squared   =   
>   0.0201
                                                  Within R-sq.    =   
>   0.0001
                                                  Root MSE        =   
>  23.6719

----------------------------------------------------------------------
> --------
             |               Robust
       out_1 | Coefficient  std. err.      t    P>|t|     [95% conf. i
> nterval]
-------------+--------------------------------------------------------
> --------
     treated |   1.072092   .0410823    26.10   0.000     .9915724    
> 1.152612
       _cons |   5.861372   .0130135   450.41   0.000     5.835866    
> 5.886878
----------------------------------------------------------------------
> --------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
        year |         9           0           9     |
     cat_age |         4           1           3     |
     cat_sex |         2           1           1    ?|
 cat_married |         4           1           3    ?|
   cat_child |         4           1           3    ?|
   cat_yngch |         5           2           3    ?|
    cat_educ |         4           1           3    ?|
-----------------------------------------------------+
? = number of redundant parameters may be higher

. estimates store did_out

. 
. ** In-migration regression (Sample 2: CA/OR/WA residents)
. reghdfe out_2 treated if sample_2 == 1 [fw = perwt],    ///
>         vce(cluster fips_o) absorb(year fips_o cat_*)
(MWFE estimator converged in 8 iterations)

HDFE Linear regression                            Number of obs   =  3
> 34892853
Absorbing 8 HDFE groups                           F(   1,     54) =   
>     1.15
Statistics robust to heteroskedasticity           Prob > F        =   
>   0.2878
                                                  R-squared       =   
>   0.0059
                                                  Adj R-squared   =   
>   0.0059
                                                  Within R-sq.    =   
>   0.0000
Number of clusters (fips_o)  =         55         Root MSE        =   
>   2.5552

                                (Std. err. adjusted for 55 clusters in
>  fips_o)
----------------------------------------------------------------------
> --------
             |               Robust
       out_2 | Coefficient  std. err.      t    P>|t|     [95% conf. i
> nterval]
-------------+--------------------------------------------------------
> --------
     treated |  -.0116478   .0108499    -1.07   0.288    -.0334006    
>  .010105
       _cons |   .0675512   .0017098    39.51   0.000     .0641232    
> .0709792
----------------------------------------------------------------------
> --------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
        year |         9           1           8     |
      fips_o |        55          55           0    *|
     cat_age |         4           1           3     |
     cat_sex |         2           1           1    ?|
 cat_married |         4           1           3    ?|
   cat_child |         4           1           3    ?|
   cat_yngch |         5           2           3    ?|
    cat_educ |         4           1           3    ?|
-----------------------------------------------------+
? = number of redundant parameters may be higher
* = FE nested within cluster; treated as redundant for DoF computation

. estimates store did_in_west

. 
. ** In-migration regression (Sample 3: Lower 48 + DC residents)
. reghdfe out_2 treated if sample_3 == 1 [fw = perwt],    ///
>         vce(cluster fips_o) absorb(year fips_o cat_*)
(MWFE estimator converged in 8 iterations)

HDFE Linear regression                            Number of obs   = 21
> 65411070
Absorbing 8 HDFE groups                           F(   1,    527) =   
>     3.57
Statistics robust to heteroskedasticity           Prob > F        =   
>   0.0593
                                                  R-squared       =   
>   0.0041
                                                  Adj R-squared   =   
>   0.0041
                                                  Within R-sq.    =   
>   0.0000
Number of clusters (fips_o)  =        528         Root MSE        =   
>   1.2206

                               (Std. err. adjusted for 528 clusters in
>  fips_o)
----------------------------------------------------------------------
> --------
             |               Robust
       out_2 | Coefficient  std. err.      t    P>|t|     [95% conf. i
> nterval]
-------------+--------------------------------------------------------
> --------
     treated |  -.0039463   .0020878    -1.89   0.059    -.0080476    
> .0001551
       _cons |   .0155707   .0003219    48.37   0.000     .0149382    
> .0162031
----------------------------------------------------------------------
> --------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
        year |         9           1           8     |
      fips_o |       528         528           0    *|
     cat_age |         4           1           3     |
     cat_sex |         2           1           1    ?|
 cat_married |         4           1           3    ?|
   cat_child |         4           1           3    ?|
   cat_yngch |         5           2           3    ?|
    cat_educ |         4           1           3    ?|
-----------------------------------------------------+
? = number of redundant parameters may be higher
* = FE nested within cluster; treated as redundant for DoF computation

. estimates store did_in_48

. 
. ********************************************************************
> ************
. ** COEFFICIENT PLOT: DiD RESULTS
. ********************************************************************
> ************
. 
. coefplot        (did_out, label("Out-migration from Multnomah")     
>                                     ///
>                                 mc(sea) ciopts(lc(sea)))            
>                                                                     
> ///
>                         (did_in_west, label("In-migration to Multnom
> ah, West Coast Sample")     ///
>                                 mc(vermillion) ciopts(lc(vermillion)
> ))                                                                  
> ///
>                         (did_in_48, label("In-migration to Multnomah
> , Lower 48 + DC Sample")    ///
>                                 mc(turquoise) ciopts(lc(turquoise)))
> ,                           ///     
>         keep(treated)                                               
>                                             ///
>         ciopts(recast(rcap))                                        
>                                     ///
>         yline(0, lc(gs10) lp(dash))                                 
>                             ///
>         xline(0, lc(gs10) lp(dash))                                 
>                             ///
>         coeflabels(treated = "College Degree × Post")               
>            ///
>         ytitle("")                                                  
>                                                     ///
>         xtitle("Effect on Migration Rate (pp)")                     
>                     ///
>         legend(pos(6) rows(1))                                      
>                                     ///
>         title("Effect of Multnomah County Tax on Migration")        
>     ///
>         subtitle("Difference-in-Differences Estimates")             
>             ///
>         graphregion(color(white))

. 
. graph export "${results}did/fig_did_coefplot.png", replace
file
    C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/did
    > /fig_did_coefplot.png saved as PNG format

. 
. ********************************************************************
> ************
. ** REGRESSION 2: EVENT STUDY
. ********************************************************************
> ************
. 
. ** Create year × education interactions (base year = 2020)
. forvalues y = 2016/2024 {
  2.         gen x_high_ed_`y' = high_ed * (year == `y')
  3. }

. 
. ** Drop base year (2020)
. drop x_high_ed_2020

. 
. ** Out-migration event study
. reghdfe out_1 x_high_ed_* if sample_1 == 1 [fw = perwt],        ///
>         vce(robust) absorb(year cat_*)
(MWFE estimator converged in 8 iterations)

HDFE Linear regression                            Number of obs   =  5
> ,566,055
Absorbing 7 HDFE groups                           F(   8,5566022) =   
>   169.96
                                                  Prob > F        =   
>   0.0000
                                                  R-squared       =   
>   0.0202
                                                  Adj R-squared   =   
>   0.0202
                                                  Within R-sq.    =   
>   0.0002
                                                  Root MSE        =   
>  23.6705

----------------------------------------------------------------------
> --------
             |               Robust
       out_1 | Coefficient  std. err.      t    P>|t|     [95% conf. i
> nterval]
-------------+--------------------------------------------------------
> --------
x_high_~2016 |  -1.251195   .0866112   -14.45   0.000     -1.42095   -
> 1.081441
x_high_~2017 |   .1508566   .0840225     1.80   0.073    -.0138245    
> .3155378
x_high_~2018 |  -.3519477   .0843889    -4.17   0.000    -.5173469   -
> .1865485
x_high_~2019 |    -1.4744    .081263   -18.14   0.000    -1.633673   -
> 1.315128
x_high_~2021 |   .2793189   .0865104     3.23   0.001     .1097615    
> .4488762
x_high_~2022 |   .9652958   .0895739    10.78   0.000     .7897341    
> 1.140857
x_high_~2023 |   .3652317   .0841174     4.34   0.000     .2003646    
> .5300988
x_high_~2024 |   .3392074   .0816086     4.16   0.000     .1792574    
> .4991573
       _cons |   6.127382   .0271843   225.40   0.000     6.074101    
> 6.180662
----------------------------------------------------------------------
> --------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
        year |         9           0           9     |
     cat_age |         4           1           3     |
     cat_sex |         2           1           1    ?|
 cat_married |         4           1           3    ?|
   cat_child |         4           1           3    ?|
   cat_yngch |         5           2           3    ?|
    cat_educ |         4           1           3    ?|
-----------------------------------------------------+
? = number of redundant parameters may be higher

. estimates store es_out

. 
. ** In-migration event study
. reghdfe out_2 x_high_ed_* if sample_2 == 1 [fw = perwt],        ///
>         vce(cluster fips_o) absorb(year fips_o cat_*)
(MWFE estimator converged in 8 iterations)

HDFE Linear regression                            Number of obs   =  3
> 34892853
Absorbing 8 HDFE groups                           F(   8,     54) =   
>     1.54
Statistics robust to heteroskedasticity           Prob > F        =   
>   0.1660
                                                  R-squared       =   
>   0.0059
                                                  Adj R-squared   =   
>   0.0059
                                                  Within R-sq.    =   
>   0.0000
Number of clusters (fips_o)  =         55         Root MSE        =   
>   2.5551

                                (Std. err. adjusted for 55 clusters in
>  fips_o)
----------------------------------------------------------------------
> --------
             |               Robust
       out_2 | Coefficient  std. err.      t    P>|t|     [95% conf. i
> nterval]
-------------+--------------------------------------------------------
> --------
x_high_~2016 |  -.0151722   .0164689    -0.92   0.361    -.0481903    
> .0178459
x_high_~2017 |  -.0270404   .0194075    -1.39   0.169    -.0659502    
> .0118693
x_high_~2018 |   .0061742   .0194488     0.32   0.752    -.0328182    
> .0451666
x_high_~2019 |  -.0156866   .0163008    -0.96   0.340    -.0483677    
> .0169944
x_high_~2021 |   .0076713   .0263994     0.29   0.772    -.0452563    
> .0605988
x_high_~2022 |  -.0179686   .0156209    -1.15   0.255    -.0492866    
> .0133494
x_high_~2023 |  -.0358529   .0241395    -1.49   0.143    -.0842496    
> .0125439
x_high_~2024 |  -.0400979    .022644    -1.77   0.082    -.0854964    
> .0053005
       _cons |   .0709691   .0045389    15.64   0.000     .0618692    
>  .080069
----------------------------------------------------------------------
> --------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
        year |         9           1           8     |
      fips_o |        55          55           0    *|
     cat_age |         4           1           3     |
     cat_sex |         2           1           1    ?|
 cat_married |         4           1           3    ?|
   cat_child |         4           1           3    ?|
   cat_yngch |         5           2           3    ?|
    cat_educ |         4           1           3    ?|
-----------------------------------------------------+
? = number of redundant parameters may be higher
* = FE nested within cluster; treated as redundant for DoF computation

. estimates store es_in_west

. 
. ** In-migration event study
. reghdfe out_2 x_high_ed_* if sample_3 == 1 [fw = perwt],        ///
>         vce(cluster fips_o) absorb(year fips_o cat_*)
(MWFE estimator converged in 8 iterations)

HDFE Linear regression                            Number of obs   = 21
> 65411070
Absorbing 8 HDFE groups                           F(   8,    527) =   
>     1.03
Statistics robust to heteroskedasticity           Prob > F        =   
>   0.4084
                                                  R-squared       =   
>   0.0041
                                                  Adj R-squared   =   
>   0.0041
                                                  Within R-sq.    =   
>   0.0000
Number of clusters (fips_o)  =        528         Root MSE        =   
>   1.2206

                               (Std. err. adjusted for 528 clusters in
>  fips_o)
----------------------------------------------------------------------
> --------
             |               Robust
       out_2 | Coefficient  std. err.      t    P>|t|     [95% conf. i
> nterval]
-------------+--------------------------------------------------------
> --------
x_high_~2016 |  -.0035822   .0040768    -0.88   0.380    -.0115909    
> .0044265
x_high_~2017 |  -.0050871   .0040834    -1.25   0.213    -.0131088    
> .0029345
x_high_~2018 |  -.0001748   .0044816    -0.04   0.969    -.0089788    
> .0086292
x_high_~2019 |   -.003102   .0041816    -0.74   0.459    -.0113166    
> .0051125
x_high_~2021 |  -.0029467   .0049715    -0.59   0.554    -.0127132    
> .0068198
x_high_~2022 |  -.0031032   .0040424    -0.77   0.443    -.0110444    
> .0048379
x_high_~2023 |  -.0091547   .0050223    -1.82   0.069    -.0190208    
> .0007114
x_high_~2024 |  -.0097497   .0048412    -2.01   0.045      -.01926   -
> .0002393
       _cons |   .0163317   .0010359    15.77   0.000     .0142967    
> .0183667
----------------------------------------------------------------------
> --------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
        year |         9           1           8     |
      fips_o |       528         528           0    *|
     cat_age |         4           1           3     |
     cat_sex |         2           1           1    ?|
 cat_married |         4           1           3    ?|
   cat_child |         4           1           3    ?|
   cat_yngch |         5           2           3    ?|
    cat_educ |         4           1           3    ?|
-----------------------------------------------------+
? = number of redundant parameters may be higher
* = FE nested within cluster; treated as redundant for DoF computation

. estimates store es_in_48

. 
. ********************************************************************
> ************
. ** EVENT STUDY PLOTS
. ********************************************************************
> ************
. 
. ** Extract coefficients and create event study dataset
. preserve

.         clear

.         set obs 9
Number of observations (_N) was 0, now 9.

.         gen year = 2015 + _n

. 
.         ** Out-migration coefficients
.         gen out_coef = .
(9 missing values generated)

.         gen out_ci_lo = .
(9 missing values generated)

.         gen out_ci_hi = .
(9 missing values generated)

. 
.         ** In-migration coefficients
.         gen in_west_coef = .
(9 missing values generated)

.         gen in_west_ci_lo = .
(9 missing values generated)

.         gen in_west_ci_hi = .
(9 missing values generated)

.         
.         ** In-migration coefficients
.         gen in_48_coef = .
(9 missing values generated)

.         gen in_48_ci_lo = .
(9 missing values generated)

.         gen in_48_ci_hi = .
(9 missing values generated)

. 
.         ** Fill in coefficients (2020 = base year = 0)
.         foreach y in 2016 2017 2018 2019 2021 2022 2023 2024 {
  2. 
.                 ** Out-migration
.                 estimates restore es_out
  3.                 capture {
  4.                         replace out_coef = _b[x_high_ed_`y'] if y
> ear == `y'
  5.                         replace out_ci_lo = _b[x_high_ed_`y'] - 1
> .96 * _se[x_high_ed_`y'] if year == `y'
  6.                         replace out_ci_hi = _b[x_high_ed_`y'] + 1
> .96 * _se[x_high_ed_`y'] if year == `y'
  7.                 }
  8. 
.                 ** In-migration
.                 estimates restore es_in_west
  9.                 capture {
 10.                         replace in_west_coef = _b[x_high_ed_`y'] 
> if year == `y'
 11.                         replace in_west_ci_lo = _b[x_high_ed_`y']
>  - 1.96 * _se[x_high_ed_`y'] if year == `y'
 12.                         replace in_west_ci_hi = _b[x_high_ed_`y']
>  + 1.96 * _se[x_high_ed_`y'] if year == `y'
 13.                 }
 14.                 
.                 ** In-migration
.                 estimates restore es_in_48
 15.                 capture {
 16.                         replace in_48_coef = _b[x_high_ed_`y'] if
>  year == `y'
 17.                         replace in_48_ci_lo = _b[x_high_ed_`y'] -
>  1.96 * _se[x_high_ed_`y'] if year == `y'
 18.                         replace in_48_ci_hi = _b[x_high_ed_`y'] +
>  1.96 * _se[x_high_ed_`y'] if year == `y'
 19.                 }
 20.                 
.         }
(results es_out are active now)
(results es_in_west are active now)
(results es_in_48 are active now)
(results es_out are active now)
(results es_in_west are active now)
(results es_in_48 are active now)
(results es_out are active now)
(results es_in_west are active now)
(results es_in_48 are active now)
(results es_out are active now)
(results es_in_west are active now)
(results es_in_48 are active now)
(results es_out are active now)
(results es_in_west are active now)
(results es_in_48 are active now)
(results es_out are active now)
(results es_in_west are active now)
(results es_in_48 are active now)
(results es_out are active now)
(results es_in_west are active now)
(results es_in_48 are active now)
(results es_out are active now)
(results es_in_west are active now)
(results es_in_48 are active now)

. 
.         ** Base year (2020) = 0
.         foreach v in out_coef out_ci_lo out_ci_hi in_west_coef in_we
> st_ci_lo in_west_ci_hi in_48_coef in_48_ci_lo in_48_ci_hi {
  2.                 replace `v' = 0 if year == 2020
  3.         }
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)

. 
.         ** Offset years slightly for visibility
.         gen year_out = year - 0.15

.         gen year_in_west = year

.         gen year_in_48 = year + 0.15

. 
.         ** Plot 1: Out-migration event study
.         twoway  (rcap out_ci_lo out_ci_hi year, lc(navy))           
>                     ///
>                         (connected out_coef year, mc(navy) lc(navy) 
> ms(O)),             ///
>                 yline(0, lc(gs10) lp(dash))                         
>                                     ///
>                 xline(2020.5, lc(black) lp(solid))                  
>                                     ///
>                 xlabel(2016(1)2024)                                 
>                                             ///
>                 ytitle("Effect on Out-Migration (pp)")              
>                             ///
>                 xtitle("Year")                                      
>                                                     ///
>                 legend(off)                                         
>                                                     ///
>                 title("Out-Migration from Multnomah County")        
>                     ///
>                 subtitle("College Degree vs. No College Degree")    
>                     ///
>                 note("Base year: 2020. Vertical line indicates tax i
> mplementation.")    ///
>                 graphregion(color(white))

. 
.         graph export "${results}did/fig_es_out_migration.png", repla
> ce
file
    C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/did
    > /fig_es_out_migration.png saved as PNG format

. 
.         ** Plot 2: In-migration event study (West Coast)
.         twoway  (rcap in_west_ci_lo in_west_ci_hi year, lc(maroon)) 
>     ///
>                         (connected in_west_coef year, mc(maroon) lc(
> maroon) ms(O)),     ///
>                 yline(0, lc(gs10) lp(dash))                         
>                                     ///
>                 xline(2020.5, lc(black) lp(solid))                  
>                                     ///
>                 xlabel(2016(1)2024)                                 
>                                             ///
>                 ytitle("Effect on In-Migration (pp)")               
>                             ///
>                 xtitle("Year")                                      
>                                                     ///
>                 legend(off)                                         
>                                                     ///
>                 title("In-Migration to Multnomah County (West Coast)
> ")          ///
>                 subtitle("College Degree vs. No College Degree")    
>                     ///
>                 note("Base year: 2020. Vertical line indicates tax i
> mplementation.")    ///
>                 graphregion(color(white))

. 
.         graph export "${results}did/fig_es_in_migration_west.png", r
> eplace
file
    C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/did
    > /fig_es_in_migration_west.png saved as PNG format

. 
.         ** Plot 3: In-migration event study (Lower 48 + DC)
.         twoway  (rcap in_48_ci_lo in_48_ci_hi year, lc(forest_green)
> )   ///
>                         (connected in_48_coef year, mc(forest_green)
>  lc(forest_green) ms(O)),   ///
>                 yline(0, lc(gs10) lp(dash))                         
>                                     ///
>                 xline(2020.5, lc(black) lp(solid))                  
>                                     ///
>                 xlabel(2016(1)2024)                                 
>                                             ///
>                 ytitle("Effect on In-Migration (pp)")               
>                             ///
>                 xtitle("Year")                                      
>                                                     ///
>                 legend(off)                                         
>                                                     ///
>                 title("In-Migration to Multnomah County (Lower 48 + 
> DC)")       ///
>                 subtitle("College Degree vs. No College Degree")    
>                     ///
>                 note("Base year: 2020. Vertical line indicates tax i
> mplementation.")    ///
>                 graphregion(color(white))

. 
.         graph export "${results}did/fig_es_in_migration_48.png", rep
> lace
file
    C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/did
    > /fig_es_in_migration_48.png saved as PNG format

. 
.         ** Plot 4: Combined event study
.         twoway  (rcap out_ci_lo out_ci_hi year_out, lc(navy))       
>                             ///
>                         (connected out_coef year_out, mc(navy) lc(na
> vy) ms(O))                  ///
>                         (rcap in_west_ci_lo in_west_ci_hi year_in_we
> st, lc(maroon))     ///
>                         (connected in_west_coef year_in_west, mc(mar
> oon) lc(maroon) ms(T))      ///
>                         (rcap in_48_ci_lo in_48_ci_hi year_in_48, lc
> (forest_green))     ///
>                         (connected in_48_coef year_in_48, mc(forest_
> green) lc(forest_green) ms(S)),     ///
>                 yline(0, lc(gs10) lp(dash))                         
>                                                     ///
>                 xline(2020.5, lc(black) lp(solid))                  
>                                                     ///
>                 xlabel(2016(1)2024)                                 
>                                                             ///
>                 ytitle("Effect on Migration Rate (pp)")             
>                                             ///
>                 xtitle("Year")                                      
>                                                                     
> ///
>                 legend(order(2 "Out-migration" 4 "In-migration (West
>  Coast)"            ///
>                         6 "In-migration (Lower 48 + DC)") pos(6) row
> s(1))                               ///
>                 title("Migration Effects: Multnomah County Tax")    
>                                     ///
>                 subtitle("College Degree vs. No College Degree")    
>                                     ///
>                 note("Base year: 2020. Vertical line indicates tax i
> mplementation.")    ///
>                 graphregion(color(white))

. 
.         graph export "${results}did/fig_es_combined.png", replace
file
    C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/did
    > /fig_es_combined.png saved as PNG format

. 
. restore

. 
. ********************************************************************
> ************
. ** CLEANUP
. ********************************************************************
> ************
. 
. ** Close log
. clear

. log close log_02
      name:  log_02
       log:  C:/Users/ji252/Documents/GitHub/multnomah-county-tax/code
> /logs/02_log_did_2026-02-01.log
  log type:  text
 closed on:   4 Feb 2026, 08:39:07
----------------------------------------------------------------------
