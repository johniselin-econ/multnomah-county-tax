--------------------------------------------------------------------------------------------------------------
      name:  <unnamed>
       log:  C:/Users/ji252/Documents/GitHub/multnomah-county-tax/code/logs/00_log_multnomah_2026-01-05.log
  log type:  text
 opened on:   5 Jan 2026, 22:10:19

. 
. ** Set Seed 
. set seed 56403

. 
. ** Set scheme
. set scheme plotplainblind

. 
. ** Set parameters 
. local overwrite_csv = 0

. global start_year_acs = 2015

. global end_year_acs = 2023

. 
. ** CALL R CODE TO IMPORT IPUMS DATA 
. rcall script "${code}R/api_code.R", ///
>     args( project_root  <- "${dir}"; ///
>           dir_data_acs  <- "${data}acs"; ///
>           api_codes_path<- "${dir}api_codes.txt"; ///
>           start_year    <- ${start_year_acs}; ///
>           end_year      <- ${end_year_acs}; ///
>           overwrite_csv <- as.logical(`overwrite_csv'); ///
>     ) vanilla
Warning message:
 In read.table(file = file, header = header, sep = sep, quote = quote, d
> ec = dec, fill = fill, comment.char = comment.char, ...) : incomplete 
> final line found by readTableHeader on 'C:/Users/ji252/Documents/GitHu
> b/multnomah-county-tax/api_codes.txt' 

. 
. ** CLEAN DATA (01)
. ** (a)  Demographic data via IPUMS NHGIS 
. **              - https://www.nhgis.org/
. ** (b)  Individual-level ACS data via IPUMS USA 
. **              - https://usa.ipums.org/usa/index.shtml
. ** (c)  County-level IRS migration via IRS SOI 
. **              - https://www.irs.gov/statistics/soi-tax-stats-migrati
> on-data
. ** (d) County-level IRS data via IRS SOI 
. **              - https://www.irs.gov/statistics/soi-tax-stats-county-
> data
. ** (e) NYTimes Covid-19 Cases and Deaths by county
. **              - https://github.com/nytimes/covid-19-data
. ** (f) County-level childcare cost data via DOL 
. **              - www.dol.gov/sites/dolgov/files/WB/NDCP2022.xlsx
. ** (g) County-level Unemployment data via BLS 
. **              - https://www.bls.gov/lau/
. 
. do ${code}01_clean_data.do

. /*********************************************************************
> ********
> * Program:                      01_clean_data.do 
> * Author(s):            John Iselin 
> * Date Updated:         October 19, 2025
> 
> **** Data that has been / will be automatically download
> 
> ** Demographic data via IPUMS NHGIS 
> ** Via https://www.nhgis.org/
> ** Downloaded on October 19, 2025
> ** EXTRACT DETAILS in "nhgis0031_ts_nominal_county_codebook"
> 
> ** Economic data via BEA Regional Economic Accounts (CAINC1)
> ** Via https://apps.bea.gov/regional/downloadzip.htm
> 
> ** ACS individual data via IPUMS USA 
> ** Via https://usa.ipums.org/usa/index.shtml
> ** Downloaded via R program 
> 
> ** IRS SOI County-Level Migration Files
> ** Via https://www.irs.gov/statistics/soi-tax-stats-migration-data
> 
> ** IRS SOI County-Level Files
> ** Via https://www.irs.gov/statistics/soi-tax-stats-county-data
> 
> ** NYTimes COVID Cases and Deaths 
> ** Via https://github.com/nytimes/covid-19-data
> 
> **** Data that must be manually downloaded
> 
> ** DOL Childcare Cost Data 
> ** Via www.dol.gov/sites/dolgov/files/WB/NDCP2022.xlsx
> 
> ** BLS Unemployment data 
> ** Via https://download.bls.gov/pub/time.series/la/la.data.64.County 
> 
> ** County Centroids (center of population)
> ** Via https://arc-gis-hub-home-arcgishub.hub.arcgis.com/datasets/myUT
> K::popcenterstate-us-csv/about
> 
> **********************************************************************
> *********/
. 
. ** Start log file 
. capture log close log_01

. log using "${logs}01_log_data_clean_${pr_name}_${date}", replace text 
> name(log_01)
(file
    C:/Users/ji252/Documents/GitHub/multnomah-county-tax/code/logs/01_
    > log_data_clean_multnomah_2026-01-05.log not found)
------------------------------------------------------------------------
      name:  log_01
       log:  C:/Users/ji252/Documents/GitHub/multnomah-county-tax/code/l
> ogs/01_log_data_clean_multnomah_2026-01-05.log
  log type:  text
 opened on:   5 Jan 2026, 22:10:26

. 
. //--------------------------------------------------
. // STEP 0: Preliminary Set-Up 
. //--------------------------------------------------
. 
. ** Define labels 
. label define lb_move_type       0 "ERROR"                             
>   ///
>                                                         1 "Non-movers"
>                   ///
>                                                         2 "All movers"
>                   ///
>                                                         3 "Domestic mo
> vers"             ///
>                                                         4 "Within-stat
> e movers" ///
>                                                         5 "Inter-state
>  movers"  ///
>                                                         6 "Foreign mov
> ers", modify

.                                                         
. label define lb_agi             1 "Under $1"                    ///
>                                                         2 "$1 under $1
> 0K"               ///
>                                                         3 "$10K under 
> $25K"             ///
>                                                         4 "$25K under 
> $50K"             ///
>                                                         5 "$50K under 
> $75K"             ///
>                                                         6 "$75K under 
> $100K"    ///
>                                                         7 "$100K under
>  $200K"   ///
>                                                         8 "$200K or mo
> re", modify                                                       

. 
. 
. ** Define Programs
. 
. ** Make FIPS code from state and county fips codes 
. capture program drop make_fips

. program define make_fips
  1.     syntax varlist(min=2 max=2 numeric), GEN(name)
  2. 
.     quietly {
  3.         tempvar s c
  4. 
.         local v1 : word 1 of `varlist'
  5.         local v2 : word 2 of `varlist'
  6. 
.         gen `s' = string(`v1', "%02.0f")
  7.         gen `c' = string(`v2', "%03.0f")
  8. 
.         gen `gen' = real(`s' + `c')
  9.     }
 10. end

. 
. ** Reclassify suppressed values as 0 
. 
. capture program drop unsuppress

. program define unsuppress
  1.     syntax varlist
  2. 
.     foreach v of varlist `varlist' {
  3.         replace `v' = 0 if `v' == -1
  4.     }
  5. end

. 
. 
. ** Create a gross-migration file via ACS 
. capture program drop acs_make_gross_migration

. program define acs_make_gross_migration
  1.     version 16.0
  2.     /*
>       Build county-year gross migration totals from ACS microdata with
>  origin/destination counties.
> 
>       Outputs (wide):
>         persons_in_*, persons_out_*, persons_net_*
>         households_in_*, households_out_*, households_net_*
>         dollars_in_*, dollars_out_*, dollars_net_*
> 
>       Move-type indices (mirrors your IRS convention as closely as pos
> sible):
>         1 = Non-movers (same county)
>         2 = All movers (different county) = 4 + 5
>         3 = Domestic movers (same as 2 here; foreign already dropped u
> pstream)
>         4 = Within-state movers (different county, same state)
>         5 = Inter-state movers (different state)
>     */
. 
.     syntax using/ [if] [in], SAVING(string) [REPLACE] ///
>         [ IDSFILE(string) ///
>           YEARVAR(name) ORIGFIPS(name) DESTFIPS(name) ///
>           PERSONWT(name) HHWT(name) HEADVAR(name) INCOME(name) SAMPLE(
> string)]
  3. 
.     // Defaults consistent with your 01_clean_data.do
.     if "`idsfile'"  == "" local idsfile  "${data}working/ids"
  4.     if "`yearvar'"  == "" local yearvar  year
  5.     if "`origfips'" == "" local origfips fips_o
  6.     if "`destfips'" == "" local destfips fips_d
  7.     if "`personwt'" == "" local personwt perwt
  8.     if "`hhwt'"     == "" local hhwt     hhwt
  9.     if "`headvar'"  == "" local headvar  hh_head
 10.     if "`income'"   == "" local income   inctot
 11. 
.     // Load microdata (optionally subset via if/in)
.     use "`using'" `if' `in', clear
 12.         
.         if "`sample'" != "" keep if `sample'
 13. 
.     // Basic checks
.     foreach v in `yearvar' `origfips' `destfips' `personwt' `hhwt' `he
> advar' `income' {
 14.         capture confirm variable `v'
 15.         if _rc {
 16.             di as err "Required variable `v' not found in `using'."
 17.             exit 198
 18.         }
 19.     }
 20. 
.     // Keep only valid year/origin/destination
.     drop if missing(`yearvar') | missing(`origfips') | missing(`destfi
> ps')
 21. 
.     // Income: treat missing as 0 (keep negatives as reported)
.     replace `income' = 0 if missing(`income')
 22. 
.     // Build weighted components at the person level
.     gen double persons_wt = `personwt'
 23.     gen double dollars_wt = `income' * `personwt'
 24.     gen double households_wt = `hhwt' if `headvar' == 1
 25.     replace households_wt = 0 if missing(households_wt)
 26. 
.     // Collapse to origin-destination-year flow first
.     keep `yearvar' `origfips' `destfips' persons_wt dollars_wt househo
> lds_wt
 27.     collapse (sum) persons=persons_wt dollars=dollars_wt households
> =households_wt, ///
>         by(`yearvar' `origfips' `destfips')
 28. 
.     // Derive state/county components for mover-type logic
.     gen int state_o  = floor(`origfips'/1000)
 29.     gen int state_d  = floor(`destfips'/1000)
 30. 
.     gen byte same_county = (`origfips' == `destfips')
 31.     gen byte same_state  = (state_o == state_d)
 32.     gen byte within_state_mover = same_state & !same_county
 33.     gen byte inter_state_mover  = !same_state
 34. 
.     // -----------------------
.     // IN-MIGRATION (by destination county)
.     // -----------------------
.     preserve
 35.         gen long fips = `destfips'
 36.         gen int state_fips  = floor(fips/1000)
 37.         gen int county_fips = mod(fips, 1000)
 38. 
.         // type 1/4/5 components
.         foreach m in persons households dollars {
 39.             gen double `m'_1 = `m' if same_county
 40.             gen double `m'_4 = `m' if within_state_mover
 41.             gen double `m'_5 = `m' if inter_state_mover
 42.         }
 43. 
.         collapse (sum) persons_1 persons_4 persons_5 ///
>                        households_1 households_4 households_5 ///
>                        dollars_1 dollars_4 dollars_5, ///
>                 by(`yearvar' fips state_fips county_fips)
 44. 
.         // build 2 and 3
.         gen double persons_2    = persons_4 + persons_5
 45.         gen double persons_3    = persons_2
 46.         gen double households_2 = households_4 + households_5
 47.         gen double households_3 = households_2
 48.         gen double dollars_2    = dollars_4 + dollars_5
 49.         gen double dollars_3    = dollars_2
 50. 
.         // rename to *_in_*
.         foreach t in 1 2 3 4 5 {
 51.             rename persons_`t'    persons_in_`t'
 52.             rename households_`t' households_in_`t'
 53.             rename dollars_`t'    dollars_in_`t'
 54.         }
 55. 
.         tempfile __in
 56.         save `__in', replace
 57.     restore
 58. 
.     // -----------------------
.     // OUT-MIGRATION (by origin county)
.     // -----------------------
.     preserve
 59.         gen long fips = `origfips'
 60.         gen int state_fips  = floor(fips/1000)
 61.         gen int county_fips = mod(fips, 1000)
 62. 
.         foreach m in persons households dollars {
 63.             gen double `m'_1 = `m' if same_county
 64.             gen double `m'_4 = `m' if within_state_mover
 65.             gen double `m'_5 = `m' if inter_state_mover
 66.         }
 67. 
.         collapse (sum) persons_1 persons_4 persons_5 ///
>                        households_1 households_4 households_5 ///
>                        dollars_1 dollars_4 dollars_5, ///
>                 by(`yearvar' fips state_fips county_fips)
 68. 
.         gen double persons_2    = persons_4 + persons_5
 69.         gen double persons_3    = persons_2
 70.         gen double households_2 = households_4 + households_5
 71.         gen double households_3 = households_2
 72.         gen double dollars_2    = dollars_4 + dollars_5
 73.         gen double dollars_3    = dollars_2
 74. 
.         foreach t in 1 2 3 4 5 {
 75.             rename persons_`t'    persons_out_`t'
 76.             rename households_`t' households_out_`t'
 77.             rename dollars_`t'    dollars_out_`t'
 78.         }
 79. 
.         tempfile __out
 80.         save `__out', replace
 81.     restore
 82. 
.     // -----------------------
.     // Merge in/out; compute net
.     // -----------------------
.     use `__in', clear
 83.     merge 1:1 `yearvar' fips state_fips county_fips using `__out', 
> nogen
 84. 
.     // Replace missings with 0 prior to net calcs (counties can be onl
> y in or only out)
.     foreach m in persons households dollars {
 85.         foreach t in 1 2 3 4 5 {
 86.             replace `m'_in_`t'  = 0 if missing(`m'_in_`t')
 87.             replace `m'_out_`t' = 0 if missing(`m'_out_`t')
 88.         }
 89.     }
 90. 
.     // Net = in - out (types 2/3/4/5 are the meaningful migration nets
> ; 1 will be ~0 by construction)
.     foreach m in persons households dollars {
 91.         foreach t in 2 3 4 5 {
 92.             gen double `m'_net_`t' = `m'_in_`t' - `m'_out_`t'
 93.         }
 94.     }
 95. 
.     // Merge names
.     merge m:1 state_fips county_fips using "`idsfile'", keep(master ma
> tch) nogen
 96. 
.     // Labels
.     label var fips "County FIPS (state*1000 + county)"
 97.     label var state_fips "State FIPS"
 98.     label var county_fips "County FIPS"
 99. 
.     label var persons_in_2  "Persons, in-migration, all movers"
100.     label var persons_out_2 "Persons, out-migration, all movers"
101.     label var persons_net_2 "Persons, net migration, all movers"
102. 
.     label var households_in_2  "Households, in-migration, all movers (
> HH heads)"
103.     label var households_out_2 "Households, out-migration, all move
> rs (HH heads)"
104.     label var households_net_2 "Households, net migration, all move
> rs (HH heads)"
105. 
.     label var dollars_in_2  "Dollars, in-migration, all movers (INCTOT
> *PERWT)"
106.     label var dollars_out_2 "Dollars, out-migration, all movers (IN
> CTOT*PERWT)"
107.     label var dollars_net_2 "Dollars, net migration, all movers (IN
> CTOT*PERWT)"
108. 
.     order `yearvar' fips state_fips county_fips state_name county_name
> , first
109.     sort `yearvar' state_fips county_fips
110.     compress
111. 
.     // Save
.     save "`saving'", `replace'
112.         clear
113.         
. end

. 
. **********************************************************************
> **********
. ** STEP 1: Download and check non-IPUMS data 
. **********************************************************************
> **********
. 
. ** Ensure expected directory structure exists
. capture mkdir "${data}"

. capture mkdir "${data}working"

. capture mkdir "${data}demographic"

. capture mkdir "${data}demographic/CAINC1"

. capture mkdir "${data}demographic/nhgis0031_csv"

. capture mkdir "${data}demographic/dol"

. capture mkdir "${data}demographic/bls"

. capture mkdir "${data}irs"

. capture mkdir "${data}covid"

. 
. ** This block downloads public-use source data directly from official 
> URLs if 
. ** not present locally.
. /*
> Automated downloads included:
>   - IRS SOI county-to-county migration: countyinflowYYZZ.csv / countyo
> utflowYYZZ.csv
>   - IRS SOI county data: YYincyallagi.csv
>   - BEA Regional Economic Accounts (CAINC1): CAINC1.zip (unzips to CAI
> NC1__ALL_AREAS_*.csv and related files)
> */
. 
. * ----------------------------
. * IRS SOI: migration files
. * ----------------------------
. local irs_base "https://www.irs.gov/pub/irs-soi"

. 
. forvalues yy = 15/21 {
  2.     local zz = `yy' + 1
  3.     local fn_out "countyoutflow`yy'`zz'.csv"
  4.     local fn_in  "countyinflow`yy'`zz'.csv"
  5. 
.     capture confirm file "${data}irs/`fn_out'"
  6.     if _rc {
  7.         di as txt "Downloading (IRS SOI) `fn_out' ..."
  8.         copy "`irs_base'/`fn_out'" "${data}irs/`fn_out'", replace
  9.     }
 10. 
.     capture confirm file "${data}irs/`fn_in'"
 11.     if _rc {
 12.         di as txt "Downloading (IRS SOI) `fn_in' ..."
 13.         copy "`irs_base'/`fn_in'" "${data}irs/`fn_in'", replace
 14.     }
 15. }

. 
. * ----------------------------
. * IRS SOI: county income (AGI) files
. * ----------------------------
. forvalues yy = 15/22 {
  2.     local fn_inc "`yy'incyallagi.csv"
  3. 
.     capture confirm file "${data}irs/`fn_inc'"
  4.     if _rc {
  5.         di as txt "Downloading (IRS SOI) `fn_inc' ..."
  6.         copy "`irs_base'/`fn_inc'" "${data}irs/`fn_inc'", replace
  7.     }
  8. }

. 
. * ----------------------------
. * BEA Regional: CAINC1.zip
. * ----------------------------
. local bea_dir "${data}demographic/CAINC1"

. local bea_url "https://apps.bea.gov/regional/zip/CAINC1.zip"

. local bea_zip "`bea_dir'/CAINC1.zip"

. 
. * If we don't already have a CAINC1 "_ALL_AREAS" file, download + unzi
> p the ZIP.
. local bea_files : dir "`bea_dir'" files "CAINC1__ALL_AREAS_*.csv"

. if "`bea_files'"=="" {
.     local bea_files : dir "`bea_dir'" files "CAINC1__ALL_STATES_*.csv"
. }

. 
. if "`bea_files'"=="" {
.     di as txt "Downloading (BEA) CAINC1.zip ..."
Downloading (BEA) CAINC1.zip ...
.     copy "`bea_url'" "`bea_zip'", replace
(file
    C:/Users/ji252/Documents/GitHub/multnomah-county-tax/data/demograp
    > hic/CAINC1/CAINC1.zip not found)
. 
.     local curdir "`c(pwd)'"
.     cd "`bea_dir'"
C:\Users\ji252\Documents\GitHub\multnomah-county-tax\data\demographic\CA
> INC1
.     unzipfile "CAINC1.zip", replace
    inflating: CAINC1__ALL_AREAS_1969_2023.csv
    inflating: CAINC1__definition.xml
    inflating: CAINC1__Footnotes.html
    inflating: CAINC1_AK_1969_2023.csv
    inflating: CAINC1_AL_1969_2023.csv
    inflating: CAINC1_AR_1969_2023.csv
    inflating: CAINC1_AZ_1969_2023.csv
    inflating: CAINC1_CA_1969_2023.csv
    inflating: CAINC1_CO_1969_2023.csv
    inflating: CAINC1_CSA_1969_2023.csv
    inflating: CAINC1_CT_1969_2023.csv
    inflating: CAINC1_DC_1969_2023.csv
    inflating: CAINC1_DE_1969_2023.csv
    inflating: CAINC1_FL_1969_2023.csv
    inflating: CAINC1_GA_1969_2023.csv
    inflating: CAINC1_HI_1969_2023.csv
    inflating: CAINC1_IA_1969_2023.csv
    inflating: CAINC1_ID_1969_2023.csv
    inflating: CAINC1_IL_1969_2023.csv
    inflating: CAINC1_IN_1969_2023.csv
    inflating: CAINC1_KS_1969_2023.csv
    inflating: CAINC1_KY_1969_2023.csv
    inflating: CAINC1_LA_1969_2023.csv
    inflating: CAINC1_MA_1969_2023.csv
    inflating: CAINC1_MD_1969_2023.csv
    inflating: CAINC1_MDIV_1969_2023.csv
    inflating: CAINC1_ME_1969_2023.csv
    inflating: CAINC1_MI_1969_2023.csv
    inflating: CAINC1_MIC_1969_2023.csv
    inflating: CAINC1_MN_1969_2023.csv
    inflating: CAINC1_MO_1969_2023.csv
    inflating: CAINC1_MS_1969_2023.csv
    inflating: CAINC1_MSA_1969_2023.csv
    inflating: CAINC1_MT_1969_2023.csv
    inflating: CAINC1_NC_1969_2023.csv
    inflating: CAINC1_ND_1969_2023.csv
    inflating: CAINC1_NE_1969_2023.csv
    inflating: CAINC1_NH_1969_2023.csv
    inflating: CAINC1_NJ_1969_2023.csv
    inflating: CAINC1_NM_1969_2023.csv
    inflating: CAINC1_NV_1969_2023.csv
    inflating: CAINC1_NY_1969_2023.csv
    inflating: CAINC1_OH_1969_2023.csv
    inflating: CAINC1_OK_1969_2023.csv
    inflating: CAINC1_OR_1969_2023.csv
    inflating: CAINC1_PA_1969_2023.csv
    inflating: CAINC1_PORT_1969_2023.csv
    inflating: CAINC1_RI_1969_2023.csv
    inflating: CAINC1_SC_1969_2023.csv
    inflating: CAINC1_SD_1969_2023.csv
    inflating: CAINC1_TN_1969_2023.csv
    inflating: CAINC1_TX_1969_2023.csv
    inflating: CAINC1_US_1969_2023.csv
    inflating: CAINC1_UT_1969_2023.csv
    inflating: CAINC1_VA_1969_2023.csv
    inflating: CAINC1_VT_1969_2023.csv
    inflating: CAINC1_WA_1969_2023.csv
    inflating: CAINC1_WI_1969_2023.csv
    inflating: CAINC1_WV_1969_2023.csv
    inflating: CAINC1_WY_1969_2023.csv

successfully unzipped CAINC1.zip to current directory
total processed:  60
        skipped:  0
      extracted:  60
.     cd "`curdir'"
C:\Users\ji252\Documents\GitHub\multnomah-county-tax
. 
.     capture erase "`bea_zip'"
. }

. 
. * ----------------------------
. * NYTimes COVID Data 
. * ----------------------------
. local covid_dir "${data}covid"

. local covid_url "https://raw.githubusercontent.com/nytimes/covid-19-da
> ta/master/us-counties.csv"

. 
. * If we don't already have a COVID file, download.
. local covid_file : dir "`covid_dir'" files "covid_nyt.csv"

. if "`covid_file'"=="" {
.     local covid_file : dir "`covid_dir'" files "covid_nyt.csv"
. }

. 
. if "`covid_file'"=="" {
.     di as txt "Downloading (COVID)  ..."
Downloading (COVID)  ...
.     copy "`covid_url'" "`covid_dir'/covid_nyt.csv", replace
. }

. 
. ** This block checks that non-automatically downloaded data are presen
> t: 
. /*
> Non-automtated downloads included:
>   - DOL childcare data (through 2022)
>   - BLS unemployment data 
> */
. 
. ** Define paths 
. local dol_dir "${data}demographic/dol/NDCP2022.xlsx"

. local bls_dir "${data}demographic/bls/la.data.64.County" 

. 
. capture confirm file `dol_dir' // Check if the file exists

. 
. if _rc != 0 {
.     display "Error: The file `dol_dir' was not found."
.     display "Execution of the do-file is stopping."
.     exit // Stops the do-file/program
. }

. 
. capture confirm file `bls_dir' // Check if the file exists

. 
. if _rc != 0 {
.     display "Error: The file `bls_dir' was not found."
.     display "Execution of the do-file is stopping."
.     exit // Stops the do-file/program
. }

. 
. 
. 
. **********************************************************************
> **********
. ** STEP 2: Clean demographic + economic data via IPUMS, BLS, and BEA 
. **********************************************************************
> **********
. 
. ** Import data 
. import delimited        ///
>         "${data}demographic/nhgis0031_csv/nhgis0031_ts_nominal_county.
> csv", clear 
(encoding automatically selected: ISO-8859-1)
(15 vars, 54,673 obs)

. 
. ** Describe data 
. des 

Contains data
 Observations:        54,673                  
    Variables:            15                  
------------------------------------------------------------------------
Variable      Storage   Display    Value
    name         type    format    label      Variable label
------------------------------------------------------------------------
gisjoin         str8    %9s                   GISJOIN
year            str9    %9s                   YEAR
state           str20   %20s                  STATE
statefp         byte    %8.0g                 STATEFP
statenh         int     %8.0g                 STATENH
county          str46   %46s                  COUNTY
countyfp        int     %8.0g                 COUNTYFP
countynh        int     %8.0g                 COUNTYNH
name            str59   %59s                  NAME
av0aa           long    %12.0g                AV0AA
d15aa           long    %12.0g                D15AA
d15ab           long    %12.0g                D15AB
b79aa           long    %12.0g                B79AA
av0aam          long    %12.0g                AV0AAM
b79aam          long    %8.0g                 B79AAM
------------------------------------------------------------------------
Sorted by: 
     Note: Dataset has changed since last saved.

. 
. ** Drop unnecc variables 
. drop gisjoin statenh countynh name 

. 
. ** Rename 
. rename state state_name 

. rename statefp state_fips 

. rename county county_name 

. rename countyfp county_fips 

. rename av0aa population 

. rename d15aa pop_urban 

. rename d15ab pop_rural 

. rename b79aa median_income 

. rename av0aam population_margin

. rename b79aam median_income_margin 

. 
. ** Create urban percent 
. gen percent_urban = pop_urban / population
(45,090 missing values generated)

. 
. ** Label variables 
. label var state_name "State name"

. label var state_fips "State FIPS code"

. label var county_name "County name"

. label var county_fips "County FIPS code"

. label var population "Population count"

. label var pop_rural "Rural population count"

. label var pop_urban "Urban population count"

. label var percent_urban "Percent of population in urban areas"

. label var median_income "Median household income (prior year)"

. label var population_margin "ACS margin for error: population"

. label var median_income_margin "ACS margin for error: median income"

. 
. ** Save as temporary file 
. tempfile demo

. save `demo'
file C:\Users\ji252\AppData\Local\Temp\ST_4490_000001.tmp saved as
    .dta format

. 
. ** Create three datasets 
. 
. ** (1) Basic state and county IDs 
. keep if year == "2020" 
(51,452 observations deleted)

. keep state* county* 

. 
. ** Make FIPS 
. make_fips state_fips county_fips, gen(fips)

. 
. ** Save as state and county Ids 
. save "${data}working/ids", replace 
file
    C:/Users/ji252/Documents/GitHub/multnomah-county-tax/data/working/
    > ids.dta saved

. 
. ** Save state IDS 
. keep state_fips state_name 

. duplicates drop 

Duplicates in terms of all variables

(3,169 observations deleted)

. 
. ** Save as state and county Ids 
. save "${data}working/state_ids", replace 
file
    C:/Users/ji252/Documents/GitHub/multnomah-county-tax/data/working/
    > state_ids.dta saved

. 
. clear  

. 
. ** (2) Population data 
. use `demo'

. keep if !missing(pop_urban) 
(45,090 observations deleted)

. tab year 

       YEAR |      Freq.     Percent        Cum.
------------+-----------------------------------
       2000 |      3,141       32.78       32.78
       2010 |      3,221       33.61       66.39
       2020 |      3,221       33.61      100.00
------------+-----------------------------------
      Total |      9,583      100.00

. 
. ** Keep 2020 
. keep if year == "2020"
(6,362 observations deleted)

. drop year median_income* population_margin

. 
. ** Make FIPS 
. make_fips state_fips county_fips, gen(fips)

. 
. ** Save data
. save "${data}working/population_2020", replace 
file
    C:/Users/ji252/Documents/GitHub/multnomah-county-tax/data/working/
    > population_2020.dta saved

. clear  

. 
. ** (3) 2015-2019 ACS data 
. use `demo'

. keep if !missing(median_income) 
(6,447 observations deleted)

. tab year 

       YEAR |      Freq.     Percent        Cum.
------------+-----------------------------------
       2000 |      3,141        6.51        6.51
  2006-2010 |      3,221        6.68       13.19
  2007-2011 |      3,221        6.68       19.87
  2008-2012 |      3,221        6.68       26.55
  2009-2013 |      3,221        6.68       33.23
  2010-2014 |      3,220        6.68       39.91
  2011-2015 |      3,219        6.67       46.58
  2012-2016 |      3,220        6.68       53.26
  2013-2017 |      3,220        6.68       59.93
  2014-2018 |      3,219        6.67       66.61
  2015-2019 |      3,220        6.68       73.29
  2016-2020 |      3,220        6.68       79.96
  2017-2021 |      3,220        6.68       86.64
  2018-2022 |      3,221        6.68       93.32
  2019-2023 |      3,222        6.68      100.00
------------+-----------------------------------
      Total |     48,226      100.00

. 
. ** Keep 2020 
. keep if year == "2015-2019"
(45,006 observations deleted)

. drop year pop_rural pop_urban percent_urban

. 
. ** Make FIPS 
. make_fips state_fips county_fips, gen(fips)

. 
. ** Save data
. save "${data}working/acs_2015_2019_data", replace 
file
    C:/Users/ji252/Documents/GitHub/multnomah-county-tax/data/working/
    > acs_2015_2019_data.dta saved

. 
. ** Rename for merge 
. rename population population_acs

. 
. ** Merge with other data 
. merge 1:1 state_fips county_fips using "${data}working/population_2020
> ",                ///
>         keep(match) nogen 

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                             3,219  
    -----------------------------------------

. 
. ** Save data
. save "${data}working/demographics_2020", replace 
file
    C:/Users/ji252/Documents/GitHub/multnomah-county-tax/data/working/
    > demographics_2020.dta saved

. 
. ** Load BEA Data 
. import delimited "${data}demographic/CAINC1/CAINC1__ALL_AREAS_1969_202
> 3.csv",   ///
>         clear 
(encoding automatically selected: ISO-8859-1)
(63 vars, 9,604 obs)

. 
. ** Drop unnecc variables 
. drop region tablename industryclassification unit geoname 

. 
. ** Drop empty cells 
. drop if missing(linecode)
(4 observations deleted)

. 
. ** Update names 
. rename geofips fips 

. replace fips = subinstr(fips, `"""', "", .)
(9,600 real changes made)

. destring fips, replace 
fips: all characters numeric; replaced as long

. 
. ** Keep population and per-capita income, dropping personal income (to
> tal)
. tab description linecode

                      |             LineCode
          Description |         1          2          3 |     Total
----------------------+---------------------------------+----------
Per capita personal.. |         0          0      3,200 |     3,200 
Personal income (th.. |     3,200          0          0 |     3,200 
Population (persons.. |         0      3,200          0 |     3,200 
----------------------+---------------------------------+----------
                Total |     3,200      3,200      3,200 |     9,600 

. drop if linecode == 1   
(3,200 observations deleted)

. drop description

.         
. ** Get V* to be in terms of years 
. ** V9 == 1969 
. forvalues i = 9/63 {
  2.         
.         local j = 1960 + `i'
  3.         rename v`i' value`j'
  4.         
. } // END I LOOP 

. 
. ** Reshape 
. reshape long value, i(fips linecode) j(year)
(j = 1969 1970 1971 1972 1973 1974 1975 1976 1977 1978 1979 1980 1981 19
> 82 1983 1984 1985 1986 1987 1988 1989 1990 1991 1992 1993 1994 1995 19
> 96 1997 1998 1999 2000 2001 2002 2003 2004 2005 2006 2007 2008 2009 20
> 10 2011 2012 2013 2014 2015 2016 2017 2018 2019 2020 2021 2022 2023)

Data                               Wide   ->   Long
------------------------------------------------------------------------
> -----
Number of observations            6,400   ->   352,000     
Number of variables                  57   ->   4           
j variable (55 values)                    ->   year
xij variables:
      value1969 value1970 ... value2023   ->   value
------------------------------------------------------------------------
> -----

. reshape wide value, i(fips year ) j(linecode)
(j = 2 3)

Data                               Long   ->   Wide
------------------------------------------------------------------------
> -----
Number of observations          352,000   ->   176,000     
Number of variables                   4   ->   4           
j variable (2 values)          linecode   ->   (dropped)
xij variables:
                                  value   ->   value2 value3
------------------------------------------------------------------------
> -----

. 
. ** Keep years 
. keep if inrange(year, 2015, ${end_year_acs})
(147,200 observations deleted)

. 
. ** Rename values 
. rename value2 population 

. rename value3 per_capita_income

. 
. ** Drop if missing values 
. drop if population == "(NA)"
(239 observations deleted)

. 
. ** Keep only counties with all observations 
. bysort fips: gen ct = _N 

. tab ct

         ct |      Freq.     Percent        Cum.
------------+-----------------------------------
          4 |          8        0.03        0.03
          5 |          5        0.02        0.05
          9 |     28,548       99.95      100.00
------------+-----------------------------------
      Total |     28,561      100.00

. keep if ct == 9
(13 observations deleted)

. drop ct

. 
. ** Destring 
. destring population, replace 
population: all characters numeric; replaced as long

. destring per_capita_income, replace 
per_capita_income: all characters numeric; replaced as long

. 
. ** Save data
. save "${data}working/bea_economics", replace 
file
    C:/Users/ji252/Documents/GitHub/multnomah-county-tax/data/working/
    > bea_economics.dta saved

. 
. ** Load BLS Unemployment data 
. import delimited "${data}demographic\bls\la.data.64.County", clear 
(encoding automatically selected: ISO-8859-1)
(5 vars, 5,974,328 obs)

. 
. ** Keep annual average 
. keep if period == "M13"
(5,523,684 observations deleted)

. drop period 

. 
. ** Keep only Unemployment Rate 
. gen measure = substr(series_id, 20,1)

. keep if measure == "3"
(337,983 observations deleted)

. drop measure 

. 
. ** Keep years 
. keep if inrange(year, 2015, ${end_year_acs})
(83,677 observations deleted)

. tab year 

       year |      Freq.     Percent        Cum.
------------+-----------------------------------
       2015 |      3,220       11.11       11.11
       2016 |      3,220       11.11       22.22
       2017 |      3,220       11.11       33.33
       2018 |      3,220       11.11       44.44
       2019 |      3,220       11.11       55.55
       2020 |      3,221       11.11       66.66
       2021 |      3,221       11.11       77.77
       2022 |      3,221       11.11       88.89
       2023 |      3,221       11.11      100.00
------------+-----------------------------------
      Total |     28,984      100.00

. 
. ** Define counties 
. gen fips = substr(series_id, 6,5)

. destring fips, replace 
fips: all characters numeric; replaced as long

. drop series_id 

. isid fips year 

. 
. ** Drop PR 
. drop if fips > 60000
(702 observations deleted)

. drop footnote_codes 

. 
. ** Update names 
. rename value unemp 

. order year fips unemp 

. 
. destring unemp, replace 
unemp: all characters numeric; replaced as double

. 
. ** Save data
. save "${data}working/bls_unemployment", replace 
file
    C:/Users/ji252/Documents/GitHub/multnomah-county-tax/data/working/
    > bls_unemployment.dta saved

. 
. ** Load County Centroids 
. import delimited "${data}demographic\PopCenterCounty_US.csv", clear 
(encoding automatically selected: UTF-8)
(18 vars, 9,673 obs)

. 
. ** Keep required years (2010)
. keep if year == 2010 
(6,452 observations deleted)

. 
. ** Keep required variables 
. keep geographicindentifier latitude longitude 

. 
. ** Rename 
. rename geographicindentifier fips 

. rename latitude lat 

. rename longitude lon 

. 
. ** Drop PR 
. drop if fips > 60000
(78 observations deleted)

. 
. ** Save data
. save "${data}working/pop_centers", replace 
file
    C:/Users/ji252/Documents/GitHub/multnomah-county-tax/data/working/
    > pop_centers.dta saved

. 
. 
. 
. 
. **********************************************************************
> **********
. ** STEP 3: Import and Clean NYTimes COVID-19 Data 
. **********************************************************************
> **********
. 
. ** Import data 
. import delimited using "${data}covid/covid_nyt.csv", varnames(1) clear
>  case(lower) 
(encoding automatically selected: ISO-8859-1)
(6 vars, 2,502,832 obs)

. 
. ** Describe data 
. des 

Contains data
 Observations:     2,502,832                  
    Variables:             6                  
------------------------------------------------------------------------
Variable      Storage   Display    Value
    name         type    format    label      Variable label
------------------------------------------------------------------------
date            str10   %10s                  
county          str35   %35s                  
state           str24   %24s                  
fips            long    %12.0g                
cases           long    %12.0g                
deaths          long    %8.0g                 
------------------------------------------------------------------------
Sorted by: 
     Note: Dataset has changed since last saved.

. 
. ** Set up date information 
. generate num_date = date(date, "YMD")

. format num_date %td

. drop date 

. 
. ** Rename 
. rename state state_name 

. rename county county_name 

. rename num_date date 

. 
. ** keep only counties 
. keep if !missing(fips)
(23,678 observations deleted)

. 
. ** Keep in 50 states 
. drop if state_name == "Puerto Rico"
(57,605 observations deleted)

. drop if state_name == "Virgin Islands"
(2,304 observations deleted)

. drop if state_name == "Northern Mariana Islands"
(1,452 observations deleted)

. 
. ** Sort 
. sort date fips 

. 
. ** Create panel 
. xtset fips date

Panel variable: fips (unbalanced)
 Time variable: date, 21jan2020 to 13may2022, but with gaps
         Delta: 1 day

. 
. ** Fill in panel 
. tsfill, full 

. 
. ** Fill in missing values 
. replace cases = 0 if missing(cases)
(228,991 real changes made)

. replace deaths = 0 if missing(deaths)
(228,991 real changes made)

. 
. ** Preserve data 
. preserve 

. 
. ** Preserve fips codes and names 
. keep if !missing(state_name)
(228,991 observations deleted)

. keep if !missing(county_name)
(0 observations deleted)

. duplicates drop fips state_name county_name, force 

Duplicates in terms of fips state_name county_name

(2,414,657 observations deleted)

. 
. ** Save as temporary data 
. tempfile state_county_names 

. save `state_county_names'
file C:\Users\ji252\AppData\Local\Temp\ST_4490_000003.tmp saved as
    .dta format

. clear 

. 
. ** Restore 
. restore 

. 
. ** Drop and merge in names 
. drop state_name county_name

. merge m:1 fips using `state_county_names', keep(master match) nogen 

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                         2,646,784  
    -----------------------------------------

. 
. ** Get year, month, day 
. gen year = year(date)

. gen month = month(date)

. gen day = day(date)

. 
. ** Order data 
. order date year month day fips state county cases deaths 

. 
. ** Calculate cumulative cases and deaths 
. bysort fips (date): gen cases_cum = sum(cases)
--Break--
r(1);

end of do-file
--Break--
r(1);

end of do-file

--Break--
r(1);

. do "C:\Users\ji252\AppData\Local\Temp\STD4490_000001.tmp"

. /*********************************************************************
> **********
> File Name:              02_sdid_analysis.do
> Creator:                John Iselin
> Date Update:    November 26, 2025
> 
> Called by: 00_multnomah.do
> 
> Purpose: Preform synthetic difference-in-difference estiamtion. 
> 
> Authors: John Iselin 
> 
> For more information, contact john.iselin@yale.edu
> 
> **********************************************************************
> *********/
. 
. 
. ** Start log file 
. capture log close log_02

. log using "${logs}02_log_sdid_${date}", replace text name(log_02)
(file
    C:/Users/ji252/Documents/GitHub/multnomah-county-tax/code/logs/02_
    > log_sdid_2026-01-05.log not found)
------------------------------------------------------------------------
      name:  log_02
       log:  C:/Users/ji252/Documents/GitHub/multnomah-county-tax/code/l
> ogs/02_log_sdid_2026-01-05.log
  log type:  text
 opened on:   5 Jan 2026, 22:11:22

. 
. ** Parameters 
. local reps = 100

. 
. ** Load data 
. use "${data}working/irs_county_gross", replace 

. 
. ** Keep required variables 
. keep year fips state* county* *_net_3 *_out_1 *_out_2 

. order year fips state* county* 

. 
. ** Merge with ACS Data 
. merge 1:1 year fips using "${data}working/acs_county_gross_18plus", ge
> n(merge_acs_1)
(variable fips was float, now double to accommodate using data's
       values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        20,278
        from master                    18,963  (merge_acs_1==1)
        from using                      1,315  (merge_acs_1==2)

    Matched                             3,017  (merge_acs_1==3)
    -----------------------------------------

. 
. ** Keep require variables 
. keep year fips state* county* *_net_3 *_out_1 *_out_2 merge_acs_*

. 
. ** Label acs samples 
. rename persons_* acs1_persons_* 

. rename households_* acs1_households_*

. rename dollars_* acs1_dollars_*

. 
. ** Merge with ACS Data 
. merge 1:1 year fips using "${data}working/acs_county_gross_college", g
> en(merge_acs_2)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        18,963
        from master                    18,963  (merge_acs_2==1)
        from using                          0  (merge_acs_2==2)

    Matched                             4,332  (merge_acs_2==3)
    -----------------------------------------

. 
. ** Keep require variables 
. keep year fips state* county* *_net_3 *_out_1 *_out_2 merge_acs_*

. 
. ** Label acs samples 
. rename persons_* acs2_persons_*

. rename households_* acs2_households_*

. rename dollars_* acs2_dollars_*

. 
. ** Merge with ACS Data 
. merge 1:1 year fips using "${data}working/acs_county_gross_nocollege",
>  gen(merge_acs_3)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        18,963
        from master                    18,963  (merge_acs_3==1)
        from using                          0  (merge_acs_3==2)

    Matched                             4,332  (merge_acs_3==3)
    -----------------------------------------

. 
. ** Keep require variables 
. keep year fips state* county* *_net_3 *_out_1 *_out_2 merge_acs_*

. 
. ** Label acs samples 
. rename persons_* acs3_persons_*

. rename households_* acs3_households_*

. rename dollars_* acs3_dollars_*

. 
. ** TODO add High and Low Education Samples 
. 
. ** Drop "other counties"
. drop if county_fips == 0
(434 observations deleted)

. drop if year == 2015 
(430 observations deleted)

. 
. ** Merge with Demographic data 
. merge m:1 fips using "${data}working/demographics_2020",        ///
>         gen(demo_merge) keep(master match)

    Result                      Number of obs
    -----------------------------------------
    Not matched                            20
        from master                        20  (demo_merge==1)
        from using                          0  (demo_merge==2)

    Matched                            22,411  (demo_merge==3)
    -----------------------------------------

.         
. ** Show match 
. tab state_name demo_merge, m

                     | Matching result from
                     |         merge
          State name | Master on  Matched ( |     Total
---------------------+----------------------+----------
                     |        14          0 |        14 
             Alabama |         0        474 |       474 
              Alaska |         6        197 |       203 
             Arizona |         0        109 |       109 
            Arkansas |         0        528 |       528 
          California |         0        440 |       440 
            Colorado |         0        450 |       450 
         Connecticut |         0         48 |        48 
            Delaware |         0         24 |        24 
District of Columbia |         0          8 |         8 
             Florida |         0        502 |       502 
             Georgia |         0      1,135 |     1,135 
              Hawaii |         0         32 |        32 
               Idaho |         0        309 |       309 
            Illinois |         0        727 |       727 
             Indiana |         0        660 |       660 
                Iowa |         0        698 |       698 
              Kansas |         0        738 |       738 
            Kentucky |         0        847 |       847 
           Louisiana |         0        455 |       455 
               Maine |         0        114 |       114 
            Maryland |         0        179 |       179 
       Massachusetts |         0        107 |       107 
            Michigan |         0        597 |       597 
           Minnesota |         0        617 |       617 
         Mississippi |         0        577 |       577 
            Missouri |         0        812 |       812 
             Montana |         0        393 |       393 
            Nebraska |         0        654 |       654 
              Nevada |         0        121 |       121 
       New Hampshire |         0         70 |        70 
          New Jersey |         0        164 |       164 
          New Mexico |         0        233 |       233 
            New York |         0        455 |       455 
      North Carolina |         0        718 |       718 
        North Dakota |         0        372 |       372 
                Ohio |         0        637 |       637 
            Oklahoma |         0        543 |       543 
              Oregon |         0        260 |       260 
        Pennsylvania |         0        489 |       489 
        Rhode Island |         0         38 |        38 
      South Carolina |         0        330 |       330 
        South Dakota |         0        462 |       462 
           Tennessee |         0        676 |       676 
               Texas |         0      1,816 |     1,816 
                Utah |         0        208 |       208 
             Vermont |         0         99 |        99 
            Virginia |         0        941 |       941 
          Washington |         0        283 |       283 
       West Virginia |         0        386 |       386 
           Wisconsin |         0        517 |       517 
             Wyoming |         0        162 |       162 
---------------------+----------------------+----------
               Total |        20     22,411 |    22,431 

. tab year demo_merge, m

  Tax year |
     (year | Matching result from
    before |         merge
     move) | Master on  Matched ( |     Total
-----------+----------------------+----------
      2016 |         0      3,140 |     3,140 
      2017 |         0      3,140 |     3,140 
      2018 |         0      3,140 |     3,140 
      2019 |         0      3,140 |     3,140 
      2020 |         2      3,140 |     3,142 
      2021 |         2      3,141 |     3,143 
      2022 |         9      3,133 |     3,142 
      2023 |         7        437 |       444 
-----------+----------------------+----------
     Total |        20     22,411 |    22,431 

. 
. ** Keep if matched 
. keep if demo_merge == 3
(20 observations deleted)

. drop demo_merge

. 
. ** Rename 
. rename population pop_census

.         
. ** Merge with Demographic data 
. merge m:1 year fips using "${data}working/bea_economics",       ///
>         gen(econ_merge) keep(master match) 

    Result                      Number of obs
    -----------------------------------------
    Not matched                           366
        from master                       366  (econ_merge==1)
        from using                          0  (econ_merge==2)

    Matched                            22,045  (econ_merge==3)
    -----------------------------------------

.         
. ** Show match 
. tab state_name econ_merge, m

                     | Matching result from
                     |         merge
          State name | Master on  Matched ( |     Total
---------------------+----------------------+----------
             Alabama |         0        474 |       474 
              Alaska |         0        197 |       197 
             Arizona |         0        109 |       109 
            Arkansas |         0        528 |       528 
          California |         0        440 |       440 
            Colorado |         0        450 |       450 
         Connecticut |         0         48 |        48 
            Delaware |         0         24 |        24 
District of Columbia |         0          8 |         8 
             Florida |         0        502 |       502 
             Georgia |         0      1,135 |     1,135 
              Hawaii |         9         23 |        32 
               Idaho |         0        309 |       309 
            Illinois |         0        727 |       727 
             Indiana |         0        660 |       660 
                Iowa |         0        698 |       698 
              Kansas |         0        738 |       738 
            Kentucky |         0        847 |       847 
           Louisiana |         0        455 |       455 
               Maine |         0        114 |       114 
            Maryland |         0        179 |       179 
       Massachusetts |         0        107 |       107 
            Michigan |         0        597 |       597 
           Minnesota |         0        617 |       617 
         Mississippi |         0        577 |       577 
            Missouri |         0        812 |       812 
             Montana |         0        393 |       393 
            Nebraska |         0        654 |       654 
              Nevada |         0        121 |       121 
       New Hampshire |         0         70 |        70 
          New Jersey |         0        164 |       164 
          New Mexico |         0        233 |       233 
            New York |         0        455 |       455 
      North Carolina |         0        718 |       718 
        North Dakota |         0        372 |       372 
                Ohio |         0        637 |       637 
            Oklahoma |         0        543 |       543 
              Oregon |         0        260 |       260 
        Pennsylvania |         0        489 |       489 
        Rhode Island |         0         38 |        38 
      South Carolina |         0        330 |       330 
        South Dakota |         0        462 |       462 
           Tennessee |         0        676 |       676 
               Texas |         0      1,816 |     1,816 
                Utah |         0        208 |       208 
             Vermont |         0         99 |        99 
            Virginia |       357        584 |       941 
          Washington |         0        283 |       283 
       West Virginia |         0        386 |       386 
           Wisconsin |         0        517 |       517 
             Wyoming |         0        162 |       162 
---------------------+----------------------+----------
               Total |       366     22,045 |    22,411 

. tab year econ_merge, m

  Tax year |
     (year | Matching result from
    before |         merge
     move) | Master on  Matched ( |     Total
-----------+----------------------+----------
      2016 |        52      3,088 |     3,140 
      2017 |        52      3,088 |     3,140 
      2018 |        52      3,088 |     3,140 
      2019 |        52      3,088 |     3,140 
      2020 |        52      3,088 |     3,140 
      2021 |        53      3,088 |     3,141 
      2022 |        53      3,080 |     3,133 
      2023 |         0        437 |       437 
-----------+----------------------+----------
     Total |       366     22,045 |    22,411 

. 
. ** Keep if matched 
. keep if econ_merge == 3
(366 observations deleted)

. drop econ_merge

. 
. ** Merge with COVID-19 Data
. merge m:1 fips using ${data}working/covid_cleaned_wide.dta,     ///
>         gen(covid_merge) keep(master match )
(variable state_name was str20, now str24 to accommodate using data's
       values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                            68
        from master                        68  (covid_merge==1)
        from using                          0  (covid_merge==2)

    Matched                            21,977  (covid_merge==3)
    -----------------------------------------

. 
. ** Show match 
. tab state_name covid_merge, m

                      | Matching result from
                      |         merge
           State name | Master on  Matched ( |     Total
----------------------+----------------------+----------
              Alabama |         0        474 |       474 
               Alaska |        28        169 |       197 
              Arizona |         0        109 |       109 
             Arkansas |         0        528 |       528 
           California |         0        440 |       440 
             Colorado |         0        450 |       450 
          Connecticut |         0         48 |        48 
             Delaware |         0         24 |        24 
 District of Columbia |         0          8 |         8 
              Florida |         0        502 |       502 
              Georgia |         0      1,135 |     1,135 
               Hawaii |         0         23 |        23 
                Idaho |         0        309 |       309 
             Illinois |         0        727 |       727 
              Indiana |         0        660 |       660 
                 Iowa |         0        698 |       698 
               Kansas |         0        738 |       738 
             Kentucky |         0        847 |       847 
            Louisiana |         0        455 |       455 
                Maine |         0        114 |       114 
             Maryland |         0        179 |       179 
        Massachusetts |         0        107 |       107 
             Michigan |         0        597 |       597 
            Minnesota |         0        617 |       617 
          Mississippi |         0        577 |       577 
             Missouri |         0        812 |       812 
              Montana |         0        393 |       393 
             Nebraska |         0        654 |       654 
               Nevada |         0        121 |       121 
        New Hampshire |         0         70 |        70 
           New Jersey |         0        164 |       164 
           New Mexico |         0        233 |       233 
             New York |        40        415 |       455 
       North Carolina |         0        718 |       718 
         North Dakota |         0        372 |       372 
                 Ohio |         0        637 |       637 
             Oklahoma |         0        543 |       543 
               Oregon |         0        260 |       260 
         Pennsylvania |         0        489 |       489 
         Rhode Island |         0         38 |        38 
       South Carolina |         0        330 |       330 
         South Dakota |         0        462 |       462 
            Tennessee |         0        676 |       676 
                Texas |         0      1,816 |     1,816 
                 Utah |         0        208 |       208 
              Vermont |         0         99 |        99 
             Virginia |         0        584 |       584 
           Washington |         0        283 |       283 
        West Virginia |         0        386 |       386 
            Wisconsin |         0        517 |       517 
              Wyoming |         0        162 |       162 
----------------------+----------------------+----------
                Total |        68     21,977 |    22,045 

. tab year covid_merge, m

  Tax year |
     (year | Matching result from
    before |         merge
     move) | Master on  Matched ( |     Total
-----------+----------------------+----------
      2016 |         9      3,079 |     3,088 
      2017 |         9      3,079 |     3,088 
      2018 |         9      3,079 |     3,088 
      2019 |         9      3,079 |     3,088 
      2020 |         9      3,079 |     3,088 
      2021 |         9      3,079 |     3,088 
      2022 |         9      3,071 |     3,080 
      2023 |         5        432 |       437 
-----------+----------------------+----------
     Total |        68     21,977 |    22,045 

. 
. ** Organize data 
. order year fips state_* county_* 

. sort fips year  

. isid fips year 

. 
. ** Keep only sample with non-missing base populations
. tab county_name year if (missing(n1_out_1 ) | n1_out_1 == 0 ) & year <
> = 2022

                      |  Tax year
                      |   (year
                      |   before
                      |   move)
          County name |      2017 |     Total
----------------------+-----------+----------
        Loving County |         1 |         1 
----------------------+-----------+----------
                Total |         1 |         1 

. drop if (missing(n1_out_1 ) | n1_out_1 == 0 ) & year <= 2022
(1 observation deleted)

. 
. ** Keep only sample with observations in each year 
. bysort fips: gen ct = _N

. tab county_name state_name if ct < 7 

                      |      State name
          County name | Connect..      Texas |     Total
----------------------+----------------------+----------
     Fairfield County |         6          0 |         6 
      Hartford County |         6          0 |         6 
    Litchfield County |         6          0 |         6 
        Loving County |         0          6 |         6 
     Middlesex County |         6          0 |         6 
     New Haven County |         6          0 |         6 
    New London County |         6          0 |         6 
       Tolland County |         6          0 |         6 
       Windham County |         6          0 |         6 
----------------------+----------------------+----------
                Total |        48          6 |        54 

. drop if ct < 7 
(54 observations deleted)

. drop ct 

. 
. ** Generate IRS sample 
. gen irs_sample = inrange(year, 2016, 2022)

. 
. ** Generate ACS Period Indicators 
. gen acs_period_1 = merge_acs_1 != 1 & inrange(year, 2016, 2022)

. gen acs_period_2 = merge_acs_1 != 1 

. 
. ** Make sure we have a balanced panel of ACS counties 
. gen tmp = merge_acs_1 != 1 

. bysort fips: egen ct_tmp = total(tmp)

. replace acs_period_1 = 0 if ct_tmp != 8 
(246 real changes made)

. replace acs_period_2 = 0 if ct_tmp != 8 
(294 real changes made)

. drop tmp ct_tmp

. 
. tab year acs_period_1 

  Tax year |
     (year |
    before |     acs_period_1
     move) |         0          1 |     Total
-----------+----------------------+----------
      2016 |     2,690        389 |     3,079 
      2017 |     2,690        389 |     3,079 
      2018 |     2,690        389 |     3,079 
      2019 |     2,690        389 |     3,079 
      2020 |     2,690        389 |     3,079 
      2021 |     2,690        389 |     3,079 
      2022 |     2,690        389 |     3,079 
      2023 |       437          0 |       437 
-----------+----------------------+----------
     Total |    19,267      2,723 |    21,990 

. tab year acs_period_2

  Tax year |
     (year |
    before |     acs_period_2
     move) |         0          1 |     Total
-----------+----------------------+----------
      2016 |     2,690        389 |     3,079 
      2017 |     2,690        389 |     3,079 
      2018 |     2,690        389 |     3,079 
      2019 |     2,690        389 |     3,079 
      2020 |     2,690        389 |     3,079 
      2021 |     2,690        389 |     3,079 
      2022 |     2,690        389 |     3,079 
      2023 |        48        389 |       437 
-----------+----------------------+----------
     Total |    18,878      3,112 |    21,990 

. tab state_name acs_period_1     

                      |     acs_period_1
           State name |         0          1 |     Total
----------------------+----------------------+----------
              Alabama |       453         21 |       474 
               Alaska |       190          7 |       197 
              Arizona |        88         21 |       109 
             Arkansas |       507         21 |       528 
           California |       202        238 |       440 
             Colorado |       443          7 |       450 
             Delaware |         3         21 |        24 
 District of Columbia |         1          7 |         8 
              Florida |       306        196 |       502 
              Georgia |       995        140 |     1,135 
               Hawaii |         9         14 |        23 
                Idaho |       302          7 |       309 
             Illinois |       643         84 |       727 
              Indiana |       548        112 |       660 
                 Iowa |       670         28 |       698 
               Kansas |       717         21 |       738 
             Kentucky |       812         35 |       847 
            Louisiana |       406         49 |       455 
                Maine |       100         14 |       114 
             Maryland |       102         77 |       179 
        Massachusetts |        93         14 |       107 
             Michigan |       485        112 |       597 
            Minnesota |       575         42 |       617 
          Mississippi |       556         21 |       577 
             Missouri |       777         35 |       812 
              Montana |       393          0 |       393 
             Nebraska |       633         21 |       654 
               Nevada |       107         14 |       121 
        New Hampshire |        70          0 |        70 
           New Jersey |        45        119 |       164 
           New Mexico |       219         14 |       233 
             New York |       315        140 |       455 
       North Carolina |       592        126 |       718 
         North Dakota |       365          7 |       372 
                 Ohio |       504        133 |       637 
             Oklahoma |       522         21 |       543 
               Oregon |       211         49 |       260 
         Pennsylvania |       349        140 |       489 
         Rhode Island |        17         21 |        38 
       South Carolina |       323          7 |       330 
         South Dakota |       462          0 |       462 
            Tennessee |       627         49 |       676 
                Texas |     1,543        266 |     1,809 
                 Utah |       173         35 |       208 
              Vermont |        99          0 |        99 
             Virginia |       521         63 |       584 
           Washington |       220         63 |       283 
        West Virginia |       386          0 |       386 
            Wisconsin |       426         91 |       517 
              Wyoming |       162          0 |       162 
----------------------+----------------------+----------
                Total |    19,267      2,723 |    21,990 

.         
. ** Define treated state 
. gen multnomah = state_fips == 41 & county_fips == 51

. label var multnomah "Indicator for Multnomah County, Oregon"    

. 
. ** Define treatment indicator 
. gen Treated = multnomah == 1 & year > 2020

. label var Treated "Treatment indicator for Multnomah County, Oregon"  
>   

. 
. ** Define sample 1: All counties 
. gen sample_all = 1 

. label var sample_all "All counties (excluding AK, CA, HI OR, WA)"

. 
. ** Define sample 2: Counties in top 95 percent 
. summ percent_urban if year == 2020, de 

            Percent of population in urban areas
-------------------------------------------------------------
      Percentiles      Smallest
 1%            0              0
 5%            0              0
10%            0              0       Obs               3,079
25%            0              0       Sum of wgt.       3,079

50%     .3256337                      Mean           .3521437
                        Largest       Std. dev.       .332065
75%     .6326353              1
90%      .847923              1       Variance       .1102672
95%     .9372299              1       Skewness       .3661052
99%     .9972304              1       Kurtosis       1.763629

. local cutoff = r(p95) 

. tab state_name multnomah if percent_urban >= `cutoff' & year == 2020

                      |     Indicator for
                      |   Multnomah County,
                      |        Oregon
           State name |         0          1 |     Total
----------------------+----------------------+----------
               Alaska |         1          0 |         1 
              Arizona |         1          0 |         1 
           California |        15          0 |        15 
             Colorado |         4          0 |         4 
             Delaware |         1          0 |         1 
 District of Columbia |         1          0 |         1 
              Florida |        13          0 |        13 
              Georgia |         8          0 |         8 
               Hawaii |         1          0 |         1 
                Idaho |         1          0 |         1 
             Illinois |         5          0 |         5 
              Indiana |         3          0 |         3 
                 Iowa |         1          0 |         1 
               Kansas |         2          0 |         2 
             Kentucky |         2          0 |         2 
            Louisiana |         3          0 |         3 
             Maryland |         3          0 |         3 
        Massachusetts |         5          0 |         5 
             Michigan |         3          0 |         3 
            Minnesota |         3          0 |         3 
             Missouri |         4          0 |         4 
             Nebraska |         2          0 |         2 
               Nevada |         3          0 |         3 
           New Jersey |        10          0 |        10 
           New Mexico |         2          0 |         2 
             New York |         9          0 |         9 
       North Carolina |         4          0 |         4 
                 Ohio |         6          0 |         6 
             Oklahoma |         1          0 |         1 
               Oregon |         1          1 |         2 
         Pennsylvania |         4          0 |         4 
         Rhode Island |         2          0 |         2 
            Tennessee |         2          0 |         2 
                Texas |        11          0 |        11 
                 Utah |         4          0 |         4 
             Virginia |        10          0 |        10 
           Washington |         1          0 |         1 
            Wisconsin |         1          0 |         1 
----------------------+----------------------+----------
                Total |       153          1 |       154 

. gen sample_urban95 = percent_urban >= `cutoff' // All counties 

. label var sample_urban95 "Urban counties (top 5%) (excluding AK, CA, H
> I OR, WA)"

. tab sample_urban95 if year == 2020

      Urban |
   counties |
   (top 5%) |
 (excluding |
 AK, CA, HI |
    OR, WA) |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |      2,925       95.00       95.00
          1 |        154        5.00      100.00
------------+-----------------------------------
      Total |      3,079      100.00

. 
. ** Define sample 3: Counties in top 98 percent 
. local cutoff = .9864539 //

. tab state_name multnomah if percent_urban >= `cutoff' & year == 2020

                      |     Indicator for
                      |   Multnomah County,
                      |        Oregon
           State name |         0          1 |     Total
----------------------+----------------------+----------
           California |         6          0 |         6 
             Colorado |         2          0 |         2 
 District of Columbia |         1          0 |         1 
              Florida |         4          0 |         4 
              Georgia |         5          0 |         5 
             Illinois |         2          0 |         2 
              Indiana |         1          0 |         1 
            Louisiana |         1          0 |         1 
             Maryland |         1          0 |         1 
        Massachusetts |         1          0 |         1 
             Michigan |         1          0 |         1 
            Minnesota |         1          0 |         1 
             Missouri |         1          0 |         1 
               Nevada |         1          0 |         1 
           New Jersey |         6          0 |         6 
             New York |         7          0 |         7 
       North Carolina |         1          0 |         1 
                 Ohio |         1          0 |         1 
               Oregon |         0          1 |         1 
         Pennsylvania |         2          0 |         2 
         Rhode Island |         1          0 |         1 
                Texas |         3          0 |         3 
                 Utah |         2          0 |         2 
             Virginia |         8          0 |         8 
            Wisconsin |         1          0 |         1 
----------------------+----------------------+----------
                Total |        60          1 |        61 

. gen sample_urban98 = percent_urban >= `cutoff' // All counties 

. label var sample_urban98 "Urban counties (top 1%) (excluding AK, CA, H
> I OR, WA)"

. tab sample_urban98 if year == 2020

      Urban |
   counties |
   (top 1%) |
 (excluding |
 AK, CA, HI |
    OR, WA) |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |      3,018       98.02       98.02
          1 |         61        1.98      100.00
------------+-----------------------------------
      Total |      3,079      100.00

. 
. ** Define Sample of States      
. drop if state_name == "Alaska"
(197 observations deleted)

. drop if state_name == "Hawaii"
(23 observations deleted)

. drop if state_name == "California"
(440 observations deleted)

. drop if state_name == "Washington"
(283 observations deleted)

. drop if state_name == "Oregon" & multnomah == 0
(252 observations deleted)

. 
. ** Define sample 4: Counties in top 95 + covid 
. cluster kmeans cases_cum* deaths_cum* if        ///
>         sample_urban95 == 1 & year == 2020 & covid_merge == 3 , k(5) g
> en(kmean)
cluster name: _clus_1

. bysort fips: egen kmean_group = mean(kmean)
(19,774 missing values generated)

. 
. ** Pull out kmeans cluster with Multnoma
. gen tmp1 = kmean if sample_urban95 == 1 & year == 2020 & covid_merge =
> = 3 & multnomah == 1 
(20,794 missing values generated)

. egen tmp2 = mean(tmp1)

. gen sample_urban95_covid = sample_urban95 == 1 & kmean_group == tmp2

. drop tmp1 tmp2 

. label var sample_urban95_covid "Urban counties (top 5%) w. Kmean Covid
>  Match  (excluding AK, CA, HI OR, WA)"

. tab sample_urban95_covid if year == 2020

      Urban |
   counties |
(top 5%) w. |
Kmean Covid |
      Match |
 (excluding |
 AK, CA, HI |
    OR, WA) |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |      2,879       98.73       98.73
          1 |         37        1.27      100.00
------------+-----------------------------------
      Total |      2,916      100.00

. 
. ** Show results across clusters 
. preserve 

. 
. ** Keep required variables 
. keep if sample_urban95 == 1 & year == 2020 & covid_merge == 3
(20,665 observations deleted)

. keep kmean cases_cum* deaths_cum* population

. collapse (mean) cases_cum* deaths_cum* [fw = population], by(kmean)

. reshape long cases_cum deaths_cum, i(kmean) j(time)
(j = 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 2
> 6 27 28 29)

Data                               Wide   ->   Long
------------------------------------------------------------------------
> -----
Number of observations                5   ->   145         
Number of variables                  59   ->   4           
j variable (29 values)                    ->   time
xij variables:
  cases_cum1 cases_cum2 ... cases_cum29   ->   cases_cum
deaths_cum1 deaths_cum2 ... deaths_cum29  ->   deaths_cum
------------------------------------------------------------------------
> -----

. xtset kmean time 

Panel variable: kmean (strongly balanced)
 Time variable: time, 1 to 29
         Delta: 1 unit

. xtline cases_cum 

. graph export "${results}fig_kmeans.jpg", as(jpg) name("Graph") quality
> (100) replace             
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_km
> eans.jpg written in JPEG format

. clear  

. 
. ** Restore      
. restore 

. 
. ** Define covariates 
. local covariates "population per_capita_income"

. 
. ** Standardize covariates 
. foreach v of local covariates {
  2.         egen tmp_v = std(`v') 
  3.         replace `v' = tmp_v
  4.         drop tmp_v
  5. } // END COVAR LOOP 
variable population was long now double
(20,795 real changes made)
variable per_capita_income was long now double
(20,795 real changes made)

. 
. ** Define outcome variables (IRS)
. foreach x in "n1" "n2" "agi" {
  2.         
.         gen `x'_rate_irs = 100 * (`x'_net_3 / (`x'_out_1 + `x'_out_2))
  3.         
. } // END OUTCOME TYPE LOOP 
(383 missing values generated)
(383 missing values generated)
(383 missing values generated)

. 
. ** Label var 
. label var n1_rate_irs   "Net domestic migration rate, returns (%)"

. label var n2_rate_irs   "Net domestic migration rate, exemptions (%)"

. label var agi_rate_irs  "Net domestic migration rate, AGI (%)"

. 
. 
. ** Define outcome variables (ACS)
. ** Loop over three datasets (18+ = 1, college degree == 2, no college 
> degree == 3)
. forvalues i = 1/3{
  2.         
.         if `i' == 1 local txt "(18+)"
  3.         else if `i' == 2 local txt "(College)"
  4.         else if `i' == 3 local txt "(No College)"
  5.         
.         gen n1_rate_acs`i' = 100 * (acs`i'_households_net_3 / (acs`i'_
> households_out_1 + acs`i'_households_out_2))
  6.         gen n2_rate_acs`i' = 100 * (acs`i'_persons_net_3 / (acs`i'_
> persons_out_1 + acs`i'_persons_out_2))
  7.         gen agi_rate_acs`i' = 100 * (acs`i'_dollars_net_3 / (acs`i'
> _dollars_out_1 + acs`i'_dollars_out_2))
  8.         
.         label var n1_rate_acs`i'        "Net domestic migration rate `
> txt', HHs (%)"
  9.         label var n2_rate_acs`i'        "Net domestic migration rat
> e `txt', persons (%)"
 10.         label var agi_rate_acs`i'       "Net domestic migration rat
> e `txt', total income (%)"
 11.         
. } // END DATA LOOP 
(17,815 missing values generated)
(17,815 missing values generated)
(17,815 missing values generated)
(17,815 missing values generated)
(17,815 missing values generated)
(17,815 missing values generated)
(17,815 missing values generated)
(17,815 missing values generated)
(17,815 missing values generated)

. 
. ** Generate triple-difference vars 
. gen n1_rate_acs4 = n1_rate_acs2 - n1_rate_acs3
(17,815 missing values generated)

. gen n2_rate_acs4 = n2_rate_acs2 - n2_rate_acs3
(17,815 missing values generated)

. gen agi_rate_acs4 = agi_rate_acs2 - agi_rate_acs3
(17,815 missing values generated)

. 
. label var n1_rate_acs4          "Net domestic migration rate (College 
> less No College), HHs (%)"

. label var n2_rate_acs4          "Net domestic migration rate (College 
> less No College), persons (%)"

. label var agi_rate_acs4         "Net domestic migration rate (College 
> less No College), total income (%)"

. 
. ** Declare panel
. xtset fips year 

Panel variable: fips (unbalanced)
 Time variable: year, 2016 to 2023
         Delta: 1 unit

. 
. ** Tag unique fips 
. egen unique = tag(fips)

. tab year unique

  Tax year |
     (year |
    before |       tag(fips)
     move) |         0          1 |     Total
-----------+----------------------+----------
      2016 |         0      2,916 |     2,916 
      2017 |     2,916          0 |     2,916 
      2018 |     2,916          0 |     2,916 
      2019 |     2,916          0 |     2,916 
      2020 |     2,916          0 |     2,916 
      2021 |     2,916          0 |     2,916 
      2022 |     2,916          0 |     2,916 
      2023 |       383          0 |       383 
-----------+----------------------+----------
     Total |    17,879      2,916 |    20,795 

. 
. ** Loop over IRS and ACS Samples  
. foreach data of varlist irs_sample acs_period_1 acs_period_2  {
  2. 
.         ** Different sets of outcome variables 
.         if "`data'" == "irs_sample" local out_type "irs"
  3.         else local out_type "acs1 acs2 acs3 acs4"
  4. 
.         ** Loop over Outcome var type 
.         foreach type of local out_type {
  5.                 
.                 ** Labels 
.                 if "`data'" == "irs_sample" local out_txt "irs_16_22"
  6.                 else if "`data'" == "acs_period_1" & "`type'" == "a
> cs1" local out_txt "acs_16_22_all"
  7.                 else if "`data'" == "acs_period_1" & "`type'" == "a
> cs2" local out_txt "acs_16_22_col"
  8.                 else if "`data'" == "acs_period_1" & "`type'" == "a
> cs3" local out_txt "acs_16_22_noc"
  9.                 else if "`data'" == "acs_period_1" & "`type'" == "a
> cs4" local out_txt "acs_16_22_3D"
 10.                 else if "`data'" == "acs_period_2" & "`type'" == "a
> cs1" local out_txt "acs_16_23_all"
 11.                 else if "`data'" == "acs_period_2" & "`type'" == "a
> cs2" local out_txt "acs_16_23_col"
 12.                 else if "`data'" == "acs_period_2" & "`type'" == "a
> cs3" local out_txt "acs_16_23_noc"
 13.                 else if "`data'" == "acs_period_2" & "`type'" == "a
> cs4" local out_txt "acs_16_23_3D"
 14. 
.                 ** Loop over samples 
.                 foreach samp of varlist sample_all sample_urban95 samp
> le_urban95_covid {        
 15.                         
.                         ** Loop over exclusion of 2019-2020 period 
.                         forvalues exl = 0/1 {
 16.                                 
.                                 ** Define sample        
.                                 gen sample = `samp' == 1 & `data' == 1
>  
 17.                                 if `exl' == 1 replace sample = 0 if
>  year == 2020 
 18.                                 
.                                 ** Clear stored values 
.                                 eststo clear            
 19.                                 
.                                 ** Loop over outcomes 
.                                 foreach out of varlist n1_rate_`type' 
> n2_rate_`type' agi_rate_`type' {
 20.                                 
.                                         ** Store label 
.                                         local label : variable label `
> out'
 21.                                         
.                                         ** Loop over inclusion of cova
> riates
.                                         forvalues c = 0/1 {
 22.                                         
.                                                 if `c' == 0 local cova
> rs ""
 23.                                                 else if `c' == 1 lo
> cal covars "covariates(`covariates', projected)"
 24.                                                 dis "`covars'"
 25.                                                 
.                                                 ** Run SDID
.                                                 eststo sdid_`out'_`c':
>  sdid `out' fips year Treated     ///
>                                                         if sample == 1
> ,                         ///
>                                                         vce(placebo)  
>                           ///
>                                                         `covar'       
>                                   ///
>                                                         reps(`reps')  
>                           ///
>                                                         graph graph_ex
> port("${results}fig_`out_txt'_`out'_`c'_`samp'_", .pdf) 
 26.                                                         
.                                                 ** Estadd counties  
.                                                 qui summ `out' if year
>  == 2021 & sample == 1
 27.                                                 estadd scalar count
>  = r(N)      
 28.                                                         
.                                                 ** Estadd mean 
.                                                 qui summ `out' if mult
> nomah == 1 & Treated == 0 
 29.                                                 estadd scalar mean 
> = r(mean)
 30. 
.                                                 ** Run event-study 
.                                                 sdid_event `out' fips 
> year Treated                      ///
>                                                         if sample == 1
> ,                                         ///
>                                                         `covar'       
>                                                   ///
>                                                         vce(placebo)  
>                                           ///
>                                                         brep(`reps')  
>                                           ///
>                                                         placebo(all)
 31.                                                 
.                                                 ** Create Figure 
.                                                 
.                                                 ** Store max year 
.                                                 qui summ year if multn
> omah == 1 & sample == 1
 32.                                                 local max_yr = r(me
> an)
 33.                                                 
.                                                 ** Move results from m
> atrix to data 
.                                                 qui count if multnomah
>  == 1 & sample == 1
 34.                                                 local ct = r(N)
 35.                                                 local ct = `ct' + 1
 36.                                                 matrix list e(H)
 37.                                                 mat res = e(H)[2..`
> ct',1..5]
 38.                         
.                                                 ** Move Matrix results
>  to data 
.                                                 svmat res
 39.                                                 
.                                                 ** Generate ID variabl
> e
.                                                 gen id = `max_yr' - _n
>  + 1 if !missing(res1)
 40.                                                 if `exl' == 1 {
 41.                                                         expand 2 if
>  year == 2019, gen(tag)
 42.                                                         replace id 
> = 2020 if tag == 1 
 43.                                                         replace res
> 1 = . if tag == 1 
 44.                                                         replace res
> 3 = . if tag == 1 
 45.                                                         replace res
> 4 = . if tag == 1 
 46.                                                         drop tag 
 47.                                                 }
 48.                                                 label var id "Year 
> (destination)"
 49.                                                 
.                                                 ** Sort 
.                                                 sort id
 50.                                                 
.                                                 ** Plot
.                                                 twoway  (rcap res3 res
> 4 id, lc(gs10) fc(gs11%50))       ///
>                                                                 (scatt
> er res1 id, mc(black)),                           ///             
>                                                         legend(off) yt
> itle("`label'")                                   ///
>                                                         yline(0, lc(re
> d) lp(-))                                                 ///
>                                                         xline(2019.5, 
> lc(black) lp(solid))                              ///
>                                                         ylabel(-10(2.5
> )10, format(%9.1f))
 51. 
.                                                 graph export "${result
> s}fig_`out_txt'_`out'_`c'_`samp'_eventstudy.jpg",         ///
>                                                         as(jpg) name("
> Graph") quality(100) replace              
 52. 
.                                                 ** Clean up 
.                                                 drop res1 res2 res3 re
> s4 res5 id 
 53. 
.                                                 ** Update Count
.                                                 local ct = `ct' + 1 
 54.                                                                    
>              
.                                         } // END COVAR LOOP 
 55.                                 
.                                 } // END OUTCOME LOOP 
 56.                         
.                                 ** Table of results 
.                                 esttab  sdid_n1_rate_`type'_0 sdid_n1_
> rate_`type'_1                     ///
>                                                 sdid_n2_rate_`type'_0 
> sdid_n2_rate_`type'_1                     ///
>                                                 sdid_agi_rate_`type'_0
>  sdid_agi_rate_`type'_1 using     ///
>                                 "${results}tab_sdid_`out_txt'_`samp'_e
> xcl2020`exl'.tex",                        ///
>                                 starlevel("*" 0.10 "**" 0.05 "***" 0.0
> 1)                ///
>                                 b(%-9.3f) se(%-9.3f) replace          
>                           ///
>                                 mgroups("Returns" "Exemptions" "AGI", 
>                   ///
>                                         pattern(1 0 1 0 1 0) )        
>                                   ///
>                                 mtitle( "No Covariates" "Covariates"  
>                   ///
>                                                 "No Covariates" "Covar
> iates"                    ///
>                                                 "No Covariates" "Covar
> iates")                   ///
>                                 stats(count mean,                     
>                                           ///
>                                         fmt(%9.0fc %9.3fc)            
>                                           ///
>                                         labels("Number of Counties" "P
> re-treatment mean"))
 57.                                 
.                                 ** Drop sample var 
.                                 drop sample 
 58.                                 
.                         } // END EXCLUSION LOOP 
 59.                         
.                 } // END SAMPLE LOOP 
 60.         
.         } // END OUT TYPE 
 61.         
. } // END DATA LOOP 

Placebo replications (100). This may take some time.
----+--- 1 ---+--- 2 ---+--- 3 ---+--- 4 ---+--- 5
...--Break--
r(1);

end of do-file

--Break--
r(1);

. do "C:\Users\ji252\AppData\Local\Temp\STD4490_000002.tmp"

. /*********************************************************************
> **********
> File Name:              02_sdid_analysis.do
> Creator:                John Iselin
> Date Update:    November 26, 2025
> 
> Called by: 00_multnomah.do
> 
> Purpose: Preform synthetic difference-in-difference estiamtion. 
> 
> Authors: John Iselin 
> 
> For more information, contact john.iselin@yale.edu
> 
> **********************************************************************
> *********/
. 
. 
. ** Start log file 
. capture log close log_02

. log using "${logs}02_log_sdid_${date}", replace text name(log_02)
------------------------------------------------------------------------
      name:  log_02
       log:  C:/Users/ji252/Documents/GitHub/multnomah-county-tax/code/l
> ogs/02_log_sdid_2026-01-05.log
  log type:  text
 opened on:   5 Jan 2026, 22:11:48

. 
. ** Parameters 
. local reps = 100

. 
. ** Load data 
. use "${data}working/irs_county_gross", replace 

. 
. ** Keep required variables 
. keep year fips state* county* *_net_3 *_out_1 *_out_2 

. order year fips state* county* 

. 
. ** Merge with ACS Data 
. merge 1:1 year fips using "${data}working/acs_county_gross_18plus", ge
> n(merge_acs_1)
(variable fips was float, now double to accommodate using data's
       values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        20,278
        from master                    18,963  (merge_acs_1==1)
        from using                      1,315  (merge_acs_1==2)

    Matched                             3,017  (merge_acs_1==3)
    -----------------------------------------

. 
. ** Keep require variables 
. keep year fips state* county* *_net_3 *_out_1 *_out_2 merge_acs_*

. 
. ** Label acs samples 
. rename persons_* acs1_persons_* 

. rename households_* acs1_households_*

. rename dollars_* acs1_dollars_*

. 
. ** Merge with ACS Data 
. merge 1:1 year fips using "${data}working/acs_county_gross_college", g
> en(merge_acs_2)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        18,963
        from master                    18,963  (merge_acs_2==1)
        from using                          0  (merge_acs_2==2)

    Matched                             4,332  (merge_acs_2==3)
    -----------------------------------------

. 
. ** Keep require variables 
. keep year fips state* county* *_net_3 *_out_1 *_out_2 merge_acs_*

. 
. ** Label acs samples 
. rename persons_* acs2_persons_*

. rename households_* acs2_households_*

. rename dollars_* acs2_dollars_*

. 
. ** Merge with ACS Data 
. merge 1:1 year fips using "${data}working/acs_county_gross_nocollege",
>  gen(merge_acs_3)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        18,963
        from master                    18,963  (merge_acs_3==1)
        from using                          0  (merge_acs_3==2)

    Matched                             4,332  (merge_acs_3==3)
    -----------------------------------------

. 
. ** Keep require variables 
. keep year fips state* county* *_net_3 *_out_1 *_out_2 merge_acs_*

. 
. ** Label acs samples 
. rename persons_* acs3_persons_*

. rename households_* acs3_households_*

. rename dollars_* acs3_dollars_*

. 
. ** TODO add High and Low Education Samples 
. 
. ** Drop "other counties"
. drop if county_fips == 0
(434 observations deleted)

. drop if year == 2015 
(430 observations deleted)

. 
. ** Merge with Demographic data 
. merge m:1 fips using "${data}working/demographics_2020",        ///
>         gen(demo_merge) keep(master match)

    Result                      Number of obs
    -----------------------------------------
    Not matched                            20
        from master                        20  (demo_merge==1)
        from using                          0  (demo_merge==2)

    Matched                            22,411  (demo_merge==3)
    -----------------------------------------

.         
. ** Show match 
. tab state_name demo_merge, m

                     | Matching result from
                     |         merge
          State name | Master on  Matched ( |     Total
---------------------+----------------------+----------
                     |        14          0 |        14 
             Alabama |         0        474 |       474 
              Alaska |         6        197 |       203 
             Arizona |         0        109 |       109 
            Arkansas |         0        528 |       528 
          California |         0        440 |       440 
            Colorado |         0        450 |       450 
         Connecticut |         0         48 |        48 
            Delaware |         0         24 |        24 
District of Columbia |         0          8 |         8 
             Florida |         0        502 |       502 
             Georgia |         0      1,135 |     1,135 
              Hawaii |         0         32 |        32 
               Idaho |         0        309 |       309 
            Illinois |         0        727 |       727 
             Indiana |         0        660 |       660 
                Iowa |         0        698 |       698 
              Kansas |         0        738 |       738 
            Kentucky |         0        847 |       847 
           Louisiana |         0        455 |       455 
               Maine |         0        114 |       114 
            Maryland |         0        179 |       179 
       Massachusetts |         0        107 |       107 
            Michigan |         0        597 |       597 
           Minnesota |         0        617 |       617 
         Mississippi |         0        577 |       577 
            Missouri |         0        812 |       812 
             Montana |         0        393 |       393 
            Nebraska |         0        654 |       654 
              Nevada |         0        121 |       121 
       New Hampshire |         0         70 |        70 
          New Jersey |         0        164 |       164 
          New Mexico |         0        233 |       233 
            New York |         0        455 |       455 
      North Carolina |         0        718 |       718 
        North Dakota |         0        372 |       372 
                Ohio |         0        637 |       637 
            Oklahoma |         0        543 |       543 
              Oregon |         0        260 |       260 
        Pennsylvania |         0        489 |       489 
        Rhode Island |         0         38 |        38 
      South Carolina |         0        330 |       330 
        South Dakota |         0        462 |       462 
           Tennessee |         0        676 |       676 
               Texas |         0      1,816 |     1,816 
                Utah |         0        208 |       208 
             Vermont |         0         99 |        99 
            Virginia |         0        941 |       941 
          Washington |         0        283 |       283 
       West Virginia |         0        386 |       386 
           Wisconsin |         0        517 |       517 
             Wyoming |         0        162 |       162 
---------------------+----------------------+----------
               Total |        20     22,411 |    22,431 

. tab year demo_merge, m

  Tax year |
     (year | Matching result from
    before |         merge
     move) | Master on  Matched ( |     Total
-----------+----------------------+----------
      2016 |         0      3,140 |     3,140 
      2017 |         0      3,140 |     3,140 
      2018 |         0      3,140 |     3,140 
      2019 |         0      3,140 |     3,140 
      2020 |         2      3,140 |     3,142 
      2021 |         2      3,141 |     3,143 
      2022 |         9      3,133 |     3,142 
      2023 |         7        437 |       444 
-----------+----------------------+----------
     Total |        20     22,411 |    22,431 

. 
. ** Keep if matched 
. keep if demo_merge == 3
(20 observations deleted)

. drop demo_merge

. 
. ** Rename 
. rename population pop_census

.         
. ** Merge with Demographic data 
. merge m:1 year fips using "${data}working/bea_economics",       ///
>         gen(econ_merge) keep(master match) 

    Result                      Number of obs
    -----------------------------------------
    Not matched                           366
        from master                       366  (econ_merge==1)
        from using                          0  (econ_merge==2)

    Matched                            22,045  (econ_merge==3)
    -----------------------------------------

.         
. ** Show match 
. tab state_name econ_merge, m

                     | Matching result from
                     |         merge
          State name | Master on  Matched ( |     Total
---------------------+----------------------+----------
             Alabama |         0        474 |       474 
              Alaska |         0        197 |       197 
             Arizona |         0        109 |       109 
            Arkansas |         0        528 |       528 
          California |         0        440 |       440 
            Colorado |         0        450 |       450 
         Connecticut |         0         48 |        48 
            Delaware |         0         24 |        24 
District of Columbia |         0          8 |         8 
             Florida |         0        502 |       502 
             Georgia |         0      1,135 |     1,135 
              Hawaii |         9         23 |        32 
               Idaho |         0        309 |       309 
            Illinois |         0        727 |       727 
             Indiana |         0        660 |       660 
                Iowa |         0        698 |       698 
              Kansas |         0        738 |       738 
            Kentucky |         0        847 |       847 
           Louisiana |         0        455 |       455 
               Maine |         0        114 |       114 
            Maryland |         0        179 |       179 
       Massachusetts |         0        107 |       107 
            Michigan |         0        597 |       597 
           Minnesota |         0        617 |       617 
         Mississippi |         0        577 |       577 
            Missouri |         0        812 |       812 
             Montana |         0        393 |       393 
            Nebraska |         0        654 |       654 
              Nevada |         0        121 |       121 
       New Hampshire |         0         70 |        70 
          New Jersey |         0        164 |       164 
          New Mexico |         0        233 |       233 
            New York |         0        455 |       455 
      North Carolina |         0        718 |       718 
        North Dakota |         0        372 |       372 
                Ohio |         0        637 |       637 
            Oklahoma |         0        543 |       543 
              Oregon |         0        260 |       260 
        Pennsylvania |         0        489 |       489 
        Rhode Island |         0         38 |        38 
      South Carolina |         0        330 |       330 
        South Dakota |         0        462 |       462 
           Tennessee |         0        676 |       676 
               Texas |         0      1,816 |     1,816 
                Utah |         0        208 |       208 
             Vermont |         0         99 |        99 
            Virginia |       357        584 |       941 
          Washington |         0        283 |       283 
       West Virginia |         0        386 |       386 
           Wisconsin |         0        517 |       517 
             Wyoming |         0        162 |       162 
---------------------+----------------------+----------
               Total |       366     22,045 |    22,411 

. tab year econ_merge, m

  Tax year |
     (year | Matching result from
    before |         merge
     move) | Master on  Matched ( |     Total
-----------+----------------------+----------
      2016 |        52      3,088 |     3,140 
      2017 |        52      3,088 |     3,140 
      2018 |        52      3,088 |     3,140 
      2019 |        52      3,088 |     3,140 
      2020 |        52      3,088 |     3,140 
      2021 |        53      3,088 |     3,141 
      2022 |        53      3,080 |     3,133 
      2023 |         0        437 |       437 
-----------+----------------------+----------
     Total |       366     22,045 |    22,411 

. 
. ** Keep if matched 
. keep if econ_merge == 3
(366 observations deleted)

. drop econ_merge

. 
. ** Merge with COVID-19 Data
. merge m:1 fips using ${data}working/covid_cleaned_wide.dta,     ///
>         gen(covid_merge) keep(master match )
(variable state_name was str20, now str24 to accommodate using data's
       values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                            68
        from master                        68  (covid_merge==1)
        from using                          0  (covid_merge==2)

    Matched                            21,977  (covid_merge==3)
    -----------------------------------------

. 
. ** Show match 
. tab state_name covid_merge, m

                      | Matching result from
                      |         merge
           State name | Master on  Matched ( |     Total
----------------------+----------------------+----------
              Alabama |         0        474 |       474 
               Alaska |        28        169 |       197 
              Arizona |         0        109 |       109 
             Arkansas |         0        528 |       528 
           California |         0        440 |       440 
             Colorado |         0        450 |       450 
          Connecticut |         0         48 |        48 
             Delaware |         0         24 |        24 
 District of Columbia |         0          8 |         8 
              Florida |         0        502 |       502 
              Georgia |         0      1,135 |     1,135 
               Hawaii |         0         23 |        23 
                Idaho |         0        309 |       309 
             Illinois |         0        727 |       727 
              Indiana |         0        660 |       660 
                 Iowa |         0        698 |       698 
               Kansas |         0        738 |       738 
             Kentucky |         0        847 |       847 
            Louisiana |         0        455 |       455 
                Maine |         0        114 |       114 
             Maryland |         0        179 |       179 
        Massachusetts |         0        107 |       107 
             Michigan |         0        597 |       597 
            Minnesota |         0        617 |       617 
          Mississippi |         0        577 |       577 
             Missouri |         0        812 |       812 
              Montana |         0        393 |       393 
             Nebraska |         0        654 |       654 
               Nevada |         0        121 |       121 
        New Hampshire |         0         70 |        70 
           New Jersey |         0        164 |       164 
           New Mexico |         0        233 |       233 
             New York |        40        415 |       455 
       North Carolina |         0        718 |       718 
         North Dakota |         0        372 |       372 
                 Ohio |         0        637 |       637 
             Oklahoma |         0        543 |       543 
               Oregon |         0        260 |       260 
         Pennsylvania |         0        489 |       489 
         Rhode Island |         0         38 |        38 
       South Carolina |         0        330 |       330 
         South Dakota |         0        462 |       462 
            Tennessee |         0        676 |       676 
                Texas |         0      1,816 |     1,816 
                 Utah |         0        208 |       208 
              Vermont |         0         99 |        99 
             Virginia |         0        584 |       584 
           Washington |         0        283 |       283 
        West Virginia |         0        386 |       386 
            Wisconsin |         0        517 |       517 
              Wyoming |         0        162 |       162 
----------------------+----------------------+----------
                Total |        68     21,977 |    22,045 

. tab year covid_merge, m

  Tax year |
     (year | Matching result from
    before |         merge
     move) | Master on  Matched ( |     Total
-----------+----------------------+----------
      2016 |         9      3,079 |     3,088 
      2017 |         9      3,079 |     3,088 
      2018 |         9      3,079 |     3,088 
      2019 |         9      3,079 |     3,088 
      2020 |         9      3,079 |     3,088 
      2021 |         9      3,079 |     3,088 
      2022 |         9      3,071 |     3,080 
      2023 |         5        432 |       437 
-----------+----------------------+----------
     Total |        68     21,977 |    22,045 

. 
. ** Organize data 
. order year fips state_* county_* 

. sort fips year  

. isid fips year 

. 
. ** Keep only sample with non-missing base populations
. tab county_name year if (missing(n1_out_1 ) | n1_out_1 == 0 ) & year <
> = 2022

                      |  Tax year
                      |   (year
                      |   before
                      |   move)
          County name |      2017 |     Total
----------------------+-----------+----------
        Loving County |         1 |         1 
----------------------+-----------+----------
                Total |         1 |         1 

. drop if (missing(n1_out_1 ) | n1_out_1 == 0 ) & year <= 2022
(1 observation deleted)

. 
. ** Keep only sample with observations in each year 
. bysort fips: gen ct = _N

. tab county_name state_name if ct < 7 

                      |      State name
          County name | Connect..      Texas |     Total
----------------------+----------------------+----------
     Fairfield County |         6          0 |         6 
      Hartford County |         6          0 |         6 
    Litchfield County |         6          0 |         6 
        Loving County |         0          6 |         6 
     Middlesex County |         6          0 |         6 
     New Haven County |         6          0 |         6 
    New London County |         6          0 |         6 
       Tolland County |         6          0 |         6 
       Windham County |         6          0 |         6 
----------------------+----------------------+----------
                Total |        48          6 |        54 

. drop if ct < 7 
(54 observations deleted)

. drop ct 

. 
. ** Generate IRS sample 
. gen irs_sample = inrange(year, 2016, 2022)

. 
. ** Generate ACS Period Indicators 
. gen acs_period_1 = merge_acs_1 != 1 & inrange(year, 2016, 2022)

. gen acs_period_2 = merge_acs_1 != 1 

. 
. ** Make sure we have a balanced panel of ACS counties 
. gen tmp = merge_acs_1 != 1 

. bysort fips: egen ct_tmp = total(tmp)

. replace acs_period_1 = 0 if ct_tmp != 8 
(246 real changes made)

. replace acs_period_2 = 0 if ct_tmp != 8 
(294 real changes made)

. drop tmp ct_tmp

. 
. tab year acs_period_1 

  Tax year |
     (year |
    before |     acs_period_1
     move) |         0          1 |     Total
-----------+----------------------+----------
      2016 |     2,690        389 |     3,079 
      2017 |     2,690        389 |     3,079 
      2018 |     2,690        389 |     3,079 
      2019 |     2,690        389 |     3,079 
      2020 |     2,690        389 |     3,079 
      2021 |     2,690        389 |     3,079 
      2022 |     2,690        389 |     3,079 
      2023 |       437          0 |       437 
-----------+----------------------+----------
     Total |    19,267      2,723 |    21,990 

. tab year acs_period_2

  Tax year |
     (year |
    before |     acs_period_2
     move) |         0          1 |     Total
-----------+----------------------+----------
      2016 |     2,690        389 |     3,079 
      2017 |     2,690        389 |     3,079 
      2018 |     2,690        389 |     3,079 
      2019 |     2,690        389 |     3,079 
      2020 |     2,690        389 |     3,079 
      2021 |     2,690        389 |     3,079 
      2022 |     2,690        389 |     3,079 
      2023 |        48        389 |       437 
-----------+----------------------+----------
     Total |    18,878      3,112 |    21,990 

. tab state_name acs_period_1     

                      |     acs_period_1
           State name |         0          1 |     Total
----------------------+----------------------+----------
              Alabama |       453         21 |       474 
               Alaska |       190          7 |       197 
              Arizona |        88         21 |       109 
             Arkansas |       507         21 |       528 
           California |       202        238 |       440 
             Colorado |       443          7 |       450 
             Delaware |         3         21 |        24 
 District of Columbia |         1          7 |         8 
              Florida |       306        196 |       502 
              Georgia |       995        140 |     1,135 
               Hawaii |         9         14 |        23 
                Idaho |       302          7 |       309 
             Illinois |       643         84 |       727 
              Indiana |       548        112 |       660 
                 Iowa |       670         28 |       698 
               Kansas |       717         21 |       738 
             Kentucky |       812         35 |       847 
            Louisiana |       406         49 |       455 
                Maine |       100         14 |       114 
             Maryland |       102         77 |       179 
        Massachusetts |        93         14 |       107 
             Michigan |       485        112 |       597 
            Minnesota |       575         42 |       617 
          Mississippi |       556         21 |       577 
             Missouri |       777         35 |       812 
              Montana |       393          0 |       393 
             Nebraska |       633         21 |       654 
               Nevada |       107         14 |       121 
        New Hampshire |        70          0 |        70 
           New Jersey |        45        119 |       164 
           New Mexico |       219         14 |       233 
             New York |       315        140 |       455 
       North Carolina |       592        126 |       718 
         North Dakota |       365          7 |       372 
                 Ohio |       504        133 |       637 
             Oklahoma |       522         21 |       543 
               Oregon |       211         49 |       260 
         Pennsylvania |       349        140 |       489 
         Rhode Island |        17         21 |        38 
       South Carolina |       323          7 |       330 
         South Dakota |       462          0 |       462 
            Tennessee |       627         49 |       676 
                Texas |     1,543        266 |     1,809 
                 Utah |       173         35 |       208 
              Vermont |        99          0 |        99 
             Virginia |       521         63 |       584 
           Washington |       220         63 |       283 
        West Virginia |       386          0 |       386 
            Wisconsin |       426         91 |       517 
              Wyoming |       162          0 |       162 
----------------------+----------------------+----------
                Total |    19,267      2,723 |    21,990 

.         
. ** Define treated state 
. gen multnomah = state_fips == 41 & county_fips == 51

. label var multnomah "Indicator for Multnomah County, Oregon"    

. 
. ** Define treatment indicator 
. gen Treated = multnomah == 1 & year > 2020

. label var Treated "Treatment indicator for Multnomah County, Oregon"  
>   

. 
. ** Define sample 1: All counties 
. gen sample_all = 1 

. label var sample_all "All counties (excluding AK, CA, HI OR, WA)"

. 
. ** Define sample 2: Counties in top 95 percent 
. summ percent_urban if year == 2020, de 

            Percent of population in urban areas
-------------------------------------------------------------
      Percentiles      Smallest
 1%            0              0
 5%            0              0
10%            0              0       Obs               3,079
25%            0              0       Sum of wgt.       3,079

50%     .3256337                      Mean           .3521437
                        Largest       Std. dev.       .332065
75%     .6326353              1
90%      .847923              1       Variance       .1102672
95%     .9372299              1       Skewness       .3661052
99%     .9972304              1       Kurtosis       1.763629

. local cutoff = r(p95) 

. tab state_name multnomah if percent_urban >= `cutoff' & year == 2020

                      |     Indicator for
                      |   Multnomah County,
                      |        Oregon
           State name |         0          1 |     Total
----------------------+----------------------+----------
               Alaska |         1          0 |         1 
              Arizona |         1          0 |         1 
           California |        15          0 |        15 
             Colorado |         4          0 |         4 
             Delaware |         1          0 |         1 
 District of Columbia |         1          0 |         1 
              Florida |        13          0 |        13 
              Georgia |         8          0 |         8 
               Hawaii |         1          0 |         1 
                Idaho |         1          0 |         1 
             Illinois |         5          0 |         5 
              Indiana |         3          0 |         3 
                 Iowa |         1          0 |         1 
               Kansas |         2          0 |         2 
             Kentucky |         2          0 |         2 
            Louisiana |         3          0 |         3 
             Maryland |         3          0 |         3 
        Massachusetts |         5          0 |         5 
             Michigan |         3          0 |         3 
            Minnesota |         3          0 |         3 
             Missouri |         4          0 |         4 
             Nebraska |         2          0 |         2 
               Nevada |         3          0 |         3 
           New Jersey |        10          0 |        10 
           New Mexico |         2          0 |         2 
             New York |         9          0 |         9 
       North Carolina |         4          0 |         4 
                 Ohio |         6          0 |         6 
             Oklahoma |         1          0 |         1 
               Oregon |         1          1 |         2 
         Pennsylvania |         4          0 |         4 
         Rhode Island |         2          0 |         2 
            Tennessee |         2          0 |         2 
                Texas |        11          0 |        11 
                 Utah |         4          0 |         4 
             Virginia |        10          0 |        10 
           Washington |         1          0 |         1 
            Wisconsin |         1          0 |         1 
----------------------+----------------------+----------
                Total |       153          1 |       154 

. gen sample_urban95 = percent_urban >= `cutoff' // All counties 

. label var sample_urban95 "Urban counties (top 5%) (excluding AK, CA, H
> I OR, WA)"

. tab sample_urban95 if year == 2020

      Urban |
   counties |
   (top 5%) |
 (excluding |
 AK, CA, HI |
    OR, WA) |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |      2,925       95.00       95.00
          1 |        154        5.00      100.00
------------+-----------------------------------
      Total |      3,079      100.00

. 
. ** Define sample 3: Counties in top 98 percent 
. local cutoff = .9864539 //

. tab state_name multnomah if percent_urban >= `cutoff' & year == 2020

                      |     Indicator for
                      |   Multnomah County,
                      |        Oregon
           State name |         0          1 |     Total
----------------------+----------------------+----------
           California |         6          0 |         6 
             Colorado |         2          0 |         2 
 District of Columbia |         1          0 |         1 
              Florida |         4          0 |         4 
              Georgia |         5          0 |         5 
             Illinois |         2          0 |         2 
              Indiana |         1          0 |         1 
            Louisiana |         1          0 |         1 
             Maryland |         1          0 |         1 
        Massachusetts |         1          0 |         1 
             Michigan |         1          0 |         1 
            Minnesota |         1          0 |         1 
             Missouri |         1          0 |         1 
               Nevada |         1          0 |         1 
           New Jersey |         6          0 |         6 
             New York |         7          0 |         7 
       North Carolina |         1          0 |         1 
                 Ohio |         1          0 |         1 
               Oregon |         0          1 |         1 
         Pennsylvania |         2          0 |         2 
         Rhode Island |         1          0 |         1 
                Texas |         3          0 |         3 
                 Utah |         2          0 |         2 
             Virginia |         8          0 |         8 
            Wisconsin |         1          0 |         1 
----------------------+----------------------+----------
                Total |        60          1 |        61 

. gen sample_urban98 = percent_urban >= `cutoff' // All counties 

. label var sample_urban98 "Urban counties (top 1%) (excluding AK, CA, H
> I OR, WA)"

. tab sample_urban98 if year == 2020

      Urban |
   counties |
   (top 1%) |
 (excluding |
 AK, CA, HI |
    OR, WA) |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |      3,018       98.02       98.02
          1 |         61        1.98      100.00
------------+-----------------------------------
      Total |      3,079      100.00

. 
. ** Define Sample of States      
. drop if state_name == "Alaska"
(197 observations deleted)

. drop if state_name == "Hawaii"
(23 observations deleted)

. drop if state_name == "California"
(440 observations deleted)

. drop if state_name == "Washington"
(283 observations deleted)

. drop if state_name == "Oregon" & multnomah == 0
(252 observations deleted)

. 
. ** Define sample 4: Counties in top 95 + covid 
. cluster kmeans cases_cum* deaths_cum* if        ///
>         sample_urban95 == 1 & year == 2020 & covid_merge == 3 , k(5) g
> en(kmean)
cluster name: _clus_1

. bysort fips: egen kmean_group = mean(kmean)
(19,774 missing values generated)

. 
. ** Pull out kmeans cluster with Multnoma
. gen tmp1 = kmean if sample_urban95 == 1 & year == 2020 & covid_merge =
> = 3 & multnomah == 1 
(20,794 missing values generated)

. egen tmp2 = mean(tmp1)

. gen sample_urban95_covid = sample_urban95 == 1 & kmean_group == tmp2

. drop tmp1 tmp2 

. label var sample_urban95_covid "Urban counties (top 5%) w. Kmean Covid
>  Match  (excluding AK, CA, HI OR, WA)"

. tab sample_urban95_covid if year == 2020

      Urban |
   counties |
(top 5%) w. |
Kmean Covid |
      Match |
 (excluding |
 AK, CA, HI |
    OR, WA) |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |      2,879       98.73       98.73
          1 |         37        1.27      100.00
------------+-----------------------------------
      Total |      2,916      100.00

. 
. ** Show results across clusters 
. preserve 

. 
. ** Keep required variables 
. keep if sample_urban95 == 1 & year == 2020 & covid_merge == 3
(20,665 observations deleted)

. keep kmean cases_cum* deaths_cum* population

. collapse (mean) cases_cum* deaths_cum* [fw = population], by(kmean)

. reshape long cases_cum deaths_cum, i(kmean) j(time)
(j = 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 2
> 6 27 28 29)

Data                               Wide   ->   Long
------------------------------------------------------------------------
> -----
Number of observations                5   ->   145         
Number of variables                  59   ->   4           
j variable (29 values)                    ->   time
xij variables:
  cases_cum1 cases_cum2 ... cases_cum29   ->   cases_cum
deaths_cum1 deaths_cum2 ... deaths_cum29  ->   deaths_cum
------------------------------------------------------------------------
> -----

. xtset kmean time 

Panel variable: kmean (strongly balanced)
 Time variable: time, 1 to 29
         Delta: 1 unit

. xtline cases_cum 

. graph export "${results}fig_kmeans.jpg", as(jpg) name("Graph") quality
> (100) replace             
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_km
> eans.jpg written in JPEG format

. clear  

. 
. ** Restore      
. restore 

. 
. ** Define covariates 
. local covariates "population per_capita_income"

. 
. ** Standardize covariates 
. foreach v of local covariates {
  2.         egen tmp_v = std(`v') 
  3.         replace `v' = tmp_v
  4.         drop tmp_v
  5. } // END COVAR LOOP 
variable population was long now double
(20,795 real changes made)
variable per_capita_income was long now double
(20,795 real changes made)

. 
. ** Define outcome variables (IRS)
. foreach x in "n1" "n2" "agi" {
  2.         
.         gen `x'_rate_irs = 100 * (`x'_net_3 / (`x'_out_1 + `x'_out_2))
  3.         
. } // END OUTCOME TYPE LOOP 
(383 missing values generated)
(383 missing values generated)
(383 missing values generated)

. 
. ** Label var 
. label var n1_rate_irs   "Net domestic migration rate, returns (%)"

. label var n2_rate_irs   "Net domestic migration rate, exemptions (%)"

. label var agi_rate_irs  "Net domestic migration rate, AGI (%)"

. 
. 
. ** Define outcome variables (ACS)
. ** Loop over three datasets (18+ = 1, college degree == 2, no college 
> degree == 3)
. forvalues i = 1/3{
  2.         
.         if `i' == 1 local txt "(18+)"
  3.         else if `i' == 2 local txt "(College)"
  4.         else if `i' == 3 local txt "(No College)"
  5.         
.         gen n1_rate_acs`i' = 100 * (acs`i'_households_net_3 / (acs`i'_
> households_out_1 + acs`i'_households_out_2))
  6.         gen n2_rate_acs`i' = 100 * (acs`i'_persons_net_3 / (acs`i'_
> persons_out_1 + acs`i'_persons_out_2))
  7.         gen agi_rate_acs`i' = 100 * (acs`i'_dollars_net_3 / (acs`i'
> _dollars_out_1 + acs`i'_dollars_out_2))
  8.         
.         label var n1_rate_acs`i'        "Net domestic migration rate `
> txt', HHs (%)"
  9.         label var n2_rate_acs`i'        "Net domestic migration rat
> e `txt', persons (%)"
 10.         label var agi_rate_acs`i'       "Net domestic migration rat
> e `txt', total income (%)"
 11.         
. } // END DATA LOOP 
(17,815 missing values generated)
(17,815 missing values generated)
(17,815 missing values generated)
(17,815 missing values generated)
(17,815 missing values generated)
(17,815 missing values generated)
(17,815 missing values generated)
(17,815 missing values generated)
(17,815 missing values generated)

. 
. ** Generate triple-difference vars 
. gen n1_rate_acs4 = n1_rate_acs2 - n1_rate_acs3
(17,815 missing values generated)

. gen n2_rate_acs4 = n2_rate_acs2 - n2_rate_acs3
(17,815 missing values generated)

. gen agi_rate_acs4 = agi_rate_acs2 - agi_rate_acs3
(17,815 missing values generated)

. 
. label var n1_rate_acs4          "Net domestic migration rate (College 
> less No College), HHs (%)"

. label var n2_rate_acs4          "Net domestic migration rate (College 
> less No College), persons (%)"

. label var agi_rate_acs4         "Net domestic migration rate (College 
> less No College), total income (%)"

. 
. ** Declare panel
. xtset fips year 

Panel variable: fips (unbalanced)
 Time variable: year, 2016 to 2023
         Delta: 1 unit

. 
. ** Tag unique fips 
. egen unique = tag(fips)

. tab year unique

  Tax year |
     (year |
    before |       tag(fips)
     move) |         0          1 |     Total
-----------+----------------------+----------
      2016 |         0      2,916 |     2,916 
      2017 |     2,916          0 |     2,916 
      2018 |     2,916          0 |     2,916 
      2019 |     2,916          0 |     2,916 
      2020 |     2,916          0 |     2,916 
      2021 |     2,916          0 |     2,916 
      2022 |     2,916          0 |     2,916 
      2023 |       383          0 |       383 
-----------+----------------------+----------
     Total |    17,879      2,916 |    20,795 

. 
. ** Loop over IRS and ACS Samples  
. foreach data of varlist irs_sample acs_period_1 acs_period_2  {
  2. 
.         ** Different sets of outcome variables 
.         if "`data'" == "irs_sample" local out_type "irs"
  3.         else local out_type "acs1 acs2 acs3 acs4"
  4. 
.         ** Loop over Outcome var type 
.         foreach type of local out_type {
  5.                 
.                 ** Labels 
.                 if "`data'" == "irs_sample" local out_txt "irs_16_22"
  6.                 else if "`data'" == "acs_period_1" & "`type'" == "a
> cs1" local out_txt "acs_16_22_all"
  7.                 else if "`data'" == "acs_period_1" & "`type'" == "a
> cs2" local out_txt "acs_16_22_col"
  8.                 else if "`data'" == "acs_period_1" & "`type'" == "a
> cs3" local out_txt "acs_16_22_noc"
  9.                 else if "`data'" == "acs_period_1" & "`type'" == "a
> cs4" local out_txt "acs_16_22_3D"
 10.                 else if "`data'" == "acs_period_2" & "`type'" == "a
> cs1" local out_txt "acs_16_23_all"
 11.                 else if "`data'" == "acs_period_2" & "`type'" == "a
> cs2" local out_txt "acs_16_23_col"
 12.                 else if "`data'" == "acs_period_2" & "`type'" == "a
> cs3" local out_txt "acs_16_23_noc"
 13.                 else if "`data'" == "acs_period_2" & "`type'" == "a
> cs4" local out_txt "acs_16_23_3D"
 14. 
.                 ** Loop over samples 
.                 foreach samp of varlist sample_all sample_urban95 samp
> le_urban95_covid {        
 15.                         
.                         ** Loop over exclusion of 2019-2020 period 
.                         forvalues exl = 0/1 {
 16.                                 
.                                 ** Define sample        
.                                 gen sample = `samp' == 1 & `data' == 1
>  
 17.                                 if `exl' == 1 replace sample = 0 if
>  year == 2020 
 18.                                 
.                                 ** Clear stored values 
.                                 eststo clear            
 19.                                 
.                                 ** Loop over outcomes 
.                                 foreach out of varlist n1_rate_`type' 
> n2_rate_`type' agi_rate_`type' {
 20.                                 
.                                         ** Store label 
.                                         local label : variable label `
> out'
 21.                                         
.                                         ** Loop over inclusion of cova
> riates
.                                         forvalues c = 0/1 {
 22.                                         
.                                                 if `c' == 0 local cova
> rs ""
 23.                                                 else if `c' == 1 lo
> cal covars "covariates(`covariates', projected)"
 24.                                                 dis "`covars'"
 25.                                                 
.                                                 ** Run SDID
.                                                 eststo sdid_`out'_`c':
>  sdid `out' fips year Treated     ///
>                                                         if sample == 1
> ,                         ///
>                                                         vce(placebo)  
>                           ///
>                                                         `covar'       
>                                   ///
>                                                         reps(`reps')  
>                           ///
>                                                         graph graph_ex
> port("${results}fig_`out_txt'_`out'_`c'_`samp'_", .pdf) 
 26.                                                         
.                                                 ** Estadd counties  
.                                                 qui summ `out' if year
>  == 2021 & sample == 1
 27.                                                 estadd scalar count
>  = r(N)      
 28.                                                         
.                                                 ** Estadd mean 
.                                                 qui summ `out' if mult
> nomah == 1 & Treated == 0 
 29.                                                 estadd scalar mean 
> = r(mean)
 30. 
.                                                 ** Run event-study 
.                                                 sdid_event `out' fips 
> year Treated                      ///
>                                                         if sample == 1
> ,                                         ///
>                                                         `covar'       
>                                                   ///
>                                                         vce(placebo)  
>                                           ///
>                                                         brep(`reps')  
>                                           ///
>                                                         placebo(all)
 31.                                                 
.                                                 ** Create Figure 
.                                                 
.                                                 ** Store max year 
.                                                 qui summ year if multn
> omah == 1 & sample == 1
 32.                                                 local max_yr = r(me
> an)
 33.                                                 
.                                                 ** Move results from m
> atrix to data 
.                                                 qui count if multnomah
>  == 1 & sample == 1
 34.                                                 local ct = r(N)
 35.                                                 local ct = `ct' + 1
 36.                                                 matrix list e(H)
 37.                                                 mat res = e(H)[2..`
> ct',1..5]
 38.                         
.                                                 ** Move Matrix results
>  to data 
.                                                 svmat res
 39.                                                 
.                                                 ** Generate ID variabl
> e
.                                                 gen id = `max_yr' - _n
>  + 1 if !missing(res1)
 40.                                                 if `exl' == 1 {
 41.                                                         expand 2 if
>  year == 2019, gen(tag)
 42.                                                         replace id 
> = 2020 if tag == 1 
 43.                                                         replace res
> 1 = . if tag == 1 
 44.                                                         replace res
> 3 = . if tag == 1 
 45.                                                         replace res
> 4 = . if tag == 1 
 46.                                                         drop tag 
 47.                                                 }
 48.                                                 label var id "Year 
> (destination)"
 49.                                                 
.                                                 ** Sort 
.                                                 sort id
 50.                                                 
.                                                 ** Plot
.                                                 twoway  (rcap res3 res
> 4 id, lc(gs10) fc(gs11%50))       ///
>                                                                 (scatt
> er res1 id, mc(black)),                           ///             
>                                                         legend(off) yt
> itle("`label'")                                   ///
>                                                         yline(0, lc(re
> d) lp(-))                                                 ///
>                                                         xline(2020.5, 
> lc(black) lp(solid))                              ///
>                                                         ylabel(-10(2.5
> )10, format(%9.1f))
 51. 
.                                                 graph export "${result
> s}fig_`out_txt'_`out'_`c'_`samp'_eventstudy.jpg",         ///
>                                                         as(jpg) name("
> Graph") quality(100) replace              
 52. 
.                                                 ** Clean up 
.                                                 drop res1 res2 res3 re
> s4 res5 id 
 53. 
.                                                 ** Update Count
.                                                 local ct = `ct' + 1 
 54.                                                                    
>              
.                                         } // END COVAR LOOP 
 55.                                 
.                                 } // END OUTCOME LOOP 
 56.                         
.                                 ** Table of results 
.                                 esttab  sdid_n1_rate_`type'_0 sdid_n1_
> rate_`type'_1                     ///
>                                                 sdid_n2_rate_`type'_0 
> sdid_n2_rate_`type'_1                     ///
>                                                 sdid_agi_rate_`type'_0
>  sdid_agi_rate_`type'_1 using     ///
>                                 "${results}tab_sdid_`out_txt'_`samp'_e
> xcl2020`exl'.tex",                        ///
>                                 starlevel("*" 0.10 "**" 0.05 "***" 0.0
> 1)                ///
>                                 b(%-9.3f) se(%-9.3f) replace          
>                           ///
>                                 mgroups("Returns" "Exemptions" "AGI", 
>                   ///
>                                         pattern(1 0 1 0 1 0) )        
>                                   ///
>                                 mtitle( "No Covariates" "Covariates"  
>                   ///
>                                                 "No Covariates" "Covar
> iates"                    ///
>                                                 "No Covariates" "Covar
> iates")                   ///
>                                 stats(count mean,                     
>                                           ///
>                                         fmt(%9.0fc %9.3fc)            
>                                           ///
>                                         labels("Number of Counties" "P
> re-treatment mean"))
 57.                                 
.                                 ** Drop sample var 
.                                 drop sample 
 58.                                 
.                         } // END EXCLUSION LOOP 
 59.                         
.                 } // END SAMPLE LOOP 
 60.         
.         } // END OUT TYPE 
 61.         
. } // END DATA LOOP 

Placebo replications (100). This may take some time.
----+--- 1 ---+--- 2 ---+--- 3 ---+--- 4 ---+--- 5
..................................................     50
..................................................     100


Synthetic Difference-in-Differences Estimator

------------------------------------------------------------------------
> -----
 n1_rate_irs |     ATT     Std. Err.     t      P>|t|    [95% Conf. Inte
> rval]
-------------+----------------------------------------------------------
> -----
     Treated |  -1.42893    1.20554    -1.19    0.236    -3.79174     0.
> 93389
------------------------------------------------------------------------
> -----
95% CIs and p-values are based on large-sample approximations.
Refer to Arkhangelsky et al., (2021) for theoretical derivations.
file
    C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_i
    > rs_16_22_n1_rate_irs_0_sample_all_trends2021.pdf saved as PDF
    format

added scalar:
              e(count) =  2916

added scalar:
               e(mean) =  .1434552
Synthetic Difference-in-differences

Boostrap replications (100), placebo mode.
|0% ----------------------------------------- 100%|
|.................................................|


             |  Estimate         SE      LB CI      UB CI  Switchers 
-------------+------------------------------------------------------
         ATT | -1.428925   .6339715  -2.671509  -.1863409          1 
    Effect_1 |  -1.83865   .8499499  -3.504552  -.1727479          1 
    Effect_2 |   -1.0192   .8220404    -2.6304   .5919987          1 
   Placebo_1 | -.0129703   .0474796  -.1060303   .0800896          1 
   Placebo_2 |  .0139657   .0403894  -.0651975   .0931288          1 
   Placebo_3 |  .0045226    .045684   -.085018   .0940632          1 
   Placebo_4 |  -.004614   .0375973  -.0783047   .0690767          1 
   Placebo_5 |  .0181625   .0539166  -.0875141   .1238391          1 

e(H)[8,5]
             Estimate          SE       LB CI       UB CI   Switchers
      ATT  -1.4289251   .63397151  -2.6715092  -.18634095           1
 Effect_1  -1.8386498   .84994994  -3.5045517  -.17274789           1
 Effect_2  -1.0192004   .82204038  -2.6303996   .59199874           1
Placebo_1  -.01297033   .04747957   -.1060303   .08008964           1
Placebo_2   .01396566   .04038936  -.06519748   .09312881           1
Placebo_3    .0045226   .04568398    -.085018    .0940632           1
Placebo_4  -.00461397    .0375973  -.07830469   .06907674           1
Placebo_5   .01816248   .05391663  -.08751411   .12383907           1
(20,788 missing values generated)
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_ir
> s_16_22_n1_rate_irs_0_sample_all_eventstudy.jpg written in JPEG format
covariates(population per_capita_income, projected)
Placebo replications (100). This may take some time.
----+--- 1 ---+--- 2 ---+--- 3 ---+--- 4 ---+--- 5
..................................................     50
..................................................     100


Synthetic Difference-in-Differences Estimator

------------------------------------------------------------------------
> -----
 n1_rate_irs |     ATT     Std. Err.     t      P>|t|    [95% Conf. Inte
> rval]
-------------+----------------------------------------------------------
> -----
     Treated |  -1.42893    0.88856    -1.61    0.108    -3.17047     0.
> 31262
------------------------------------------------------------------------
> -----
95% CIs and p-values are based on large-sample approximations.
Refer to Arkhangelsky et al., (2021) for theoretical derivations.
file
    C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_i
    > rs_16_22_n1_rate_irs_1_sample_all_trends2021.pdf saved as PDF
    format

added scalar:
              e(count) =  2916

added scalar:
               e(mean) =  .1434552
Synthetic Difference-in-differences

Boostrap replications (100), placebo mode.
|0% ----------------------------------------- 100%|
|.................................................|


             |  Estimate         SE      LB CI      UB CI  Switchers 
-------------+------------------------------------------------------
         ATT | -1.428925   .8776867  -3.149191   .2913407          1 
    Effect_1 |  -1.83865   1.019949  -3.837749   .1604496          1 
    Effect_2 |   -1.0192   1.139732  -3.253075   1.214674          1 
   Placebo_1 | -.0129703   .0192507  -.0507017   .0247611          1 
   Placebo_2 |  .0139657   .0229814  -.0310779   .0590093          1 
   Placebo_3 |  .0045226   .0142852  -.0234764   .0325216          1 
   Placebo_4 |  -.004614   .0155913   -.035173    .025945          1 
   Placebo_5 |  .0181625   .0221044  -.0251622   .0614871          1 

e(H)[8,5]
             Estimate          SE       LB CI       UB CI   Switchers
      ATT  -1.4289251   .87768666  -3.1491909   .29134075           1
 Effect_1  -1.8386498   1.0199487  -3.8377492   .16044963           1
 Effect_2  -1.0192004    1.139732  -3.2530752   1.2146743           1
Placebo_1  -.01297033   .01925072  -.05070174   .02476107           1
Placebo_2   .01396566   .02298143  -.03107793   .05900926           1
Placebo_3    .0045226    .0142852   -.0234764    .0325216           1
Placebo_4  -.00461397   .01559134    -.035173   .02594505           1
Placebo_5   .01816248   .02210441  -.02516216   .06148713           1
(20,788 missing values generated)
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_ir
> s_16_22_n1_rate_irs_1_sample_all_eventstudy.jpg written in JPEG format

Placebo replications (100). This may take some time.
----+--- 1 ---+--- 2 ---+--- 3 ---+--- 4 ---+--- 5
..................................................     50
..................................................     100


Synthetic Difference-in-Differences Estimator

------------------------------------------------------------------------
> -----
 n2_rate_irs |     ATT     Std. Err.     t      P>|t|    [95% Conf. Inte
> rval]
-------------+----------------------------------------------------------
> -----
     Treated |  -1.35556    0.99886    -1.36    0.175    -3.31329     0.
> 60216
------------------------------------------------------------------------
> -----
95% CIs and p-values are based on large-sample approximations.
Refer to Arkhangelsky et al., (2021) for theoretical derivations.
file
    C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_i
    > rs_16_22_n2_rate_irs_0_sample_all_trends2021.pdf saved as PDF
    format

added scalar:
              e(count) =  2916

added scalar:
               e(mean) =  -.73591077
Synthetic Difference-in-differences

Boostrap replications (100), placebo mode.
|0% ----------------------------------------- 100%|
|.................................................|


             |  Estimate         SE      LB CI      UB CI  Switchers 
-------------+------------------------------------------------------
         ATT | -1.355564    .844962  -3.011689   .3005619          1 
    Effect_1 | -1.744963   1.072809  -3.847668   .3577417          1 
    Effect_2 |  -.966164   1.109833  -3.141437   1.209109          1 
   Placebo_1 | -.0142295   .1078724  -.2256594   .1972003          1 
   Placebo_2 |  .0150267   .1489251  -.2768664   .3069199          1 
   Placebo_3 |  .0054525   .0371347  -.0673315   .0782364          1 
   Placebo_4 | -.0089254   .1638281  -.3300284   .3121776          1 
   Placebo_5 |  .0149209    .228496  -.4329314   .4627731          1 

e(H)[8,5]
             Estimate          SE       LB CI       UB CI   Switchers
      ATT  -1.3555637   .84496201  -3.0116892   .30056188           1
 Effect_1  -1.7449634   1.0728087  -3.8476684   .35774167           1
 Effect_2  -.96616397   1.1098329  -3.1414365   1.2091086           1
Placebo_1  -.01422954   .10787238   -.2256594   .19720032           1
Placebo_2   .01502674   .14892506  -.27686638   .30691986           1
Placebo_3   .00545246   .03713466  -.06733146   .07823639           1
Placebo_4  -.00892537   .16382806  -.33002836   .31217763           1
Placebo_5   .01492086   .22849603  -.43293135   .46277308           1
(20,788 missing values generated)
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_ir
> s_16_22_n2_rate_irs_0_sample_all_eventstudy.jpg written in JPEG format
covariates(population per_capita_income, projected)
Placebo replications (100). This may take some time.
----+--- 1 ---+--- 2 ---+--- 3 ---+--- 4 ---+--- 5
..................................................     50
..................................................     100


Synthetic Difference-in-Differences Estimator

------------------------------------------------------------------------
> -----
 n2_rate_irs |     ATT     Std. Err.     t      P>|t|    [95% Conf. Inte
> rval]
-------------+----------------------------------------------------------
> -----
     Treated |  -1.35556    0.61277    -2.21    0.027    -2.55657    -0.
> 15456
------------------------------------------------------------------------
> -----
95% CIs and p-values are based on large-sample approximations.
Refer to Arkhangelsky et al., (2021) for theoretical derivations.
file
    C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_i
    > rs_16_22_n2_rate_irs_1_sample_all_trends2021.pdf saved as PDF
    format

added scalar:
              e(count) =  2916

added scalar:
               e(mean) =  -.73591077
Synthetic Difference-in-differences

Boostrap replications (100), placebo mode.
|0% ----------------------------------------- 100%|
|.................................................|


             |  Estimate         SE      LB CI      UB CI  Switchers 
-------------+------------------------------------------------------
         ATT | -1.355564   1.042996  -3.399837   .6887093          1 
    Effect_1 | -1.744963   1.508104  -4.700847    1.21092          1 
    Effect_2 |  -.966164   1.053525  -3.031072   1.098745          1 
   Placebo_1 | -.0142295   .1474724  -.3032754   .2748163          1 
   Placebo_2 |  .0150267   .1577563  -.2941756   .3242291          1 
   Placebo_3 |  .0054525   .3153661  -.6126651   .6235701          1 
   Placebo_4 | -.0089254   .1355615  -.2746258   .2567751          1 
   Placebo_5 |  .0149209   .1490886  -.2772927   .3071345          1 

e(H)[8,5]
             Estimate          SE       LB CI       UB CI   Switchers
      ATT  -1.3555637   1.0429964  -3.3998367   .68870934           1
 Effect_1  -1.7449634   1.5081037  -4.7008466   1.2109199           1
 Effect_2  -.96616397   1.0535247  -3.0310724   1.0987445           1
Placebo_1  -.01422954   .14747239  -.30327542   .27481634           1
Placebo_2   .01502674    .1577563  -.29417561   .32422908           1
Placebo_3   .00545246   .31536612  -.61266512   .62357005           1
Placebo_4  -.00892537   .13556146  -.27462583    .2567751           1
Placebo_5   .01492086   .14908857  -.27729274   .30713446           1
(20,788 missing values generated)
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_ir
> s_16_22_n2_rate_irs_1_sample_all_eventstudy.jpg written in JPEG format

Placebo replications (100). This may take some time.
----+--- 1 ---+--- 2 ---+--- 3 ---+--- 4 ---+--- 5
..................................................     50
..................................................     100


Synthetic Difference-in-Differences Estimator

------------------------------------------------------------------------
> -----
agi_rate_irs |     ATT     Std. Err.     t      P>|t|    [95% Conf. Inte
> rval]
-------------+----------------------------------------------------------
> -----
     Treated |  -3.16140    0.89418    -3.54    0.000    -4.91396    -1.
> 40883
------------------------------------------------------------------------
> -----
95% CIs and p-values are based on large-sample approximations.
Refer to Arkhangelsky et al., (2021) for theoretical derivations.
file
    C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_i
    > rs_16_22_agi_rate_irs_0_sample_all_trends2021.pdf saved as PDF
    format

added scalar:
              e(count) =  2916

added scalar:
               e(mean) =  -.29483641
Synthetic Difference-in-differences

Boostrap replications (100), placebo mode.
|0% ----------------------------------------- 100%|
|.................................................|


             |  Estimate         SE      LB CI      UB CI  Switchers 
-------------+------------------------------------------------------
         ATT | -3.161398   1.085604  -5.289182  -1.033615          1 
    Effect_1 | -3.296967    1.48157  -6.200844  -.3930904          1 
    Effect_2 | -3.025829   1.349811  -5.671458  -.3802005          1 
   Placebo_1 | -.0210602   .0318259   -.083439   .0413185          1 
   Placebo_2 |  .0157834   .0753955  -.1319918   .1635586          1 
   Placebo_3 |  .0083374   .1100253  -.2073122    .223987          1 
   Placebo_4 |  .0053846   .1589176  -.3060938   .3168631          1 
   Placebo_5 |  .0049263     .01968  -.0336466   .0434991          1 

e(H)[8,5]
             Estimate          SE       LB CI       UB CI   Switchers
      ATT  -3.1613982   1.0856038  -5.2891816  -1.0336148           1
 Effect_1  -3.2969672   1.4815698   -6.200844  -.39309044           1
 Effect_2  -3.0258291   1.3498105  -5.6714578  -.38020047           1
Placebo_1  -.02106024   .03182591  -.08343902   .04131854           1
Placebo_2    .0157834   .07539551  -.13199181    .1635586           1
Placebo_3   .00833739    .1100253  -.20731219   .22398698           1
Placebo_4   .00538463   .15891758  -.30609382   .31686308           1
Placebo_5   .00492626   .01968005  -.03364663   .04349915           1
(20,788 missing values generated)
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_ir
> s_16_22_agi_rate_irs_0_sample_all_eventstudy.jpg written in JPEG forma
> t
covariates(population per_capita_income, projected)
Placebo replications (100). This may take some time.
----+--- 1 ---+--- 2 ---+--- 3 ---+--- 4 ---+--- 5
..................................................     50
..................................................     100


Synthetic Difference-in-Differences Estimator

------------------------------------------------------------------------
> -----
agi_rate_irs |     ATT     Std. Err.     t      P>|t|    [95% Conf. Inte
> rval]
-------------+----------------------------------------------------------
> -----
     Treated |  -3.16140    0.97997    -3.23    0.001    -5.08210    -1.
> 24070
------------------------------------------------------------------------
> -----
95% CIs and p-values are based on large-sample approximations.
Refer to Arkhangelsky et al., (2021) for theoretical derivations.
file
    C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_i
    > rs_16_22_agi_rate_irs_1_sample_all_trends2021.pdf saved as PDF
    format

added scalar:
              e(count) =  2916

added scalar:
               e(mean) =  -.29483641
Synthetic Difference-in-differences

Boostrap replications (100), placebo mode.
|0% ----------------------------------------- 100%|
|.................................................|


             |  Estimate         SE      LB CI      UB CI  Switchers 
-------------+------------------------------------------------------
         ATT | -3.161398   1.296967  -5.703454  -.6193427          1 
    Effect_1 | -3.296967   1.968795  -7.155806   .5618711          1 
    Effect_2 | -3.025829   1.816122  -6.585427    .533769          1 
   Placebo_1 | -.0210602   .4295212  -.8629218   .8208013          1 
   Placebo_2 |  .0157834    .560518  -1.082832   1.114399          1 
   Placebo_3 |  .0083374   .4126731   -.800502   .8171768          1 
   Placebo_4 |  .0053846   .3992353  -.7771165   .7878857          1 
   Placebo_5 |  .0049263   .2375801  -.4607307   .4705832          1 

e(H)[8,5]
             Estimate          SE       LB CI       UB CI   Switchers
      ATT  -3.1613982   1.2969671  -5.7034536  -.61934271           1
 Effect_1  -3.2969672   1.9687951  -7.1558056   .56187112           1
 Effect_2  -3.0258291   1.8161215  -6.5854273   .53376903           1
Placebo_1  -.02106024   .42952122  -.86292182   .82080135           1
Placebo_2    .0157834   .56051802  -1.0828319   1.1143987           1
Placebo_3   .00833739   .41267314  -.80050197   .81717675           1
Placebo_4   .00538463   .39923526  -.77711648   .78788574           1
Placebo_5   .00492626   .23758007  -.46073068   .47058319           1
(20,788 missing values generated)
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_ir
> s_16_22_agi_rate_irs_1_sample_all_eventstudy.jpg written in JPEG forma
> t
(file
    C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/tab_s
    > did_irs_16_22_sample_all_excl20200.tex not found)
(output written to C:/Users/ji252/Documents/GitHub/multnomah-county-tax/
> results/tab_sdid_irs_16_22_sample_all_excl20200.tex)
(2,916 real changes made)

Placebo replications (100). This may take some time.
----+--- 1 ---+--- 2 ---+--- 3 ---+--- 4 ---+--- 5
..................................................     50
..................................................     100


Synthetic Difference-in-Differences Estimator

------------------------------------------------------------------------
> -----
 n1_rate_irs |     ATT     Std. Err.     t      P>|t|    [95% Conf. Inte
> rval]
-------------+----------------------------------------------------------
> -----
     Treated |  -1.92529    0.77483    -2.48    0.013    -3.44393    -0.
> 40664
------------------------------------------------------------------------
> -----
95% CIs and p-values are based on large-sample approximations.
Refer to Arkhangelsky et al., (2021) for theoretical derivations.
file
    C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_i
    > rs_16_22_n1_rate_irs_0_sample_all_trends2021.pdf saved as PDF
    format

added scalar:
              e(count) =  2916

added scalar:
               e(mean) =  .1434552
Synthetic Difference-in-differences

Boostrap replications (100), placebo mode.
|0% ----------------------------------------- 100%|
|.................................................|


             |  Estimate         SE      LB CI      UB CI  Switchers 
-------------+------------------------------------------------------
         ATT | -1.925286   1.747727  -5.350831   1.500258          1 
    Effect_1 | -2.430048    2.24232  -6.824995   1.964899          1 
    Effect_2 | -1.420525   1.548986  -4.456536   1.615487          1 
   Placebo_1 |  .0018158   .6705557  -1.312473   1.316105          1 
   Placebo_2 | -.0017198   .8266332  -1.621921   1.618481          1 
   Placebo_3 | -.0060693    .142801  -.2859593   .2738207          1 
   Placebo_4 |  .0088023   1.554396  -3.037813   3.055418          1 

e(H)[7,5]
             Estimate          SE       LB CI       UB CI   Switchers
      ATT  -1.9252863   1.7477269  -5.3508309   1.5002584           1
 Effect_1  -2.4300477     2.24232  -6.8249949   1.9648994           1
 Effect_2  -1.4205248   1.5489855  -4.4565365   1.6154869           1
Placebo_1   .00181583   .67055569  -1.3124733    1.316105           1
Placebo_2  -.00171981   .82663325   -1.621921   1.6184814           1
Placebo_3  -.00606931   .14280102  -.28595931   .27382068           1
Placebo_4   .00880226   1.5543956  -3.0378132   3.0554177           1
(20,789 missing values generated)
(2,916 observations created)
(2,916 real changes made)
(1 real change made, 1 to missing)
(1 real change made, 1 to missing)
(1 real change made, 1 to missing)
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_ir
> s_16_22_n1_rate_irs_0_sample_all_eventstudy.jpg written in JPEG format
covariates(population per_capita_income, projected)
repeated time values within panel
r(451);

end of do-file

r(451);

. do "C:\Users\ji252\Documents\GitHub\multnomah-county-tax\code\02_sdid_
> analysis.do"

. /*********************************************************************
> **********
> File Name:              02_sdid_analysis.do
> Creator:                John Iselin
> Date Update:    November 26, 2025
> 
> Called by: 00_multnomah.do
> 
> Purpose: Preform synthetic difference-in-difference estiamtion. 
> 
> Authors: John Iselin 
> 
> For more information, contact john.iselin@yale.edu
> 
> **********************************************************************
> *********/
. 
. 
. ** Start log file 
. capture log close log_02

. log using "${logs}02_log_sdid_${date}", replace text name(log_02)
------------------------------------------------------------------------
      name:  log_02
       log:  C:/Users/ji252/Documents/GitHub/multnomah-county-tax/code/l
> ogs/02_log_sdid_2026-01-05.log
  log type:  text
 opened on:   6 Jan 2026, 09:31:12

. 
. ** Parameters 
. local reps = 100

. 
. ** Load data 
. use "${data}working/irs_county_gross", replace 

. 
. ** Keep required variables 
. keep year fips state* county* *_net_3 *_out_1 *_out_2 

. order year fips state* county* 

. 
. ** Merge with ACS Data 
. merge 1:1 year fips using "${data}working/acs_county_gross_18plus", ge
> n(merge_acs_1)
(variable fips was float, now double to accommodate using data's
       values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        20,278
        from master                    18,963  (merge_acs_1==1)
        from using                      1,315  (merge_acs_1==2)

    Matched                             3,017  (merge_acs_1==3)
    -----------------------------------------

. 
. ** Keep require variables 
. keep year fips state* county* *_net_3 *_out_1 *_out_2 merge_acs_*

. 
. ** Label acs samples 
. rename persons_* acs1_persons_* 

. rename households_* acs1_households_*

. rename dollars_* acs1_dollars_*

. 
. ** Merge with ACS Data 
. merge 1:1 year fips using "${data}working/acs_county_gross_college", g
> en(merge_acs_2)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        18,963
        from master                    18,963  (merge_acs_2==1)
        from using                          0  (merge_acs_2==2)

    Matched                             4,332  (merge_acs_2==3)
    -----------------------------------------

. 
. ** Keep require variables 
. keep year fips state* county* *_net_3 *_out_1 *_out_2 merge_acs_*

. 
. ** Label acs samples 
. rename persons_* acs2_persons_*

. rename households_* acs2_households_*

. rename dollars_* acs2_dollars_*

. 
. ** Merge with ACS Data 
. merge 1:1 year fips using "${data}working/acs_county_gross_nocollege",
>  gen(merge_acs_3)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        18,963
        from master                    18,963  (merge_acs_3==1)
        from using                          0  (merge_acs_3==2)

    Matched                             4,332  (merge_acs_3==3)
    -----------------------------------------

. 
. ** Keep require variables 
. keep year fips state* county* *_net_3 *_out_1 *_out_2 merge_acs_*

. 
. ** Label acs samples 
. rename persons_* acs3_persons_*

. rename households_* acs3_households_*

. rename dollars_* acs3_dollars_*

. 
. ** TODO add High and Low Education Samples 
. 
. ** Drop "other counties"
. drop if county_fips == 0
(434 observations deleted)

. drop if year == 2015 
(430 observations deleted)

. 
. ** Merge with Demographic data 
. merge m:1 fips using "${data}working/demographics_2020",        ///
>         gen(demo_merge) keep(master match)

    Result                      Number of obs
    -----------------------------------------
    Not matched                            20
        from master                        20  (demo_merge==1)
        from using                          0  (demo_merge==2)

    Matched                            22,411  (demo_merge==3)
    -----------------------------------------

.         
. ** Show match 
. tab state_name demo_merge, m

                     | Matching result from
                     |         merge
          State name | Master on  Matched ( |     Total
---------------------+----------------------+----------
                     |        14          0 |        14 
             Alabama |         0        474 |       474 
              Alaska |         6        197 |       203 
             Arizona |         0        109 |       109 
            Arkansas |         0        528 |       528 
          California |         0        440 |       440 
            Colorado |         0        450 |       450 
         Connecticut |         0         48 |        48 
            Delaware |         0         24 |        24 
District of Columbia |         0          8 |         8 
             Florida |         0        502 |       502 
             Georgia |         0      1,135 |     1,135 
              Hawaii |         0         32 |        32 
               Idaho |         0        309 |       309 
            Illinois |         0        727 |       727 
             Indiana |         0        660 |       660 
                Iowa |         0        698 |       698 
              Kansas |         0        738 |       738 
            Kentucky |         0        847 |       847 
           Louisiana |         0        455 |       455 
               Maine |         0        114 |       114 
            Maryland |         0        179 |       179 
       Massachusetts |         0        107 |       107 
            Michigan |         0        597 |       597 
           Minnesota |         0        617 |       617 
         Mississippi |         0        577 |       577 
            Missouri |         0        812 |       812 
             Montana |         0        393 |       393 
            Nebraska |         0        654 |       654 
              Nevada |         0        121 |       121 
       New Hampshire |         0         70 |        70 
          New Jersey |         0        164 |       164 
          New Mexico |         0        233 |       233 
            New York |         0        455 |       455 
      North Carolina |         0        718 |       718 
        North Dakota |         0        372 |       372 
                Ohio |         0        637 |       637 
            Oklahoma |         0        543 |       543 
              Oregon |         0        260 |       260 
        Pennsylvania |         0        489 |       489 
        Rhode Island |         0         38 |        38 
      South Carolina |         0        330 |       330 
        South Dakota |         0        462 |       462 
           Tennessee |         0        676 |       676 
               Texas |         0      1,816 |     1,816 
                Utah |         0        208 |       208 
             Vermont |         0         99 |        99 
            Virginia |         0        941 |       941 
          Washington |         0        283 |       283 
       West Virginia |         0        386 |       386 
           Wisconsin |         0        517 |       517 
             Wyoming |         0        162 |       162 
---------------------+----------------------+----------
               Total |        20     22,411 |    22,431 

. tab year demo_merge, m

  Tax year |
     (year | Matching result from
    before |         merge
     move) | Master on  Matched ( |     Total
-----------+----------------------+----------
      2016 |         0      3,140 |     3,140 
      2017 |         0      3,140 |     3,140 
      2018 |         0      3,140 |     3,140 
      2019 |         0      3,140 |     3,140 
      2020 |         2      3,140 |     3,142 
      2021 |         2      3,141 |     3,143 
      2022 |         9      3,133 |     3,142 
      2023 |         7        437 |       444 
-----------+----------------------+----------
     Total |        20     22,411 |    22,431 

. 
. ** Keep if matched 
. keep if demo_merge == 3
(20 observations deleted)

. drop demo_merge

. 
. ** Rename 
. rename population pop_census

.         
. ** Merge with Demographic data 
. merge m:1 year fips using "${data}working/bea_economics",       ///
>         gen(econ_merge) keep(master match) 

    Result                      Number of obs
    -----------------------------------------
    Not matched                           366
        from master                       366  (econ_merge==1)
        from using                          0  (econ_merge==2)

    Matched                            22,045  (econ_merge==3)
    -----------------------------------------

.         
. ** Show match 
. tab state_name econ_merge, m

                     | Matching result from
                     |         merge
          State name | Master on  Matched ( |     Total
---------------------+----------------------+----------
             Alabama |         0        474 |       474 
              Alaska |         0        197 |       197 
             Arizona |         0        109 |       109 
            Arkansas |         0        528 |       528 
          California |         0        440 |       440 
            Colorado |         0        450 |       450 
         Connecticut |         0         48 |        48 
            Delaware |         0         24 |        24 
District of Columbia |         0          8 |         8 
             Florida |         0        502 |       502 
             Georgia |         0      1,135 |     1,135 
              Hawaii |         9         23 |        32 
               Idaho |         0        309 |       309 
            Illinois |         0        727 |       727 
             Indiana |         0        660 |       660 
                Iowa |         0        698 |       698 
              Kansas |         0        738 |       738 
            Kentucky |         0        847 |       847 
           Louisiana |         0        455 |       455 
               Maine |         0        114 |       114 
            Maryland |         0        179 |       179 
       Massachusetts |         0        107 |       107 
            Michigan |         0        597 |       597 
           Minnesota |         0        617 |       617 
         Mississippi |         0        577 |       577 
            Missouri |         0        812 |       812 
             Montana |         0        393 |       393 
            Nebraska |         0        654 |       654 
              Nevada |         0        121 |       121 
       New Hampshire |         0         70 |        70 
          New Jersey |         0        164 |       164 
          New Mexico |         0        233 |       233 
            New York |         0        455 |       455 
      North Carolina |         0        718 |       718 
        North Dakota |         0        372 |       372 
                Ohio |         0        637 |       637 
            Oklahoma |         0        543 |       543 
              Oregon |         0        260 |       260 
        Pennsylvania |         0        489 |       489 
        Rhode Island |         0         38 |        38 
      South Carolina |         0        330 |       330 
        South Dakota |         0        462 |       462 
           Tennessee |         0        676 |       676 
               Texas |         0      1,816 |     1,816 
                Utah |         0        208 |       208 
             Vermont |         0         99 |        99 
            Virginia |       357        584 |       941 
          Washington |         0        283 |       283 
       West Virginia |         0        386 |       386 
           Wisconsin |         0        517 |       517 
             Wyoming |         0        162 |       162 
---------------------+----------------------+----------
               Total |       366     22,045 |    22,411 

. tab year econ_merge, m

  Tax year |
     (year | Matching result from
    before |         merge
     move) | Master on  Matched ( |     Total
-----------+----------------------+----------
      2016 |        52      3,088 |     3,140 
      2017 |        52      3,088 |     3,140 
      2018 |        52      3,088 |     3,140 
      2019 |        52      3,088 |     3,140 
      2020 |        52      3,088 |     3,140 
      2021 |        53      3,088 |     3,141 
      2022 |        53      3,080 |     3,133 
      2023 |         0        437 |       437 
-----------+----------------------+----------
     Total |       366     22,045 |    22,411 

. 
. ** Keep if matched 
. keep if econ_merge == 3
(366 observations deleted)

. drop econ_merge

. 
. ** Merge with COVID-19 Data
. merge m:1 fips using ${data}working/covid_cleaned_wide.dta,     ///
>         gen(covid_merge) keep(master match )
(variable state_name was str20, now str24 to accommodate using data's
       values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                            68
        from master                        68  (covid_merge==1)
        from using                          0  (covid_merge==2)

    Matched                            21,977  (covid_merge==3)
    -----------------------------------------

. 
. ** Show match 
. tab state_name covid_merge, m

                      | Matching result from
                      |         merge
           State name | Master on  Matched ( |     Total
----------------------+----------------------+----------
              Alabama |         0        474 |       474 
               Alaska |        28        169 |       197 
              Arizona |         0        109 |       109 
             Arkansas |         0        528 |       528 
           California |         0        440 |       440 
             Colorado |         0        450 |       450 
          Connecticut |         0         48 |        48 
             Delaware |         0         24 |        24 
 District of Columbia |         0          8 |         8 
              Florida |         0        502 |       502 
              Georgia |         0      1,135 |     1,135 
               Hawaii |         0         23 |        23 
                Idaho |         0        309 |       309 
             Illinois |         0        727 |       727 
              Indiana |         0        660 |       660 
                 Iowa |         0        698 |       698 
               Kansas |         0        738 |       738 
             Kentucky |         0        847 |       847 
            Louisiana |         0        455 |       455 
                Maine |         0        114 |       114 
             Maryland |         0        179 |       179 
        Massachusetts |         0        107 |       107 
             Michigan |         0        597 |       597 
            Minnesota |         0        617 |       617 
          Mississippi |         0        577 |       577 
             Missouri |         0        812 |       812 
              Montana |         0        393 |       393 
             Nebraska |         0        654 |       654 
               Nevada |         0        121 |       121 
        New Hampshire |         0         70 |        70 
           New Jersey |         0        164 |       164 
           New Mexico |         0        233 |       233 
             New York |        40        415 |       455 
       North Carolina |         0        718 |       718 
         North Dakota |         0        372 |       372 
                 Ohio |         0        637 |       637 
             Oklahoma |         0        543 |       543 
               Oregon |         0        260 |       260 
         Pennsylvania |         0        489 |       489 
         Rhode Island |         0         38 |        38 
       South Carolina |         0        330 |       330 
         South Dakota |         0        462 |       462 
            Tennessee |         0        676 |       676 
                Texas |         0      1,816 |     1,816 
                 Utah |         0        208 |       208 
              Vermont |         0         99 |        99 
             Virginia |         0        584 |       584 
           Washington |         0        283 |       283 
        West Virginia |         0        386 |       386 
            Wisconsin |         0        517 |       517 
              Wyoming |         0        162 |       162 
----------------------+----------------------+----------
                Total |        68     21,977 |    22,045 

. tab year covid_merge, m

  Tax year |
     (year | Matching result from
    before |         merge
     move) | Master on  Matched ( |     Total
-----------+----------------------+----------
      2016 |         9      3,079 |     3,088 
      2017 |         9      3,079 |     3,088 
      2018 |         9      3,079 |     3,088 
      2019 |         9      3,079 |     3,088 
      2020 |         9      3,079 |     3,088 
      2021 |         9      3,079 |     3,088 
      2022 |         9      3,071 |     3,080 
      2023 |         5        432 |       437 
-----------+----------------------+----------
     Total |        68     21,977 |    22,045 

. 
. ** Organize data 
. order year fips state_* county_* 

. sort fips year  

. isid fips year 

. 
. ** Keep only sample with non-missing base populations
. tab county_name year if (missing(n1_out_1 ) | n1_out_1 == 0 ) & year <
> = 2022

                      |  Tax year
                      |   (year
                      |   before
                      |   move)
          County name |      2017 |     Total
----------------------+-----------+----------
        Loving County |         1 |         1 
----------------------+-----------+----------
                Total |         1 |         1 

. drop if (missing(n1_out_1 ) | n1_out_1 == 0 ) & year <= 2022
(1 observation deleted)

. 
. ** Keep only sample with observations in each year 
. bysort fips: gen ct = _N

. tab county_name state_name if ct < 7 

                      |      State name
          County name | Connect..      Texas |     Total
----------------------+----------------------+----------
     Fairfield County |         6          0 |         6 
      Hartford County |         6          0 |         6 
    Litchfield County |         6          0 |         6 
        Loving County |         0          6 |         6 
     Middlesex County |         6          0 |         6 
     New Haven County |         6          0 |         6 
    New London County |         6          0 |         6 
       Tolland County |         6          0 |         6 
       Windham County |         6          0 |         6 
----------------------+----------------------+----------
                Total |        48          6 |        54 

. drop if ct < 7 
(54 observations deleted)

. drop ct 

. 
. ** Generate IRS sample 
. gen irs_sample = inrange(year, 2016, 2022)

. 
. ** Generate ACS Period Indicators 
. gen acs_period_1 = merge_acs_1 != 1 & inrange(year, 2016, 2022)

. gen acs_period_2 = merge_acs_1 != 1 

. 
. ** Make sure we have a balanced panel of ACS counties 
. gen tmp = merge_acs_1 != 1 

. bysort fips: egen ct_tmp = total(tmp)

. replace acs_period_1 = 0 if ct_tmp != 8 
(246 real changes made)

. replace acs_period_2 = 0 if ct_tmp != 8 
(294 real changes made)

. drop tmp ct_tmp

. 
. tab year acs_period_1 

  Tax year |
     (year |
    before |     acs_period_1
     move) |         0          1 |     Total
-----------+----------------------+----------
      2016 |     2,690        389 |     3,079 
      2017 |     2,690        389 |     3,079 
      2018 |     2,690        389 |     3,079 
      2019 |     2,690        389 |     3,079 
      2020 |     2,690        389 |     3,079 
      2021 |     2,690        389 |     3,079 
      2022 |     2,690        389 |     3,079 
      2023 |       437          0 |       437 
-----------+----------------------+----------
     Total |    19,267      2,723 |    21,990 

. tab year acs_period_2

  Tax year |
     (year |
    before |     acs_period_2
     move) |         0          1 |     Total
-----------+----------------------+----------
      2016 |     2,690        389 |     3,079 
      2017 |     2,690        389 |     3,079 
      2018 |     2,690        389 |     3,079 
      2019 |     2,690        389 |     3,079 
      2020 |     2,690        389 |     3,079 
      2021 |     2,690        389 |     3,079 
      2022 |     2,690        389 |     3,079 
      2023 |        48        389 |       437 
-----------+----------------------+----------
     Total |    18,878      3,112 |    21,990 

. tab state_name acs_period_1     

                      |     acs_period_1
           State name |         0          1 |     Total
----------------------+----------------------+----------
              Alabama |       453         21 |       474 
               Alaska |       190          7 |       197 
              Arizona |        88         21 |       109 
             Arkansas |       507         21 |       528 
           California |       202        238 |       440 
             Colorado |       443          7 |       450 
             Delaware |         3         21 |        24 
 District of Columbia |         1          7 |         8 
              Florida |       306        196 |       502 
              Georgia |       995        140 |     1,135 
               Hawaii |         9         14 |        23 
                Idaho |       302          7 |       309 
             Illinois |       643         84 |       727 
              Indiana |       548        112 |       660 
                 Iowa |       670         28 |       698 
               Kansas |       717         21 |       738 
             Kentucky |       812         35 |       847 
            Louisiana |       406         49 |       455 
                Maine |       100         14 |       114 
             Maryland |       102         77 |       179 
        Massachusetts |        93         14 |       107 
             Michigan |       485        112 |       597 
            Minnesota |       575         42 |       617 
          Mississippi |       556         21 |       577 
             Missouri |       777         35 |       812 
              Montana |       393          0 |       393 
             Nebraska |       633         21 |       654 
               Nevada |       107         14 |       121 
        New Hampshire |        70          0 |        70 
           New Jersey |        45        119 |       164 
           New Mexico |       219         14 |       233 
             New York |       315        140 |       455 
       North Carolina |       592        126 |       718 
         North Dakota |       365          7 |       372 
                 Ohio |       504        133 |       637 
             Oklahoma |       522         21 |       543 
               Oregon |       211         49 |       260 
         Pennsylvania |       349        140 |       489 
         Rhode Island |        17         21 |        38 
       South Carolina |       323          7 |       330 
         South Dakota |       462          0 |       462 
            Tennessee |       627         49 |       676 
                Texas |     1,543        266 |     1,809 
                 Utah |       173         35 |       208 
              Vermont |        99          0 |        99 
             Virginia |       521         63 |       584 
           Washington |       220         63 |       283 
        West Virginia |       386          0 |       386 
            Wisconsin |       426         91 |       517 
              Wyoming |       162          0 |       162 
----------------------+----------------------+----------
                Total |    19,267      2,723 |    21,990 

.         
. ** Define treated state 
. gen multnomah = state_fips == 41 & county_fips == 51

. label var multnomah "Indicator for Multnomah County, Oregon"    

. 
. ** Define treatment indicator 
. gen Treated = multnomah == 1 & year > 2020

. label var Treated "Treatment indicator for Multnomah County, Oregon"  
>   

. 
. ** Define sample 1: All counties 
. gen sample_all = 1 

. label var sample_all "All counties (excluding AK, CA, HI OR, WA)"

. 
. ** Define sample 2: Counties in top 95 percent 
. summ percent_urban if year == 2020, de 

            Percent of population in urban areas
-------------------------------------------------------------
      Percentiles      Smallest
 1%            0              0
 5%            0              0
10%            0              0       Obs               3,079
25%            0              0       Sum of wgt.       3,079

50%     .3256337                      Mean           .3521437
                        Largest       Std. dev.       .332065
75%     .6326353              1
90%      .847923              1       Variance       .1102672
95%     .9372299              1       Skewness       .3661052
99%     .9972304              1       Kurtosis       1.763629

. local cutoff = r(p95) 

. tab state_name multnomah if percent_urban >= `cutoff' & year == 2020

                      |     Indicator for
                      |   Multnomah County,
                      |        Oregon
           State name |         0          1 |     Total
----------------------+----------------------+----------
               Alaska |         1          0 |         1 
              Arizona |         1          0 |         1 
           California |        15          0 |        15 
             Colorado |         4          0 |         4 
             Delaware |         1          0 |         1 
 District of Columbia |         1          0 |         1 
              Florida |        13          0 |        13 
              Georgia |         8          0 |         8 
               Hawaii |         1          0 |         1 
                Idaho |         1          0 |         1 
             Illinois |         5          0 |         5 
              Indiana |         3          0 |         3 
                 Iowa |         1          0 |         1 
               Kansas |         2          0 |         2 
             Kentucky |         2          0 |         2 
            Louisiana |         3          0 |         3 
             Maryland |         3          0 |         3 
        Massachusetts |         5          0 |         5 
             Michigan |         3          0 |         3 
            Minnesota |         3          0 |         3 
             Missouri |         4          0 |         4 
             Nebraska |         2          0 |         2 
               Nevada |         3          0 |         3 
           New Jersey |        10          0 |        10 
           New Mexico |         2          0 |         2 
             New York |         9          0 |         9 
       North Carolina |         4          0 |         4 
                 Ohio |         6          0 |         6 
             Oklahoma |         1          0 |         1 
               Oregon |         1          1 |         2 
         Pennsylvania |         4          0 |         4 
         Rhode Island |         2          0 |         2 
            Tennessee |         2          0 |         2 
                Texas |        11          0 |        11 
                 Utah |         4          0 |         4 
             Virginia |        10          0 |        10 
           Washington |         1          0 |         1 
            Wisconsin |         1          0 |         1 
----------------------+----------------------+----------
                Total |       153          1 |       154 

. gen sample_urban95 = percent_urban >= `cutoff' // All counties 

. label var sample_urban95 "Urban counties (top 5%) (excluding AK, CA, H
> I OR, WA)"

. tab sample_urban95 if year == 2020

      Urban |
   counties |
   (top 5%) |
 (excluding |
 AK, CA, HI |
    OR, WA) |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |      2,925       95.00       95.00
          1 |        154        5.00      100.00
------------+-----------------------------------
      Total |      3,079      100.00

. 
. ** Define sample 3: Counties in top 98 percent 
. local cutoff = .9864539 //

. tab state_name multnomah if percent_urban >= `cutoff' & year == 2020

                      |     Indicator for
                      |   Multnomah County,
                      |        Oregon
           State name |         0          1 |     Total
----------------------+----------------------+----------
           California |         6          0 |         6 
             Colorado |         2          0 |         2 
 District of Columbia |         1          0 |         1 
              Florida |         4          0 |         4 
              Georgia |         5          0 |         5 
             Illinois |         2          0 |         2 
              Indiana |         1          0 |         1 
            Louisiana |         1          0 |         1 
             Maryland |         1          0 |         1 
        Massachusetts |         1          0 |         1 
             Michigan |         1          0 |         1 
            Minnesota |         1          0 |         1 
             Missouri |         1          0 |         1 
               Nevada |         1          0 |         1 
           New Jersey |         6          0 |         6 
             New York |         7          0 |         7 
       North Carolina |         1          0 |         1 
                 Ohio |         1          0 |         1 
               Oregon |         0          1 |         1 
         Pennsylvania |         2          0 |         2 
         Rhode Island |         1          0 |         1 
                Texas |         3          0 |         3 
                 Utah |         2          0 |         2 
             Virginia |         8          0 |         8 
            Wisconsin |         1          0 |         1 
----------------------+----------------------+----------
                Total |        60          1 |        61 

. gen sample_urban98 = percent_urban >= `cutoff' // All counties 

. label var sample_urban98 "Urban counties (top 1%) (excluding AK, CA, H
> I OR, WA)"

. tab sample_urban98 if year == 2020

      Urban |
   counties |
   (top 1%) |
 (excluding |
 AK, CA, HI |
    OR, WA) |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |      3,018       98.02       98.02
          1 |         61        1.98      100.00
------------+-----------------------------------
      Total |      3,079      100.00

. 
. ** Define Sample of States      
. drop if state_name == "Alaska"
(197 observations deleted)

. drop if state_name == "Hawaii"
(23 observations deleted)

. drop if state_name == "California"
(440 observations deleted)

. drop if state_name == "Washington"
(283 observations deleted)

. drop if state_name == "Oregon" & multnomah == 0
(252 observations deleted)

. 
. ** Define sample 4: Counties in top 95 + covid 
. cluster kmeans cases_cum* deaths_cum* if        ///
>         sample_urban95 == 1 & year == 2020 & covid_merge == 3 , k(5) g
> en(kmean)
cluster name: _clus_1

. bysort fips: egen kmean_group = mean(kmean)
(19,774 missing values generated)

. 
. ** Pull out kmeans cluster with Multnoma
. gen tmp1 = kmean if sample_urban95 == 1 & year == 2020 & covid_merge =
> = 3 & multnomah == 1 
(20,794 missing values generated)

. egen tmp2 = mean(tmp1)

. gen sample_urban95_covid = sample_urban95 == 1 & kmean_group == tmp2

. drop tmp1 tmp2 

. label var sample_urban95_covid "Urban counties (top 5%) w. Kmean Covid
>  Match  (excluding AK, CA, HI OR, WA)"

. tab sample_urban95_covid if year == 2020

      Urban |
   counties |
(top 5%) w. |
Kmean Covid |
      Match |
 (excluding |
 AK, CA, HI |
    OR, WA) |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |      2,879       98.73       98.73
          1 |         37        1.27      100.00
------------+-----------------------------------
      Total |      2,916      100.00

. 
. ** Show results across clusters 
. preserve 

. 
. ** Keep required variables 
. keep if sample_urban95 == 1 & year == 2020 & covid_merge == 3
(20,665 observations deleted)

. keep kmean cases_cum* deaths_cum* population

. collapse (mean) cases_cum* deaths_cum* [fw = population], by(kmean)

. reshape long cases_cum deaths_cum, i(kmean) j(time)
(j = 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 2
> 6 27 28 29)

Data                               Wide   ->   Long
------------------------------------------------------------------------
> -----
Number of observations                5   ->   145         
Number of variables                  59   ->   4           
j variable (29 values)                    ->   time
xij variables:
  cases_cum1 cases_cum2 ... cases_cum29   ->   cases_cum
deaths_cum1 deaths_cum2 ... deaths_cum29  ->   deaths_cum
------------------------------------------------------------------------
> -----

. xtset kmean time 

Panel variable: kmean (strongly balanced)
 Time variable: time, 1 to 29
         Delta: 1 unit

. xtline cases_cum 

. graph export "${results}fig_kmeans.jpg", as(jpg) name("Graph") quality
> (100) replace             
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_km
> eans.jpg written in JPEG format

. clear  

. 
. ** Restore      
. restore 

. 
. ** Define covariates 
. local covariates "population per_capita_income"

. 
. ** Standardize covariates 
. foreach v of local covariates {
  2.         egen tmp_v = std(`v') 
  3.         replace `v' = tmp_v
  4.         drop tmp_v
  5. } // END COVAR LOOP 
variable population was long now double
(20,795 real changes made)
variable per_capita_income was long now double
(20,795 real changes made)

. 
. ** Define outcome variables (IRS)
. foreach x in "n1" "n2" "agi" {
  2.         
.         gen `x'_rate_irs = 100 * (`x'_net_3 / (`x'_out_1 + `x'_out_2))
  3.         
. } // END OUTCOME TYPE LOOP 
(383 missing values generated)
(383 missing values generated)
(383 missing values generated)

. 
. ** Label var 
. label var n1_rate_irs   "Net domestic migration rate, returns (%)"

. label var n2_rate_irs   "Net domestic migration rate, exemptions (%)"

. label var agi_rate_irs  "Net domestic migration rate, AGI (%)"

. 
. 
. ** Define outcome variables (ACS)
. ** Loop over three datasets (18+ = 1, college degree == 2, no college 
> degree == 3)
. forvalues i = 1/3{
  2.         
.         if `i' == 1 local txt "(18+)"
  3.         else if `i' == 2 local txt "(College)"
  4.         else if `i' == 3 local txt "(No College)"
  5.         
.         gen n1_rate_acs`i' = 100 * (acs`i'_households_net_3 / (acs`i'_
> households_out_1 + acs`i'_households_out_2))
  6.         gen n2_rate_acs`i' = 100 * (acs`i'_persons_net_3 / (acs`i'_
> persons_out_1 + acs`i'_persons_out_2))
  7.         gen agi_rate_acs`i' = 100 * (acs`i'_dollars_net_3 / (acs`i'
> _dollars_out_1 + acs`i'_dollars_out_2))
  8.         
.         label var n1_rate_acs`i'        "Net domestic migration rate `
> txt', HHs (%)"
  9.         label var n2_rate_acs`i'        "Net domestic migration rat
> e `txt', persons (%)"
 10.         label var agi_rate_acs`i'       "Net domestic migration rat
> e `txt', total income (%)"
 11.         
. } // END DATA LOOP 
(17,815 missing values generated)
(17,815 missing values generated)
(17,815 missing values generated)
(17,815 missing values generated)
(17,815 missing values generated)
(17,815 missing values generated)
(17,815 missing values generated)
(17,815 missing values generated)
(17,815 missing values generated)

. 
. ** Generate triple-difference vars 
. gen n1_rate_acs4 = n1_rate_acs2 - n1_rate_acs3
(17,815 missing values generated)

. gen n2_rate_acs4 = n2_rate_acs2 - n2_rate_acs3
(17,815 missing values generated)

. gen agi_rate_acs4 = agi_rate_acs2 - agi_rate_acs3
(17,815 missing values generated)

. 
. label var n1_rate_acs4          "Net domestic migration rate (College 
> less No College), HHs (%)"

. label var n2_rate_acs4          "Net domestic migration rate (College 
> less No College), persons (%)"

. label var agi_rate_acs4         "Net domestic migration rate (College 
> less No College), total income (%)"

. 
. ** Declare panel
. xtset fips year 

Panel variable: fips (unbalanced)
 Time variable: year, 2016 to 2023
         Delta: 1 unit

. 
. ** Tag unique fips 
. egen unique = tag(fips)

. tab year unique

  Tax year |
     (year |
    before |       tag(fips)
     move) |         0          1 |     Total
-----------+----------------------+----------
      2016 |         0      2,916 |     2,916 
      2017 |     2,916          0 |     2,916 
      2018 |     2,916          0 |     2,916 
      2019 |     2,916          0 |     2,916 
      2020 |     2,916          0 |     2,916 
      2021 |     2,916          0 |     2,916 
      2022 |     2,916          0 |     2,916 
      2023 |       383          0 |       383 
-----------+----------------------+----------
     Total |    17,879      2,916 |    20,795 

. 
. ** Loop over IRS and ACS Samples  
. foreach data of varlist irs_sample acs_period_1 acs_period_2  {
  2. 
.         ** Different sets of outcome variables 
.         if "`data'" == "irs_sample" local out_type "irs"
  3.         else local out_type "acs1 acs2 acs3 acs4"
  4. 
.         ** Loop over Outcome var type 
.         foreach type of local out_type {
  5.                 
.                 ** Labels 
.                 if "`data'" == "irs_sample" local out_txt "irs_16_22"
  6.                 else if "`data'" == "acs_period_1" & "`type'" == "a
> cs1" local out_txt "acs_16_22_all"
  7.                 else if "`data'" == "acs_period_1" & "`type'" == "a
> cs2" local out_txt "acs_16_22_col"
  8.                 else if "`data'" == "acs_period_1" & "`type'" == "a
> cs3" local out_txt "acs_16_22_noc"
  9.                 else if "`data'" == "acs_period_1" & "`type'" == "a
> cs4" local out_txt "acs_16_22_3D"
 10.                 else if "`data'" == "acs_period_2" & "`type'" == "a
> cs1" local out_txt "acs_16_23_all"
 11.                 else if "`data'" == "acs_period_2" & "`type'" == "a
> cs2" local out_txt "acs_16_23_col"
 12.                 else if "`data'" == "acs_period_2" & "`type'" == "a
> cs3" local out_txt "acs_16_23_noc"
 13.                 else if "`data'" == "acs_period_2" & "`type'" == "a
> cs4" local out_txt "acs_16_23_3D"
 14. 
.                 ** Loop over samples 
.                 foreach samp of varlist sample_all sample_urban95 samp
> le_urban95_covid {        
 15.                         
.                         ** Loop over exclusion of 2019-2020 period 
.                         forvalues exl = 0/1 {
 16.                                 
.                                 ** Define sample        
.                                 gen sample = `samp' == 1 & `data' == 1
>  
 17.                                 if `exl' == 1 replace sample = 0 if
>  year == 2020 
 18.                                 
.                                 ** Clear stored values 
.                                 eststo clear            
 19.                                 
.                                 ** Loop over outcomes 
.                                 foreach out of varlist n1_rate_`type' 
> n2_rate_`type' agi_rate_`type' {
 20.                                 
.                                         ** Store label 
.                                         local label : variable label `
> out'
 21.                                         
.                                         ** Loop over inclusion of cova
> riates
.                                         forvalues c = 1(-1)0 {
 22.                                         
.                                                 ** Covariates 
.                                                 if `c' == 0 local cova
> rs ""
 23.                                                 else if `c' == 1 lo
> cal covars "covariates(`covariates', projected)"
 24.                                                 
.                                                 ** File Name 
.                                                 if `exl' == 0 local pa
> th "${results}fig_`out_txt'_`out'_`c'_`samp'_"
 25.                                                 if `exl' == 1 local
>  path "${results}fig_`out_txt'_`out'_`c'_`samp'_excl2020_"
 26.         
.                                                 
.                                                 ** Run SDID
.                                                 eststo sdid_`out'_`c':
>  sdid `out' fips year Treated     ///
>                                                         if sample == 1
> ,                         ///
>                                                         vce(placebo)  
>                           ///
>                                                         `covar'       
>                                   ///
>                                                         reps(`reps')  
>                           ///
>                                                         graph graph_ex
> port("`path'", .pdf) 
 27.                                                         
.                                                 ** Estadd counties  
.                                                 qui summ `out' if year
>  == 2021 & sample == 1
 28.                                                 estadd scalar count
>  = r(N)      
 29.                                                         
.                                                 ** Estadd mean 
.                                                 qui summ `out' if mult
> nomah == 1 & Treated == 0 
 30.                                                 estadd scalar mean 
> = r(mean)
 31. 
.                                                 ** Run event-study 
.                                                 sdid_event `out' fips 
> year Treated                      ///
>                                                         if sample == 1
> ,                                         ///
>                                                         `covar'       
>                                                   ///
>                                                         vce(placebo)  
>                                           ///
>                                                         brep(`reps')  
>                                           ///
>                                                         placebo(all)
 32.                                                 
.                                                 ** Create Figure 
.                                                 
.                                                 ** Store max year 
.                                                 qui summ year if multn
> omah == 1 & sample == 1
 33.                                                 local max_yr = r(me
> an)
 34.                                                 dis "`max_yr'"
 35.                                                 
.                                                 ** Move results from m
> atrix to data 
.                                                 qui count if multnomah
>  == 1 & sample == 1
 36.                                                 local ct = r(N)
 37.                                                 local ct = `ct' + 1
 38.                                                 matrix list e(H)
 39.                                                 mat res = e(H)[2..`
> ct',1..5]
 40.                         
.                                                 ** Move Matrix results
>  to data 
.                                                 svmat res
 41.                                                 dfd
 42.                                                 ** Generate ID vari
> able
.                                                 gen id = `max_yr' - _n
>  + 1 if !missing(res1)
 43.                                                 if `exl' == 1 {
 44.                                                         expand 2 if
>  year == 2019, gen(tag)
 45.                                                         replace id 
> = 2020 if tag == 1 
 46.                                                         replace res
> 1 = . if tag == 1 
 47.                                                         replace res
> 3 = . if tag == 1 
 48.                                                         replace res
> 4 = . if tag == 1 
 49.                                                         drop tag 
 50.                                                 }
 51.                                                 label var id "Year 
> (destination)"
 52.                                                 
.                                                 ** Sort 
.                                                 sort id
 53.                                                 
.                                                 ** Plot
.                                                 twoway  (rcap res3 res
> 4 id, lc(gs10) fc(gs11%50))       ///
>                                                                 (scatt
> er res1 id, mc(black)),                           ///             
>                                                         legend(off) yt
> itle("`label'")                                   ///
>                                                         yline(0, lc(re
> d) lp(-))                                                 ///
>                                                         xline(2020.5, 
> lc(black) lp(solid))                              ///
>                                                         ylabel(-10(2.5
> )10, format(%9.1f))
 54. 
.                                                 if `exl' == 0 local pa
> th "${results}fig_`out_txt'_`out'_`c'_`samp'_eventstudy.jpg"
 55.                                                 if `exl' == 1 local
>  path "${results}fig_`out_txt'_`out'_`c'_`samp'_excl2020_eventstudy.jp
> g"
 56.         
.                                                         
.                                                 graph export "`path'",
>   ///
>                                                         as(jpg) name("
> Graph") quality(100) replace              
 57. 
.                                                 ** Clean up 
.                                                 drop res1 res2 res3 re
> s4 res5 id 
 58. 
.                                                 ** Update Count
.                                                 local ct = `ct' + 1 
 59.                                                                    
>              
.                                         } // END COVAR LOOP 
 60.                                 
.                                 } // END OUTCOME LOOP 
 61.                                 
.                                 ** Determine name 
.                                 if `exl' == 0 local path "${results}ta
> b_sdid_`out_txt'_`samp'.tex"
 62.                                 if `exl' == 1 local path "${results
> }tab_sdid_`out_txt'_`samp'_excl2020.tex"
 63. 
.                                 ** Table of results 
.                                 esttab  sdid_n1_rate_`type'_0 sdid_n1_
> rate_`type'_1                     ///
>                                                 sdid_n2_rate_`type'_0 
> sdid_n2_rate_`type'_1                     ///
>                                                 sdid_agi_rate_`type'_0
>  sdid_agi_rate_`type'_1 using     ///
>                                 "`path'",                             
>                                                   ///
>                                 starlevel("*" 0.10 "**" 0.05 "***" 0.0
> 1)                ///
>                                 b(%-9.3f) se(%-9.3f) replace          
>                           ///
>                                 mgroups("Returns" "Exemptions" "AGI", 
>                   ///
>                                         pattern(1 0 1 0 1 0) )        
>                                   ///
>                                 mtitle( "No Covariates" "Covariates"  
>                   ///
>                                                 "No Covariates" "Covar
> iates"                    ///
>                                                 "No Covariates" "Covar
> iates")                   ///
>                                 stats(count mean,                     
>                                           ///
>                                         fmt(%9.0fc %9.3fc)            
>                                           ///
>                                         labels("Number of Counties" "P
> re-treatment mean"))
 64.                                 
.                                 ** Drop sample var 
.                                 drop sample 
 65.                                 
.                         } // END EXCLUSION LOOP 
 66.                         
.                 } // END SAMPLE LOOP 
 67.         
.         } // END OUT TYPE 
 68.         
. } // END DATA LOOP 
Placebo replications (100). This may take some time.
----+--- 1 ---+--- 2 ---+--- 3 ---+--- 4 ---+--- 5
..................................................     50
..................................................     100


Synthetic Difference-in-Differences Estimator

------------------------------------------------------------------------
> -----
 n1_rate_irs |     ATT     Std. Err.     t      P>|t|    [95% Conf. Inte
> rval]
-------------+----------------------------------------------------------
> -----
     Treated |  -1.42893    0.77071    -1.85    0.064    -2.93948     0.
> 08163
------------------------------------------------------------------------
> -----
95% CIs and p-values are based on large-sample approximations.
Refer to Arkhangelsky et al., (2021) for theoretical derivations.
file
    C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_i
    > rs_16_22_n1_rate_irs_1_sample_all_trends2021.pdf saved as PDF
    format

added scalar:
              e(count) =  2916

added scalar:
               e(mean) =  .1434552
Synthetic Difference-in-differences

Boostrap replications (100), placebo mode.
|0% ----------------------------------------- 100%|
|.................................................|


             |  Estimate         SE      LB CI      UB CI  Switchers 
-------------+------------------------------------------------------
         ATT | -1.428925   .9647322    -3.3198   .4619501          1 
    Effect_1 |  -1.83865   1.186818  -4.164813   .4875132          1 
    Effect_2 |   -1.0192   1.203081  -3.377239   1.338838          1 
   Placebo_1 | -.0129703   .0490756  -.1091586   .0832179          1 
   Placebo_2 |  .0139657    .035574  -.0557593   .0836906          1 
   Placebo_3 |  .0045226   .1450693  -.2798133   .2888585          1 
   Placebo_4 |  -.004614   .0458749  -.0945287   .0853007          1 
   Placebo_5 |  .0181625   .0568599  -.0932829   .1296079          1 
2019

e(H)[8,5]
             Estimate          SE       LB CI       UB CI   Switchers
      ATT  -1.4289251   .96473223  -3.3198003   .46195008           1
 Effect_1  -1.8386498   1.1868178  -4.1648128   .48751319           1
 Effect_2  -1.0192004   1.2030811  -3.3772393   1.3388385           1
Placebo_1  -.01297033   .04907563  -.10915857   .08321791           1
Placebo_2   .01396566   .03557396   -.0557593   .08369062           1
Placebo_3    .0045226   .14506934  -.27981331   .28885851           1
Placebo_4  -.00461397   .04587485  -.09452869   .08530074           1
Placebo_5   .01816248   .05685988  -.09328289   .12960786           1
command dfd is unrecognized
r(199);

end of do-file

r(199);

. summ year

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
        year |     20,795    2019.074    2.053239       2016       2023

. sum year if sample == 1

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
        year |     20,412        2019    2.000049       2016       2022

. do "C:\Users\ji252\AppData\Local\Temp\STD4490_000003.tmp"

.                                                         qui summ year 
> if multnomah == 1 & sample == 1

.                                                 local max_yr = r(mean)

.                                                 dis "`max_yr'"
2019

.                                                 
.                                                 ** Generate ID variabl
> e
.                                                 gen id = `max_yr' - _n
>  + 1 if !missing(res1)
(20,788 missing values generated)

.                                                 
. 
end of do-file

. drop id

. do "C:\Users\ji252\AppData\Local\Temp\STD4490_000004.tmp"

.                                                 
.                                                         qui summ year 
> if multnomah == 1 & sample == 1

.                                                 local max_yr = r(max)

.                                                 dis "`max_yr'"
2022

.                                                 
.                                                 ** Generate ID variabl
> e
. 
end of do-file

. list res* id if !missing(id)
variable id not found
r(111);

. do "C:\Users\ji252\AppData\Local\Temp\STD4490_000005.tmp"

.                                                         qui summ year 
> if multnomah == 1 & sample == 1

.                                                 local max_yr = r(max)

.                                                 dis "`max_yr'"
2022

.                                                 
.                                                 ** Generate ID variabl
> e
.                                                 gen id = `max_yr' - _n
>  + 1 if !missing(res1)
(20,788 missing values generated)

.                                                 
.                                                 
. 
end of do-file

. list res* id if !missing(id)

       +-----------------------------------------------------------+
       |      res1       res2        res3       res4   res5     id |
       |-----------------------------------------------------------|
    1. |  -1.83865   1.186818   -4.164813   .4875132      1   2022 |
    2. |   -1.0192   1.203081   -3.377239   1.338838      1   2021 |
    3. | -.0129703   .0490756   -.1091586   .0832179      1   2020 |
    4. |  .0139657    .035574   -.0557593   .0836906      1   2019 |
    5. |  .0045226   .1450693   -.2798133   .2888585      1   2018 |
       |-----------------------------------------------------------|
    6. |  -.004614   .0458749   -.0945287   .0853007      1   2017 |
    7. |  .0181625   .0568599   -.0932829   .1296079      1   2016 |
       +-----------------------------------------------------------+

. do "C:\Users\ji252\AppData\Local\Temp\STD4490_000006.tmp"

. /*********************************************************************
> **********
> File Name:              02_sdid_analysis.do
> Creator:                John Iselin
> Date Update:    November 26, 2025
> 
> Called by: 00_multnomah.do
> 
> Purpose: Preform synthetic difference-in-difference estiamtion. 
> 
> Authors: John Iselin 
> 
> For more information, contact john.iselin@yale.edu
> 
> **********************************************************************
> *********/
. 
. 
. ** Start log file 
. capture log close log_02

. log using "${logs}02_log_sdid_${date}", replace text name(log_02)
------------------------------------------------------------------------
      name:  log_02
       log:  C:/Users/ji252/Documents/GitHub/multnomah-county-tax/code/l
> ogs/02_log_sdid_2026-01-05.log
  log type:  text
 opened on:   6 Jan 2026, 09:57:47

. 
. ** Parameters 
. local reps = 100

. 
. ** Load data 
. use "${data}working/irs_county_gross", replace 

. 
. ** Keep required variables 
. keep year fips state* county* *_net_3 *_out_1 *_out_2 

. order year fips state* county* 

. 
. ** Merge with ACS Data 
. merge 1:1 year fips using "${data}working/acs_county_gross_18plus", ge
> n(merge_acs_1)
(variable fips was float, now double to accommodate using data's
       values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        20,278
        from master                    18,963  (merge_acs_1==1)
        from using                      1,315  (merge_acs_1==2)

    Matched                             3,017  (merge_acs_1==3)
    -----------------------------------------

. 
. ** Keep require variables 
. keep year fips state* county* *_net_3 *_out_1 *_out_2 merge_acs_*

. 
. ** Label acs samples 
. rename persons_* acs1_persons_* 

. rename households_* acs1_households_*

. rename dollars_* acs1_dollars_*

. 
. ** Merge with ACS Data 
. merge 1:1 year fips using "${data}working/acs_county_gross_college", g
> en(merge_acs_2)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        18,963
        from master                    18,963  (merge_acs_2==1)
        from using                          0  (merge_acs_2==2)

    Matched                             4,332  (merge_acs_2==3)
    -----------------------------------------

. 
. ** Keep require variables 
. keep year fips state* county* *_net_3 *_out_1 *_out_2 merge_acs_*

. 
. ** Label acs samples 
. rename persons_* acs2_persons_*

. rename households_* acs2_households_*

. rename dollars_* acs2_dollars_*

. 
. ** Merge with ACS Data 
. merge 1:1 year fips using "${data}working/acs_county_gross_nocollege",
>  gen(merge_acs_3)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        18,963
        from master                    18,963  (merge_acs_3==1)
        from using                          0  (merge_acs_3==2)

    Matched                             4,332  (merge_acs_3==3)
    -----------------------------------------

. 
. ** Keep require variables 
. keep year fips state* county* *_net_3 *_out_1 *_out_2 merge_acs_*

. 
. ** Label acs samples 
. rename persons_* acs3_persons_*

. rename households_* acs3_households_*

. rename dollars_* acs3_dollars_*

. 
. ** TODO add High and Low Education Samples 
. 
. ** Drop "other counties"
. drop if county_fips == 0
(434 observations deleted)

. drop if year == 2015 
(430 observations deleted)

. 
. ** Merge with Demographic data 
. merge m:1 fips using "${data}working/demographics_2020",        ///
>         gen(demo_merge) keep(master match)

    Result                      Number of obs
    -----------------------------------------
    Not matched                            20
        from master                        20  (demo_merge==1)
        from using                          0  (demo_merge==2)

    Matched                            22,411  (demo_merge==3)
    -----------------------------------------

.         
. ** Show match 
. tab state_name demo_merge, m

                     | Matching result from
                     |         merge
          State name | Master on  Matched ( |     Total
---------------------+----------------------+----------
                     |        14          0 |        14 
             Alabama |         0        474 |       474 
              Alaska |         6        197 |       203 
             Arizona |         0        109 |       109 
            Arkansas |         0        528 |       528 
          California |         0        440 |       440 
            Colorado |         0        450 |       450 
         Connecticut |         0         48 |        48 
            Delaware |         0         24 |        24 
District of Columbia |         0          8 |         8 
             Florida |         0        502 |       502 
             Georgia |         0      1,135 |     1,135 
              Hawaii |         0         32 |        32 
               Idaho |         0        309 |       309 
            Illinois |         0        727 |       727 
             Indiana |         0        660 |       660 
                Iowa |         0        698 |       698 
              Kansas |         0        738 |       738 
            Kentucky |         0        847 |       847 
           Louisiana |         0        455 |       455 
               Maine |         0        114 |       114 
            Maryland |         0        179 |       179 
       Massachusetts |         0        107 |       107 
            Michigan |         0        597 |       597 
           Minnesota |         0        617 |       617 
         Mississippi |         0        577 |       577 
            Missouri |         0        812 |       812 
             Montana |         0        393 |       393 
            Nebraska |         0        654 |       654 
              Nevada |         0        121 |       121 
       New Hampshire |         0         70 |        70 
          New Jersey |         0        164 |       164 
          New Mexico |         0        233 |       233 
            New York |         0        455 |       455 
      North Carolina |         0        718 |       718 
        North Dakota |         0        372 |       372 
                Ohio |         0        637 |       637 
            Oklahoma |         0        543 |       543 
              Oregon |         0        260 |       260 
        Pennsylvania |         0        489 |       489 
        Rhode Island |         0         38 |        38 
      South Carolina |         0        330 |       330 
        South Dakota |         0        462 |       462 
           Tennessee |         0        676 |       676 
               Texas |         0      1,816 |     1,816 
                Utah |         0        208 |       208 
             Vermont |         0         99 |        99 
            Virginia |         0        941 |       941 
          Washington |         0        283 |       283 
       West Virginia |         0        386 |       386 
           Wisconsin |         0        517 |       517 
             Wyoming |         0        162 |       162 
---------------------+----------------------+----------
               Total |        20     22,411 |    22,431 

. tab year demo_merge, m

  Tax year |
     (year | Matching result from
    before |         merge
     move) | Master on  Matched ( |     Total
-----------+----------------------+----------
      2016 |         0      3,140 |     3,140 
      2017 |         0      3,140 |     3,140 
      2018 |         0      3,140 |     3,140 
      2019 |         0      3,140 |     3,140 
      2020 |         2      3,140 |     3,142 
      2021 |         2      3,141 |     3,143 
      2022 |         9      3,133 |     3,142 
      2023 |         7        437 |       444 
-----------+----------------------+----------
     Total |        20     22,411 |    22,431 

. 
. ** Keep if matched 
. keep if demo_merge == 3
(20 observations deleted)

. drop demo_merge

. 
. ** Rename 
. rename population pop_census

.         
. ** Merge with Demographic data 
. merge m:1 year fips using "${data}working/bea_economics",       ///
>         gen(econ_merge) keep(master match) 

    Result                      Number of obs
    -----------------------------------------
    Not matched                           366
        from master                       366  (econ_merge==1)
        from using                          0  (econ_merge==2)

    Matched                            22,045  (econ_merge==3)
    -----------------------------------------

.         
. ** Show match 
. tab state_name econ_merge, m

                     | Matching result from
                     |         merge
          State name | Master on  Matched ( |     Total
---------------------+----------------------+----------
             Alabama |         0        474 |       474 
              Alaska |         0        197 |       197 
             Arizona |         0        109 |       109 
            Arkansas |         0        528 |       528 
          California |         0        440 |       440 
            Colorado |         0        450 |       450 
         Connecticut |         0         48 |        48 
            Delaware |         0         24 |        24 
District of Columbia |         0          8 |         8 
             Florida |         0        502 |       502 
             Georgia |         0      1,135 |     1,135 
              Hawaii |         9         23 |        32 
               Idaho |         0        309 |       309 
            Illinois |         0        727 |       727 
             Indiana |         0        660 |       660 
                Iowa |         0        698 |       698 
              Kansas |         0        738 |       738 
            Kentucky |         0        847 |       847 
           Louisiana |         0        455 |       455 
               Maine |         0        114 |       114 
            Maryland |         0        179 |       179 
       Massachusetts |         0        107 |       107 
            Michigan |         0        597 |       597 
           Minnesota |         0        617 |       617 
         Mississippi |         0        577 |       577 
            Missouri |         0        812 |       812 
             Montana |         0        393 |       393 
            Nebraska |         0        654 |       654 
              Nevada |         0        121 |       121 
       New Hampshire |         0         70 |        70 
          New Jersey |         0        164 |       164 
          New Mexico |         0        233 |       233 
            New York |         0        455 |       455 
      North Carolina |         0        718 |       718 
        North Dakota |         0        372 |       372 
                Ohio |         0        637 |       637 
            Oklahoma |         0        543 |       543 
              Oregon |         0        260 |       260 
        Pennsylvania |         0        489 |       489 
        Rhode Island |         0         38 |        38 
      South Carolina |         0        330 |       330 
        South Dakota |         0        462 |       462 
           Tennessee |         0        676 |       676 
               Texas |         0      1,816 |     1,816 
                Utah |         0        208 |       208 
             Vermont |         0         99 |        99 
            Virginia |       357        584 |       941 
          Washington |         0        283 |       283 
       West Virginia |         0        386 |       386 
           Wisconsin |         0        517 |       517 
             Wyoming |         0        162 |       162 
---------------------+----------------------+----------
               Total |       366     22,045 |    22,411 

. tab year econ_merge, m

  Tax year |
     (year | Matching result from
    before |         merge
     move) | Master on  Matched ( |     Total
-----------+----------------------+----------
      2016 |        52      3,088 |     3,140 
      2017 |        52      3,088 |     3,140 
      2018 |        52      3,088 |     3,140 
      2019 |        52      3,088 |     3,140 
      2020 |        52      3,088 |     3,140 
      2021 |        53      3,088 |     3,141 
      2022 |        53      3,080 |     3,133 
      2023 |         0        437 |       437 
-----------+----------------------+----------
     Total |       366     22,045 |    22,411 

. 
. ** Keep if matched 
. keep if econ_merge == 3
(366 observations deleted)

. drop econ_merge

. 
. ** Merge with COVID-19 Data
. merge m:1 fips using ${data}working/covid_cleaned_wide.dta,     ///
>         gen(covid_merge) keep(master match )
(variable state_name was str20, now str24 to accommodate using data's
       values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                            68
        from master                        68  (covid_merge==1)
        from using                          0  (covid_merge==2)

    Matched                            21,977  (covid_merge==3)
    -----------------------------------------

. 
. ** Show match 
. tab state_name covid_merge, m

                      | Matching result from
                      |         merge
           State name | Master on  Matched ( |     Total
----------------------+----------------------+----------
              Alabama |         0        474 |       474 
               Alaska |        28        169 |       197 
              Arizona |         0        109 |       109 
             Arkansas |         0        528 |       528 
           California |         0        440 |       440 
             Colorado |         0        450 |       450 
          Connecticut |         0         48 |        48 
             Delaware |         0         24 |        24 
 District of Columbia |         0          8 |         8 
              Florida |         0        502 |       502 
              Georgia |         0      1,135 |     1,135 
               Hawaii |         0         23 |        23 
                Idaho |         0        309 |       309 
             Illinois |         0        727 |       727 
              Indiana |         0        660 |       660 
                 Iowa |         0        698 |       698 
               Kansas |         0        738 |       738 
             Kentucky |         0        847 |       847 
            Louisiana |         0        455 |       455 
                Maine |         0        114 |       114 
             Maryland |         0        179 |       179 
        Massachusetts |         0        107 |       107 
             Michigan |         0        597 |       597 
            Minnesota |         0        617 |       617 
          Mississippi |         0        577 |       577 
             Missouri |         0        812 |       812 
              Montana |         0        393 |       393 
             Nebraska |         0        654 |       654 
               Nevada |         0        121 |       121 
        New Hampshire |         0         70 |        70 
           New Jersey |         0        164 |       164 
           New Mexico |         0        233 |       233 
             New York |        40        415 |       455 
       North Carolina |         0        718 |       718 
         North Dakota |         0        372 |       372 
                 Ohio |         0        637 |       637 
             Oklahoma |         0        543 |       543 
               Oregon |         0        260 |       260 
         Pennsylvania |         0        489 |       489 
         Rhode Island |         0         38 |        38 
       South Carolina |         0        330 |       330 
         South Dakota |         0        462 |       462 
            Tennessee |         0        676 |       676 
                Texas |         0      1,816 |     1,816 
                 Utah |         0        208 |       208 
              Vermont |         0         99 |        99 
             Virginia |         0        584 |       584 
           Washington |         0        283 |       283 
        West Virginia |         0        386 |       386 
            Wisconsin |         0        517 |       517 
              Wyoming |         0        162 |       162 
----------------------+----------------------+----------
                Total |        68     21,977 |    22,045 

. tab year covid_merge, m

  Tax year |
     (year | Matching result from
    before |         merge
     move) | Master on  Matched ( |     Total
-----------+----------------------+----------
      2016 |         9      3,079 |     3,088 
      2017 |         9      3,079 |     3,088 
      2018 |         9      3,079 |     3,088 
      2019 |         9      3,079 |     3,088 
      2020 |         9      3,079 |     3,088 
      2021 |         9      3,079 |     3,088 
      2022 |         9      3,071 |     3,080 
      2023 |         5        432 |       437 
-----------+----------------------+----------
     Total |        68     21,977 |    22,045 

. 
. ** Organize data 
. order year fips state_* county_* 

. sort fips year  

. isid fips year 

. 
. ** Keep only sample with non-missing base populations
. tab county_name year if (missing(n1_out_1 ) | n1_out_1 == 0 ) & year <
> = 2022

                      |  Tax year
                      |   (year
                      |   before
                      |   move)
          County name |      2017 |     Total
----------------------+-----------+----------
        Loving County |         1 |         1 
----------------------+-----------+----------
                Total |         1 |         1 

. drop if (missing(n1_out_1 ) | n1_out_1 == 0 ) & year <= 2022
(1 observation deleted)

. 
. ** Keep only sample with observations in each year 
. bysort fips: gen ct = _N

. tab county_name state_name if ct < 7 

                      |      State name
          County name | Connect..      Texas |     Total
----------------------+----------------------+----------
     Fairfield County |         6          0 |         6 
      Hartford County |         6          0 |         6 
    Litchfield County |         6          0 |         6 
        Loving County |         0          6 |         6 
     Middlesex County |         6          0 |         6 
     New Haven County |         6          0 |         6 
    New London County |         6          0 |         6 
       Tolland County |         6          0 |         6 
       Windham County |         6          0 |         6 
----------------------+----------------------+----------
                Total |        48          6 |        54 

. drop if ct < 7 
(54 observations deleted)

. drop ct 

. 
. ** Generate IRS sample 
. gen irs_sample = inrange(year, 2016, 2022)

. 
. ** Generate ACS Period Indicators 
. gen acs_period_1 = merge_acs_1 != 1 & inrange(year, 2016, 2022)

. gen acs_period_2 = merge_acs_1 != 1 

. 
. ** Make sure we have a balanced panel of ACS counties 
. gen tmp = merge_acs_1 != 1 

. bysort fips: egen ct_tmp = total(tmp)

. replace acs_period_1 = 0 if ct_tmp != 8 
(246 real changes made)

. replace acs_period_2 = 0 if ct_tmp != 8 
(294 real changes made)

. drop tmp ct_tmp

. 
. tab year acs_period_1 

  Tax year |
     (year |
    before |     acs_period_1
     move) |         0          1 |     Total
-----------+----------------------+----------
      2016 |     2,690        389 |     3,079 
      2017 |     2,690        389 |     3,079 
      2018 |     2,690        389 |     3,079 
      2019 |     2,690        389 |     3,079 
      2020 |     2,690        389 |     3,079 
      2021 |     2,690        389 |     3,079 
      2022 |     2,690        389 |     3,079 
      2023 |       437          0 |       437 
-----------+----------------------+----------
     Total |    19,267      2,723 |    21,990 

. tab year acs_period_2

  Tax year |
     (year |
    before |     acs_period_2
     move) |         0          1 |     Total
-----------+----------------------+----------
      2016 |     2,690        389 |     3,079 
      2017 |     2,690        389 |     3,079 
      2018 |     2,690        389 |     3,079 
      2019 |     2,690        389 |     3,079 
      2020 |     2,690        389 |     3,079 
      2021 |     2,690        389 |     3,079 
      2022 |     2,690        389 |     3,079 
      2023 |        48        389 |       437 
-----------+----------------------+----------
     Total |    18,878      3,112 |    21,990 

. tab state_name acs_period_1     

                      |     acs_period_1
           State name |         0          1 |     Total
----------------------+----------------------+----------
              Alabama |       453         21 |       474 
               Alaska |       190          7 |       197 
              Arizona |        88         21 |       109 
             Arkansas |       507         21 |       528 
           California |       202        238 |       440 
             Colorado |       443          7 |       450 
             Delaware |         3         21 |        24 
 District of Columbia |         1          7 |         8 
              Florida |       306        196 |       502 
              Georgia |       995        140 |     1,135 
               Hawaii |         9         14 |        23 
                Idaho |       302          7 |       309 
             Illinois |       643         84 |       727 
              Indiana |       548        112 |       660 
                 Iowa |       670         28 |       698 
               Kansas |       717         21 |       738 
             Kentucky |       812         35 |       847 
            Louisiana |       406         49 |       455 
                Maine |       100         14 |       114 
             Maryland |       102         77 |       179 
        Massachusetts |        93         14 |       107 
             Michigan |       485        112 |       597 
            Minnesota |       575         42 |       617 
          Mississippi |       556         21 |       577 
             Missouri |       777         35 |       812 
              Montana |       393          0 |       393 
             Nebraska |       633         21 |       654 
               Nevada |       107         14 |       121 
        New Hampshire |        70          0 |        70 
           New Jersey |        45        119 |       164 
           New Mexico |       219         14 |       233 
             New York |       315        140 |       455 
       North Carolina |       592        126 |       718 
         North Dakota |       365          7 |       372 
                 Ohio |       504        133 |       637 
             Oklahoma |       522         21 |       543 
               Oregon |       211         49 |       260 
         Pennsylvania |       349        140 |       489 
         Rhode Island |        17         21 |        38 
       South Carolina |       323          7 |       330 
         South Dakota |       462          0 |       462 
            Tennessee |       627         49 |       676 
                Texas |     1,543        266 |     1,809 
                 Utah |       173         35 |       208 
              Vermont |        99          0 |        99 
             Virginia |       521         63 |       584 
           Washington |       220         63 |       283 
        West Virginia |       386          0 |       386 
            Wisconsin |       426         91 |       517 
              Wyoming |       162          0 |       162 
----------------------+----------------------+----------
                Total |    19,267      2,723 |    21,990 

.         
. ** Define treated state 
. gen multnomah = state_fips == 41 & county_fips == 51

. label var multnomah "Indicator for Multnomah County, Oregon"    

. 
. ** Define treatment indicator 
. gen Treated = multnomah == 1 & year > 2020

. label var Treated "Treatment indicator for Multnomah County, Oregon"  
>   

. 
. ** Define sample 1: All counties 
. gen sample_all = 1 

. label var sample_all "All counties (excluding AK, CA, HI OR, WA)"

. 
. ** Define sample 2: Counties in top 95 percent 
. summ percent_urban if year == 2020, de 

            Percent of population in urban areas
-------------------------------------------------------------
      Percentiles      Smallest
 1%            0              0
 5%            0              0
10%            0              0       Obs               3,079
25%            0              0       Sum of wgt.       3,079

50%     .3256337                      Mean           .3521437
                        Largest       Std. dev.       .332065
75%     .6326353              1
90%      .847923              1       Variance       .1102672
95%     .9372299              1       Skewness       .3661052
99%     .9972304              1       Kurtosis       1.763629

. local cutoff = r(p95) 

. tab state_name multnomah if percent_urban >= `cutoff' & year == 2020

                      |     Indicator for
                      |   Multnomah County,
                      |        Oregon
           State name |         0          1 |     Total
----------------------+----------------------+----------
               Alaska |         1          0 |         1 
              Arizona |         1          0 |         1 
           California |        15          0 |        15 
             Colorado |         4          0 |         4 
             Delaware |         1          0 |         1 
 District of Columbia |         1          0 |         1 
              Florida |        13          0 |        13 
              Georgia |         8          0 |         8 
               Hawaii |         1          0 |         1 
                Idaho |         1          0 |         1 
             Illinois |         5          0 |         5 
              Indiana |         3          0 |         3 
                 Iowa |         1          0 |         1 
               Kansas |         2          0 |         2 
             Kentucky |         2          0 |         2 
            Louisiana |         3          0 |         3 
             Maryland |         3          0 |         3 
        Massachusetts |         5          0 |         5 
             Michigan |         3          0 |         3 
            Minnesota |         3          0 |         3 
             Missouri |         4          0 |         4 
             Nebraska |         2          0 |         2 
               Nevada |         3          0 |         3 
           New Jersey |        10          0 |        10 
           New Mexico |         2          0 |         2 
             New York |         9          0 |         9 
       North Carolina |         4          0 |         4 
                 Ohio |         6          0 |         6 
             Oklahoma |         1          0 |         1 
               Oregon |         1          1 |         2 
         Pennsylvania |         4          0 |         4 
         Rhode Island |         2          0 |         2 
            Tennessee |         2          0 |         2 
                Texas |        11          0 |        11 
                 Utah |         4          0 |         4 
             Virginia |        10          0 |        10 
           Washington |         1          0 |         1 
            Wisconsin |         1          0 |         1 
----------------------+----------------------+----------
                Total |       153          1 |       154 

. gen sample_urban95 = percent_urban >= `cutoff' // All counties 

. label var sample_urban95 "Urban counties (top 5%) (excluding AK, CA, H
> I OR, WA)"

. tab sample_urban95 if year == 2020

      Urban |
   counties |
   (top 5%) |
 (excluding |
 AK, CA, HI |
    OR, WA) |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |      2,925       95.00       95.00
          1 |        154        5.00      100.00
------------+-----------------------------------
      Total |      3,079      100.00

. 
. ** Define sample 3: Counties in top 98 percent 
. local cutoff = .9864539 //

. tab state_name multnomah if percent_urban >= `cutoff' & year == 2020

                      |     Indicator for
                      |   Multnomah County,
                      |        Oregon
           State name |         0          1 |     Total
----------------------+----------------------+----------
           California |         6          0 |         6 
             Colorado |         2          0 |         2 
 District of Columbia |         1          0 |         1 
              Florida |         4          0 |         4 
              Georgia |         5          0 |         5 
             Illinois |         2          0 |         2 
              Indiana |         1          0 |         1 
            Louisiana |         1          0 |         1 
             Maryland |         1          0 |         1 
        Massachusetts |         1          0 |         1 
             Michigan |         1          0 |         1 
            Minnesota |         1          0 |         1 
             Missouri |         1          0 |         1 
               Nevada |         1          0 |         1 
           New Jersey |         6          0 |         6 
             New York |         7          0 |         7 
       North Carolina |         1          0 |         1 
                 Ohio |         1          0 |         1 
               Oregon |         0          1 |         1 
         Pennsylvania |         2          0 |         2 
         Rhode Island |         1          0 |         1 
                Texas |         3          0 |         3 
                 Utah |         2          0 |         2 
             Virginia |         8          0 |         8 
            Wisconsin |         1          0 |         1 
----------------------+----------------------+----------
                Total |        60          1 |        61 

. gen sample_urban98 = percent_urban >= `cutoff' // All counties 

. label var sample_urban98 "Urban counties (top 1%) (excluding AK, CA, H
> I OR, WA)"

. tab sample_urban98 if year == 2020

      Urban |
   counties |
   (top 1%) |
 (excluding |
 AK, CA, HI |
    OR, WA) |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |      3,018       98.02       98.02
          1 |         61        1.98      100.00
------------+-----------------------------------
      Total |      3,079      100.00

. 
. ** Define Sample of States      
. drop if state_name == "Alaska"
(197 observations deleted)

. drop if state_name == "Hawaii"
(23 observations deleted)

. drop if state_name == "California"
(440 observations deleted)

. drop if state_name == "Washington"
(283 observations deleted)

. drop if state_name == "Oregon" & multnomah == 0
(252 observations deleted)

. 
. ** Define sample 4: Counties in top 95 + covid 
. cluster kmeans cases_cum* deaths_cum* if        ///
>         sample_urban95 == 1 & year == 2020 & covid_merge == 3 , k(5) g
> en(kmean)
cluster name: _clus_1

. bysort fips: egen kmean_group = mean(kmean)
(19,774 missing values generated)

. 
. ** Pull out kmeans cluster with Multnoma
. gen tmp1 = kmean if sample_urban95 == 1 & year == 2020 & covid_merge =
> = 3 & multnomah == 1 
(20,794 missing values generated)

. egen tmp2 = mean(tmp1)

. gen sample_urban95_covid = sample_urban95 == 1 & kmean_group == tmp2

. drop tmp1 tmp2 

. label var sample_urban95_covid "Urban counties (top 5%) w. Kmean Covid
>  Match  (excluding AK, CA, HI OR, WA)"

. tab sample_urban95_covid if year == 2020

      Urban |
   counties |
(top 5%) w. |
Kmean Covid |
      Match |
 (excluding |
 AK, CA, HI |
    OR, WA) |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |      2,879       98.73       98.73
          1 |         37        1.27      100.00
------------+-----------------------------------
      Total |      2,916      100.00

. 
. ** Show results across clusters 
. preserve 

. 
. ** Keep required variables 
. keep if sample_urban95 == 1 & year == 2020 & covid_merge == 3
(20,665 observations deleted)

. keep kmean cases_cum* deaths_cum* population

. collapse (mean) cases_cum* deaths_cum* [fw = population], by(kmean)

. reshape long cases_cum deaths_cum, i(kmean) j(time)
(j = 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 2
> 6 27 28 29)

Data                               Wide   ->   Long
------------------------------------------------------------------------
> -----
Number of observations                5   ->   145         
Number of variables                  59   ->   4           
j variable (29 values)                    ->   time
xij variables:
  cases_cum1 cases_cum2 ... cases_cum29   ->   cases_cum
deaths_cum1 deaths_cum2 ... deaths_cum29  ->   deaths_cum
------------------------------------------------------------------------
> -----

. xtset kmean time 

Panel variable: kmean (strongly balanced)
 Time variable: time, 1 to 29
         Delta: 1 unit

. xtline cases_cum 

. graph export "${results}fig_kmeans.jpg", as(jpg) name("Graph") quality
> (100) replace             
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_km
> eans.jpg written in JPEG format

. clear  

. 
. ** Restore      
. restore 

. 
. ** Define covariates 
. local covariates "population per_capita_income"

. 
. ** Standardize covariates 
. foreach v of local covariates {
  2.         egen tmp_v = std(`v') 
  3.         replace `v' = tmp_v
  4.         drop tmp_v
  5. } // END COVAR LOOP 
variable population was long now double
(20,795 real changes made)
variable per_capita_income was long now double
(20,795 real changes made)

. 
. ** Define outcome variables (IRS)
. foreach x in "n1" "n2" "agi" {
  2.         
.         gen `x'_rate_irs = 100 * (`x'_net_3 / (`x'_out_1 + `x'_out_2))
  3.         
. } // END OUTCOME TYPE LOOP 
(383 missing values generated)
(383 missing values generated)
(383 missing values generated)

. 
. ** Label var 
. label var n1_rate_irs   "Net domestic migration rate, returns (%)"

. label var n2_rate_irs   "Net domestic migration rate, exemptions (%)"

. label var agi_rate_irs  "Net domestic migration rate, AGI (%)"

. 
. 
. ** Define outcome variables (ACS)
. ** Loop over three datasets (18+ = 1, college degree == 2, no college 
> degree == 3)
. forvalues i = 1/3{
  2.         
.         if `i' == 1 local txt "(18+)"
  3.         else if `i' == 2 local txt "(College)"
  4.         else if `i' == 3 local txt "(No College)"
  5.         
.         gen n1_rate_acs`i' = 100 * (acs`i'_households_net_3 / (acs`i'_
> households_out_1 + acs`i'_households_out_2))
  6.         gen n2_rate_acs`i' = 100 * (acs`i'_persons_net_3 / (acs`i'_
> persons_out_1 + acs`i'_persons_out_2))
  7.         gen agi_rate_acs`i' = 100 * (acs`i'_dollars_net_3 / (acs`i'
> _dollars_out_1 + acs`i'_dollars_out_2))
  8.         
.         label var n1_rate_acs`i'        "Net domestic migration rate `
> txt', HHs (%)"
  9.         label var n2_rate_acs`i'        "Net domestic migration rat
> e `txt', persons (%)"
 10.         label var agi_rate_acs`i'       "Net domestic migration rat
> e `txt', total income (%)"
 11.         
. } // END DATA LOOP 
(17,815 missing values generated)
(17,815 missing values generated)
(17,815 missing values generated)
(17,815 missing values generated)
(17,815 missing values generated)
(17,815 missing values generated)
(17,815 missing values generated)
(17,815 missing values generated)
(17,815 missing values generated)

. 
. ** Generate triple-difference vars 
. gen n1_rate_acs4 = n1_rate_acs2 - n1_rate_acs3
(17,815 missing values generated)

. gen n2_rate_acs4 = n2_rate_acs2 - n2_rate_acs3
(17,815 missing values generated)

. gen agi_rate_acs4 = agi_rate_acs2 - agi_rate_acs3
(17,815 missing values generated)

. 
. label var n1_rate_acs4          "Net domestic migration rate (College 
> less No College), HHs (%)"

. label var n2_rate_acs4          "Net domestic migration rate (College 
> less No College), persons (%)"

. label var agi_rate_acs4         "Net domestic migration rate (College 
> less No College), total income (%)"

. 
. ** Declare panel
. xtset fips year 

Panel variable: fips (unbalanced)
 Time variable: year, 2016 to 2023
         Delta: 1 unit

. 
. ** Tag unique fips 
. egen unique = tag(fips)

. tab year unique

  Tax year |
     (year |
    before |       tag(fips)
     move) |         0          1 |     Total
-----------+----------------------+----------
      2016 |         0      2,916 |     2,916 
      2017 |     2,916          0 |     2,916 
      2018 |     2,916          0 |     2,916 
      2019 |     2,916          0 |     2,916 
      2020 |     2,916          0 |     2,916 
      2021 |     2,916          0 |     2,916 
      2022 |     2,916          0 |     2,916 
      2023 |       383          0 |       383 
-----------+----------------------+----------
     Total |    17,879      2,916 |    20,795 

. 
. ** Loop over IRS and ACS Samples  
. foreach data of varlist irs_sample acs_period_1 acs_period_2  {
  2. 
.         ** Different sets of outcome variables 
.         if "`data'" == "irs_sample" local out_type "irs"
  3.         else local out_type "acs1 acs2 acs3 acs4"
  4. 
.         ** Loop over Outcome var type 
.         foreach type of local out_type {
  5.                 
.                 ** Labels 
.                 if "`data'" == "irs_sample" local out_txt "irs_16_22"
  6.                 else if "`data'" == "acs_period_1" & "`type'" == "a
> cs1" local out_txt "acs_16_22_all"
  7.                 else if "`data'" == "acs_period_1" & "`type'" == "a
> cs2" local out_txt "acs_16_22_col"
  8.                 else if "`data'" == "acs_period_1" & "`type'" == "a
> cs3" local out_txt "acs_16_22_noc"
  9.                 else if "`data'" == "acs_period_1" & "`type'" == "a
> cs4" local out_txt "acs_16_22_3D"
 10.                 else if "`data'" == "acs_period_2" & "`type'" == "a
> cs1" local out_txt "acs_16_23_all"
 11.                 else if "`data'" == "acs_period_2" & "`type'" == "a
> cs2" local out_txt "acs_16_23_col"
 12.                 else if "`data'" == "acs_period_2" & "`type'" == "a
> cs3" local out_txt "acs_16_23_noc"
 13.                 else if "`data'" == "acs_period_2" & "`type'" == "a
> cs4" local out_txt "acs_16_23_3D"
 14. 
.                 ** Loop over samples 
.                 foreach samp of varlist sample_all sample_urban95 samp
> le_urban95_covid {        
 15.                         
.                         ** Loop over exclusion of 2019-2020 period 
.                         forvalues exl = 1(-1)0 {
 16.                                 
.                                 ** Define sample        
.                                 gen sample = `samp' == 1 & `data' == 1
>  
 17.                                 if `exl' == 1 replace sample = 0 if
>  year == 2020 
 18.                                 
.                                 ** Clear stored values 
.                                 eststo clear            
 19.                                 
.                                 ** Loop over outcomes 
.                                 foreach out of varlist n1_rate_`type' 
> n2_rate_`type' agi_rate_`type' {
 20.                                 
.                                         ** Store label 
.                                         local label : variable label `
> out'
 21.                                         
.                                         ** Loop over inclusion of cova
> riates
.                                         forvalues c = 0/1 {
 22.                                         
.                                                 ** Covariates 
.                                                 if `c' == 0 local cova
> rs ""
 23.                                                 else if `c' == 1 lo
> cal covars "covariates(`covariates', projected)"
 24.                                                 
.                                                 ** File Name 
.                                                 if `exl' == 0 local pa
> th "${results}fig_`out_txt'_`out'_`c'_`samp'_"
 25.                                                 if `exl' == 1 local
>  path "${results}fig_`out_txt'_`out'_`c'_`samp'_excl2020_"
 26.         
.                                                 
.                                                 ** Run SDID
.                                                 eststo sdid_`out'_`c':
>  sdid `out' fips year Treated     ///
>                                                         if sample == 1
> ,                         ///
>                                                         vce(placebo)  
>                           ///
>                                                         `covar'       
>                                   ///
>                                                         reps(`reps')  
>                           ///
>                                                         graph graph_ex
> port("`path'", .pdf) 
 27.                                                         
.                                                 ** Estadd counties  
.                                                 qui summ `out' if year
>  == 2021 & sample == 1
 28.                                                 estadd scalar count
>  = r(N)      
 29.                                                         
.                                                 ** Estadd mean 
.                                                 qui summ `out' if mult
> nomah == 1 & Treated == 0 
 30.                                                 estadd scalar mean 
> = r(mean)
 31. 
.                                                 ** Run event-study 
.                                                 sdid_event `out' fips 
> year Treated                      ///
>                                                         if sample == 1
> ,                                         ///
>                                                         `covar'       
>                                                   ///
>                                                         vce(placebo)  
>                                           ///
>                                                         brep(`reps')  
>                                           ///
>                                                         placebo(all)
 32.                                                 
.                                                 ** Create Figure 
.                                                 
.                                                 ** Store max year 
.                                                 qui summ year if multn
> omah == 1 & sample == 1
 33.                                                 local max_yr = r(ma
> x)
 34.                                                 dis "`max_yr'"
 35.                                                 
.                                                 ** Move results from m
> atrix to data 
.                                                 qui count if multnomah
>  == 1 & sample == 1
 36.                                                 local ct = r(N)
 37.                                                 local ct = `ct' + 1
 38.                                                 matrix list e(H)
 39.                                                 mat res = e(H)[2..`
> ct',1..5]
 40.                         
.                                                 ** Move Matrix results
>  to data 
.                                                 svmat res
 41.                                                 
.                                                 ** Generate ID variabl
> e
.                                                 gen id = `max_yr' - _n
>  + 1 if !missing(res1)
 42.                                                 
.                                                 ** Update labeling for
>  exclusion of 
.                                                 if `exl' == 1 {
 43.                                                         expand 2 if
>  id == 2019, gen(tag)
 44.                                                         replace id 
> = 2020 if tag == 1 
 45.                                                         replace res
> 1 = . if tag == 1 
 46.                                                         replace res
> 3 = . if tag == 1 
 47.                                                         replace res
> 4 = . if tag == 1 
 48.                                                 }
 49.                                                 label var id "Year 
> (destination)"
 50.                                                 
.                                                 ** Sort 
.                                                 sort id
 51.                                                 
.                                                 ** Plot
.                                                 twoway  (rcap res3 res
> 4 id, lc(gs10) fc(gs11%50))       ///
>                                                                 (scatt
> er res1 id, mc(black)),                           ///             
>                                                         legend(off) yt
> itle("`label'")                                   ///
>                                                         yline(0, lc(re
> d) lp(-))                                                 ///
>                                                         xline(2020.5, 
> lc(black) lp(solid))                              ///
>                                                         ylabel(-10(2.5
> )10, format(%9.1f))
 52. 
.                                                 if `exl' == 0 local pa
> th "${results}fig_`out_txt'_`out'_`c'_`samp'_eventstudy.jpg"
 53.                                                 if `exl' == 1 local
>  path "${results}fig_`out_txt'_`out'_`c'_`samp'_excl2020_eventstudy.jp
> g"
 54.         
.                                                         
.                                                 graph export "`path'",
>   ///
>                                                         as(jpg) name("
> Graph") quality(100) replace              
 55. 
.                                                 ** Clean up 
.                                                 drop res1 res2 res3 re
> s4 res5 id 
 56.                                                 drop if tag == 1
 57.                                                 drop tag 
 58. 
.                                                 ** Update Count
.                                                 local ct = `ct' + 1 
 59.                                                                    
>              
.                                         } // END COVAR LOOP 
 60.                                 
.                                 } // END OUTCOME LOOP 
 61.                                 
.                                 ** Determine name 
.                                 if `exl' == 0 local path "${results}ta
> b_sdid_`out_txt'_`samp'.tex"
 62.                                 if `exl' == 1 local path "${results
> }tab_sdid_`out_txt'_`samp'_excl2020.tex"
 63. 
.                                 ** Table of results 
.                                 esttab  sdid_n1_rate_`type'_0 sdid_n1_
> rate_`type'_1                     ///
>                                                 sdid_n2_rate_`type'_0 
> sdid_n2_rate_`type'_1                     ///
>                                                 sdid_agi_rate_`type'_0
>  sdid_agi_rate_`type'_1 using     ///
>                                 "`path'",                             
>                                                   ///
>                                 starlevel("*" 0.10 "**" 0.05 "***" 0.0
> 1)                ///
>                                 b(%-9.3f) se(%-9.3f) replace          
>                           ///
>                                 mgroups("Returns" "Exemptions" "AGI", 
>                   ///
>                                         pattern(1 0 1 0 1 0) )        
>                                   ///
>                                 mtitle( "No Covariates" "Covariates"  
>                   ///
>                                                 "No Covariates" "Covar
> iates"                    ///
>                                                 "No Covariates" "Covar
> iates")                   ///
>                                 stats(count mean,                     
>                                           ///
>                                         fmt(%9.0fc %9.3fc)            
>                                           ///
>                                         labels("Number of Counties" "P
> re-treatment mean"))
 64.                                 
.                                 ** Drop sample var 
.                                 drop sample 
 65.                                 
.                         } // END EXCLUSION LOOP 
 66.                         
.                 } // END SAMPLE LOOP 
 67.         
.         } // END OUT TYPE 
 68.         
. } // END DATA LOOP 
(2,916 real changes made)
Placebo replications (100). This may take some time.
----+--- 1 ---+--- 2 ---+--- 3 ---+--- 4 ---+--- 5
..................................................     50
..................................................     100


Synthetic Difference-in-Differences Estimator

------------------------------------------------------------------------
> -----
 n1_rate_irs |     ATT     Std. Err.     t      P>|t|    [95% Conf. Inte
> rval]
-------------+----------------------------------------------------------
> -----
     Treated |  -1.92529    1.30423    -1.48    0.140    -4.48153     0.
> 63096
------------------------------------------------------------------------
> -----
95% CIs and p-values are based on large-sample approximations.
Refer to Arkhangelsky et al., (2021) for theoretical derivations.
file
    C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_i
    > rs_16_22_n1_rate_irs_0_sample_all_excl2020_trends2021.pdf saved
    as PDF format

added scalar:
              e(count) =  2916

added scalar:
               e(mean) =  .1434552
Synthetic Difference-in-differences

Boostrap replications (100), placebo mode.
|0% ----------------------------------------- 100%|
|.................................................|


             |  Estimate         SE      LB CI      UB CI  Switchers 
-------------+------------------------------------------------------
         ATT | -1.925286   1.452928  -4.773026   .9224532          1 
    Effect_1 | -2.430048   1.590141  -5.546725   .6866294          1 
    Effect_2 | -1.420525   1.455028   -4.27238   1.431331          1 
   Placebo_1 |  .0018158   .0179757  -.0334165   .0370482          1 
   Placebo_2 | -.0017198   .0149248  -.0309725   .0275329          1 
   Placebo_3 | -.0060693   .0141974  -.0338963   .0217577          1 
   Placebo_4 |  .0088023   .0121442  -.0150003   .0326048          1 
2022

e(H)[7,5]
             Estimate          SE       LB CI       UB CI   Switchers
      ATT  -1.9252863   1.4529283  -4.7730257   .92245316           1
 Effect_1  -2.4300477   1.5901414  -5.5467248   .68662936           1
 Effect_2  -1.4205248   1.4550282  -4.2723802   1.4313306           1
Placebo_1   .00181583    .0179757  -.03341654   .03704821           1
Placebo_2  -.00171981   .01492485  -.03097251    .0275329           1
Placebo_3  -.00606931   .01419743  -.03389628   .02175765           1
Placebo_4   .00880226   .01214416  -.01500028   .03260481           1
(20,789 missing values generated)
(1 observation created)
(1 real change made)
(1 real change made, 1 to missing)
(1 real change made, 1 to missing)
(1 real change made, 1 to missing)
(file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_i
> rs_16_22_n1_rate_irs_0_sample_all_excl2020_eventstudy.jpg not found)
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_ir
> s_16_22_n1_rate_irs_0_sample_all_excl2020_eventstudy.jpg written in JP
> EG format
(1 observation deleted)
Placebo replications (100). This may take some time.
----+--- 1 ---+--- 2 ---+--- 3 ---+--- 4 ---+--- 5
..................................................     50
..................................................     100


Synthetic Difference-in-Differences Estimator

------------------------------------------------------------------------
> -----
 n1_rate_irs |     ATT     Std. Err.     t      P>|t|    [95% Conf. Inte
> rval]
-------------+----------------------------------------------------------
> -----
     Treated |  -1.92529    1.31734    -1.46    0.144    -4.50722     0.
> 65665
------------------------------------------------------------------------
> -----
95% CIs and p-values are based on large-sample approximations.
Refer to Arkhangelsky et al., (2021) for theoretical derivations.
file
    C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_i
    > rs_16_22_n1_rate_irs_1_sample_all_excl2020_trends2021.pdf saved
    as PDF format

added scalar:
              e(count) =  2916

added scalar:
               e(mean) =  .1434552
Synthetic Difference-in-differences

Boostrap replications (100), placebo mode.
|0% ----------------------------------------- 100%|
|.................................................|


             |  Estimate         SE      LB CI      UB CI  Switchers 
-------------+------------------------------------------------------
         ATT | -1.925286   .9504457   -3.78816  -.0624126          1 
    Effect_1 | -2.430048   1.213929  -4.809348  -.0507471          1 
    Effect_2 | -1.420525   .9504716  -3.283449   .4423995          1 
   Placebo_1 |  .0018158   .0332981  -.0634485   .0670802          1 
   Placebo_2 | -.0017198   .0122893  -.0258069   .0223673          1 
   Placebo_3 | -.0060693   .0488051  -.1017273   .0895887          1 
   Placebo_4 |  .0088023     .01013  -.0110525    .028657          1 
2022

e(H)[7,5]
             Estimate          SE       LB CI       UB CI   Switchers
      ATT  -1.9252863   .95044574  -3.7881599  -.06241263           1
 Effect_1  -2.4300477   1.2139289  -4.8093483  -.05074714           1
 Effect_2  -1.4205248   .95047158  -3.2834491   .44239949           1
Placebo_1   .00181583   .03329814  -.06344852   .06708019           1
Placebo_2  -.00171981   .01228933   -.0258069   .02236729           1
Placebo_3  -.00606931    .0488051  -.10172731   .08958869           1
Placebo_4   .00880226   .01012999  -.01105253   .02865705           1
(20,789 missing values generated)
(1 observation created)
(1 real change made)
(1 real change made, 1 to missing)
(1 real change made, 1 to missing)
(1 real change made, 1 to missing)
(file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_i
> rs_16_22_n1_rate_irs_1_sample_all_excl2020_eventstudy.jpg not found)
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_ir
> s_16_22_n1_rate_irs_1_sample_all_excl2020_eventstudy.jpg written in JP
> EG format
(1 observation deleted)
Placebo replications (100). This may take some time.
----+--- 1 ---+--- 2 ---+--- 3 ---+--- 4 ---+--- 5
....--Break--
r(1);

end of do-file

--Break--
r(1);

. do "C:\Users\ji252\Documents\GitHub\multnomah-county-tax\code\02_sdid_
> analysis.do"

. /*********************************************************************
> **********
> File Name:              02_sdid_analysis.do
> Creator:                John Iselin
> Date Update:    November 26, 2025
> 
> Called by: 00_multnomah.do
> 
> Purpose: Preform synthetic difference-in-difference estiamtion. 
> 
> Authors: John Iselin 
> 
> For more information, contact john.iselin@yale.edu
> 
> **********************************************************************
> *********/
. 
. 
. ** Start log file 
. capture log close log_02

. log using "${logs}02_log_sdid_${date}", replace text name(log_02)
------------------------------------------------------------------------
      name:  log_02
       log:  C:/Users/ji252/Documents/GitHub/multnomah-county-tax/code/l
> ogs/02_log_sdid_2026-01-05.log
  log type:  text
 opened on:   6 Jan 2026, 10:21:07

. 
. ** Parameters 
. local reps = 100

. 
. ** Load data 
. use "${data}working/irs_county_gross", replace 

. 
. ** Keep required variables 
. keep year fips state* county* *_net_3 *_out_1 *_out_2 

. order year fips state* county* 

. 
. ** Merge with ACS Data 
. merge 1:1 year fips using "${data}working/acs_county_gross_18plus", ge
> n(merge_acs_1)
(variable fips was float, now double to accommodate using data's
       values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        20,278
        from master                    18,963  (merge_acs_1==1)
        from using                      1,315  (merge_acs_1==2)

    Matched                             3,017  (merge_acs_1==3)
    -----------------------------------------

. 
. ** Keep require variables 
. keep year fips state* county* *_net_3 *_out_1 *_out_2 merge_acs_*

. 
. ** Label acs samples 
. rename persons_* acs1_persons_* 

. rename households_* acs1_households_*

. rename dollars_* acs1_dollars_*

. 
. ** Merge with ACS Data 
. merge 1:1 year fips using "${data}working/acs_county_gross_college", g
> en(merge_acs_2)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        18,963
        from master                    18,963  (merge_acs_2==1)
        from using                          0  (merge_acs_2==2)

    Matched                             4,332  (merge_acs_2==3)
    -----------------------------------------

. 
. ** Keep require variables 
. keep year fips state* county* *_net_3 *_out_1 *_out_2 merge_acs_*

. 
. ** Label acs samples 
. rename persons_* acs2_persons_*

. rename households_* acs2_households_*

. rename dollars_* acs2_dollars_*

. 
. ** Merge with ACS Data 
. merge 1:1 year fips using "${data}working/acs_county_gross_nocollege",
>  gen(merge_acs_3)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        18,963
        from master                    18,963  (merge_acs_3==1)
        from using                          0  (merge_acs_3==2)

    Matched                             4,332  (merge_acs_3==3)
    -----------------------------------------

. 
. ** Keep require variables 
. keep year fips state* county* *_net_3 *_out_1 *_out_2 merge_acs_*

. 
. ** Label acs samples 
. rename persons_* acs3_persons_*

. rename households_* acs3_households_*

. rename dollars_* acs3_dollars_*

. 
. ** TODO add High and Low Education Samples 
. 
. ** Drop "other counties"
. drop if county_fips == 0
(434 observations deleted)

. drop if year == 2015 
(430 observations deleted)

. 
. ** Merge with Demographic data 
. merge m:1 fips using "${data}working/demographics_2020",        ///
>         gen(demo_merge) keep(master match)

    Result                      Number of obs
    -----------------------------------------
    Not matched                            20
        from master                        20  (demo_merge==1)
        from using                          0  (demo_merge==2)

    Matched                            22,411  (demo_merge==3)
    -----------------------------------------

.         
. ** Show match 
. tab state_name demo_merge, m

                     | Matching result from
                     |         merge
          State name | Master on  Matched ( |     Total
---------------------+----------------------+----------
                     |        14          0 |        14 
             Alabama |         0        474 |       474 
              Alaska |         6        197 |       203 
             Arizona |         0        109 |       109 
            Arkansas |         0        528 |       528 
          California |         0        440 |       440 
            Colorado |         0        450 |       450 
         Connecticut |         0         48 |        48 
            Delaware |         0         24 |        24 
District of Columbia |         0          8 |         8 
             Florida |         0        502 |       502 
             Georgia |         0      1,135 |     1,135 
              Hawaii |         0         32 |        32 
               Idaho |         0        309 |       309 
            Illinois |         0        727 |       727 
             Indiana |         0        660 |       660 
                Iowa |         0        698 |       698 
              Kansas |         0        738 |       738 
            Kentucky |         0        847 |       847 
           Louisiana |         0        455 |       455 
               Maine |         0        114 |       114 
            Maryland |         0        179 |       179 
       Massachusetts |         0        107 |       107 
            Michigan |         0        597 |       597 
           Minnesota |         0        617 |       617 
         Mississippi |         0        577 |       577 
            Missouri |         0        812 |       812 
             Montana |         0        393 |       393 
            Nebraska |         0        654 |       654 
              Nevada |         0        121 |       121 
       New Hampshire |         0         70 |        70 
          New Jersey |         0        164 |       164 
          New Mexico |         0        233 |       233 
            New York |         0        455 |       455 
      North Carolina |         0        718 |       718 
        North Dakota |         0        372 |       372 
                Ohio |         0        637 |       637 
            Oklahoma |         0        543 |       543 
              Oregon |         0        260 |       260 
        Pennsylvania |         0        489 |       489 
        Rhode Island |         0         38 |        38 
      South Carolina |         0        330 |       330 
        South Dakota |         0        462 |       462 
           Tennessee |         0        676 |       676 
               Texas |         0      1,816 |     1,816 
                Utah |         0        208 |       208 
             Vermont |         0         99 |        99 
            Virginia |         0        941 |       941 
          Washington |         0        283 |       283 
       West Virginia |         0        386 |       386 
           Wisconsin |         0        517 |       517 
             Wyoming |         0        162 |       162 
---------------------+----------------------+----------
               Total |        20     22,411 |    22,431 

. tab year demo_merge, m

  Tax year |
     (year | Matching result from
    before |         merge
     move) | Master on  Matched ( |     Total
-----------+----------------------+----------
      2016 |         0      3,140 |     3,140 
      2017 |         0      3,140 |     3,140 
      2018 |         0      3,140 |     3,140 
      2019 |         0      3,140 |     3,140 
      2020 |         2      3,140 |     3,142 
      2021 |         2      3,141 |     3,143 
      2022 |         9      3,133 |     3,142 
      2023 |         7        437 |       444 
-----------+----------------------+----------
     Total |        20     22,411 |    22,431 

. 
. ** Keep if matched 
. keep if demo_merge == 3
(20 observations deleted)

. drop demo_merge

. 
. ** Rename 
. rename population pop_census

.         
. ** Merge with Demographic data 
. merge m:1 year fips using "${data}working/bea_economics",       ///
>         gen(econ_merge) keep(master match) 

    Result                      Number of obs
    -----------------------------------------
    Not matched                           366
        from master                       366  (econ_merge==1)
        from using                          0  (econ_merge==2)

    Matched                            22,045  (econ_merge==3)
    -----------------------------------------

.         
. ** Show match 
. tab state_name econ_merge, m

                     | Matching result from
                     |         merge
          State name | Master on  Matched ( |     Total
---------------------+----------------------+----------
             Alabama |         0        474 |       474 
              Alaska |         0        197 |       197 
             Arizona |         0        109 |       109 
            Arkansas |         0        528 |       528 
          California |         0        440 |       440 
            Colorado |         0        450 |       450 
         Connecticut |         0         48 |        48 
            Delaware |         0         24 |        24 
District of Columbia |         0          8 |         8 
             Florida |         0        502 |       502 
             Georgia |         0      1,135 |     1,135 
              Hawaii |         9         23 |        32 
               Idaho |         0        309 |       309 
            Illinois |         0        727 |       727 
             Indiana |         0        660 |       660 
                Iowa |         0        698 |       698 
              Kansas |         0        738 |       738 
            Kentucky |         0        847 |       847 
           Louisiana |         0        455 |       455 
               Maine |         0        114 |       114 
            Maryland |         0        179 |       179 
       Massachusetts |         0        107 |       107 
            Michigan |         0        597 |       597 
           Minnesota |         0        617 |       617 
         Mississippi |         0        577 |       577 
            Missouri |         0        812 |       812 
             Montana |         0        393 |       393 
            Nebraska |         0        654 |       654 
              Nevada |         0        121 |       121 
       New Hampshire |         0         70 |        70 
          New Jersey |         0        164 |       164 
          New Mexico |         0        233 |       233 
            New York |         0        455 |       455 
      North Carolina |         0        718 |       718 
        North Dakota |         0        372 |       372 
                Ohio |         0        637 |       637 
            Oklahoma |         0        543 |       543 
              Oregon |         0        260 |       260 
        Pennsylvania |         0        489 |       489 
        Rhode Island |         0         38 |        38 
      South Carolina |         0        330 |       330 
        South Dakota |         0        462 |       462 
           Tennessee |         0        676 |       676 
               Texas |         0      1,816 |     1,816 
                Utah |         0        208 |       208 
             Vermont |         0         99 |        99 
            Virginia |       357        584 |       941 
          Washington |         0        283 |       283 
       West Virginia |         0        386 |       386 
           Wisconsin |         0        517 |       517 
             Wyoming |         0        162 |       162 
---------------------+----------------------+----------
               Total |       366     22,045 |    22,411 

. tab year econ_merge, m

  Tax year |
     (year | Matching result from
    before |         merge
     move) | Master on  Matched ( |     Total
-----------+----------------------+----------
      2016 |        52      3,088 |     3,140 
      2017 |        52      3,088 |     3,140 
      2018 |        52      3,088 |     3,140 
      2019 |        52      3,088 |     3,140 
      2020 |        52      3,088 |     3,140 
      2021 |        53      3,088 |     3,141 
      2022 |        53      3,080 |     3,133 
      2023 |         0        437 |       437 
-----------+----------------------+----------
     Total |       366     22,045 |    22,411 

. 
. ** Keep if matched 
. keep if econ_merge == 3
(366 observations deleted)

. drop econ_merge

. 
. ** Merge with COVID-19 Data
. merge m:1 fips using ${data}working/covid_cleaned_wide.dta,     ///
>         gen(covid_merge) keep(master match )
(variable state_name was str20, now str24 to accommodate using data's
       values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                            68
        from master                        68  (covid_merge==1)
        from using                          0  (covid_merge==2)

    Matched                            21,977  (covid_merge==3)
    -----------------------------------------

. 
. ** Show match 
. tab state_name covid_merge, m

                      | Matching result from
                      |         merge
           State name | Master on  Matched ( |     Total
----------------------+----------------------+----------
              Alabama |         0        474 |       474 
               Alaska |        28        169 |       197 
              Arizona |         0        109 |       109 
             Arkansas |         0        528 |       528 
           California |         0        440 |       440 
             Colorado |         0        450 |       450 
          Connecticut |         0         48 |        48 
             Delaware |         0         24 |        24 
 District of Columbia |         0          8 |         8 
              Florida |         0        502 |       502 
              Georgia |         0      1,135 |     1,135 
               Hawaii |         0         23 |        23 
                Idaho |         0        309 |       309 
             Illinois |         0        727 |       727 
              Indiana |         0        660 |       660 
                 Iowa |         0        698 |       698 
               Kansas |         0        738 |       738 
             Kentucky |         0        847 |       847 
            Louisiana |         0        455 |       455 
                Maine |         0        114 |       114 
             Maryland |         0        179 |       179 
        Massachusetts |         0        107 |       107 
             Michigan |         0        597 |       597 
            Minnesota |         0        617 |       617 
          Mississippi |         0        577 |       577 
             Missouri |         0        812 |       812 
              Montana |         0        393 |       393 
             Nebraska |         0        654 |       654 
               Nevada |         0        121 |       121 
        New Hampshire |         0         70 |        70 
           New Jersey |         0        164 |       164 
           New Mexico |         0        233 |       233 
             New York |        40        415 |       455 
       North Carolina |         0        718 |       718 
         North Dakota |         0        372 |       372 
                 Ohio |         0        637 |       637 
             Oklahoma |         0        543 |       543 
               Oregon |         0        260 |       260 
         Pennsylvania |         0        489 |       489 
         Rhode Island |         0         38 |        38 
       South Carolina |         0        330 |       330 
         South Dakota |         0        462 |       462 
            Tennessee |         0        676 |       676 
                Texas |         0      1,816 |     1,816 
                 Utah |         0        208 |       208 
              Vermont |         0         99 |        99 
             Virginia |         0        584 |       584 
           Washington |         0        283 |       283 
        West Virginia |         0        386 |       386 
            Wisconsin |         0        517 |       517 
              Wyoming |         0        162 |       162 
----------------------+----------------------+----------
                Total |        68     21,977 |    22,045 

. tab year covid_merge, m

  Tax year |
     (year | Matching result from
    before |         merge
     move) | Master on  Matched ( |     Total
-----------+----------------------+----------
      2016 |         9      3,079 |     3,088 
      2017 |         9      3,079 |     3,088 
      2018 |         9      3,079 |     3,088 
      2019 |         9      3,079 |     3,088 
      2020 |         9      3,079 |     3,088 
      2021 |         9      3,079 |     3,088 
      2022 |         9      3,071 |     3,080 
      2023 |         5        432 |       437 
-----------+----------------------+----------
     Total |        68     21,977 |    22,045 

. 
. ** Organize data 
. order year fips state_* county_* 

. sort fips year  

. isid fips year 

. 
. ** Keep only sample with non-missing base populations
. tab county_name year if (missing(n1_out_1 ) | n1_out_1 == 0 ) & year <
> = 2022

                      |  Tax year
                      |   (year
                      |   before
                      |   move)
          County name |      2017 |     Total
----------------------+-----------+----------
        Loving County |         1 |         1 
----------------------+-----------+----------
                Total |         1 |         1 

. drop if (missing(n1_out_1 ) | n1_out_1 == 0 ) & year <= 2022
(1 observation deleted)

. 
. ** Keep only sample with observations in each year 
. bysort fips: gen ct = _N

. tab county_name state_name if ct < 7 

                      |      State name
          County name | Connect..      Texas |     Total
----------------------+----------------------+----------
     Fairfield County |         6          0 |         6 
      Hartford County |         6          0 |         6 
    Litchfield County |         6          0 |         6 
        Loving County |         0          6 |         6 
     Middlesex County |         6          0 |         6 
     New Haven County |         6          0 |         6 
    New London County |         6          0 |         6 
       Tolland County |         6          0 |         6 
       Windham County |         6          0 |         6 
----------------------+----------------------+----------
                Total |        48          6 |        54 

. drop if ct < 7 
(54 observations deleted)

. drop ct 

. 
. ** Generate IRS sample 
. gen irs_sample = inrange(year, 2016, 2022)

. 
. ** Generate ACS Period Indicators 
. gen acs_period_1 = merge_acs_1 != 1 & inrange(year, 2016, 2022)

. gen acs_period_2 = merge_acs_1 != 1 

. 
. ** Make sure we have a balanced panel of ACS counties 
. gen tmp = merge_acs_1 != 1 

. bysort fips: egen ct_tmp = total(tmp)

. replace acs_period_1 = 0 if ct_tmp != 8 
(246 real changes made)

. replace acs_period_2 = 0 if ct_tmp != 8 
(294 real changes made)

. drop tmp ct_tmp

. 
. tab year acs_period_1 

  Tax year |
     (year |
    before |     acs_period_1
     move) |         0          1 |     Total
-----------+----------------------+----------
      2016 |     2,690        389 |     3,079 
      2017 |     2,690        389 |     3,079 
      2018 |     2,690        389 |     3,079 
      2019 |     2,690        389 |     3,079 
      2020 |     2,690        389 |     3,079 
      2021 |     2,690        389 |     3,079 
      2022 |     2,690        389 |     3,079 
      2023 |       437          0 |       437 
-----------+----------------------+----------
     Total |    19,267      2,723 |    21,990 

. tab year acs_period_2

  Tax year |
     (year |
    before |     acs_period_2
     move) |         0          1 |     Total
-----------+----------------------+----------
      2016 |     2,690        389 |     3,079 
      2017 |     2,690        389 |     3,079 
      2018 |     2,690        389 |     3,079 
      2019 |     2,690        389 |     3,079 
      2020 |     2,690        389 |     3,079 
      2021 |     2,690        389 |     3,079 
      2022 |     2,690        389 |     3,079 
      2023 |        48        389 |       437 
-----------+----------------------+----------
     Total |    18,878      3,112 |    21,990 

. tab state_name acs_period_1     

                      |     acs_period_1
           State name |         0          1 |     Total
----------------------+----------------------+----------
              Alabama |       453         21 |       474 
               Alaska |       190          7 |       197 
              Arizona |        88         21 |       109 
             Arkansas |       507         21 |       528 
           California |       202        238 |       440 
             Colorado |       443          7 |       450 
             Delaware |         3         21 |        24 
 District of Columbia |         1          7 |         8 
              Florida |       306        196 |       502 
              Georgia |       995        140 |     1,135 
               Hawaii |         9         14 |        23 
                Idaho |       302          7 |       309 
             Illinois |       643         84 |       727 
              Indiana |       548        112 |       660 
                 Iowa |       670         28 |       698 
               Kansas |       717         21 |       738 
             Kentucky |       812         35 |       847 
            Louisiana |       406         49 |       455 
                Maine |       100         14 |       114 
             Maryland |       102         77 |       179 
        Massachusetts |        93         14 |       107 
             Michigan |       485        112 |       597 
            Minnesota |       575         42 |       617 
          Mississippi |       556         21 |       577 
             Missouri |       777         35 |       812 
              Montana |       393          0 |       393 
             Nebraska |       633         21 |       654 
               Nevada |       107         14 |       121 
        New Hampshire |        70          0 |        70 
           New Jersey |        45        119 |       164 
           New Mexico |       219         14 |       233 
             New York |       315        140 |       455 
       North Carolina |       592        126 |       718 
         North Dakota |       365          7 |       372 
                 Ohio |       504        133 |       637 
             Oklahoma |       522         21 |       543 
               Oregon |       211         49 |       260 
         Pennsylvania |       349        140 |       489 
         Rhode Island |        17         21 |        38 
       South Carolina |       323          7 |       330 
         South Dakota |       462          0 |       462 
            Tennessee |       627         49 |       676 
                Texas |     1,543        266 |     1,809 
                 Utah |       173         35 |       208 
              Vermont |        99          0 |        99 
             Virginia |       521         63 |       584 
           Washington |       220         63 |       283 
        West Virginia |       386          0 |       386 
            Wisconsin |       426         91 |       517 
              Wyoming |       162          0 |       162 
----------------------+----------------------+----------
                Total |    19,267      2,723 |    21,990 

.         
. ** Define treated state 
. gen multnomah = state_fips == 41 & county_fips == 51

. label var multnomah "Indicator for Multnomah County, Oregon"    

. 
. ** Define treatment indicator 
. gen Treated = multnomah == 1 & year > 2020

. label var Treated "Treatment indicator for Multnomah County, Oregon"  
>   

. 
. ** Define sample 1: All counties 
. gen sample_all = 1 

. label var sample_all "All counties (excluding AK, CA, HI OR, WA)"

. 
. ** Define sample 2: Counties in top 95 percent 
. summ percent_urban if year == 2020, de 

            Percent of population in urban areas
-------------------------------------------------------------
      Percentiles      Smallest
 1%            0              0
 5%            0              0
10%            0              0       Obs               3,079
25%            0              0       Sum of wgt.       3,079

50%     .3256337                      Mean           .3521437
                        Largest       Std. dev.       .332065
75%     .6326353              1
90%      .847923              1       Variance       .1102672
95%     .9372299              1       Skewness       .3661052
99%     .9972304              1       Kurtosis       1.763629

. local cutoff = r(p95) 

. tab state_name multnomah if percent_urban >= `cutoff' & year == 2020

                      |     Indicator for
                      |   Multnomah County,
                      |        Oregon
           State name |         0          1 |     Total
----------------------+----------------------+----------
               Alaska |         1          0 |         1 
              Arizona |         1          0 |         1 
           California |        15          0 |        15 
             Colorado |         4          0 |         4 
             Delaware |         1          0 |         1 
 District of Columbia |         1          0 |         1 
              Florida |        13          0 |        13 
              Georgia |         8          0 |         8 
               Hawaii |         1          0 |         1 
                Idaho |         1          0 |         1 
             Illinois |         5          0 |         5 
              Indiana |         3          0 |         3 
                 Iowa |         1          0 |         1 
               Kansas |         2          0 |         2 
             Kentucky |         2          0 |         2 
            Louisiana |         3          0 |         3 
             Maryland |         3          0 |         3 
        Massachusetts |         5          0 |         5 
             Michigan |         3          0 |         3 
            Minnesota |         3          0 |         3 
             Missouri |         4          0 |         4 
             Nebraska |         2          0 |         2 
               Nevada |         3          0 |         3 
           New Jersey |        10          0 |        10 
           New Mexico |         2          0 |         2 
             New York |         9          0 |         9 
       North Carolina |         4          0 |         4 
                 Ohio |         6          0 |         6 
             Oklahoma |         1          0 |         1 
               Oregon |         1          1 |         2 
         Pennsylvania |         4          0 |         4 
         Rhode Island |         2          0 |         2 
            Tennessee |         2          0 |         2 
                Texas |        11          0 |        11 
                 Utah |         4          0 |         4 
             Virginia |        10          0 |        10 
           Washington |         1          0 |         1 
            Wisconsin |         1          0 |         1 
----------------------+----------------------+----------
                Total |       153          1 |       154 

. gen sample_urban95 = percent_urban >= `cutoff' // All counties 

. label var sample_urban95 "Urban counties (top 5%) (excluding AK, CA, H
> I OR, WA)"

. tab sample_urban95 if year == 2020

      Urban |
   counties |
   (top 5%) |
 (excluding |
 AK, CA, HI |
    OR, WA) |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |      2,925       95.00       95.00
          1 |        154        5.00      100.00
------------+-----------------------------------
      Total |      3,079      100.00

. 
. ** Define sample 3: Counties in top 98 percent 
. local cutoff = .9864539 //

. tab state_name multnomah if percent_urban >= `cutoff' & year == 2020

                      |     Indicator for
                      |   Multnomah County,
                      |        Oregon
           State name |         0          1 |     Total
----------------------+----------------------+----------
           California |         6          0 |         6 
             Colorado |         2          0 |         2 
 District of Columbia |         1          0 |         1 
              Florida |         4          0 |         4 
              Georgia |         5          0 |         5 
             Illinois |         2          0 |         2 
              Indiana |         1          0 |         1 
            Louisiana |         1          0 |         1 
             Maryland |         1          0 |         1 
        Massachusetts |         1          0 |         1 
             Michigan |         1          0 |         1 
            Minnesota |         1          0 |         1 
             Missouri |         1          0 |         1 
               Nevada |         1          0 |         1 
           New Jersey |         6          0 |         6 
             New York |         7          0 |         7 
       North Carolina |         1          0 |         1 
                 Ohio |         1          0 |         1 
               Oregon |         0          1 |         1 
         Pennsylvania |         2          0 |         2 
         Rhode Island |         1          0 |         1 
                Texas |         3          0 |         3 
                 Utah |         2          0 |         2 
             Virginia |         8          0 |         8 
            Wisconsin |         1          0 |         1 
----------------------+----------------------+----------
                Total |        60          1 |        61 

. gen sample_urban98 = percent_urban >= `cutoff' // All counties 

. label var sample_urban98 "Urban counties (top 1%) (excluding AK, CA, H
> I OR, WA)"

. tab sample_urban98 if year == 2020

      Urban |
   counties |
   (top 1%) |
 (excluding |
 AK, CA, HI |
    OR, WA) |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |      3,018       98.02       98.02
          1 |         61        1.98      100.00
------------+-----------------------------------
      Total |      3,079      100.00

. 
. ** Define Sample of States      
. drop if state_name == "Alaska"
(197 observations deleted)

. drop if state_name == "Hawaii"
(23 observations deleted)

. drop if state_name == "California"
(440 observations deleted)

. drop if state_name == "Washington"
(283 observations deleted)

. drop if state_name == "Oregon" & multnomah == 0
(252 observations deleted)

. 
. ** Define sample 4: Counties in top 95 + covid 
. cluster kmeans cases_cum* deaths_cum* if        ///
>         sample_urban95 == 1 & year == 2020 & covid_merge == 3 , k(5) g
> en(kmean)
cluster name: _clus_1

. bysort fips: egen kmean_group = mean(kmean)
(19,774 missing values generated)

. 
. ** Pull out kmeans cluster with Multnoma
. gen tmp1 = kmean if sample_urban95 == 1 & year == 2020 & covid_merge =
> = 3 & multnomah == 1 
(20,794 missing values generated)

. egen tmp2 = mean(tmp1)

. gen sample_urban95_covid = sample_urban95 == 1 & kmean_group == tmp2

. drop tmp1 tmp2 

. label var sample_urban95_covid "Urban counties (top 5%) w. Kmean Covid
>  Match  (excluding AK, CA, HI OR, WA)"

. tab sample_urban95_covid if year == 2020

      Urban |
   counties |
(top 5%) w. |
Kmean Covid |
      Match |
 (excluding |
 AK, CA, HI |
    OR, WA) |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |      2,879       98.73       98.73
          1 |         37        1.27      100.00
------------+-----------------------------------
      Total |      2,916      100.00

. 
. ** Show results across clusters 
. preserve 

. 
. ** Keep required variables 
. keep if sample_urban95 == 1 & year == 2020 & covid_merge == 3
(20,665 observations deleted)

. keep kmean cases_cum* deaths_cum* population

. collapse (mean) cases_cum* deaths_cum* [fw = population], by(kmean)

. reshape long cases_cum deaths_cum, i(kmean) j(time)
(j = 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 2
> 6 27 28 29)

Data                               Wide   ->   Long
------------------------------------------------------------------------
> -----
Number of observations                5   ->   145         
Number of variables                  59   ->   4           
j variable (29 values)                    ->   time
xij variables:
  cases_cum1 cases_cum2 ... cases_cum29   ->   cases_cum
deaths_cum1 deaths_cum2 ... deaths_cum29  ->   deaths_cum
------------------------------------------------------------------------
> -----

. xtset kmean time 

Panel variable: kmean (strongly balanced)
 Time variable: time, 1 to 29
         Delta: 1 unit

. xtline cases_cum 

. graph export "${results}fig_kmeans.jpg", as(jpg) name("Graph") quality
> (100) replace             
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_km
> eans.jpg written in JPEG format

. clear  

. 
. ** Restore      
. restore 

. 
. ** Define covariates 
. local covariates "population per_capita_income"

. 
. ** Standardize covariates 
. foreach v of local covariates {
  2.         egen tmp_v = std(`v') 
  3.         replace `v' = tmp_v
  4.         drop tmp_v
  5. } // END COVAR LOOP 
variable population was long now double
(20,795 real changes made)
variable per_capita_income was long now double
(20,795 real changes made)

. 
. ** Define outcome variables (IRS)
. foreach x in "n1" "n2" "agi" {
  2.         
.         gen `x'_rate_irs = 100 * (`x'_net_3 / (`x'_out_1 + `x'_out_2))
  3.         
. } // END OUTCOME TYPE LOOP 
(383 missing values generated)
(383 missing values generated)
(383 missing values generated)

. 
. ** Label var 
. label var n1_rate_irs   "Net domestic migration rate, returns (%)"

. label var n2_rate_irs   "Net domestic migration rate, exemptions (%)"

. label var agi_rate_irs  "Net domestic migration rate, AGI (%)"

. 
. 
. ** Define outcome variables (ACS)
. ** Loop over three datasets (18+ = 1, college degree == 2, no college 
> degree == 3)
. forvalues i = 1/3{
  2.         
.         if `i' == 1 local txt "(18+)"
  3.         else if `i' == 2 local txt "(College)"
  4.         else if `i' == 3 local txt "(No College)"
  5.         
.         gen n1_rate_acs`i' = 100 * (acs`i'_households_net_3 / (acs`i'_
> households_out_1 + acs`i'_households_out_2))
  6.         gen n2_rate_acs`i' = 100 * (acs`i'_persons_net_3 / (acs`i'_
> persons_out_1 + acs`i'_persons_out_2))
  7.         gen agi_rate_acs`i' = 100 * (acs`i'_dollars_net_3 / (acs`i'
> _dollars_out_1 + acs`i'_dollars_out_2))
  8.         
.         label var n1_rate_acs`i'        "Net domestic migration rate `
> txt', HHs (%)"
  9.         label var n2_rate_acs`i'        "Net domestic migration rat
> e `txt', persons (%)"
 10.         label var agi_rate_acs`i'       "Net domestic migration rat
> e `txt', total income (%)"
 11.         
. } // END DATA LOOP 
(17,815 missing values generated)
(17,815 missing values generated)
(17,815 missing values generated)
(17,815 missing values generated)
(17,815 missing values generated)
(17,815 missing values generated)
(17,815 missing values generated)
(17,815 missing values generated)
(17,815 missing values generated)

. 
. ** Generate triple-difference vars 
. gen n1_rate_acs4 = n1_rate_acs2 - n1_rate_acs3
(17,815 missing values generated)

. gen n2_rate_acs4 = n2_rate_acs2 - n2_rate_acs3
(17,815 missing values generated)

. gen agi_rate_acs4 = agi_rate_acs2 - agi_rate_acs3
(17,815 missing values generated)

. 
. label var n1_rate_acs4          "Net domestic migration rate (College 
> less No College), HHs (%)"

. label var n2_rate_acs4          "Net domestic migration rate (College 
> less No College), persons (%)"

. label var agi_rate_acs4         "Net domestic migration rate (College 
> less No College), total income (%)"

. 
. ** Declare panel
. xtset fips year 

Panel variable: fips (unbalanced)
 Time variable: year, 2016 to 2023
         Delta: 1 unit

. 
. ** Tag unique fips 
. egen unique = tag(fips)

. tab year unique

  Tax year |
     (year |
    before |       tag(fips)
     move) |         0          1 |     Total
-----------+----------------------+----------
      2016 |         0      2,916 |     2,916 
      2017 |     2,916          0 |     2,916 
      2018 |     2,916          0 |     2,916 
      2019 |     2,916          0 |     2,916 
      2020 |     2,916          0 |     2,916 
      2021 |     2,916          0 |     2,916 
      2022 |     2,916          0 |     2,916 
      2023 |       383          0 |       383 
-----------+----------------------+----------
     Total |    17,879      2,916 |    20,795 

. 
. ** Loop over IRS and ACS Samples  
. foreach data of varlist irs_sample acs_period_1 acs_period_2  {
  2. 
.         ** Different sets of outcome variables 
.         if "`data'" == "irs_sample" local out_type "irs"
  3.         else local out_type "acs1 acs2 acs3 acs4"
  4. 
.         ** Loop over Outcome var type 
.         foreach type of local out_type {
  5.                 
.                 ** Labels 
.                 if "`data'" == "irs_sample" local out_txt "irs_16_22"
  6.                 else if "`data'" == "acs_period_1" & "`type'" == "a
> cs1" local out_txt "acs_16_22_all"
  7.                 else if "`data'" == "acs_period_1" & "`type'" == "a
> cs2" local out_txt "acs_16_22_col"
  8.                 else if "`data'" == "acs_period_1" & "`type'" == "a
> cs3" local out_txt "acs_16_22_noc"
  9.                 else if "`data'" == "acs_period_1" & "`type'" == "a
> cs4" local out_txt "acs_16_22_3D"
 10.                 else if "`data'" == "acs_period_2" & "`type'" == "a
> cs1" local out_txt "acs_16_23_all"
 11.                 else if "`data'" == "acs_period_2" & "`type'" == "a
> cs2" local out_txt "acs_16_23_col"
 12.                 else if "`data'" == "acs_period_2" & "`type'" == "a
> cs3" local out_txt "acs_16_23_noc"
 13.                 else if "`data'" == "acs_period_2" & "`type'" == "a
> cs4" local out_txt "acs_16_23_3D"
 14. 
.                 ** Loop over samples 
.                 foreach samp of varlist sample_all sample_urban95 samp
> le_urban95_covid {        
 15.                         
.                         ** Loop over exclusion of 2019-2020 period 
.                         forvalues exl = 1(-1)0 {
 16.                                 
.                                 ** Define sample        
.                                 gen sample = `samp' == 1 & `data' == 1
>  
 17.                                 if `exl' == 1 replace sample = 0 if
>  year == 2020 
 18.                                 
.                                 ** Clear stored values 
.                                 eststo clear            
 19.                                 
.                                 ** Loop over outcomes 
.                                 foreach out of varlist n1_rate_`type' 
> n2_rate_`type' agi_rate_`type' {
 20.                                 
.                                         ** Store label 
.                                         local label : variable label `
> out'
 21.                                         
.                                         ** Loop over inclusion of cova
> riates
.                                         forvalues c = 0/1 {
 22.                                         
.                                                 ** Covariates 
.                                                 if `c' == 0 local cova
> rs ""
 23.                                                 else if `c' == 1 lo
> cal covars "covariates(`covariates', projected)"
 24.                                                 
.                                                 ** File Name 
.                                                 if `exl' == 0 local pa
> th "${results}fig_`out_txt'_`out'_`c'_`samp'_"
 25.                                                 if `exl' == 1 local
>  path "${results}fig_`out_txt'_`out'_`c'_`samp'_excl2020_"
 26.         
.                                                 
.                                                 ** Run SDID
.                                                 eststo sdid_`out'_`c':
>  sdid `out' fips year Treated     ///
>                                                         if sample == 1
> ,                         ///
>                                                         vce(placebo)  
>                           ///
>                                                         `covar'       
>                                   ///
>                                                         reps(`reps')  
>                           ///
>                                                         graph graph_ex
> port("`path'", .pdf) 
 27.                                                         
.                                                 ** Estadd counties  
.                                                 qui summ `out' if year
>  == 2021 & sample == 1
 28.                                                 estadd scalar count
>  = r(N)      
 29.                                                         
.                                                 ** Estadd mean 
.                                                 qui summ `out' if mult
> nomah == 1 & Treated == 0 
 30.                                                 estadd scalar mean 
> = r(mean)
 31. 
.                                                 ** Run event-study 
.                                                 sdid_event `out' fips 
> year Treated                      ///
>                                                         if sample == 1
> ,                                         ///
>                                                         `covar'       
>                                                   ///
>                                                         vce(placebo)  
>                                           ///
>                                                         brep(`reps')  
>                                           ///
>                                                         placebo(all)
 32.                                                 
.                                                 ** Create Figure 
.                                                 
.                                                 ** Store max year 
.                                                 qui summ year if multn
> omah == 1 & sample == 1
 33.                                                 local max_yr = r(ma
> x)
 34.                                                 dis "`max_yr'"
 35.                                                 
.                                                 ** Move results from m
> atrix to data 
.                                                 qui count if multnomah
>  == 1 & sample == 1
 36.                                                 local ct = r(N)
 37.                                                 local ct = `ct' + 1
 38.                                                 matrix list e(H)
 39.                                                 mat res = e(H)[2..`
> ct',1..5]
 40.                         
.                                                 ** Move Matrix results
>  to data 
.                                                 svmat res
 41.                                                 
.                                                 ** Generate ID variabl
> e
.                                                 gen id = `max_yr' - _n
>  + 1 if !missing(res1)
 42.                                                 
.                                                 ** Update labeling for
>  exclusion of 
.                                                 if `exl' == 1 {
 43.                                                         expand 2 if
>  id == 2019, gen(tag)
 44.                                                         replace id 
> = 2020 if tag == 1 
 45.                                                         replace res
> 1 = . if tag == 1 
 46.                                                         replace res
> 3 = . if tag == 1 
 47.                                                         replace res
> 4 = . if tag == 1 
 48.                                                 }
 49.                                                 label var id "Year 
> (destination)"
 50.                                                 
.                                                 ** Sort 
.                                                 sort id
 51.                                                 sdfsfd
 52.                                                 ** Plot
.                                                 twoway  (rcap res3 res
> 4 id, lc(gs10) fc(gs11%50))       ///
>                                                                 (scatt
> er res1 id, mc(black)),                           ///             
>                                                         legend(off) yt
> itle("`label'")                                   ///
>                                                         yline(0, lc(re
> d) lp(-))                                                 ///
>                                                         xline(2020.5, 
> lc(black) lp(solid))                              ///
>                                                         ylabel(-10(2.5
> )10, format(%9.1f))
 53. 
.                                                 if `exl' == 0 local pa
> th "${results}fig_`out_txt'_`out'_`c'_`samp'_eventstudy.jpg"
 54.                                                 if `exl' == 1 local
>  path "${results}fig_`out_txt'_`out'_`c'_`samp'_excl2020_eventstudy.jp
> g"
 55.         
.                                                         
.                                                 graph export "`path'",
>   ///
>                                                         as(jpg) name("
> Graph") quality(100) replace              
 56. 
.                                                 ** Clean up 
.                                                 drop res1 res2 res3 re
> s4 res5 id 
 57.                                                 drop if tag == 1
 58.                                                 drop tag 
 59. 
.                                                 ** Update Count
.                                                 local ct = `ct' + 1 
 60.                                                                    
>              
.                                         } // END COVAR LOOP 
 61.                                 
.                                 } // END OUTCOME LOOP 
 62.                                 
.                                 ** Determine name 
.                                 if `exl' == 0 local path "${results}ta
> b_sdid_`out_txt'_`samp'.tex"
 63.                                 if `exl' == 1 local path "${results
> }tab_sdid_`out_txt'_`samp'_excl2020.tex"
 64. 
.                                 ** Table of results 
.                                 esttab  sdid_n1_rate_`type'_0 sdid_n1_
> rate_`type'_1                     ///
>                                                 sdid_n2_rate_`type'_0 
> sdid_n2_rate_`type'_1                     ///
>                                                 sdid_agi_rate_`type'_0
>  sdid_agi_rate_`type'_1 using     ///
>                                 "`path'",                             
>                                                   ///
>                                 starlevel("*" 0.10 "**" 0.05 "***" 0.0
> 1)                ///
>                                 b(%-9.3f) se(%-9.3f) replace          
>                           ///
>                                 mgroups("Returns" "Exemptions" "AGI", 
>                   ///
>                                         pattern(1 0 1 0 1 0) )        
>                                   ///
>                                 mtitle( "No Covariates" "Covariates"  
>                   ///
>                                                 "No Covariates" "Covar
> iates"                    ///
>                                                 "No Covariates" "Covar
> iates")                   ///
>                                 stats(count mean,                     
>                                           ///
>                                         fmt(%9.0fc %9.3fc)            
>                                           ///
>                                         labels("Number of Counties" "P
> re-treatment mean"))
 65.                                 
.                                 ** Drop sample var 
.                                 drop sample 
 66.                                 
.                         } // END EXCLUSION LOOP 
 67.                         
.                 } // END SAMPLE LOOP 
 68.         
.         } // END OUT TYPE 
 69.         
. } // END DATA LOOP 
(2,916 real changes made)
Placebo replications (100). This may take some time.
----+--- 1 ---+--- 2 ---+--- 3 ---+--- 4 ---+--- 5
..................................................     50
..................................................     100


Synthetic Difference-in-Differences Estimator

------------------------------------------------------------------------
> -----
 n1_rate_irs |     ATT     Std. Err.     t      P>|t|    [95% Conf. Inte
> rval]
-------------+----------------------------------------------------------
> -----
     Treated |  -1.92529    1.63179    -1.18    0.238    -5.12353     1.
> 27295
------------------------------------------------------------------------
> -----
95% CIs and p-values are based on large-sample approximations.
Refer to Arkhangelsky et al., (2021) for theoretical derivations.
file
    C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_i
    > rs_16_22_n1_rate_irs_0_sample_all_excl2020_trends2021.pdf saved
    as PDF format

added scalar:
              e(count) =  2916

added scalar:
               e(mean) =  .1434552
Synthetic Difference-in-differences

Boostrap replications (100), placebo mode.
|0% ----------------------------------------- 100%|
|.................................................|


             |  Estimate         SE      LB CI      UB CI  Switchers 
-------------+------------------------------------------------------
         ATT | -1.925286   1.082986  -4.047938   .1973655          1 
    Effect_1 | -2.430048    1.27963  -4.938122    .078027          1 
    Effect_2 | -1.420525   1.356194  -4.078664   1.237615          1 
   Placebo_1 |  .0018158   .0109943   -.019733   .0233647          1 
   Placebo_2 | -.0017198   .0281864  -.0569652   .0535256          1 
   Placebo_3 | -.0060693   .0429703  -.0902912   .0781525          1 
   Placebo_4 |  .0088023    .039673  -.0689569   .0865614          1 
2022

e(H)[7,5]
             Estimate          SE       LB CI       UB CI   Switchers
      ATT  -1.9252863   1.0829856   -4.047938   .19736551           1
 Effect_1  -2.4300477     1.27963  -4.9381225   .07802702           1
 Effect_2  -1.4205248   1.3561936  -4.0786642   1.2376146           1
Placebo_1   .00181583   .01099433  -.01973304   .02336471           1
Placebo_2  -.00171981   .02818643  -.05696522    .0535256           1
Placebo_3  -.00606931   .04297032  -.09029115   .07815252           1
Placebo_4   .00880226   .03967303  -.06895688   .08656141           1
(20,789 missing values generated)
(1 observation created)
(1 real change made)
(1 real change made, 1 to missing)
(1 real change made, 1 to missing)
(1 real change made, 1 to missing)
command sdfsfd is unrecognized
r(199);

end of do-file

r(199);

. do "C:\Users\ji252\AppData\Local\Temp\STD4490_000007.tmp"

.                                                 twoway  (rcap res3 res4 id, lc(gs10) fc(gs11%50))       ///
>                                                                 (scatter res1 id, mc(black)),                           ///             
>                                                         legend(off) ytitle("`label'")                                   ///
>                                                         yline(0, lc(red) lp(-))                                                 ///
>                                                         xline(2020.5, lc(black) lp(solid))                              ///
>                                                         ylabel(-10(2.5)10, format(%9.1f))

. 
end of do-file

. list res* id if !missing(id)

       +-----------------------------------------------------------+
       |      res1       res2        res3       res4   res5     id |
       |-----------------------------------------------------------|
    1. |  .0088023    .039673   -.0689569   .0865614      1   2017 |
    2. | -.0060693   .0429703   -.0902911   .0781525      1   2018 |
    3. | -.0017198   .0281864   -.0569652   .0535256      1   2019 |
    4. |  .0018158   .0109943    -.019733   .0233647      1   2020 |
    5. |         .   .0281864           .          .      1   2020 |
       |-----------------------------------------------------------|
    6. | -1.420525   1.356194   -4.078664   1.237615      1   2021 |
    7. | -2.430048    1.27963   -4.938122    .078027      1   2022 |
       +-----------------------------------------------------------+

. do "C:\Users\ji252\AppData\Local\Temp\STD4490_000007.tmp"

.                                                 twoway  (rcap res3 res4 id, lc(gs10) fc(gs11%50))       ///
>                                                                 (scatter res1 id, mc(black)),                           ///             
>                                                         legend(off) ytitle("`label'")                                   ///
>                                                         yline(0, lc(red) lp(-))                                                 ///
>                                                         xline(2020.5, lc(black) lp(solid))                              ///
>                                                         ylabel(-10(2.5)10, format(%9.1f))

. 
end of do-file

. drop if tag == 1
(1 observation deleted)

. drop tag

. do "C:\Users\ji252\AppData\Local\Temp\STD4490_000008.tmp"

.                                                         replace id = id - 1 if id <= 2020 
(4 real changes made)

.                                                         expand 2 if id == 2019, gen(tag)
(1 observation created)

.                                                         replace id = 2020 if tag == 1 
(1 real change made)

.                                                         replace res1 = . if tag == 1 
(1 real change made, 1 to missing)

.                                                         replace res3 = . if tag == 1 
(1 real change made, 1 to missing)

.                                                         replace res4 = . if tag == 1 
(1 real change made, 1 to missing)

. 
end of do-file

. do "C:\Users\ji252\AppData\Local\Temp\STD4490_000009.tmp"

.                                                 sort id

. 
end of do-file

. do "C:\Users\ji252\AppData\Local\Temp\STD4490_00000a.tmp"

.                                                 twoway  (rcap res3 res4 id, lc(gs10) fc(gs11%50))       ///
>                                                                 (scatter res1 id, mc(black)),                           ///             
>                                                         legend(off) ytitle("`label'")                                   ///
>                                                         yline(0, lc(red) lp(-))                                                 ///
>                                                         xline(2020.5, lc(black) lp(solid))                              ///
>                                                         ylabel(-10(2.5)10, format(%9.1f))

. 
end of do-file

. do "C:\Users\ji252\AppData\Local\Temp\STD4490_00000b.tmp"

. /*******************************************************************************
> File Name:              02_sdid_analysis.do
> Creator:                John Iselin
> Date Update:    November 26, 2025
> 
> Called by: 00_multnomah.do
> 
> Purpose: Preform synthetic difference-in-difference estiamtion. 
> 
> Authors: John Iselin 
> 
> For more information, contact john.iselin@yale.edu
> 
> *******************************************************************************/
. 
. 
. ** Start log file 
. capture log close log_02

. log using "${logs}02_log_sdid_${date}", replace text name(log_02)
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
      name:  log_02
       log:  C:/Users/ji252/Documents/GitHub/multnomah-county-tax/code/logs/02_log_sdid_2026-01-05.log
  log type:  text
 opened on:   6 Jan 2026, 10:45:35

. 
. ** Parameters 
. local reps = 100

. 
. ** Load data 
. use "${data}working/irs_county_gross", replace 

. 
. ** Keep required variables 
. keep year fips state* county* *_net_3 *_out_1 *_out_2 

. order year fips state* county* 

. 
. ** Merge with ACS Data 
. merge 1:1 year fips using "${data}working/acs_county_gross_18plus", gen(merge_acs_1)
(variable fips was float, now double to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        20,278
        from master                    18,963  (merge_acs_1==1)
        from using                      1,315  (merge_acs_1==2)

    Matched                             3,017  (merge_acs_1==3)
    -----------------------------------------

. 
. ** Keep require variables 
. keep year fips state* county* *_net_3 *_out_1 *_out_2 merge_acs_*

. 
. ** Label acs samples 
. rename persons_* acs1_persons_* 

. rename households_* acs1_households_*

. rename dollars_* acs1_dollars_*

. 
. ** Merge with ACS Data 
. merge 1:1 year fips using "${data}working/acs_county_gross_college", gen(merge_acs_2)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        18,963
        from master                    18,963  (merge_acs_2==1)
        from using                          0  (merge_acs_2==2)

    Matched                             4,332  (merge_acs_2==3)
    -----------------------------------------

. 
. ** Keep require variables 
. keep year fips state* county* *_net_3 *_out_1 *_out_2 merge_acs_*

. 
. ** Label acs samples 
. rename persons_* acs2_persons_*

. rename households_* acs2_households_*

. rename dollars_* acs2_dollars_*

. 
. ** Merge with ACS Data 
. merge 1:1 year fips using "${data}working/acs_county_gross_nocollege", gen(merge_acs_3)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        18,963
        from master                    18,963  (merge_acs_3==1)
        from using                          0  (merge_acs_3==2)

    Matched                             4,332  (merge_acs_3==3)
    -----------------------------------------

. 
. ** Keep require variables 
. keep year fips state* county* *_net_3 *_out_1 *_out_2 merge_acs_*

. 
. ** Label acs samples 
. rename persons_* acs3_persons_*

. rename households_* acs3_households_*

. rename dollars_* acs3_dollars_*

. 
. ** TODO add High and Low Education Samples 
. 
. ** Drop "other counties"
. drop if county_fips == 0
(434 observations deleted)

. drop if year == 2015 
(430 observations deleted)

. 
. ** Merge with Demographic data 
. merge m:1 fips using "${data}working/demographics_2020",        ///
>         gen(demo_merge) keep(master match)

    Result                      Number of obs
    -----------------------------------------
    Not matched                            20
        from master                        20  (demo_merge==1)
        from using                          0  (demo_merge==2)

    Matched                            22,411  (demo_merge==3)
    -----------------------------------------

.         
. ** Show match 
. tab state_name demo_merge, m

                     | Matching result from
                     |         merge
          State name | Master on  Matched ( |     Total
---------------------+----------------------+----------
                     |        14          0 |        14 
             Alabama |         0        474 |       474 
              Alaska |         6        197 |       203 
             Arizona |         0        109 |       109 
            Arkansas |         0        528 |       528 
          California |         0        440 |       440 
            Colorado |         0        450 |       450 
         Connecticut |         0         48 |        48 
            Delaware |         0         24 |        24 
District of Columbia |         0          8 |         8 
             Florida |         0        502 |       502 
             Georgia |         0      1,135 |     1,135 
              Hawaii |         0         32 |        32 
               Idaho |         0        309 |       309 
            Illinois |         0        727 |       727 
             Indiana |         0        660 |       660 
                Iowa |         0        698 |       698 
              Kansas |         0        738 |       738 
            Kentucky |         0        847 |       847 
           Louisiana |         0        455 |       455 
               Maine |         0        114 |       114 
            Maryland |         0        179 |       179 
       Massachusetts |         0        107 |       107 
            Michigan |         0        597 |       597 
           Minnesota |         0        617 |       617 
         Mississippi |         0        577 |       577 
            Missouri |         0        812 |       812 
             Montana |         0        393 |       393 
            Nebraska |         0        654 |       654 
              Nevada |         0        121 |       121 
       New Hampshire |         0         70 |        70 
          New Jersey |         0        164 |       164 
          New Mexico |         0        233 |       233 
            New York |         0        455 |       455 
      North Carolina |         0        718 |       718 
        North Dakota |         0        372 |       372 
                Ohio |         0        637 |       637 
            Oklahoma |         0        543 |       543 
              Oregon |         0        260 |       260 
        Pennsylvania |         0        489 |       489 
        Rhode Island |         0         38 |        38 
      South Carolina |         0        330 |       330 
        South Dakota |         0        462 |       462 
           Tennessee |         0        676 |       676 
               Texas |         0      1,816 |     1,816 
                Utah |         0        208 |       208 
             Vermont |         0         99 |        99 
            Virginia |         0        941 |       941 
          Washington |         0        283 |       283 
       West Virginia |         0        386 |       386 
           Wisconsin |         0        517 |       517 
             Wyoming |         0        162 |       162 
---------------------+----------------------+----------
               Total |        20     22,411 |    22,431 

. tab year demo_merge, m

  Tax year |
     (year | Matching result from
    before |         merge
     move) | Master on  Matched ( |     Total
-----------+----------------------+----------
      2016 |         0      3,140 |     3,140 
      2017 |         0      3,140 |     3,140 
      2018 |         0      3,140 |     3,140 
      2019 |         0      3,140 |     3,140 
      2020 |         2      3,140 |     3,142 
      2021 |         2      3,141 |     3,143 
      2022 |         9      3,133 |     3,142 
      2023 |         7        437 |       444 
-----------+----------------------+----------
     Total |        20     22,411 |    22,431 

. 
. ** Keep if matched 
. keep if demo_merge == 3
(20 observations deleted)

. drop demo_merge

. 
. ** Rename 
. rename population pop_census

.         
. ** Merge with Demographic data 
. merge m:1 year fips using "${data}working/bea_economics",       ///
>         gen(econ_merge) keep(master match) 

    Result                      Number of obs
    -----------------------------------------
    Not matched                           366
        from master                       366  (econ_merge==1)
        from using                          0  (econ_merge==2)

    Matched                            22,045  (econ_merge==3)
    -----------------------------------------

.         
. ** Show match 
. tab state_name econ_merge, m

                     | Matching result from
                     |         merge
          State name | Master on  Matched ( |     Total
---------------------+----------------------+----------
             Alabama |         0        474 |       474 
              Alaska |         0        197 |       197 
             Arizona |         0        109 |       109 
            Arkansas |         0        528 |       528 
          California |         0        440 |       440 
            Colorado |         0        450 |       450 
         Connecticut |         0         48 |        48 
            Delaware |         0         24 |        24 
District of Columbia |         0          8 |         8 
             Florida |         0        502 |       502 
             Georgia |         0      1,135 |     1,135 
              Hawaii |         9         23 |        32 
               Idaho |         0        309 |       309 
            Illinois |         0        727 |       727 
             Indiana |         0        660 |       660 
                Iowa |         0        698 |       698 
              Kansas |         0        738 |       738 
            Kentucky |         0        847 |       847 
           Louisiana |         0        455 |       455 
               Maine |         0        114 |       114 
            Maryland |         0        179 |       179 
       Massachusetts |         0        107 |       107 
            Michigan |         0        597 |       597 
           Minnesota |         0        617 |       617 
         Mississippi |         0        577 |       577 
            Missouri |         0        812 |       812 
             Montana |         0        393 |       393 
            Nebraska |         0        654 |       654 
              Nevada |         0        121 |       121 
       New Hampshire |         0         70 |        70 
          New Jersey |         0        164 |       164 
          New Mexico |         0        233 |       233 
            New York |         0        455 |       455 
      North Carolina |         0        718 |       718 
        North Dakota |         0        372 |       372 
                Ohio |         0        637 |       637 
            Oklahoma |         0        543 |       543 
              Oregon |         0        260 |       260 
        Pennsylvania |         0        489 |       489 
        Rhode Island |         0         38 |        38 
      South Carolina |         0        330 |       330 
        South Dakota |         0        462 |       462 
           Tennessee |         0        676 |       676 
               Texas |         0      1,816 |     1,816 
                Utah |         0        208 |       208 
             Vermont |         0         99 |        99 
            Virginia |       357        584 |       941 
          Washington |         0        283 |       283 
       West Virginia |         0        386 |       386 
           Wisconsin |         0        517 |       517 
             Wyoming |         0        162 |       162 
---------------------+----------------------+----------
               Total |       366     22,045 |    22,411 

. tab year econ_merge, m

  Tax year |
     (year | Matching result from
    before |         merge
     move) | Master on  Matched ( |     Total
-----------+----------------------+----------
      2016 |        52      3,088 |     3,140 
      2017 |        52      3,088 |     3,140 
      2018 |        52      3,088 |     3,140 
      2019 |        52      3,088 |     3,140 
      2020 |        52      3,088 |     3,140 
      2021 |        53      3,088 |     3,141 
      2022 |        53      3,080 |     3,133 
      2023 |         0        437 |       437 
-----------+----------------------+----------
     Total |       366     22,045 |    22,411 

. 
. ** Keep if matched 
. keep if econ_merge == 3
(366 observations deleted)

. drop econ_merge

. 
. ** Merge with COVID-19 Data
. merge m:1 fips using ${data}working/covid_cleaned_wide.dta,     ///
>         gen(covid_merge) keep(master match )
(variable state_name was str20, now str24 to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                            68
        from master                        68  (covid_merge==1)
        from using                          0  (covid_merge==2)

    Matched                            21,977  (covid_merge==3)
    -----------------------------------------

. 
. ** Show match 
. tab state_name covid_merge, m

                      | Matching result from
                      |         merge
           State name | Master on  Matched ( |     Total
----------------------+----------------------+----------
              Alabama |         0        474 |       474 
               Alaska |        28        169 |       197 
              Arizona |         0        109 |       109 
             Arkansas |         0        528 |       528 
           California |         0        440 |       440 
             Colorado |         0        450 |       450 
          Connecticut |         0         48 |        48 
             Delaware |         0         24 |        24 
 District of Columbia |         0          8 |         8 
              Florida |         0        502 |       502 
              Georgia |         0      1,135 |     1,135 
               Hawaii |         0         23 |        23 
                Idaho |         0        309 |       309 
             Illinois |         0        727 |       727 
              Indiana |         0        660 |       660 
                 Iowa |         0        698 |       698 
               Kansas |         0        738 |       738 
             Kentucky |         0        847 |       847 
            Louisiana |         0        455 |       455 
                Maine |         0        114 |       114 
             Maryland |         0        179 |       179 
        Massachusetts |         0        107 |       107 
             Michigan |         0        597 |       597 
            Minnesota |         0        617 |       617 
          Mississippi |         0        577 |       577 
             Missouri |         0        812 |       812 
              Montana |         0        393 |       393 
             Nebraska |         0        654 |       654 
               Nevada |         0        121 |       121 
        New Hampshire |         0         70 |        70 
           New Jersey |         0        164 |       164 
           New Mexico |         0        233 |       233 
             New York |        40        415 |       455 
       North Carolina |         0        718 |       718 
         North Dakota |         0        372 |       372 
                 Ohio |         0        637 |       637 
             Oklahoma |         0        543 |       543 
               Oregon |         0        260 |       260 
         Pennsylvania |         0        489 |       489 
         Rhode Island |         0         38 |        38 
       South Carolina |         0        330 |       330 
         South Dakota |         0        462 |       462 
            Tennessee |         0        676 |       676 
                Texas |         0      1,816 |     1,816 
                 Utah |         0        208 |       208 
              Vermont |         0         99 |        99 
             Virginia |         0        584 |       584 
           Washington |         0        283 |       283 
        West Virginia |         0        386 |       386 
            Wisconsin |         0        517 |       517 
              Wyoming |         0        162 |       162 
----------------------+----------------------+----------
                Total |        68     21,977 |    22,045 

. tab year covid_merge, m

  Tax year |
     (year | Matching result from
    before |         merge
     move) | Master on  Matched ( |     Total
-----------+----------------------+----------
      2016 |         9      3,079 |     3,088 
      2017 |         9      3,079 |     3,088 
      2018 |         9      3,079 |     3,088 
      2019 |         9      3,079 |     3,088 
      2020 |         9      3,079 |     3,088 
      2021 |         9      3,079 |     3,088 
      2022 |         9      3,071 |     3,080 
      2023 |         5        432 |       437 
-----------+----------------------+----------
     Total |        68     21,977 |    22,045 

. 
. ** Organize data 
. order year fips state_* county_* 

. sort fips year  

. isid fips year 

. 
. ** Keep only sample with non-missing base populations
. tab county_name year if (missing(n1_out_1 ) | n1_out_1 == 0 ) & year <= 2022

                      |  Tax year
                      |   (year
                      |   before
                      |   move)
          County name |      2017 |     Total
----------------------+-----------+----------
        Loving County |         1 |         1 
----------------------+-----------+----------
                Total |         1 |         1 

. drop if (missing(n1_out_1 ) | n1_out_1 == 0 ) & year <= 2022
(1 observation deleted)

. 
. ** Keep only sample with observations in each year 
. bysort fips: gen ct = _N

. tab county_name state_name if ct < 7 

                      |      State name
          County name | Connect..      Texas |     Total
----------------------+----------------------+----------
     Fairfield County |         6          0 |         6 
      Hartford County |         6          0 |         6 
    Litchfield County |         6          0 |         6 
        Loving County |         0          6 |         6 
     Middlesex County |         6          0 |         6 
     New Haven County |         6          0 |         6 
    New London County |         6          0 |         6 
       Tolland County |         6          0 |         6 
       Windham County |         6          0 |         6 
----------------------+----------------------+----------
                Total |        48          6 |        54 

. drop if ct < 7 
(54 observations deleted)

. drop ct 

. 
. ** Generate IRS sample 
. gen irs_sample = inrange(year, 2016, 2022)

. 
. ** Generate ACS Period Indicators 
. gen acs_period_1 = merge_acs_1 != 1 & inrange(year, 2016, 2022)

. gen acs_period_2 = merge_acs_1 != 1 

. 
. ** Make sure we have a balanced panel of ACS counties 
. gen tmp = merge_acs_1 != 1 

. bysort fips: egen ct_tmp = total(tmp)

. replace acs_period_1 = 0 if ct_tmp != 8 
(246 real changes made)

. replace acs_period_2 = 0 if ct_tmp != 8 
(294 real changes made)

. drop tmp ct_tmp

. 
. tab year acs_period_1 

  Tax year |
     (year |
    before |     acs_period_1
     move) |         0          1 |     Total
-----------+----------------------+----------
      2016 |     2,690        389 |     3,079 
      2017 |     2,690        389 |     3,079 
      2018 |     2,690        389 |     3,079 
      2019 |     2,690        389 |     3,079 
      2020 |     2,690        389 |     3,079 
      2021 |     2,690        389 |     3,079 
      2022 |     2,690        389 |     3,079 
      2023 |       437          0 |       437 
-----------+----------------------+----------
     Total |    19,267      2,723 |    21,990 

. tab year acs_period_2

  Tax year |
     (year |
    before |     acs_period_2
     move) |         0          1 |     Total
-----------+----------------------+----------
      2016 |     2,690        389 |     3,079 
      2017 |     2,690        389 |     3,079 
      2018 |     2,690        389 |     3,079 
      2019 |     2,690        389 |     3,079 
      2020 |     2,690        389 |     3,079 
      2021 |     2,690        389 |     3,079 
      2022 |     2,690        389 |     3,079 
      2023 |        48        389 |       437 
-----------+----------------------+----------
     Total |    18,878      3,112 |    21,990 

. tab state_name acs_period_1     

                      |     acs_period_1
           State name |         0          1 |     Total
----------------------+----------------------+----------
              Alabama |       453         21 |       474 
               Alaska |       190          7 |       197 
              Arizona |        88         21 |       109 
             Arkansas |       507         21 |       528 
           California |       202        238 |       440 
             Colorado |       443          7 |       450 
             Delaware |         3         21 |        24 
 District of Columbia |         1          7 |         8 
              Florida |       306        196 |       502 
              Georgia |       995        140 |     1,135 
               Hawaii |         9         14 |        23 
                Idaho |       302          7 |       309 
             Illinois |       643         84 |       727 
              Indiana |       548        112 |       660 
                 Iowa |       670         28 |       698 
               Kansas |       717         21 |       738 
             Kentucky |       812         35 |       847 
            Louisiana |       406         49 |       455 
                Maine |       100         14 |       114 
             Maryland |       102         77 |       179 
        Massachusetts |        93         14 |       107 
             Michigan |       485        112 |       597 
            Minnesota |       575         42 |       617 
          Mississippi |       556         21 |       577 
             Missouri |       777         35 |       812 
              Montana |       393          0 |       393 
             Nebraska |       633         21 |       654 
               Nevada |       107         14 |       121 
        New Hampshire |        70          0 |        70 
           New Jersey |        45        119 |       164 
           New Mexico |       219         14 |       233 
             New York |       315        140 |       455 
       North Carolina |       592        126 |       718 
         North Dakota |       365          7 |       372 
                 Ohio |       504        133 |       637 
             Oklahoma |       522         21 |       543 
               Oregon |       211         49 |       260 
         Pennsylvania |       349        140 |       489 
         Rhode Island |        17         21 |        38 
       South Carolina |       323          7 |       330 
         South Dakota |       462          0 |       462 
            Tennessee |       627         49 |       676 
                Texas |     1,543        266 |     1,809 
                 Utah |       173         35 |       208 
              Vermont |        99          0 |        99 
             Virginia |       521         63 |       584 
           Washington |       220         63 |       283 
        West Virginia |       386          0 |       386 
            Wisconsin |       426         91 |       517 
              Wyoming |       162          0 |       162 
----------------------+----------------------+----------
                Total |    19,267      2,723 |    21,990 

.         
. ** Define treated state 
. gen multnomah = state_fips == 41 & county_fips == 51

. label var multnomah "Indicator for Multnomah County, Oregon"    

. 
. ** Define treatment indicator 
. gen Treated = multnomah == 1 & year > 2020

. label var Treated "Treatment indicator for Multnomah County, Oregon"    

. 
. ** Define sample 1: All counties 
. gen sample_all = 1 

. label var sample_all "All counties (excluding AK, CA, HI OR, WA)"

. 
. ** Define sample 2: Counties in top 95 percent 
. summ percent_urban if year == 2020, de 

            Percent of population in urban areas
-------------------------------------------------------------
      Percentiles      Smallest
 1%            0              0
 5%            0              0
10%            0              0       Obs               3,079
25%            0              0       Sum of wgt.       3,079

50%     .3256337                      Mean           .3521437
                        Largest       Std. dev.       .332065
75%     .6326353              1
90%      .847923              1       Variance       .1102672
95%     .9372299              1       Skewness       .3661052
99%     .9972304              1       Kurtosis       1.763629

. local cutoff = r(p95) 

. tab state_name multnomah if percent_urban >= `cutoff' & year == 2020

                      |     Indicator for
                      |   Multnomah County,
                      |        Oregon
           State name |         0          1 |     Total
----------------------+----------------------+----------
               Alaska |         1          0 |         1 
              Arizona |         1          0 |         1 
           California |        15          0 |        15 
             Colorado |         4          0 |         4 
             Delaware |         1          0 |         1 
 District of Columbia |         1          0 |         1 
              Florida |        13          0 |        13 
              Georgia |         8          0 |         8 
               Hawaii |         1          0 |         1 
                Idaho |         1          0 |         1 
             Illinois |         5          0 |         5 
              Indiana |         3          0 |         3 
                 Iowa |         1          0 |         1 
               Kansas |         2          0 |         2 
             Kentucky |         2          0 |         2 
            Louisiana |         3          0 |         3 
             Maryland |         3          0 |         3 
        Massachusetts |         5          0 |         5 
             Michigan |         3          0 |         3 
            Minnesota |         3          0 |         3 
             Missouri |         4          0 |         4 
             Nebraska |         2          0 |         2 
               Nevada |         3          0 |         3 
           New Jersey |        10          0 |        10 
           New Mexico |         2          0 |         2 
             New York |         9          0 |         9 
       North Carolina |         4          0 |         4 
                 Ohio |         6          0 |         6 
             Oklahoma |         1          0 |         1 
               Oregon |         1          1 |         2 
         Pennsylvania |         4          0 |         4 
         Rhode Island |         2          0 |         2 
            Tennessee |         2          0 |         2 
                Texas |        11          0 |        11 
                 Utah |         4          0 |         4 
             Virginia |        10          0 |        10 
           Washington |         1          0 |         1 
            Wisconsin |         1          0 |         1 
----------------------+----------------------+----------
                Total |       153          1 |       154 

. gen sample_urban95 = percent_urban >= `cutoff' // All counties 

. label var sample_urban95 "Urban counties (top 5%) (excluding AK, CA, HI OR, WA)"

. tab sample_urban95 if year == 2020

      Urban |
   counties |
   (top 5%) |
 (excluding |
 AK, CA, HI |
    OR, WA) |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |      2,925       95.00       95.00
          1 |        154        5.00      100.00
------------+-----------------------------------
      Total |      3,079      100.00

. 
. ** Define sample 3: Counties in top 98 percent 
. local cutoff = .9864539 //

. tab state_name multnomah if percent_urban >= `cutoff' & year == 2020

                      |     Indicator for
                      |   Multnomah County,
                      |        Oregon
           State name |         0          1 |     Total
----------------------+----------------------+----------
           California |         6          0 |         6 
             Colorado |         2          0 |         2 
 District of Columbia |         1          0 |         1 
              Florida |         4          0 |         4 
              Georgia |         5          0 |         5 
             Illinois |         2          0 |         2 
              Indiana |         1          0 |         1 
            Louisiana |         1          0 |         1 
             Maryland |         1          0 |         1 
        Massachusetts |         1          0 |         1 
             Michigan |         1          0 |         1 
            Minnesota |         1          0 |         1 
             Missouri |         1          0 |         1 
               Nevada |         1          0 |         1 
           New Jersey |         6          0 |         6 
             New York |         7          0 |         7 
       North Carolina |         1          0 |         1 
                 Ohio |         1          0 |         1 
               Oregon |         0          1 |         1 
         Pennsylvania |         2          0 |         2 
         Rhode Island |         1          0 |         1 
                Texas |         3          0 |         3 
                 Utah |         2          0 |         2 
             Virginia |         8          0 |         8 
            Wisconsin |         1          0 |         1 
----------------------+----------------------+----------
                Total |        60          1 |        61 

. gen sample_urban98 = percent_urban >= `cutoff' // All counties 

. label var sample_urban98 "Urban counties (top 1%) (excluding AK, CA, HI OR, WA)"

. tab sample_urban98 if year == 2020

      Urban |
   counties |
   (top 1%) |
 (excluding |
 AK, CA, HI |
    OR, WA) |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |      3,018       98.02       98.02
          1 |         61        1.98      100.00
------------+-----------------------------------
      Total |      3,079      100.00

. 
. ** Define Sample of States      
. drop if state_name == "Alaska"
(197 observations deleted)

. drop if state_name == "Hawaii"
(23 observations deleted)

. drop if state_name == "California"
(440 observations deleted)

. drop if state_name == "Washington"
(283 observations deleted)

. drop if state_name == "Oregon" & multnomah == 0
(252 observations deleted)

. 
. ** Define sample 4: Counties in top 95 + covid 
. cluster kmeans cases_cum* deaths_cum* if        ///
>         sample_urban95 == 1 & year == 2020 & covid_merge == 3 , k(5) gen(kmean)
cluster name: _clus_1

. bysort fips: egen kmean_group = mean(kmean)
(19,774 missing values generated)

. 
. ** Pull out kmeans cluster with Multnoma
. gen tmp1 = kmean if sample_urban95 == 1 & year == 2020 & covid_merge == 3 & multnomah == 1 
(20,794 missing values generated)

. egen tmp2 = mean(tmp1)

. gen sample_urban95_covid = sample_urban95 == 1 & kmean_group == tmp2

. drop tmp1 tmp2 

. label var sample_urban95_covid "Urban counties (top 5%) w. Kmean Covid Match  (excluding AK, CA, HI OR, WA)"

. tab sample_urban95_covid if year == 2020

      Urban |
   counties |
(top 5%) w. |
Kmean Covid |
      Match |
 (excluding |
 AK, CA, HI |
    OR, WA) |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |      2,879       98.73       98.73
          1 |         37        1.27      100.00
------------+-----------------------------------
      Total |      2,916      100.00

. 
. ** Show results across clusters 
. preserve 

. 
. ** Keep required variables 
. keep if sample_urban95 == 1 & year == 2020 & covid_merge == 3
(20,665 observations deleted)

. keep kmean cases_cum* deaths_cum* population

. collapse (mean) cases_cum* deaths_cum* [fw = population], by(kmean)

. reshape long cases_cum deaths_cum, i(kmean) j(time)
(j = 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29)

Data                               Wide   ->   Long
-----------------------------------------------------------------------------
Number of observations                5   ->   145         
Number of variables                  59   ->   4           
j variable (29 values)                    ->   time
xij variables:
  cases_cum1 cases_cum2 ... cases_cum29   ->   cases_cum
deaths_cum1 deaths_cum2 ... deaths_cum29  ->   deaths_cum
-----------------------------------------------------------------------------

. xtset kmean time 

Panel variable: kmean (strongly balanced)
 Time variable: time, 1 to 29
         Delta: 1 unit

. xtline cases_cum 

. graph export "${results}fig_kmeans.jpg", as(jpg) name("Graph") quality(100) replace             
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_kmeans.jpg written in JPEG format

. clear  

. 
. ** Restore      
. restore 

. 
. ** Define covariates 
. local covariates "population per_capita_income"

. 
. ** Standardize covariates 
. foreach v of local covariates {
  2.         egen tmp_v = std(`v') 
  3.         replace `v' = tmp_v
  4.         drop tmp_v
  5. } // END COVAR LOOP 
variable population was long now double
(20,795 real changes made)
variable per_capita_income was long now double
(20,795 real changes made)

. 
. ** Define outcome variables (IRS)
. foreach x in "n1" "n2" "agi" {
  2.         
.         gen `x'_rate_irs = 100 * (`x'_net_3 / (`x'_out_1 + `x'_out_2))
  3.         
. } // END OUTCOME TYPE LOOP 
(383 missing values generated)
(383 missing values generated)
(383 missing values generated)

. 
. ** Label var 
. label var n1_rate_irs   "Net domestic migration rate, returns (%)"

. label var n2_rate_irs   "Net domestic migration rate, exemptions (%)"

. label var agi_rate_irs  "Net domestic migration rate, AGI (%)"

. 
. 
. ** Define outcome variables (ACS)
. ** Loop over three datasets (18+ = 1, college degree == 2, no college degree == 3)
. forvalues i = 1/3{
  2.         
.         if `i' == 1 local txt "(18+)"
  3.         else if `i' == 2 local txt "(College)"
  4.         else if `i' == 3 local txt "(No College)"
  5.         
.         gen n1_rate_acs`i' = 100 * (acs`i'_households_net_3 / (acs`i'_households_out_1 + acs`i'_households_out_2))
  6.         gen n2_rate_acs`i' = 100 * (acs`i'_persons_net_3 / (acs`i'_persons_out_1 + acs`i'_persons_out_2))
  7.         gen agi_rate_acs`i' = 100 * (acs`i'_dollars_net_3 / (acs`i'_dollars_out_1 + acs`i'_dollars_out_2))
  8.         
.         label var n1_rate_acs`i'        "Net domestic migration rate `txt', HHs (%)"
  9.         label var n2_rate_acs`i'        "Net domestic migration rate `txt', persons (%)"
 10.         label var agi_rate_acs`i'       "Net domestic migration rate `txt', total income (%)"
 11.         
. } // END DATA LOOP 
(17,815 missing values generated)
(17,815 missing values generated)
(17,815 missing values generated)
(17,815 missing values generated)
(17,815 missing values generated)
(17,815 missing values generated)
(17,815 missing values generated)
(17,815 missing values generated)
(17,815 missing values generated)

. 
. ** Generate triple-difference vars 
. gen n1_rate_acs4 = n1_rate_acs2 - n1_rate_acs3
(17,815 missing values generated)

. gen n2_rate_acs4 = n2_rate_acs2 - n2_rate_acs3
(17,815 missing values generated)

. gen agi_rate_acs4 = agi_rate_acs2 - agi_rate_acs3
(17,815 missing values generated)

. 
. label var n1_rate_acs4          "Net domestic migration rate (College less No College), HHs (%)"

. label var n2_rate_acs4          "Net domestic migration rate (College less No College), persons (%)"

. label var agi_rate_acs4         "Net domestic migration rate (College less No College), total income (%)"

. 
. ** Declare panel
. xtset fips year 

Panel variable: fips (unbalanced)
 Time variable: year, 2016 to 2023
         Delta: 1 unit

. 
. ** Tag unique fips 
. egen unique = tag(fips)

. tab year unique

  Tax year |
     (year |
    before |       tag(fips)
     move) |         0          1 |     Total
-----------+----------------------+----------
      2016 |         0      2,916 |     2,916 
      2017 |     2,916          0 |     2,916 
      2018 |     2,916          0 |     2,916 
      2019 |     2,916          0 |     2,916 
      2020 |     2,916          0 |     2,916 
      2021 |     2,916          0 |     2,916 
      2022 |     2,916          0 |     2,916 
      2023 |       383          0 |       383 
-----------+----------------------+----------
     Total |    17,879      2,916 |    20,795 

. 
. ** Loop over IRS and ACS Samples  
. foreach data of varlist irs_sample acs_period_1 acs_period_2  {
  2. 
.         ** Different sets of outcome variables 
.         if "`data'" == "irs_sample" local out_type "irs"
  3.         else local out_type "acs1 acs2 acs3 acs4"
  4. 
.         ** Loop over Outcome var type 
.         foreach type of local out_type {
  5.                 
.                 ** Labels 
.                 if "`data'" == "irs_sample" local out_txt "irs_16_22"
  6.                 else if "`data'" == "acs_period_1" & "`type'" == "acs1" local out_txt "acs_16_22_all"
  7.                 else if "`data'" == "acs_period_1" & "`type'" == "acs2" local out_txt "acs_16_22_col"
  8.                 else if "`data'" == "acs_period_1" & "`type'" == "acs3" local out_txt "acs_16_22_noc"
  9.                 else if "`data'" == "acs_period_1" & "`type'" == "acs4" local out_txt "acs_16_22_3D"
 10.                 else if "`data'" == "acs_period_2" & "`type'" == "acs1" local out_txt "acs_16_23_all"
 11.                 else if "`data'" == "acs_period_2" & "`type'" == "acs2" local out_txt "acs_16_23_col"
 12.                 else if "`data'" == "acs_period_2" & "`type'" == "acs3" local out_txt "acs_16_23_noc"
 13.                 else if "`data'" == "acs_period_2" & "`type'" == "acs4" local out_txt "acs_16_23_3D"
 14. 
.                 ** Loop over samples 
.                 foreach samp of varlist sample_all sample_urban95 sample_urban95_covid {        
 15.                         
.                         ** Loop over exclusion of 2019-2020 period 
.                         forvalues exl = 1(-1)0 {
 16.                                 
.                                 ** Define sample        
.                                 gen sample = `samp' == 1 & `data' == 1 
 17.                                 if `exl' == 1 replace sample = 0 if year == 2020 
 18.                                 
.                                 ** Clear stored values 
.                                 eststo clear            
 19.                                 
.                                 ** Loop over outcomes 
.                                 foreach out of varlist n1_rate_`type' n2_rate_`type' agi_rate_`type' {
 20.                                 
.                                         ** Store label 
.                                         local label : variable label `out'
 21.                                         
.                                         ** Loop over inclusion of covariates
.                                         forvalues c = 0/1 {
 22.                                         
.                                                 ** Covariates 
.                                                 if `c' == 0 local covars ""
 23.                                                 else if `c' == 1 local covars "covariates(`covariates', projected)"
 24.                                                 
.                                                 ** File Name 
.                                                 if `exl' == 0 local path "${results}fig_`out_txt'_`out'_`c'_`samp'_"
 25.                                                 if `exl' == 1 local path "${results}fig_`out_txt'_`out'_`c'_`samp'_excl2020_"
 26.         
.                                                 
.                                                 ** Run SDID
.                                                 eststo sdid_`out'_`c': sdid `out' fips year Treated     ///
>                                                         if sample == 1,                         ///
>                                                         vce(placebo)                            ///
>                                                         `covar'                                         ///
>                                                         reps(`reps')                            ///
>                                                         graph graph_export("`path'", .pdf) 
 27.                                                         
.                                                 ** Estadd counties  
.                                                 qui summ `out' if year == 2021 & sample == 1
 28.                                                 estadd scalar count = r(N)      
 29.                                                         
.                                                 ** Estadd mean 
.                                                 qui summ `out' if multnomah == 1 & Treated == 0 
 30.                                                 estadd scalar mean = r(mean)
 31. 
.                                                 ** Run event-study 
.                                                 sdid_event `out' fips year Treated                      ///
>                                                         if sample == 1,                                         ///
>                                                         `covar'                                                         ///
>                                                         vce(placebo)                                            ///
>                                                         brep(`reps')                                            ///
>                                                         placebo(all)
 32.                                                 
.                                                 ** Create Figure 
.                                                 
.                                                 ** Store max year 
.                                                 qui summ year if multnomah == 1 & sample == 1
 33.                                                 local max_yr = r(max)
 34.                                                 dis "`max_yr'"
 35.                                                 
.                                                 ** Move results from matrix to data 
.                                                 qui count if multnomah == 1 & sample == 1
 36.                                                 local ct = r(N)
 37.                                                 local ct = `ct' + 1
 38.                                                 matrix list e(H)
 39.                                                 mat res = e(H)[2..`ct',1..5]
 40.                         
.                                                 ** Move Matrix results to data 
.                                                 svmat res
 41.                                                 
.                                                 ** Generate ID variable
.                                                 gen id = `max_yr' - _n + 1 if !missing(res1)
 42.                                                 
.                                                 ** Update labeling for exclusion of 
.                                                 if `exl' == 1 {
 43.                                                         replace id = id - 1 if id <= 2020 
 44.                                                         expand 2 if id == 2019, gen(tag)
 45.                                                         replace id = 2020 if tag == 1 
 46.                                                         replace res1 = . if tag == 1 
 47.                                                         replace res3 = . if tag == 1 
 48.                                                         replace res4 = . if tag == 1 
 49.                                                 }
 50.                                                 label var id "Year (destination)"
 51.                                                 
.                                                 ** Sort 
.                                                 sort id
 52.                                                 
.                                                 ** Plot
.                                                 twoway  (rcap res3 res4 id, lc(gs10) fc(gs11%50))       ///
>                                                                 (scatter res1 id, mc(black)),                           ///             
>                                                         legend(off) ytitle("`label'")                                   ///
>                                                         yline(0, lc(red) lp(-))                                                 ///
>                                                         xline(2020.5, lc(black) lp(solid))                              ///
>                                                         ylabel(-10(2.5)10, format(%9.1f))
 53. 
.                                                 if `exl' == 0 local path "${results}fig_`out_txt'_`out'_`c'_`samp'_eventstudy.jpg"
 54.                                                 if `exl' == 1 local path "${results}fig_`out_txt'_`out'_`c'_`samp'_excl2020_eventstudy.jpg"
 55.         
.                                                         
.                                                 graph export "`path'",  ///
>                                                         as(jpg) name("Graph") quality(100) replace              
 56. 
.                                                 ** Clean up 
.                                                 drop res1 res2 res3 res4 res5 id 
 57.                                                 drop if tag == 1
 58.                                                 drop tag 
 59. 
.                                                 ** Update Count
.                                                 local ct = `ct' + 1 
 60.                                                                                 
.                                         } // END COVAR LOOP 
 61.                                 
.                                 } // END OUTCOME LOOP 
 62.                                 
.                                 ** Determine name 
.                                 if `exl' == 0 local path "${results}tab_sdid_`out_txt'_`samp'.tex"
 63.                                 if `exl' == 1 local path "${results}tab_sdid_`out_txt'_`samp'_excl2020.tex"
 64. 
.                                 ** Table of results 
.                                 esttab  sdid_n1_rate_`type'_0 sdid_n1_rate_`type'_1                     ///
>                                                 sdid_n2_rate_`type'_0 sdid_n2_rate_`type'_1                     ///
>                                                 sdid_agi_rate_`type'_0 sdid_agi_rate_`type'_1 using     ///
>                                 "`path'",                                                                               ///
>                                 starlevel("*" 0.10 "**" 0.05 "***" 0.01)                ///
>                                 b(%-9.3f) se(%-9.3f) replace                                    ///
>                                 mgroups("Returns" "Exemptions" "AGI",                   ///
>                                         pattern(1 0 1 0 1 0) )                                          ///
>                                 mtitle( "No Covariates" "Covariates"                    ///
>                                                 "No Covariates" "Covariates"                    ///
>                                                 "No Covariates" "Covariates")                   ///
>                                 stats(count mean,                                                               ///
>                                         fmt(%9.0fc %9.3fc)                                                      ///
>                                         labels("Number of Counties" "Pre-treatment mean"))
 65.                                 
.                                 ** Drop sample var 
.                                 drop sample 
 66.                                 
.                         } // END EXCLUSION LOOP 
 67.                         
.                 } // END SAMPLE LOOP 
 68.         
.         } // END OUT TYPE 
 69.         
. } // END DATA LOOP 
(2,916 real changes made)
Placebo replications (100). This may take some time.
----+--- 1 ---+--- 2 ---+--- 3 ---+--- 4 ---+--- 5
..................................................     50
..................................................     100


Synthetic Difference-in-Differences Estimator

-----------------------------------------------------------------------------
 n1_rate_irs |     ATT     Std. Err.     t      P>|t|    [95% Conf. Interval]
-------------+---------------------------------------------------------------
     Treated |  -1.92529    0.99569    -1.93    0.053    -3.87680     0.02623
-----------------------------------------------------------------------------
95% CIs and p-values are based on large-sample approximations.
Refer to Arkhangelsky et al., (2021) for theoretical derivations.
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_irs_16_22_n1_rate_irs_0_sample_all_excl2020_trends2021.pdf saved as PDF format

added scalar:
              e(count) =  2916

added scalar:
               e(mean) =  .1434552
Synthetic Difference-in-differences

Boostrap replications (100), placebo mode.
|0% ----------------------------------------- 100%|
|.................................................|


             |  Estimate         SE      LB CI      UB CI  Switchers 
-------------+------------------------------------------------------
         ATT | -1.925286   .9637959  -3.814326  -.0362464          1 
    Effect_1 | -2.430048   1.347324  -5.070804   .2107082          1 
    Effect_2 | -1.420525   .9953041  -3.371321   .5302712          1 
   Placebo_1 |  .0018158   .0211728  -.0396829   .0433146          1 
   Placebo_2 | -.0017198   .0850898  -.1684958   .1650562          1 
   Placebo_3 | -.0060693   .0118533  -.0293018   .0171632          1 
   Placebo_4 |  .0088023   .0704145  -.1292102   .1468147          1 
2022

e(H)[7,5]
             Estimate          SE       LB CI       UB CI   Switchers
      ATT  -1.9252863   .96379588  -3.8143262  -.03624635           1
 Effect_1  -2.4300477   1.3473245  -5.0708037   .21070824           1
 Effect_2  -1.4205248    .9953041  -3.3713208   .53027123           1
Placebo_1   .00181583   .02117285  -.03968294   .04331461           1
Placebo_2  -.00171981   .08508981  -.16849583   .16505621           1
Placebo_3  -.00606931   .01185332  -.02930182    .0171632           1
Placebo_4   .00880226   .07041452  -.12921019   .14681472           1
(20,789 missing values generated)
(4 real changes made)
(1 observation created)
(1 real change made)
(1 real change made, 1 to missing)
(1 real change made, 1 to missing)
(1 real change made, 1 to missing)
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_irs_16_22_n1_rate_irs_0_sample_all_excl2020_eventstudy.jpg written in JPEG format
(1 observation deleted)
Placebo replications (100). This may take some time.
----+--- 1 ---+--- 2 ---+--- 3 ---+--- 4 ---+--- 5
..................................................     50
..................................................     100


Synthetic Difference-in-Differences Estimator

-----------------------------------------------------------------------------
 n1_rate_irs |     ATT     Std. Err.     t      P>|t|    [95% Conf. Interval]
-------------+---------------------------------------------------------------
     Treated |  -1.92529    1.74469    -1.10    0.270    -5.34482     1.49425
-----------------------------------------------------------------------------
95% CIs and p-values are based on large-sample approximations.
Refer to Arkhangelsky et al., (2021) for theoretical derivations.
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_irs_16_22_n1_rate_irs_1_sample_all_excl2020_trends2021.pdf saved as PDF format

added scalar:
              e(count) =  2916

added scalar:
               e(mean) =  .1434552
Synthetic Difference-in-differences

Boostrap replications (100), placebo mode.
|0% ----------------------------------------- 100%|
|.................................................|


             |  Estimate         SE      LB CI      UB CI  Switchers 
-------------+------------------------------------------------------
         ATT | -1.925286   .8889131  -3.667556  -.1830166          1 
    Effect_1 | -2.430048    1.13978  -4.664017  -.1960781          1 
    Effect_2 | -1.420525   1.147702  -3.670021   .8289715          1 
   Placebo_1 |  .0018158   .0080456  -.0139535   .0175851          1 
   Placebo_2 | -.0017198   .0226089  -.0460332   .0425936          1 
   Placebo_3 | -.0060693   .0209737  -.0471777   .0350391          1 
   Placebo_4 |  .0088023   .0198472  -.0300983   .0477028          1 
2022

e(H)[7,5]
             Estimate          SE       LB CI       UB CI   Switchers
      ATT  -1.9252863   .88891308  -3.6675559  -.18301663           1
 Effect_1  -2.4300477   1.1397804  -4.6640174  -.19607807           1
 Effect_2  -1.4205248   1.1477022  -3.6700211   .82897152           1
Placebo_1   .00181583   .00804555  -.01395345   .01758512           1
Placebo_2  -.00171981   .02260886  -.04603317   .04259356           1
Placebo_3  -.00606931   .02097368  -.04717772   .03503909           1
Placebo_4   .00880226   .01984723   -.0300983   .04770283           1
(20,789 missing values generated)
(4 real changes made)
(1 observation created)
(1 real change made)
(1 real change made, 1 to missing)
(1 real change made, 1 to missing)
(1 real change made, 1 to missing)
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_irs_16_22_n1_rate_irs_1_sample_all_excl2020_eventstudy.jpg written in JPEG format
(1 observation deleted)
Placebo replications (100). This may take some time.
----+--- 1 ---+--- 2 ---+--- 3 ---+--- 4 ---+--- 5
..................................................     50
..................................................     100


Synthetic Difference-in-Differences Estimator

-----------------------------------------------------------------------------
 n2_rate_irs |     ATT     Std. Err.     t      P>|t|    [95% Conf. Interval]
-------------+---------------------------------------------------------------
     Treated |  -1.82184    0.89879    -2.03    0.043    -3.58343    -0.06025
-----------------------------------------------------------------------------
95% CIs and p-values are based on large-sample approximations.
Refer to Arkhangelsky et al., (2021) for theoretical derivations.
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_irs_16_22_n2_rate_irs_0_sample_all_excl2020_trends2021.pdf saved as PDF format

added scalar:
              e(count) =  2916

added scalar:
               e(mean) =  -.73591077
Synthetic Difference-in-differences

Boostrap replications (100), placebo mode.
|0% ----------------------------------------- 100%|
|.................................................|


             |  Estimate         SE      LB CI      UB CI  Switchers 
-------------+------------------------------------------------------
         ATT | -1.821837    .786762   -3.36389  -.2797833          1 
    Effect_1 | -2.268932   1.027699  -4.283223  -.2546418          1 
    Effect_2 | -1.374741   .9797537  -3.295058   .5455761          1 
   Placebo_1 |  .0027779    .047492  -.0903065   .0958623          1 
   Placebo_2 | -.0013103   .0929837  -.1835584   .1809377          1 
   Placebo_3 | -.0077218   .0321776  -.0707899   .0553462          1 
   Placebo_4 |  .0067843   .0336976  -.0592629   .0728315          1 
2022

e(H)[7,5]
             Estimate          SE       LB CI       UB CI   Switchers
      ATT  -1.8218368   .78676198  -3.3638903  -.27978329           1
 Effect_1  -2.2689324   1.0276993   -4.283223  -.25464184           1
 Effect_2  -1.3747411    .9797537  -3.2950584   .54557611           1
Placebo_1    .0027779   .04749203  -.09030648   .09586228           1
Placebo_2  -.00131033    .0929837  -.18355838   .18093772           1
Placebo_3  -.00772184   .03217757  -.07078989    .0553462           1
Placebo_4   .00678431   .03369757  -.05926292   .07283154           1
(20,789 missing values generated)
(4 real changes made)
(1 observation created)
(1 real change made)
(1 real change made, 1 to missing)
(1 real change made, 1 to missing)
(1 real change made, 1 to missing)
(file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_irs_16_22_n2_rate_irs_0_sample_all_excl2020_eventstudy.jpg not found)
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_irs_16_22_n2_rate_irs_0_sample_all_excl2020_eventstudy.jpg written in JPEG format
(1 observation deleted)
Placebo replications (100). This may take some time.
----+--- 1 ---+--- 2 ---+--- 3 ---+--- 4 ---+--- 5
..................................................     50
..................................................     100


Synthetic Difference-in-Differences Estimator

-----------------------------------------------------------------------------
 n2_rate_irs |     ATT     Std. Err.     t      P>|t|    [95% Conf. Interval]
-------------+---------------------------------------------------------------
     Treated |  -1.82184    1.26583    -1.44    0.150    -4.30282     0.65914
-----------------------------------------------------------------------------
95% CIs and p-values are based on large-sample approximations.
Refer to Arkhangelsky et al., (2021) for theoretical derivations.
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_irs_16_22_n2_rate_irs_1_sample_all_excl2020_trends2021.pdf saved as PDF format

added scalar:
              e(count) =  2916

added scalar:
               e(mean) =  -.73591077
Synthetic Difference-in-differences

Boostrap replications (100), placebo mode.
|0% ----------------------------------------- 100%|
|.................................................|


             |  Estimate         SE      LB CI      UB CI  Switchers 
-------------+------------------------------------------------------
         ATT | -1.821837   1.083291  -3.945088   .3014141          1 
    Effect_1 | -2.268932   1.563921  -5.334217   .7963519          1 
    Effect_2 | -1.374741   .9784926  -3.292587   .5431043          1 
   Placebo_1 |  .0027779   .1759828  -.3421484   .3477042          1 
   Placebo_2 | -.0013103   .4292424  -.8426254   .8400047          1 
   Placebo_3 | -.0077218   .1912117  -.3824969   .3670532          1 
   Placebo_4 |  .0067843   .2344327  -.4527037   .4662724          1 
2022

e(H)[7,5]
             Estimate          SE       LB CI       UB CI   Switchers
      ATT  -1.8218368   1.0832913  -3.9450876   .30141408           1
 Effect_1  -2.2689324   1.5639206  -5.3342167   .79635187           1
 Effect_2  -1.3747411   .97849259  -3.2925866   .54310432           1
Placebo_1    .0027779   .17598283  -.34214844   .34770424           1
Placebo_2  -.00131033   .42924238  -.84262539   .84000473           1
Placebo_3  -.00772184   .19121175  -.38249687   .36705318           1
Placebo_4   .00678431   .23443268  -.45270374   .46627237           1
(20,789 missing values generated)
(4 real changes made)
(1 observation created)
(1 real change made)
(1 real change made, 1 to missing)
(1 real change made, 1 to missing)
(1 real change made, 1 to missing)
(file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_irs_16_22_n2_rate_irs_1_sample_all_excl2020_eventstudy.jpg not found)
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_irs_16_22_n2_rate_irs_1_sample_all_excl2020_eventstudy.jpg written in JPEG format
(1 observation deleted)
Placebo replications (100). This may take some time.
----+--- 1 ---+--- 2 ---+--- 3 ---+--- 4 ---+--- 5
..................................................     50
..................................................     100


Synthetic Difference-in-Differences Estimator

-----------------------------------------------------------------------------
agi_rate_irs |     ATT     Std. Err.     t      P>|t|    [95% Conf. Interval]
-------------+---------------------------------------------------------------
     Treated |  -3.74944    1.18876    -3.15    0.002    -6.07936    -1.41952
-----------------------------------------------------------------------------
95% CIs and p-values are based on large-sample approximations.
Refer to Arkhangelsky et al., (2021) for theoretical derivations.
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_irs_16_22_agi_rate_irs_0_sample_all_excl2020_trends2021.pdf saved as PDF format

added scalar:
              e(count) =  2916

added scalar:
               e(mean) =  -.29483641
Synthetic Difference-in-differences

Boostrap replications (100), placebo mode.
|0% ----------------------------------------- 100%|
|.................................................|


             |  Estimate         SE      LB CI      UB CI  Switchers 
-------------+------------------------------------------------------
         ATT | -3.749438   1.252801  -6.204927  -1.293948          1 
    Effect_1 | -3.942519   1.838343  -7.545671  -.3393663          1 
    Effect_2 | -3.556357   1.351601  -6.205494  -.9072195          1 
   Placebo_1 |  .0037643   .1078305  -.2075834    .215112          1 
   Placebo_2 | -.0011156   .3625741  -.7117608   .7095297          1 
   Placebo_3 | -.0030111   .1810933  -.3579538   .3519317          1 
   Placebo_4 |  .0023952   .1642799  -.3195935   .3243839          1 
2022

e(H)[7,5]
             Estimate          SE       LB CI       UB CI   Switchers
      ATT  -3.7494376   1.2528008  -6.2049272   -1.293948           1
 Effect_1  -3.9425187   1.8383431  -7.5456712  -.33936629           1
 Effect_2  -3.5563565   1.3516005  -6.2054936  -.90721954           1
Placebo_1   .00376427   .10783047  -.20758344   .21511199           1
Placebo_2  -.00111556    .3625741   -.7117608   .70952969           1
Placebo_3  -.00301105   .18109325  -.35795383   .35193173           1
Placebo_4   .00239518   .16427994   -.3195935   .32438385           1
(20,789 missing values generated)
(4 real changes made)
(1 observation created)
(1 real change made)
(1 real change made, 1 to missing)
(1 real change made, 1 to missing)
(1 real change made, 1 to missing)
(file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_irs_16_22_agi_rate_irs_0_sample_all_excl2020_eventstudy.jpg not found)
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_irs_16_22_agi_rate_irs_0_sample_all_excl2020_eventstudy.jpg written in JPEG format
(1 observation deleted)
Placebo replications (100). This may take some time.
----+--- 1 ---+--- 2 ---+--- 3 ---+--- 4 ---+--- 5
..................................................     50
..................................................     100


Synthetic Difference-in-Differences Estimator

-----------------------------------------------------------------------------
agi_rate_irs |     ATT     Std. Err.     t      P>|t|    [95% Conf. Interval]
-------------+---------------------------------------------------------------
     Treated |  -3.74944    1.41188    -2.66    0.008    -6.51668    -0.98220
-----------------------------------------------------------------------------
95% CIs and p-values are based on large-sample approximations.
Refer to Arkhangelsky et al., (2021) for theoretical derivations.
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_irs_16_22_agi_rate_irs_1_sample_all_excl2020_trends2021.pdf saved as PDF format

added scalar:
              e(count) =  2916

added scalar:
               e(mean) =  -.29483641
Synthetic Difference-in-differences

Boostrap replications (100), placebo mode.
|0% ----------------------------------------- 100%|
|.................................................|


             |  Estimate         SE      LB CI      UB CI  Switchers 
-------------+------------------------------------------------------
         ATT | -3.749438   1.991051  -7.651897   .1530218          1 
    Effect_1 | -3.942519   2.312959  -8.475918   .5908802          1 
    Effect_2 | -3.556357   2.394639  -8.249849   1.137135          1 
   Placebo_1 |  .0037643   .2487215  -.4837299   .4912584          1 
   Placebo_2 | -.0011156   .3347926   -.657309   .6550779          1 
   Placebo_3 | -.0030111   .3883659  -.7642083   .7581862          1 
   Placebo_4 |  .0023952   1.363499  -2.670063   2.674853          1 
2022

e(H)[7,5]
             Estimate          SE       LB CI       UB CI   Switchers
      ATT  -3.7494376   1.9910507  -7.6518971   .15302179           1
 Effect_1  -3.9425187   2.3129587  -8.4759177   .59088021           1
 Effect_2  -3.5563565   2.3946388  -8.2498486   1.1371355           1
Placebo_1   .00376427   .24872151  -.48372989   .49125844           1
Placebo_2  -.00111556   .33479256  -.65730898   .65507787           1
Placebo_3  -.00301105   .38836594   -.7642083    .7581862           1
Placebo_4   .00239518   1.3634989  -2.6700627    2.674853           1
(20,789 missing values generated)
(4 real changes made)
(1 observation created)
(1 real change made)
(1 real change made, 1 to missing)
(1 real change made, 1 to missing)
(1 real change made, 1 to missing)
(file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_irs_16_22_agi_rate_irs_1_sample_all_excl2020_eventstudy.jpg not found)
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_irs_16_22_agi_rate_irs_1_sample_all_excl2020_eventstudy.jpg written in JPEG format
(1 observation deleted)
(file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/tab_sdid_irs_16_22_sample_all_excl2020.tex not found)
(output written to C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/tab_sdid_irs_16_22_sample_all_excl2020.tex)
Placebo replications (100). This may take some time.
----+--- 1 ---+--- 2 ---+--- 3 ---+--- 4 ---+--- 5
..................................................     50
..................................................     100


Synthetic Difference-in-Differences Estimator

-----------------------------------------------------------------------------
 n1_rate_irs |     ATT     Std. Err.     t      P>|t|    [95% Conf. Interval]
-------------+---------------------------------------------------------------
     Treated |  -1.42893    0.85057    -1.68    0.093    -3.09602     0.23817
-----------------------------------------------------------------------------
95% CIs and p-values are based on large-sample approximations.
Refer to Arkhangelsky et al., (2021) for theoretical derivations.
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_irs_16_22_n1_rate_irs_0_sample_all_trends2021.pdf saved as PDF format

added scalar:
              e(count) =  2916

added scalar:
               e(mean) =  .1434552
Synthetic Difference-in-differences

Boostrap replications (100), placebo mode.
|0% ----------------------------------------- 100%|
|.................................................|


             |  Estimate         SE      LB CI      UB CI  Switchers 
-------------+------------------------------------------------------
         ATT | -1.428925   1.088313  -3.562018   .7041677          1 
    Effect_1 |  -1.83865   1.298789  -4.384276   .7069761          1 
    Effect_2 |   -1.0192   1.194796     -3.361   1.322599          1 
   Placebo_1 | -.0129703   .2233525  -.4507412   .4248005          1 
   Placebo_2 |  .0139657   .1794302  -.3377175   .3656488          1 
   Placebo_3 |  .0045226   .3205785  -.6238113   .6328565          1 
   Placebo_4 |  -.004614   .4400359  -.8670843   .8578563          1 
   Placebo_5 |  .0181625   .3549618  -.6775627   .7138876          1 
2022

e(H)[8,5]
             Estimate          SE       LB CI       UB CI   Switchers
      ATT  -1.4289251   1.0883127  -3.5620179   .70416772           1
 Effect_1  -1.8386498   1.2987887  -4.3842757   .70697611           1
 Effect_2  -1.0192004   1.1947957  -3.3609999   1.3225991           1
Placebo_1  -.01297033   .22335248  -.45074118   .42480052           1
Placebo_2   .01396566   .17943018  -.33771749   .36564881           1
Placebo_3    .0045226   .32057853  -.62381132   .63285652           1
Placebo_4  -.00461397   .44003588  -.86708429   .85785634           1
Placebo_5   .01816248    .3549618  -.67756265   .71388762           1
(20,788 missing values generated)
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_irs_16_22_n1_rate_irs_0_sample_all_eventstudy.jpg written in JPEG format
tag not found
r(111);

end of do-file

r(111);

. do "C:\Users\ji252\AppData\Local\Temp\STD4490_00000c.tmp"

. /*******************************************************************************
> File Name:              02_sdid_analysis.do
> Creator:                John Iselin
> Date Update:    November 26, 2025
> 
> Called by: 00_multnomah.do
> 
> Purpose: Preform synthetic difference-in-difference estiamtion. 
> 
> Authors: John Iselin 
> 
> For more information, contact john.iselin@yale.edu
> 
> *******************************************************************************/
. 
. 
. ** Start log file 
. capture log close log_02

. log using "${logs}02_log_sdid_${date}", replace text name(log_02)
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
      name:  log_02
       log:  C:/Users/ji252/Documents/GitHub/multnomah-county-tax/code/logs/02_log_sdid_2026-01-05.log
  log type:  text
 opened on:   6 Jan 2026, 13:31:10

. 
. ** Parameters 
. local reps = 100

. 
. ** Load data 
. use "${data}working/irs_county_gross", replace 

. 
. ** Keep required variables 
. keep year fips state* county* *_net_3 *_out_1 *_out_2 

. order year fips state* county* 

. 
. ** Merge with ACS Data 
. merge 1:1 year fips using "${data}working/acs_county_gross_18plus", gen(merge_acs_1)
(variable fips was float, now double to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        20,278
        from master                    18,963  (merge_acs_1==1)
        from using                      1,315  (merge_acs_1==2)

    Matched                             3,017  (merge_acs_1==3)
    -----------------------------------------

. 
. ** Keep require variables 
. keep year fips state* county* *_net_3 *_out_1 *_out_2 merge_acs_*

. 
. ** Label acs samples 
. rename persons_* acs1_persons_* 

. rename households_* acs1_households_*

. rename dollars_* acs1_dollars_*

. 
. ** Merge with ACS Data 
. merge 1:1 year fips using "${data}working/acs_county_gross_college", gen(merge_acs_2)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        18,963
        from master                    18,963  (merge_acs_2==1)
        from using                          0  (merge_acs_2==2)

    Matched                             4,332  (merge_acs_2==3)
    -----------------------------------------

. 
. ** Keep require variables 
. keep year fips state* county* *_net_3 *_out_1 *_out_2 merge_acs_*

. 
. ** Label acs samples 
. rename persons_* acs2_persons_*

. rename households_* acs2_households_*

. rename dollars_* acs2_dollars_*

. 
. ** Merge with ACS Data 
. merge 1:1 year fips using "${data}working/acs_county_gross_nocollege", gen(merge_acs_3)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        18,963
        from master                    18,963  (merge_acs_3==1)
        from using                          0  (merge_acs_3==2)

    Matched                             4,332  (merge_acs_3==3)
    -----------------------------------------

. 
. ** Keep require variables 
. keep year fips state* county* *_net_3 *_out_1 *_out_2 merge_acs_*

. 
. ** Label acs samples 
. rename persons_* acs3_persons_*

. rename households_* acs3_households_*

. rename dollars_* acs3_dollars_*

. 
. ** TODO add High and Low Education Samples 
. 
. ** Drop "other counties"
. drop if county_fips == 0
(434 observations deleted)

. drop if year == 2015 
(430 observations deleted)

. 
. ** Merge with Demographic data 
. merge m:1 fips using "${data}working/demographics_2020",        ///
>         gen(demo_merge) keep(master match)

    Result                      Number of obs
    -----------------------------------------
    Not matched                            20
        from master                        20  (demo_merge==1)
        from using                          0  (demo_merge==2)

    Matched                            22,411  (demo_merge==3)
    -----------------------------------------

.         
. ** Show match 
. tab state_name demo_merge, m

                     | Matching result from
                     |         merge
          State name | Master on  Matched ( |     Total
---------------------+----------------------+----------
                     |        14          0 |        14 
             Alabama |         0        474 |       474 
              Alaska |         6        197 |       203 
             Arizona |         0        109 |       109 
            Arkansas |         0        528 |       528 
          California |         0        440 |       440 
            Colorado |         0        450 |       450 
         Connecticut |         0         48 |        48 
            Delaware |         0         24 |        24 
District of Columbia |         0          8 |         8 
             Florida |         0        502 |       502 
             Georgia |         0      1,135 |     1,135 
              Hawaii |         0         32 |        32 
               Idaho |         0        309 |       309 
            Illinois |         0        727 |       727 
             Indiana |         0        660 |       660 
                Iowa |         0        698 |       698 
              Kansas |         0        738 |       738 
            Kentucky |         0        847 |       847 
           Louisiana |         0        455 |       455 
               Maine |         0        114 |       114 
            Maryland |         0        179 |       179 
       Massachusetts |         0        107 |       107 
            Michigan |         0        597 |       597 
           Minnesota |         0        617 |       617 
         Mississippi |         0        577 |       577 
            Missouri |         0        812 |       812 
             Montana |         0        393 |       393 
            Nebraska |         0        654 |       654 
              Nevada |         0        121 |       121 
       New Hampshire |         0         70 |        70 
          New Jersey |         0        164 |       164 
          New Mexico |         0        233 |       233 
            New York |         0        455 |       455 
      North Carolina |         0        718 |       718 
        North Dakota |         0        372 |       372 
                Ohio |         0        637 |       637 
            Oklahoma |         0        543 |       543 
              Oregon |         0        260 |       260 
        Pennsylvania |         0        489 |       489 
        Rhode Island |         0         38 |        38 
      South Carolina |         0        330 |       330 
        South Dakota |         0        462 |       462 
           Tennessee |         0        676 |       676 
               Texas |         0      1,816 |     1,816 
                Utah |         0        208 |       208 
             Vermont |         0         99 |        99 
            Virginia |         0        941 |       941 
          Washington |         0        283 |       283 
       West Virginia |         0        386 |       386 
           Wisconsin |         0        517 |       517 
             Wyoming |         0        162 |       162 
---------------------+----------------------+----------
               Total |        20     22,411 |    22,431 

. tab year demo_merge, m

  Tax year |
     (year | Matching result from
    before |         merge
     move) | Master on  Matched ( |     Total
-----------+----------------------+----------
      2016 |         0      3,140 |     3,140 
      2017 |         0      3,140 |     3,140 
      2018 |         0      3,140 |     3,140 
      2019 |         0      3,140 |     3,140 
      2020 |         2      3,140 |     3,142 
      2021 |         2      3,141 |     3,143 
      2022 |         9      3,133 |     3,142 
      2023 |         7        437 |       444 
-----------+----------------------+----------
     Total |        20     22,411 |    22,431 

. 
. ** Keep if matched 
. keep if demo_merge == 3
(20 observations deleted)

. drop demo_merge

. 
. ** Rename 
. rename population pop_census

.         
. ** Merge with Demographic data 
. merge m:1 year fips using "${data}working/bea_economics",       ///
>         gen(econ_merge) keep(master match) 

    Result                      Number of obs
    -----------------------------------------
    Not matched                           366
        from master                       366  (econ_merge==1)
        from using                          0  (econ_merge==2)

    Matched                            22,045  (econ_merge==3)
    -----------------------------------------

.         
. ** Show match 
. tab state_name econ_merge, m

                     | Matching result from
                     |         merge
          State name | Master on  Matched ( |     Total
---------------------+----------------------+----------
             Alabama |         0        474 |       474 
              Alaska |         0        197 |       197 
             Arizona |         0        109 |       109 
            Arkansas |         0        528 |       528 
          California |         0        440 |       440 
            Colorado |         0        450 |       450 
         Connecticut |         0         48 |        48 
            Delaware |         0         24 |        24 
District of Columbia |         0          8 |         8 
             Florida |         0        502 |       502 
             Georgia |         0      1,135 |     1,135 
              Hawaii |         9         23 |        32 
               Idaho |         0        309 |       309 
            Illinois |         0        727 |       727 
             Indiana |         0        660 |       660 
                Iowa |         0        698 |       698 
              Kansas |         0        738 |       738 
            Kentucky |         0        847 |       847 
           Louisiana |         0        455 |       455 
               Maine |         0        114 |       114 
            Maryland |         0        179 |       179 
       Massachusetts |         0        107 |       107 
            Michigan |         0        597 |       597 
           Minnesota |         0        617 |       617 
         Mississippi |         0        577 |       577 
            Missouri |         0        812 |       812 
             Montana |         0        393 |       393 
            Nebraska |         0        654 |       654 
              Nevada |         0        121 |       121 
       New Hampshire |         0         70 |        70 
          New Jersey |         0        164 |       164 
          New Mexico |         0        233 |       233 
            New York |         0        455 |       455 
      North Carolina |         0        718 |       718 
        North Dakota |         0        372 |       372 
                Ohio |         0        637 |       637 
            Oklahoma |         0        543 |       543 
              Oregon |         0        260 |       260 
        Pennsylvania |         0        489 |       489 
        Rhode Island |         0         38 |        38 
      South Carolina |         0        330 |       330 
        South Dakota |         0        462 |       462 
           Tennessee |         0        676 |       676 
               Texas |         0      1,816 |     1,816 
                Utah |         0        208 |       208 
             Vermont |         0         99 |        99 
            Virginia |       357        584 |       941 
          Washington |         0        283 |       283 
       West Virginia |         0        386 |       386 
           Wisconsin |         0        517 |       517 
             Wyoming |         0        162 |       162 
---------------------+----------------------+----------
               Total |       366     22,045 |    22,411 

. tab year econ_merge, m

  Tax year |
     (year | Matching result from
    before |         merge
     move) | Master on  Matched ( |     Total
-----------+----------------------+----------
      2016 |        52      3,088 |     3,140 
      2017 |        52      3,088 |     3,140 
      2018 |        52      3,088 |     3,140 
      2019 |        52      3,088 |     3,140 
      2020 |        52      3,088 |     3,140 
      2021 |        53      3,088 |     3,141 
      2022 |        53      3,080 |     3,133 
      2023 |         0        437 |       437 
-----------+----------------------+----------
     Total |       366     22,045 |    22,411 

. 
. ** Keep if matched 
. keep if econ_merge == 3
(366 observations deleted)

. drop econ_merge

. 
. ** Merge with COVID-19 Data
. merge m:1 fips using ${data}working/covid_cleaned_wide.dta,     ///
>         gen(covid_merge) keep(master match )
(variable state_name was str20, now str24 to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                            68
        from master                        68  (covid_merge==1)
        from using                          0  (covid_merge==2)

    Matched                            21,977  (covid_merge==3)
    -----------------------------------------

. 
. ** Show match 
. tab state_name covid_merge, m

                      | Matching result from
                      |         merge
           State name | Master on  Matched ( |     Total
----------------------+----------------------+----------
              Alabama |         0        474 |       474 
               Alaska |        28        169 |       197 
              Arizona |         0        109 |       109 
             Arkansas |         0        528 |       528 
           California |         0        440 |       440 
             Colorado |         0        450 |       450 
          Connecticut |         0         48 |        48 
             Delaware |         0         24 |        24 
 District of Columbia |         0          8 |         8 
              Florida |         0        502 |       502 
              Georgia |         0      1,135 |     1,135 
               Hawaii |         0         23 |        23 
                Idaho |         0        309 |       309 
             Illinois |         0        727 |       727 
              Indiana |         0        660 |       660 
                 Iowa |         0        698 |       698 
               Kansas |         0        738 |       738 
             Kentucky |         0        847 |       847 
            Louisiana |         0        455 |       455 
                Maine |         0        114 |       114 
             Maryland |         0        179 |       179 
        Massachusetts |         0        107 |       107 
             Michigan |         0        597 |       597 
            Minnesota |         0        617 |       617 
          Mississippi |         0        577 |       577 
             Missouri |         0        812 |       812 
              Montana |         0        393 |       393 
             Nebraska |         0        654 |       654 
               Nevada |         0        121 |       121 
        New Hampshire |         0         70 |        70 
           New Jersey |         0        164 |       164 
           New Mexico |         0        233 |       233 
             New York |        40        415 |       455 
       North Carolina |         0        718 |       718 
         North Dakota |         0        372 |       372 
                 Ohio |         0        637 |       637 
             Oklahoma |         0        543 |       543 
               Oregon |         0        260 |       260 
         Pennsylvania |         0        489 |       489 
         Rhode Island |         0         38 |        38 
       South Carolina |         0        330 |       330 
         South Dakota |         0        462 |       462 
            Tennessee |         0        676 |       676 
                Texas |         0      1,816 |     1,816 
                 Utah |         0        208 |       208 
              Vermont |         0         99 |        99 
             Virginia |         0        584 |       584 
           Washington |         0        283 |       283 
        West Virginia |         0        386 |       386 
            Wisconsin |         0        517 |       517 
              Wyoming |         0        162 |       162 
----------------------+----------------------+----------
                Total |        68     21,977 |    22,045 

. tab year covid_merge, m

  Tax year |
     (year | Matching result from
    before |         merge
     move) | Master on  Matched ( |     Total
-----------+----------------------+----------
      2016 |         9      3,079 |     3,088 
      2017 |         9      3,079 |     3,088 
      2018 |         9      3,079 |     3,088 
      2019 |         9      3,079 |     3,088 
      2020 |         9      3,079 |     3,088 
      2021 |         9      3,079 |     3,088 
      2022 |         9      3,071 |     3,080 
      2023 |         5        432 |       437 
-----------+----------------------+----------
     Total |        68     21,977 |    22,045 

. 
. ** Organize data 
. order year fips state_* county_* 

. sort fips year  

. isid fips year 

. 
. ** Keep only sample with non-missing base populations
. tab county_name year if (missing(n1_out_1 ) | n1_out_1 == 0 ) & year <= 2022

                      |  Tax year
                      |   (year
                      |   before
                      |   move)
          County name |      2017 |     Total
----------------------+-----------+----------
        Loving County |         1 |         1 
----------------------+-----------+----------
                Total |         1 |         1 

. drop if (missing(n1_out_1 ) | n1_out_1 == 0 ) & year <= 2022
(1 observation deleted)

. 
. ** Keep only sample with observations in each year 
. bysort fips: gen ct = _N

. tab county_name state_name if ct < 7 

                      |      State name
          County name | Connect..      Texas |     Total
----------------------+----------------------+----------
     Fairfield County |         6          0 |         6 
      Hartford County |         6          0 |         6 
    Litchfield County |         6          0 |         6 
        Loving County |         0          6 |         6 
     Middlesex County |         6          0 |         6 
     New Haven County |         6          0 |         6 
    New London County |         6          0 |         6 
       Tolland County |         6          0 |         6 
       Windham County |         6          0 |         6 
----------------------+----------------------+----------
                Total |        48          6 |        54 

. drop if ct < 7 
(54 observations deleted)

. drop ct 

. 
. ** Generate IRS sample 
. gen irs_sample = inrange(year, 2016, 2022)

. 
. ** Generate ACS Period Indicators 
. gen acs_period_1 = merge_acs_1 != 1 & inrange(year, 2016, 2022)

. gen acs_period_2 = merge_acs_1 != 1 

. 
. ** Make sure we have a balanced panel of ACS counties 
. gen tmp = merge_acs_1 != 1 

. bysort fips: egen ct_tmp = total(tmp)

. replace acs_period_1 = 0 if ct_tmp != 8 
(246 real changes made)

. replace acs_period_2 = 0 if ct_tmp != 8 
(294 real changes made)

. drop tmp ct_tmp

. 
. tab year acs_period_1 

  Tax year |
     (year |
    before |     acs_period_1
     move) |         0          1 |     Total
-----------+----------------------+----------
      2016 |     2,690        389 |     3,079 
      2017 |     2,690        389 |     3,079 
      2018 |     2,690        389 |     3,079 
      2019 |     2,690        389 |     3,079 
      2020 |     2,690        389 |     3,079 
      2021 |     2,690        389 |     3,079 
      2022 |     2,690        389 |     3,079 
      2023 |       437          0 |       437 
-----------+----------------------+----------
     Total |    19,267      2,723 |    21,990 

. tab year acs_period_2

  Tax year |
     (year |
    before |     acs_period_2
     move) |         0          1 |     Total
-----------+----------------------+----------
      2016 |     2,690        389 |     3,079 
      2017 |     2,690        389 |     3,079 
      2018 |     2,690        389 |     3,079 
      2019 |     2,690        389 |     3,079 
      2020 |     2,690        389 |     3,079 
      2021 |     2,690        389 |     3,079 
      2022 |     2,690        389 |     3,079 
      2023 |        48        389 |       437 
-----------+----------------------+----------
     Total |    18,878      3,112 |    21,990 

. tab state_name acs_period_1     

                      |     acs_period_1
           State name |         0          1 |     Total
----------------------+----------------------+----------
              Alabama |       453         21 |       474 
               Alaska |       190          7 |       197 
              Arizona |        88         21 |       109 
             Arkansas |       507         21 |       528 
           California |       202        238 |       440 
             Colorado |       443          7 |       450 
             Delaware |         3         21 |        24 
 District of Columbia |         1          7 |         8 
              Florida |       306        196 |       502 
              Georgia |       995        140 |     1,135 
               Hawaii |         9         14 |        23 
                Idaho |       302          7 |       309 
             Illinois |       643         84 |       727 
              Indiana |       548        112 |       660 
                 Iowa |       670         28 |       698 
               Kansas |       717         21 |       738 
             Kentucky |       812         35 |       847 
            Louisiana |       406         49 |       455 
                Maine |       100         14 |       114 
             Maryland |       102         77 |       179 
        Massachusetts |        93         14 |       107 
             Michigan |       485        112 |       597 
            Minnesota |       575         42 |       617 
          Mississippi |       556         21 |       577 
             Missouri |       777         35 |       812 
              Montana |       393          0 |       393 
             Nebraska |       633         21 |       654 
               Nevada |       107         14 |       121 
        New Hampshire |        70          0 |        70 
           New Jersey |        45        119 |       164 
           New Mexico |       219         14 |       233 
             New York |       315        140 |       455 
       North Carolina |       592        126 |       718 
         North Dakota |       365          7 |       372 
                 Ohio |       504        133 |       637 
             Oklahoma |       522         21 |       543 
               Oregon |       211         49 |       260 
         Pennsylvania |       349        140 |       489 
         Rhode Island |        17         21 |        38 
       South Carolina |       323          7 |       330 
         South Dakota |       462          0 |       462 
            Tennessee |       627         49 |       676 
                Texas |     1,543        266 |     1,809 
                 Utah |       173         35 |       208 
              Vermont |        99          0 |        99 
             Virginia |       521         63 |       584 
           Washington |       220         63 |       283 
        West Virginia |       386          0 |       386 
            Wisconsin |       426         91 |       517 
              Wyoming |       162          0 |       162 
----------------------+----------------------+----------
                Total |    19,267      2,723 |    21,990 

.         
. ** Define treated state 
. gen multnomah = state_fips == 41 & county_fips == 51

. label var multnomah "Indicator for Multnomah County, Oregon"    

. 
. ** Define treatment indicator 
. gen Treated = multnomah == 1 & year > 2020

. label var Treated "Treatment indicator for Multnomah County, Oregon"    

. 
. ** Define sample 1: All counties 
. gen sample_all = 1 

. label var sample_all "All counties (excluding AK, CA, HI OR, WA)"

. 
. ** Define sample 2: Counties in top 95 percent 
. summ percent_urban if year == 2020, de 

            Percent of population in urban areas
-------------------------------------------------------------
      Percentiles      Smallest
 1%            0              0
 5%            0              0
10%            0              0       Obs               3,079
25%            0              0       Sum of wgt.       3,079

50%     .3256337                      Mean           .3521437
                        Largest       Std. dev.       .332065
75%     .6326353              1
90%      .847923              1       Variance       .1102672
95%     .9372299              1       Skewness       .3661052
99%     .9972304              1       Kurtosis       1.763629

. local cutoff = r(p95) 

. tab state_name multnomah if percent_urban >= `cutoff' & year == 2020

                      |     Indicator for
                      |   Multnomah County,
                      |        Oregon
           State name |         0          1 |     Total
----------------------+----------------------+----------
               Alaska |         1          0 |         1 
              Arizona |         1          0 |         1 
           California |        15          0 |        15 
             Colorado |         4          0 |         4 
             Delaware |         1          0 |         1 
 District of Columbia |         1          0 |         1 
              Florida |        13          0 |        13 
              Georgia |         8          0 |         8 
               Hawaii |         1          0 |         1 
                Idaho |         1          0 |         1 
             Illinois |         5          0 |         5 
              Indiana |         3          0 |         3 
                 Iowa |         1          0 |         1 
               Kansas |         2          0 |         2 
             Kentucky |         2          0 |         2 
            Louisiana |         3          0 |         3 
             Maryland |         3          0 |         3 
        Massachusetts |         5          0 |         5 
             Michigan |         3          0 |         3 
            Minnesota |         3          0 |         3 
             Missouri |         4          0 |         4 
             Nebraska |         2          0 |         2 
               Nevada |         3          0 |         3 
           New Jersey |        10          0 |        10 
           New Mexico |         2          0 |         2 
             New York |         9          0 |         9 
       North Carolina |         4          0 |         4 
                 Ohio |         6          0 |         6 
             Oklahoma |         1          0 |         1 
               Oregon |         1          1 |         2 
         Pennsylvania |         4          0 |         4 
         Rhode Island |         2          0 |         2 
            Tennessee |         2          0 |         2 
                Texas |        11          0 |        11 
                 Utah |         4          0 |         4 
             Virginia |        10          0 |        10 
           Washington |         1          0 |         1 
            Wisconsin |         1          0 |         1 
----------------------+----------------------+----------
                Total |       153          1 |       154 

. gen sample_urban95 = percent_urban >= `cutoff' // All counties 

. label var sample_urban95 "Urban counties (top 5%) (excluding AK, CA, HI OR, WA)"

. tab sample_urban95 if year == 2020

      Urban |
   counties |
   (top 5%) |
 (excluding |
 AK, CA, HI |
    OR, WA) |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |      2,925       95.00       95.00
          1 |        154        5.00      100.00
------------+-----------------------------------
      Total |      3,079      100.00

. 
. ** Define sample 3: Counties in top 98 percent 
. local cutoff = .9864539 //

. tab state_name multnomah if percent_urban >= `cutoff' & year == 2020

                      |     Indicator for
                      |   Multnomah County,
                      |        Oregon
           State name |         0          1 |     Total
----------------------+----------------------+----------
           California |         6          0 |         6 
             Colorado |         2          0 |         2 
 District of Columbia |         1          0 |         1 
              Florida |         4          0 |         4 
              Georgia |         5          0 |         5 
             Illinois |         2          0 |         2 
              Indiana |         1          0 |         1 
            Louisiana |         1          0 |         1 
             Maryland |         1          0 |         1 
        Massachusetts |         1          0 |         1 
             Michigan |         1          0 |         1 
            Minnesota |         1          0 |         1 
             Missouri |         1          0 |         1 
               Nevada |         1          0 |         1 
           New Jersey |         6          0 |         6 
             New York |         7          0 |         7 
       North Carolina |         1          0 |         1 
                 Ohio |         1          0 |         1 
               Oregon |         0          1 |         1 
         Pennsylvania |         2          0 |         2 
         Rhode Island |         1          0 |         1 
                Texas |         3          0 |         3 
                 Utah |         2          0 |         2 
             Virginia |         8          0 |         8 
            Wisconsin |         1          0 |         1 
----------------------+----------------------+----------
                Total |        60          1 |        61 

. gen sample_urban98 = percent_urban >= `cutoff' // All counties 

. label var sample_urban98 "Urban counties (top 1%) (excluding AK, CA, HI OR, WA)"

. tab sample_urban98 if year == 2020

      Urban |
   counties |
   (top 1%) |
 (excluding |
 AK, CA, HI |
    OR, WA) |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |      3,018       98.02       98.02
          1 |         61        1.98      100.00
------------+-----------------------------------
      Total |      3,079      100.00

. 
. ** Define Sample of States      
. drop if state_name == "Alaska"
(197 observations deleted)

. drop if state_name == "Hawaii"
(23 observations deleted)

. drop if state_name == "California"
(440 observations deleted)

. drop if state_name == "Washington"
(283 observations deleted)

. drop if state_name == "Oregon" & multnomah == 0
(252 observations deleted)

. 
. ** Define sample 4: Counties in top 95 + covid 
. cluster kmeans cases_cum* deaths_cum* if        ///
>         sample_urban95 == 1 & year == 2020 & covid_merge == 3 , k(5) gen(kmean)
cluster name: _clus_1

. bysort fips: egen kmean_group = mean(kmean)
(19,774 missing values generated)

. 
. ** Pull out kmeans cluster with Multnoma
. gen tmp1 = kmean if sample_urban95 == 1 & year == 2020 & covid_merge == 3 & multnomah == 1 
(20,794 missing values generated)

. egen tmp2 = mean(tmp1)

. gen sample_urban95_covid = sample_urban95 == 1 & kmean_group == tmp2

. drop tmp1 tmp2 

. label var sample_urban95_covid "Urban counties (top 5%) w. Kmean Covid Match  (excluding AK, CA, HI OR, WA)"

. tab sample_urban95_covid if year == 2020

      Urban |
   counties |
(top 5%) w. |
Kmean Covid |
      Match |
 (excluding |
 AK, CA, HI |
    OR, WA) |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |      2,872       98.49       98.49
          1 |         44        1.51      100.00
------------+-----------------------------------
      Total |      2,916      100.00

. 
. ** Show results across clusters 
. preserve 

. 
. ** Keep required variables 
. keep if sample_urban95 == 1 & year == 2020 & covid_merge == 3
(20,665 observations deleted)

. keep kmean cases_cum* deaths_cum* population

. collapse (mean) cases_cum* deaths_cum* [fw = population], by(kmean)

. reshape long cases_cum deaths_cum, i(kmean) j(time)
(j = 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29)

Data                               Wide   ->   Long
-----------------------------------------------------------------------------
Number of observations                5   ->   145         
Number of variables                  59   ->   4           
j variable (29 values)                    ->   time
xij variables:
  cases_cum1 cases_cum2 ... cases_cum29   ->   cases_cum
deaths_cum1 deaths_cum2 ... deaths_cum29  ->   deaths_cum
-----------------------------------------------------------------------------

. xtset kmean time 

Panel variable: kmean (strongly balanced)
 Time variable: time, 1 to 29
         Delta: 1 unit

. xtline cases_cum 

. graph export "${results}fig_kmeans.jpg", as(jpg) name("Graph") quality(100) replace             
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_kmeans.jpg written in JPEG format

. clear  

. 
. ** Restore      
. restore 

. 
. ** Define covariates 
. local covariates "population per_capita_income"

. 
. ** Standardize covariates 
. foreach v of local covariates {
  2.         egen tmp_v = std(`v') 
  3.         replace `v' = tmp_v
  4.         drop tmp_v
  5. } // END COVAR LOOP 
variable population was long now double
(20,795 real changes made)
variable per_capita_income was long now double
(20,795 real changes made)

. 
. ** Define outcome variables (IRS)
. foreach x in "n1" "n2" "agi" {
  2.         
.         gen `x'_rate_irs = 100 * (`x'_net_3 / (`x'_out_1 + `x'_out_2))
  3.         
. } // END OUTCOME TYPE LOOP 
(383 missing values generated)
(383 missing values generated)
(383 missing values generated)

. 
. ** Label var 
. label var n1_rate_irs   "Net domestic migration rate, returns (%)"

. label var n2_rate_irs   "Net domestic migration rate, exemptions (%)"

. label var agi_rate_irs  "Net domestic migration rate, AGI (%)"

. 
. 
. ** Define outcome variables (ACS)
. ** Loop over three datasets (18+ = 1, college degree == 2, no college degree == 3)
. forvalues i = 1/3{
  2.         
.         if `i' == 1 local txt "(18+)"
  3.         else if `i' == 2 local txt "(College)"
  4.         else if `i' == 3 local txt "(No College)"
  5.         
.         gen n1_rate_acs`i' = 100 * (acs`i'_households_net_3 / (acs`i'_households_out_1 + acs`i'_households_out_2))
  6.         gen n2_rate_acs`i' = 100 * (acs`i'_persons_net_3 / (acs`i'_persons_out_1 + acs`i'_persons_out_2))
  7.         gen agi_rate_acs`i' = 100 * (acs`i'_dollars_net_3 / (acs`i'_dollars_out_1 + acs`i'_dollars_out_2))
  8.         
.         label var n1_rate_acs`i'        "Net domestic migration rate `txt', HHs (%)"
  9.         label var n2_rate_acs`i'        "Net domestic migration rate `txt', persons (%)"
 10.         label var agi_rate_acs`i'       "Net domestic migration rate `txt', total income (%)"
 11.         
. } // END DATA LOOP 
(17,815 missing values generated)
(17,815 missing values generated)
(17,815 missing values generated)
(17,815 missing values generated)
(17,815 missing values generated)
(17,815 missing values generated)
(17,815 missing values generated)
(17,815 missing values generated)
(17,815 missing values generated)

. 
. ** Generate triple-difference vars 
. gen n1_rate_acs4 = n1_rate_acs2 - n1_rate_acs3
(17,815 missing values generated)

. gen n2_rate_acs4 = n2_rate_acs2 - n2_rate_acs3
(17,815 missing values generated)

. gen agi_rate_acs4 = agi_rate_acs2 - agi_rate_acs3
(17,815 missing values generated)

. 
. label var n1_rate_acs4          "Net domestic migration rate (College less No College), HHs (%)"

. label var n2_rate_acs4          "Net domestic migration rate (College less No College), persons (%)"

. label var agi_rate_acs4         "Net domestic migration rate (College less No College), total income (%)"

. 
. ** Declare panel
. xtset fips year 

Panel variable: fips (unbalanced)
 Time variable: year, 2016 to 2023
         Delta: 1 unit

. 
. ** Tag unique fips 
. egen unique = tag(fips)

. tab year unique

  Tax year |
     (year |
    before |       tag(fips)
     move) |         0          1 |     Total
-----------+----------------------+----------
      2016 |         0      2,916 |     2,916 
      2017 |     2,916          0 |     2,916 
      2018 |     2,916          0 |     2,916 
      2019 |     2,916          0 |     2,916 
      2020 |     2,916          0 |     2,916 
      2021 |     2,916          0 |     2,916 
      2022 |     2,916          0 |     2,916 
      2023 |       383          0 |       383 
-----------+----------------------+----------
     Total |    17,879      2,916 |    20,795 

. 
. ** Loop over IRS and ACS Samples  
. foreach data of varlist irs_sample acs_period_1 acs_period_2  {
  2. 
.         ** Different sets of outcome variables 
.         if "`data'" == "irs_sample" local out_type "irs"
  3.         else local out_type "acs1 acs2 acs3 acs4"
  4. 
.         ** Loop over Outcome var type 
.         foreach type of local out_type {
  5.                 
.                 ** Labels 
.                 if "`data'" == "irs_sample" local out_txt "irs_16_22"
  6.                 else if "`data'" == "acs_period_1" & "`type'" == "acs1" local out_txt "acs_16_22_all"
  7.                 else if "`data'" == "acs_period_1" & "`type'" == "acs2" local out_txt "acs_16_22_col"
  8.                 else if "`data'" == "acs_period_1" & "`type'" == "acs3" local out_txt "acs_16_22_noc"
  9.                 else if "`data'" == "acs_period_1" & "`type'" == "acs4" local out_txt "acs_16_22_3D"
 10.                 else if "`data'" == "acs_period_2" & "`type'" == "acs1" local out_txt "acs_16_23_all"
 11.                 else if "`data'" == "acs_period_2" & "`type'" == "acs2" local out_txt "acs_16_23_col"
 12.                 else if "`data'" == "acs_period_2" & "`type'" == "acs3" local out_txt "acs_16_23_noc"
 13.                 else if "`data'" == "acs_period_2" & "`type'" == "acs4" local out_txt "acs_16_23_3D"
 14. 
.                 ** Loop over samples 
.                 foreach samp of varlist sample_all sample_urban95 sample_urban95_covid {        
 15.                         
.                         ** Loop over exclusion of 2019-2020 period 
.                         forvalues exl = 1(-1)0 {
 16.                                 
.                                 ** Define sample        
.                                 gen sample = `samp' == 1 & `data' == 1 
 17.                                 if `exl' == 1 replace sample = 0 if year == 2020 
 18.                                 
.                                 ** Clear stored values 
.                                 eststo clear            
 19.                                 
.                                 ** Loop over outcomes 
.                                 foreach out of varlist n1_rate_`type' n2_rate_`type' agi_rate_`type' {
 20.                                 
.                                         ** Store label 
.                                         local label : variable label `out'
 21.                                         
.                                         ** Loop over inclusion of covariates
.                                         forvalues c = 0/1 {
 22.                                         
.                                                 ** Covariates 
.                                                 if `c' == 0 local covars ""
 23.                                                 else if `c' == 1 local covars "covariates(`covariates', projected)"
 24.                                                 
.                                                 ** File Name 
.                                                 if `exl' == 0 local path "${results}fig_`out_txt'_`out'_`c'_`samp'_"
 25.                                                 if `exl' == 1 local path "${results}fig_`out_txt'_`out'_`c'_`samp'_excl2020_"
 26.         
.                                                 
.                                                 ** Run SDID
.                                                 eststo sdid_`out'_`c': sdid `out' fips year Treated     ///
>                                                         if sample == 1,                         ///
>                                                         vce(placebo)                            ///
>                                                         `covar'                                         ///
>                                                         reps(`reps')                            ///
>                                                         graph graph_export("`path'", .pdf) 
 27.                                                         
.                                                 ** Estadd counties  
.                                                 qui summ `out' if year == 2021 & sample == 1
 28.                                                 estadd scalar count = r(N)      
 29.                                                         
.                                                 ** Estadd mean 
.                                                 qui summ `out' if multnomah == 1 & Treated == 0 
 30.                                                 estadd scalar mean = r(mean)
 31. 
.                                                 ** Run event-study 
.                                                 sdid_event `out' fips year Treated                      ///
>                                                         if sample == 1,                                         ///
>                                                         `covar'                                                         ///
>                                                         vce(placebo)                                            ///
>                                                         brep(`reps')                                            ///
>                                                         placebo(all)
 32.                                                 
.                                                 ** Create Figure 
.                                                 
.                                                 ** Store max year 
.                                                 qui summ year if multnomah == 1 & sample == 1
 33.                                                 local max_yr = r(max)
 34.                                                 dis "`max_yr'"
 35.                                                 
.                                                 ** Move results from matrix to data 
.                                                 qui count if multnomah == 1 & sample == 1
 36.                                                 local ct = r(N)
 37.                                                 local ct = `ct' + 1
 38.                                                 matrix list e(H)
 39.                                                 mat res = e(H)[2..`ct',1..5]
 40.                         
.                                                 ** Move Matrix results to data 
.                                                 svmat res
 41.                                                 
.                                                 ** Generate ID variable
.                                                 gen id = `max_yr' - _n + 1 if !missing(res1)
 42.                                                 
.                                                 ** Update labeling for exclusion of 
.                                                 if `exl' == 1 {
 43.                                                         replace id = id - 1 if id <= 2020 
 44.                                                         expand 2 if id == 2019, gen(tag)
 45.                                                         replace id = 2020 if tag == 1 
 46.                                                         replace res1 = . if tag == 1 
 47.                                                         replace res3 = . if tag == 1 
 48.                                                         replace res4 = . if tag == 1 
 49.                                                 }
 50.                                                 label var id "Year (destination)"
 51.                                                 
.                                                 ** Sort 
.                                                 sort id
 52.                                                 
.                                                 ** Plot
.                                                 twoway  (rcap res3 res4 id, lc(gs10) fc(gs11%50))       ///
>                                                                 (scatter res1 id, mc(black)),                           ///             
>                                                         legend(off) ytitle("`label'")                                   ///
>                                                         yline(0, lc(red) lp(-))                                                 ///
>                                                         xline(2020.5, lc(black) lp(solid))                              ///
>                                                         ylabel(-10(2.5)10, format(%9.1f))
 53. 
.                                                 if `exl' == 0 local path "${results}fig_`out_txt'_`out'_`c'_`samp'_eventstudy.jpg"
 54.                                                 if `exl' == 1 local path "${results}fig_`out_txt'_`out'_`c'_`samp'_excl2020_eventstudy.jpg"
 55.         
.                                                         
.                                                 graph export "`path'",  ///
>                                                         as(jpg) name("Graph") quality(100) replace              
 56. 
.                                                 ** Clean up 
.                                                 drop res1 res2 res3 res4 res5 id 
 57.                                                 if `exl' == 1 {
 58.                                                         drop if tag == 1
 59.                                                         drop tag 
 60.                                                 }
 61.                                                 ** Update Count
.                                                 local ct = `ct' + 1 
 62.                                                                                 
.                                         } // END COVAR LOOP 
 63.                                 
.                                 } // END OUTCOME LOOP 
 64.                                 
.                                 ** Determine name 
.                                 if `exl' == 0 local path "${results}tab_sdid_`out_txt'_`samp'.tex"
 65.                                 if `exl' == 1 local path "${results}tab_sdid_`out_txt'_`samp'_excl2020.tex"
 66. 
.                                 ** Table of results 
.                                 esttab  sdid_n1_rate_`type'_0 sdid_n1_rate_`type'_1                     ///
>                                                 sdid_n2_rate_`type'_0 sdid_n2_rate_`type'_1                     ///
>                                                 sdid_agi_rate_`type'_0 sdid_agi_rate_`type'_1 using     ///
>                                 "`path'",                                                                               ///
>                                 starlevel("*" 0.10 "**" 0.05 "***" 0.01)                ///
>                                 b(%-9.3f) se(%-9.3f) replace                                    ///
>                                 mgroups("Returns" "Exemptions" "AGI",                   ///
>                                         pattern(1 0 1 0 1 0) )                                          ///
>                                 mtitle( "No Covariates" "Covariates"                    ///
>                                                 "No Covariates" "Covariates"                    ///
>                                                 "No Covariates" "Covariates")                   ///
>                                 stats(count mean,                                                               ///
>                                         fmt(%9.0fc %9.3fc)                                                      ///
>                                         labels("Number of Counties" "Pre-treatment mean"))
 67.                                 
.                                 ** Drop sample var 
.                                 drop sample 
 68.                                 
.                         } // END EXCLUSION LOOP 
 69.                         
.                 } // END SAMPLE LOOP 
 70.         
.         } // END OUT TYPE 
 71.         
. } // END DATA LOOP 
(2,916 real changes made)
Placebo replications (100). This may take some time.
----+--- 1 ---+--- 2 ---+--- 3 ---+--- 4 ---+--- 5
..................................................     50
..................................................     100


Synthetic Difference-in-Differences Estimator

-----------------------------------------------------------------------------
 n1_rate_irs |     ATT     Std. Err.     t      P>|t|    [95% Conf. Interval]
-------------+---------------------------------------------------------------
     Treated |  -1.92529    0.88168    -2.18    0.029    -3.65335    -0.19722
-----------------------------------------------------------------------------
95% CIs and p-values are based on large-sample approximations.
Refer to Arkhangelsky et al., (2021) for theoretical derivations.
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_irs_16_22_n1_rate_irs_0_sample_all_excl2020_trends2021.pdf saved as PDF format

added scalar:
              e(count) =  2916

added scalar:
               e(mean) =  .1434552
Synthetic Difference-in-differences

Boostrap replications (100), placebo mode.
|0% ----------------------------------------- 100%|
|.................................................|


             |  Estimate         SE      LB CI      UB CI  Switchers 
-------------+------------------------------------------------------
         ATT | -1.925286   1.019868  -3.924227   .0736545          1 
    Effect_1 | -2.430048   1.407743  -5.189225   .3291293          1 
    Effect_2 | -1.420525    1.03404  -3.447243    .606193          1 
   Placebo_1 |  .0018158   .0084811  -.0148071   .0184388          1 
   Placebo_2 | -.0017198   .0228761   -.046557   .0431174          1 
   Placebo_3 | -.0060693   .0315626  -.0679321   .0557934          1 
   Placebo_4 |  .0088023   .0159475  -.0224549   .0400594          1 
2022

e(H)[7,5]
             Estimate          SE       LB CI       UB CI   Switchers
      ATT  -1.9252863   1.0198678  -3.9242271   .07365452           1
 Effect_1  -2.4300477   1.4077434  -5.1892248   .32912932           1
 Effect_2  -1.4205248   1.0340397  -3.4472426   .60619302           1
Placebo_1   .00181583    .0084811  -.01480713    .0184388           1
Placebo_2  -.00171981   .02287613  -.04655702   .04311741           1
Placebo_3  -.00606931   .03156262  -.06793205   .05579342           1
Placebo_4   .00880226   .01594751  -.02245486   .04005939           1
(20,789 missing values generated)
(4 real changes made)
(1 observation created)
(1 real change made)
(1 real change made, 1 to missing)
(1 real change made, 1 to missing)
(1 real change made, 1 to missing)
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_irs_16_22_n1_rate_irs_0_sample_all_excl2020_eventstudy.jpg written in JPEG format
(1 observation deleted)
Placebo replications (100). This may take some time.
----+--- 1 ---+--- 2 ---+--- 3 ---+--- 4 ---+--- 5
..................................................     50
..................................................     100


Synthetic Difference-in-Differences Estimator

-----------------------------------------------------------------------------
 n1_rate_irs |     ATT     Std. Err.     t      P>|t|    [95% Conf. Interval]
-------------+---------------------------------------------------------------
     Treated |  -1.92529    1.78473    -1.08    0.281    -5.42329     1.57272
-----------------------------------------------------------------------------
95% CIs and p-values are based on large-sample approximations.
Refer to Arkhangelsky et al., (2021) for theoretical derivations.
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_irs_16_22_n1_rate_irs_1_sample_all_excl2020_trends2021.pdf saved as PDF format

added scalar:
              e(count) =  2916

added scalar:
               e(mean) =  .1434552
Synthetic Difference-in-differences

Boostrap replications (100), placebo mode.
|0% ----------------------------------------- 100%|
|.................................................|


             |  Estimate         SE      LB CI      UB CI  Switchers 
-------------+------------------------------------------------------
         ATT | -1.925286   1.518232  -4.901021   1.050448          1 
    Effect_1 | -2.430048   1.862228  -6.080015    1.21992          1 
    Effect_2 | -1.420525   1.473789  -4.309152   1.468102          1 
   Placebo_1 |  .0018158   .0071393  -.0121772   .0158089          1 
   Placebo_2 | -.0017198   .0210887  -.0430537   .0396141          1 
   Placebo_3 | -.0060693   .0267136  -.0584279   .0462893          1 
   Placebo_4 |  .0088023    .013739  -.0181261   .0357306          1 
2022

e(H)[7,5]
             Estimate          SE       LB CI       UB CI   Switchers
      ATT  -1.9252863   1.5182318  -4.9010205    1.050448           1
 Effect_1  -2.4300477   1.8622282  -6.0800151   1.2199196           1
 Effect_2  -1.4205248   1.4737892  -4.3091516    1.468102           1
Placebo_1   .00181583    .0071393  -.01217719   .01580886           1
Placebo_2  -.00171981   .02108872  -.04305369   .03961408           1
Placebo_3  -.00606931   .02671358  -.05842794   .04628931           1
Placebo_4   .00880226   .01373896  -.01812609   .03573062           1
(20,789 missing values generated)
(4 real changes made)
(1 observation created)
(1 real change made)
(1 real change made, 1 to missing)
(1 real change made, 1 to missing)
(1 real change made, 1 to missing)
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_irs_16_22_n1_rate_irs_1_sample_all_excl2020_eventstudy.jpg written in JPEG format
(1 observation deleted)
Placebo replications (100). This may take some time.
----+--- 1 ---+--- 2 ---+--- 3 ---+--- 4 ---+--- 5
..................................................     50
..................................................     100


Synthetic Difference-in-Differences Estimator

-----------------------------------------------------------------------------
 n2_rate_irs |     ATT     Std. Err.     t      P>|t|    [95% Conf. Interval]
-------------+---------------------------------------------------------------
     Treated |  -1.82184    1.15925    -1.57    0.116    -4.09392     0.45025
-----------------------------------------------------------------------------
95% CIs and p-values are based on large-sample approximations.
Refer to Arkhangelsky et al., (2021) for theoretical derivations.
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_irs_16_22_n2_rate_irs_0_sample_all_excl2020_trends2021.pdf saved as PDF format

added scalar:
              e(count) =  2916

added scalar:
               e(mean) =  -.73591077
Synthetic Difference-in-differences

Boostrap replications (100), placebo mode.
|0% ----------------------------------------- 100%|
|.................................................|


             |  Estimate         SE      LB CI      UB CI  Switchers 
-------------+------------------------------------------------------
         ATT | -1.821837   1.050658  -3.881125   .2374519          1 
    Effect_1 | -2.268932   1.312054  -4.840558   .3026936          1 
    Effect_2 | -1.374741   1.138183   -3.60558   .8560982          1 
   Placebo_1 |  .0027779   .1013622   -.195892   .2014478          1 
   Placebo_2 | -.0013103   .0568383  -.1127133   .1100927          1 
   Placebo_3 | -.0077218   .0848009  -.1739315   .1584878          1 
   Placebo_4 |  .0067843   .0211105  -.0345924    .048161          1 
2022

e(H)[7,5]
             Estimate          SE       LB CI       UB CI   Switchers
      ATT  -1.8218368   1.0506575  -3.8811255   .23745193           1
 Effect_1  -2.2689324   1.3120541  -4.8405585   .30269363           1
 Effect_2  -1.3747411   1.1381833  -3.6055805   .85609816           1
Placebo_1    .0027779    .1013622  -.19589202   .20144782           1
Placebo_2  -.00131033   .05683827  -.11271333   .11009267           1
Placebo_3  -.00772184   .08480086  -.17393153   .15848784           1
Placebo_4   .00678431   .02111055  -.03459236   .04816099           1
(20,789 missing values generated)
(4 real changes made)
(1 observation created)
(1 real change made)
(1 real change made, 1 to missing)
(1 real change made, 1 to missing)
(1 real change made, 1 to missing)
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_irs_16_22_n2_rate_irs_0_sample_all_excl2020_eventstudy.jpg written in JPEG format
(1 observation deleted)
Placebo replications (100). This may take some time.
----+--- 1 ---+--- 2 ---+--- 3 ---+--- 4 ---+--- 5
..................................................     50
..................................................     100


Synthetic Difference-in-Differences Estimator

-----------------------------------------------------------------------------
 n2_rate_irs |     ATT     Std. Err.     t      P>|t|    [95% Conf. Interval]
-------------+---------------------------------------------------------------
     Treated |  -1.82184    1.30931    -1.39    0.164    -4.38803     0.74436
-----------------------------------------------------------------------------
95% CIs and p-values are based on large-sample approximations.
Refer to Arkhangelsky et al., (2021) for theoretical derivations.
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_irs_16_22_n2_rate_irs_1_sample_all_excl2020_trends2021.pdf saved as PDF format

added scalar:
              e(count) =  2916

added scalar:
               e(mean) =  -.73591077
Synthetic Difference-in-differences

Boostrap replications (100), placebo mode.
|0% ----------------------------------------- 100%|
|.................................................|


             |  Estimate         SE      LB CI      UB CI  Switchers 
-------------+------------------------------------------------------
         ATT | -1.821837   1.014777    -3.8108    .167126          1 
    Effect_1 | -2.268932   1.415628  -5.043563   .5056978          1 
    Effect_2 | -1.374741   1.144604  -3.618165    .868683          1 
   Placebo_1 |  .0027779   .0844875  -.1628176   .1683734          1 
   Placebo_2 | -.0013103   .0354356  -.0707641   .0681435          1 
   Placebo_3 | -.0077218   .0712803  -.1474312   .1319875          1 
   Placebo_4 |  .0067843   .0444707  -.0803783    .093947          1 
2022

e(H)[7,5]
             Estimate          SE       LB CI       UB CI   Switchers
      ATT  -1.8218368   1.0147769  -3.8107995   .16712598           1
 Effect_1  -2.2689324   1.4156277  -5.0435627   .50569784           1
 Effect_2  -1.3747411   1.1446042  -3.6181653   .86868299           1
Placebo_1    .0027779   .08448751  -.16281762   .16837342           1
Placebo_2  -.00131033   .03543562  -.07076414   .06814348           1
Placebo_3  -.00772184    .0712803  -.14743123   .13198754           1
Placebo_4   .00678431   .04447074  -.08037834   .09394696           1
(20,789 missing values generated)
(4 real changes made)
(1 observation created)
(1 real change made)
(1 real change made, 1 to missing)
(1 real change made, 1 to missing)
(1 real change made, 1 to missing)
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_irs_16_22_n2_rate_irs_1_sample_all_excl2020_eventstudy.jpg written in JPEG format
(1 observation deleted)
Placebo replications (100). This may take some time.
----+--- 1 ---+--- 2 ---+--- 3 ---+--- 4 ---+--- 5
..................................................     50
..................................................     100


Synthetic Difference-in-Differences Estimator

-----------------------------------------------------------------------------
agi_rate_irs |     ATT     Std. Err.     t      P>|t|    [95% Conf. Interval]
-------------+---------------------------------------------------------------
     Treated |  -3.74944    1.66596    -2.25    0.024    -7.01467    -0.48421
-----------------------------------------------------------------------------
95% CIs and p-values are based on large-sample approximations.
Refer to Arkhangelsky et al., (2021) for theoretical derivations.
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_irs_16_22_agi_rate_irs_0_sample_all_excl2020_trends2021.pdf saved as PDF format

added scalar:
              e(count) =  2916

added scalar:
               e(mean) =  -.29483641
Synthetic Difference-in-differences

Boostrap replications (100), placebo mode.
|0% ----------------------------------------- 100%|
|.................................................|


             |  Estimate         SE      LB CI      UB CI  Switchers 
-------------+------------------------------------------------------
         ATT | -3.749438   1.251524  -6.202425   -1.29645          1 
    Effect_1 | -3.942519   1.723504  -7.320587   -.564451          1 
    Effect_2 | -3.556357   1.404186   -6.30856  -.8041529          1 
   Placebo_1 |  .0037643   .0461328  -.0866561   .0941846          1 
   Placebo_2 | -.0011156   .1084741  -.2137248   .2114937          1 
   Placebo_3 | -.0030111   .0335596  -.0687879   .0627658          1 
   Placebo_4 |  .0023952   .0244044  -.0454374   .0502277          1 
2022

e(H)[7,5]
             Estimate          SE       LB CI       UB CI   Switchers
      ATT  -3.7494376   1.2515241   -6.202425  -1.2964503           1
 Effect_1  -3.9425187    1.723504  -7.3205865  -.56445099           1
 Effect_2  -3.5563565   1.4041855  -6.3085602  -.80415288           1
Placebo_1   .00376427   .04613284  -.08665609   .09418464           1
Placebo_2  -.00111556   .10847411  -.21372482    .2114937           1
Placebo_3  -.00301105    .0335596  -.06878788   .06276577           1
Placebo_4   .00239518   .02440436  -.04543737   .05022772           1
(20,789 missing values generated)
(4 real changes made)
(1 observation created)
(1 real change made)
(1 real change made, 1 to missing)
(1 real change made, 1 to missing)
(1 real change made, 1 to missing)
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_irs_16_22_agi_rate_irs_0_sample_all_excl2020_eventstudy.jpg written in JPEG format
(1 observation deleted)
Placebo replications (100). This may take some time.
----+--- 1 ---+--- 2 ---+--- 3 ---+--- 4 ---+--- 5
..................................................     50
..................................................     100


Synthetic Difference-in-Differences Estimator

-----------------------------------------------------------------------------
agi_rate_irs |     ATT     Std. Err.     t      P>|t|    [95% Conf. Interval]
-------------+---------------------------------------------------------------
     Treated |  -3.74944    1.04143    -3.60    0.000    -5.79059    -1.70828
-----------------------------------------------------------------------------
95% CIs and p-values are based on large-sample approximations.
Refer to Arkhangelsky et al., (2021) for theoretical derivations.
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_irs_16_22_agi_rate_irs_1_sample_all_excl2020_trends2021.pdf saved as PDF format

added scalar:
              e(count) =  2916

added scalar:
               e(mean) =  -.29483641
Synthetic Difference-in-differences

Boostrap replications (100), placebo mode.
|0% ----------------------------------------- 100%|
|.................................................|


             |  Estimate         SE      LB CI      UB CI  Switchers 
-------------+------------------------------------------------------
         ATT | -3.749438   1.041803  -5.791371  -1.707504          1 
    Effect_1 | -3.942519   1.207136  -6.308505  -1.576532          1 
    Effect_2 | -3.556357   1.390212  -6.281171  -.8315417          1 
   Placebo_1 |  .0037643   .0397852  -.0742148   .0817434          1 
   Placebo_2 | -.0011156   .0200195  -.0403538   .0381227          1 
   Placebo_3 | -.0030111   .0309592  -.0636911    .057669          1 
   Placebo_4 |  .0023952    .008366  -.0140022   .0187926          1 
2022

e(H)[7,5]
             Estimate          SE       LB CI       UB CI   Switchers
      ATT  -3.7494376    1.041803  -5.7913715  -1.7075038           1
 Effect_1  -3.9425187   1.2071359  -6.3085051  -1.5765324           1
 Effect_2  -3.5563565   1.3902117  -6.2811714  -.83154171           1
Placebo_1   .00376427   .03978524  -.07421481   .08174335           1
Placebo_2  -.00111556   .02001952  -.04035382   .03812271           1
Placebo_3  -.00301105   .03095919  -.06369106   .05766896           1
Placebo_4   .00239518   .00836601   -.0140022   .01879255           1
(20,789 missing values generated)
(4 real changes made)
(1 observation created)
(1 real change made)
(1 real change made, 1 to missing)
(1 real change made, 1 to missing)
(1 real change made, 1 to missing)
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_irs_16_22_agi_rate_irs_1_sample_all_excl2020_eventstudy.jpg written in JPEG format
(1 observation deleted)
(output written to C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/tab_sdid_irs_16_22_sample_all_excl2020.tex)
Placebo replications (100). This may take some time.
----+--- 1 ---+--- 2 ---+--- 3 ---+--- 4 ---+--- 5
..................................................     50
..................................................     100


Synthetic Difference-in-Differences Estimator

-----------------------------------------------------------------------------
 n1_rate_irs |     ATT     Std. Err.     t      P>|t|    [95% Conf. Interval]
-------------+---------------------------------------------------------------
     Treated |  -1.42893    0.74152    -1.93    0.054    -2.88228     0.02443
-----------------------------------------------------------------------------
95% CIs and p-values are based on large-sample approximations.
Refer to Arkhangelsky et al., (2021) for theoretical derivations.
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_irs_16_22_n1_rate_irs_0_sample_all_trends2021.pdf saved as PDF format

added scalar:
              e(count) =  2916

added scalar:
               e(mean) =  .1434552
Synthetic Difference-in-differences

Boostrap replications (100), placebo mode.
|0% ----------------------------------------- 100%|
|.................................................|


             |  Estimate         SE      LB CI      UB CI  Switchers 
-------------+------------------------------------------------------
         ATT | -1.428925   .8983061  -3.189605   .3317548          1 
    Effect_1 |  -1.83865   1.390162  -4.563367    .886067          1 
    Effect_2 |   -1.0192   .9622308  -2.905173    .866772          1 
   Placebo_1 | -.0129703   .6897317  -1.364844   1.338904          1 
   Placebo_2 |  .0139657   .0709869  -.1251686   .1530999          1 
   Placebo_3 |  .0045226   .1772488  -.3428851   .3519303          1 
   Placebo_4 |  -.004614   .6219284  -1.223594   1.214366          1 
   Placebo_5 |  .0181625   2.076063  -4.050921   4.087246          1 
2022

e(H)[8,5]
             Estimate          SE       LB CI       UB CI   Switchers
      ATT  -1.4289251   .89830605   -3.189605   .33175477           1
 Effect_1  -1.8386498   1.3901616  -4.5633665   .88606696           1
 Effect_2  -1.0192004   .96223084  -2.9051729   .86677203           1
Placebo_1  -.01297033   .68973165  -1.3648444   1.3389037           1
Placebo_2   .01396566   .07098687  -.12516861   .15309993           1
Placebo_3    .0045226   .17724882  -.34288508   .35193028           1
Placebo_4  -.00461397   .62192842  -1.2235937   1.2143657           1
Placebo_5   .01816248   2.0760631  -4.0509212   4.0872462           1
(20,788 missing values generated)
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_irs_16_22_n1_rate_irs_0_sample_all_eventstudy.jpg written in JPEG format
Placebo replications (100). This may take some time.
----+--- 1 ---+--- 2 ---+--- 3 ---+--- 4 ---+--- 5
..................................................     50
..................................................     100


Synthetic Difference-in-Differences Estimator

-----------------------------------------------------------------------------
 n1_rate_irs |     ATT     Std. Err.     t      P>|t|    [95% Conf. Interval]
-------------+---------------------------------------------------------------
     Treated |  -1.42893    1.04855    -1.36    0.173    -3.48405     0.62620
-----------------------------------------------------------------------------
95% CIs and p-values are based on large-sample approximations.
Refer to Arkhangelsky et al., (2021) for theoretical derivations.
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_irs_16_22_n1_rate_irs_1_sample_all_trends2021.pdf saved as PDF format

added scalar:
              e(count) =  2916

added scalar:
               e(mean) =  .1434552
Synthetic Difference-in-differences

Boostrap replications (100), placebo mode.
|0% ----------------------------------------- 100%|
|.................................................|


             |  Estimate         SE      LB CI      UB CI  Switchers 
-------------+------------------------------------------------------
         ATT | -1.428925   .5624989  -2.531423  -.3264272          1 
    Effect_1 |  -1.83865   .8333459  -3.472008  -.2052918          1 
    Effect_2 |   -1.0192   .8347144  -2.655241   .6168398          1 
   Placebo_1 | -.0129703   .0090893  -.0307853   .0048446          1 
   Placebo_2 |  .0139657   .0122452   -.010035   .0379663          1 
   Placebo_3 |  .0045226   .0115644  -.0181436   .0271888          1 
   Placebo_4 |  -.004614   .0089089  -.0220754   .0128475          1 
   Placebo_5 |  .0181625   .0138839  -.0090499   .0453749          1 
2022

e(H)[8,5]
             Estimate          SE       LB CI       UB CI   Switchers
      ATT  -1.4289251   .56249891   -2.531423  -.32642723           1
 Effect_1  -1.8386498   .83334593  -3.4720078  -.20529175           1
 Effect_2  -1.0192004   .83471439  -2.6552406   .61683979           1
Placebo_1  -.01297033   .00908927   -.0307853   .00484464           1
Placebo_2   .01396566   .01224525  -.01003502   .03796635           1
Placebo_3    .0045226   .01156437  -.01814356   .02718876           1
Placebo_4  -.00461397   .00890889   -.0220754   .01284745           1
Placebo_5   .01816248   .01388389  -.00904993    .0453749           1
(20,788 missing values generated)
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_irs_16_22_n1_rate_irs_1_sample_all_eventstudy.jpg written in JPEG format
Placebo replications (100). This may take some time.
----+--- 1 ---+--- 2 ---+--- 3 ---+--- 4 ---+--- 5
..................................................     50
..................................................     100


Synthetic Difference-in-Differences Estimator

-----------------------------------------------------------------------------
 n2_rate_irs |     ATT     Std. Err.     t      P>|t|    [95% Conf. Interval]
-------------+---------------------------------------------------------------
     Treated |  -1.35556    0.71463    -1.90    0.058    -2.75621     0.04509
-----------------------------------------------------------------------------
95% CIs and p-values are based on large-sample approximations.
Refer to Arkhangelsky et al., (2021) for theoretical derivations.
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_irs_16_22_n2_rate_irs_0_sample_all_trends2021.pdf saved as PDF format

added scalar:
              e(count) =  2916

added scalar:
               e(mean) =  -.73591077
Synthetic Difference-in-differences

Boostrap replications (100), placebo mode.
|0% ----------------------------------------- 100%|
|.................................................|


             |  Estimate         SE      LB CI      UB CI  Switchers 
-------------+------------------------------------------------------
         ATT | -1.355564   .6643948  -2.657778  -.0533498          1 
    Effect_1 | -1.744963   .8915475  -3.492396   .0024697          1 
    Effect_2 |  -.966164   .8733063  -2.677844   .7455164          1 
   Placebo_1 | -.0142295   .0201808   -.053784   .0253249          1 
   Placebo_2 |  .0150267   .0416096   -.066528   .0965815          1 
   Placebo_3 |  .0054525   .0292445  -.0518667   .0627716          1 
   Placebo_4 | -.0089254     .02074  -.0495758   .0317251          1 
   Placebo_5 |  .0149209   .0173477  -.0190807   .0489224          1 
2022

e(H)[8,5]
             Estimate          SE       LB CI       UB CI   Switchers
      ATT  -1.3555637   .66439482  -2.6577775  -.05334982           1
 Effect_1  -1.7449634   .89154747  -3.4923964   .00246969           1
 Effect_2  -.96616397   .87330629  -2.6778443   .74551637           1
Placebo_1  -.01422954   .02018083  -.05378396   .02532488           1
Placebo_2   .01502674   .04160957  -.06652801   .09658149           1
Placebo_3   .00545246   .02924447   -.0518667   .06277163           1
Placebo_4  -.00892537   .02074001  -.04957579   .03172506           1
Placebo_5   .01492086   .01734773  -.01908069   .04892241           1
(20,788 missing values generated)
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_irs_16_22_n2_rate_irs_0_sample_all_eventstudy.jpg written in JPEG format
Placebo replications (100). This may take some time.
----+--- 1 ---+--- 2 ---+--- 3 ---+--- 4 ---+--- 5
..................................................     50
..................................................     100


Synthetic Difference-in-Differences Estimator

-----------------------------------------------------------------------------
 n2_rate_irs |     ATT     Std. Err.     t      P>|t|    [95% Conf. Interval]
-------------+---------------------------------------------------------------
     Treated |  -1.35556    0.76199    -1.78    0.075    -2.84903     0.13790
-----------------------------------------------------------------------------
95% CIs and p-values are based on large-sample approximations.
Refer to Arkhangelsky et al., (2021) for theoretical derivations.
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_irs_16_22_n2_rate_irs_1_sample_all_trends2021.pdf saved as PDF format

added scalar:
              e(count) =  2916

added scalar:
               e(mean) =  -.73591077
Synthetic Difference-in-differences

Boostrap replications (100), placebo mode.
|0% ----------------------------------------- 100%|
|.................................................|


             |  Estimate         SE      LB CI      UB CI  Switchers 
-------------+------------------------------------------------------
         ATT | -1.355564   .8180069  -2.958857   .2477299          1 
    Effect_1 | -1.744963   1.164846  -4.028062   .5381348          1 
    Effect_2 |  -.966164   .8402778  -2.613108   .6807805          1 
   Placebo_1 | -.0142295   .0178317  -.0491797   .0207206          1 
   Placebo_2 |  .0150267   .0237547  -.0315325    .061586          1 
   Placebo_3 |  .0054525   .0186695  -.0311397   .0420446          1 
   Placebo_4 | -.0089254   .0155849  -.0394719   .0216211          1 
   Placebo_5 |  .0149209   .0365144  -.0566473    .086489          1 
2022

e(H)[8,5]
             Estimate          SE       LB CI       UB CI   Switchers
      ATT  -1.3555637   .81800692  -2.9588572    .2477299           1
 Effect_1  -1.7449634    1.164846  -4.0280615    .5381348           1
 Effect_2  -.96616397   .84027777  -2.6131084   .68078047           1
Placebo_1  -.01422954   .01783172  -.04917971   .02072063           1
Placebo_2   .01502674    .0237547  -.03153247   .06158595           1
Placebo_3   .00545246   .01866945  -.03113966   .04204459           1
Placebo_4  -.00892537   .01558495  -.03947187   .02162113           1
Placebo_5   .01492086   .03651436  -.05664728   .08648901           1
(20,788 missing values generated)
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_irs_16_22_n2_rate_irs_1_sample_all_eventstudy.jpg written in JPEG format
Placebo replications (100). This may take some time.
----+--- 1 ---+--- 2 ---+--- 3 ---+--- 4 ---+--- 5
..................................................     50
..................................................     100


Synthetic Difference-in-Differences Estimator

-----------------------------------------------------------------------------
agi_rate_irs |     ATT     Std. Err.     t      P>|t|    [95% Conf. Interval]
-------------+---------------------------------------------------------------
     Treated |  -3.16140    1.13315    -2.79    0.005    -5.38234    -0.94046
-----------------------------------------------------------------------------
95% CIs and p-values are based on large-sample approximations.
Refer to Arkhangelsky et al., (2021) for theoretical derivations.
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_irs_16_22_agi_rate_irs_0_sample_all_trends2021.pdf saved as PDF format

added scalar:
              e(count) =  2916

added scalar:
               e(mean) =  -.29483641
Synthetic Difference-in-differences

Boostrap replications (100), placebo mode.
|0% ----------------------------------------- 100%|
|.................................................|


             |  Estimate         SE      LB CI      UB CI  Switchers 
-------------+------------------------------------------------------
         ATT | -3.161398    .994974  -5.111547  -1.211249          1 
    Effect_1 | -3.296967   1.180104   -5.60997  -.9839641          1 
    Effect_2 | -3.025829   1.349907  -5.671648  -.3800105          1 
   Placebo_1 | -.0210602   .0362757  -.0921606   .0500402          1 
   Placebo_2 |  .0157834   .0990306  -.1783166   .2098834          1 
   Placebo_3 |  .0083374   .0755968  -.1398324   .1565072          1 
   Placebo_4 |  .0053846   .0323381   -.057998   .0687672          1 
   Placebo_5 |  .0049263    .017236  -.0288563   .0387088          1 
2022

e(H)[8,5]
             Estimate          SE       LB CI       UB CI   Switchers
      ATT  -3.1613982   .99497403  -5.1115473  -1.2112491           1
 Effect_1  -3.2969672   1.1801036  -5.6099703  -.98396415           1
 Effect_2  -3.0258291   1.3499075  -5.6716478  -.38001046           1
Placebo_1  -.02106024   .03627571  -.09216064   .05004016           1
Placebo_2    .0157834   .09903061   -.1783166   .20988339           1
Placebo_3   .00833739   .07559684  -.13983241    .1565072           1
Placebo_4   .00538463   .03233806  -.05799796   .06876722           1
Placebo_5   .00492626     .017236  -.02885631   .03870882           1
(20,788 missing values generated)
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_irs_16_22_agi_rate_irs_0_sample_all_eventstudy.jpg written in JPEG format
Placebo replications (100). This may take some time.
----+--- 1 ---+--- 2 ---+--- 3 ---+--- 4 ---+--- 5
..................................................     50
..................................................     100


Synthetic Difference-in-Differences Estimator

-----------------------------------------------------------------------------
agi_rate_irs |     ATT     Std. Err.     t      P>|t|    [95% Conf. Interval]
-------------+---------------------------------------------------------------
     Treated |  -3.16140    1.14967    -2.75    0.006    -5.41471    -0.90809
-----------------------------------------------------------------------------
95% CIs and p-values are based on large-sample approximations.
Refer to Arkhangelsky et al., (2021) for theoretical derivations.
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_irs_16_22_agi_rate_irs_1_sample_all_trends2021.pdf saved as PDF format

added scalar:
              e(count) =  2916

added scalar:
               e(mean) =  -.29483641
Synthetic Difference-in-differences

Boostrap replications (100), placebo mode.
|0% ----------------------------------------- 100%|
|.................................................|


             |  Estimate         SE      LB CI      UB CI  Switchers 
-------------+------------------------------------------------------
         ATT | -3.161398   1.321606  -5.751747  -.5710498          1 
    Effect_1 | -3.296967   1.450551  -6.140047  -.4538876          1 
    Effect_2 | -3.025829    1.54033  -6.044876  -.0067821          1 
   Placebo_1 | -.0210602   .0629035  -.1443511   .1022306          1 
   Placebo_2 |  .0157834    .084706  -.1502404   .1818072          1 
   Placebo_3 |  .0083374   .1665772  -.3181538   .3348286          1 
   Placebo_4 |  .0053846   .0590152  -.1102852   .1210544          1 
   Placebo_5 |  .0049263   .1075757  -.2059222   .2157747          1 
2022

e(H)[8,5]
             Estimate          SE       LB CI       UB CI   Switchers
      ATT  -3.1613982   1.3216063  -5.7517466  -.57104978           1
 Effect_1  -3.2969672   1.4505508  -6.1400469  -.45388757           1
 Effect_2  -3.0258291   1.5403301  -6.0448762  -.00678211           1
Placebo_1  -.02106024   .06290351  -.14435111   .10223064           1
Placebo_2    .0157834   .08470604  -.15024043   .18180723           1
Placebo_3   .00833739   .16657716  -.31815384   .33482862           1
Placebo_4   .00538463   .05901521  -.11028518   .12105444           1
Placebo_5   .00492626   .10757575  -.20592221   .21577472           1
(20,788 missing values generated)
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_irs_16_22_agi_rate_irs_1_sample_all_eventstudy.jpg written in JPEG format
(output written to C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/tab_sdid_irs_16_22_sample_all.tex)
(135 real changes made)
Placebo replications (100). This may take some time.
----+--- 1 ---+--- 2 ---+--- 3 ---+--- 4 ---+--- 5
..................................................     50
..................................................     100


Synthetic Difference-in-Differences Estimator

-----------------------------------------------------------------------------
 n1_rate_irs |     ATT     Std. Err.     t      P>|t|    [95% Conf. Interval]
-------------+---------------------------------------------------------------
     Treated |  -1.10251    0.67351    -1.64    0.102    -2.42257     0.21755
-----------------------------------------------------------------------------
95% CIs and p-values are based on large-sample approximations.
Refer to Arkhangelsky et al., (2021) for theoretical derivations.
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_irs_16_22_n1_rate_irs_0_sample_urban95_excl2020_trends2021.pdf saved as PDF format

added scalar:
              e(count) =  135

added scalar:
               e(mean) =  .1434552
Synthetic Difference-in-differences

Boostrap replications (100), placebo mode.
|0% ----------------------------------------- 100%|
|.................................................|


             |  Estimate         SE      LB CI      UB CI  Switchers 
-------------+------------------------------------------------------
         ATT | -1.102508   .5385216   -2.15801  -.0470053          1 
    Effect_1 | -1.268285   .7434768    -2.7255    .188929          1 
    Effect_2 |   -.93673   .5188844  -1.953743   .0802835          1 
   Placebo_1 |  .0373064   .0584549  -.0772651   .1518779          1 
   Placebo_2 | -.0483462   .1047239   -.253605   .1569125          1 
   Placebo_3 | -.0199312   .1172591  -.2497589   .2098966          1 
   Placebo_4 |  .2081139   .1269389  -.0406864   .4569141          1 
2022

e(H)[7,5]
             Estimate          SE       LB CI       UB CI   Switchers
      ATT  -1.1025077   .53852161  -2.1580101  -.04700534           1
 Effect_1  -1.2682854   .74347677  -2.7254999   .18892901           1
 Effect_2  -.93672996    .5188844  -1.9537434   .08028345           1
Placebo_1   .03730642   .05845485   -.0772651   .15187793           1
Placebo_2  -.04834623   .10472386  -.25360501   .15691254           1
Placebo_3  -.01993115   .11725905   -.2497589   .20989659           1
Placebo_4   .20811388    .1269389  -.04068637   .45691413           1
(20,789 missing values generated)
(4 real changes made)
(1 observation created)
(1 real change made)
(1 real change made, 1 to missing)
(1 real change made, 1 to missing)
(1 real change made, 1 to missing)
(file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_irs_16_22_n1_rate_irs_0_sample_urban95_excl2020_eventstudy.jpg not found)
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_irs_16_22_n1_rate_irs_0_sample_urban95_excl2020_eventstudy.jpg written in JPEG format
(1 observation deleted)
Placebo replications (100). This may take some time.
----+--- 1 ---+--- 2 ---+--- 3 ---+--- 4 ---+--- 5
..................................................     50
..................................................     100


Synthetic Difference-in-Differences Estimator

-----------------------------------------------------------------------------
 n1_rate_irs |     ATT     Std. Err.     t      P>|t|    [95% Conf. Interval]
-------------+---------------------------------------------------------------
     Treated |  -1.10251    0.70030    -1.57    0.115    -2.47506     0.27005
-----------------------------------------------------------------------------
95% CIs and p-values are based on large-sample approximations.
Refer to Arkhangelsky et al., (2021) for theoretical derivations.
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_irs_16_22_n1_rate_irs_1_sample_urban95_excl2020_trends2021.pdf saved as PDF format

added scalar:
              e(count) =  135

added scalar:
               e(mean) =  .1434552
Synthetic Difference-in-differences

Boostrap replications (100), placebo mode.
|0% ----------------------------------------- 100%|
|.................................................|


             |  Estimate         SE      LB CI      UB CI  Switchers 
-------------+------------------------------------------------------
         ATT | -1.102508   .7324499   -2.53811   .3330942          1 
    Effect_1 | -1.268285   .8306033  -2.896268    .359697          1 
    Effect_2 |   -.93673   .7125808  -2.333388   .4599284          1 
   Placebo_1 |  .0373064   .0975823  -.1539549   .2285677          1 
   Placebo_2 | -.0483462   .0886795  -.2221581   .1254657          1 
   Placebo_3 | -.0199312   .0745148  -.1659802   .1261179          1 
   Placebo_4 |  .2081139   .4476895  -.6693575   1.085585          1 
2022

e(H)[7,5]
             Estimate          SE       LB CI       UB CI   Switchers
      ATT  -1.1025077   .73244993  -2.5381096   .33309417           1
 Effect_1  -1.2682854   .83060327  -2.8962679   .35969696           1
 Effect_2  -.93672996   .71258082  -2.3333884   .45992845           1
Placebo_1   .03730642    .0975823   -.1539549   .22856773           1
Placebo_2  -.04834623   .08867953  -.22215812   .12546565           1
Placebo_3  -.01993115   .07451481  -.16598018   .12611787           1
Placebo_4   .20811388    .4476895  -.66935755   1.0855853           1
(20,789 missing values generated)
(4 real changes made)
(1 observation created)
(1 real change made)
(1 real change made, 1 to missing)
(1 real change made, 1 to missing)
(1 real change made, 1 to missing)
(file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_irs_16_22_n1_rate_irs_1_sample_urban95_excl2020_eventstudy.jpg not found)
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_irs_16_22_n1_rate_irs_1_sample_urban95_excl2020_eventstudy.jpg written in JPEG format
(1 observation deleted)
Placebo replications (100). This may take some time.
----+--- 1 ---+--- 2 ---+--- 3 ---+--- 4 ---+--- 5
..................................................     50
..................................................     100


Synthetic Difference-in-Differences Estimator

-----------------------------------------------------------------------------
 n2_rate_irs |     ATT     Std. Err.     t      P>|t|    [95% Conf. Interval]
-------------+---------------------------------------------------------------
     Treated |  -0.97781    0.54976    -1.78    0.075    -2.05531     0.09969
-----------------------------------------------------------------------------
95% CIs and p-values are based on large-sample approximations.
Refer to Arkhangelsky et al., (2021) for theoretical derivations.
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_irs_16_22_n2_rate_irs_0_sample_urban95_excl2020_trends2021.pdf saved as PDF format

added scalar:
              e(count) =  135

added scalar:
               e(mean) =  -.73591077
Synthetic Difference-in-differences

Boostrap replications (100), placebo mode.
|0% ----------------------------------------- 100%|
|.................................................|


             |  Estimate         SE      LB CI      UB CI  Switchers 
-------------+------------------------------------------------------
         ATT | -.9778086   .6091191  -2.171682   .2160649          1 
    Effect_1 | -1.140257   .7648366  -2.639336   .3588232          1 
    Effect_2 | -.8153605   .5377589  -1.869368   .2386469          1 
   Placebo_1 |  .0180762   .0631588   -.105715   .1418675          1 
   Placebo_2 | -.0324787   .1464891  -.3195974     .25464          1 
   Placebo_3 | -.0541408   .0831347  -.2170848   .1088033          1 
   Placebo_4 |  .1306524   .1052947  -.0757253     .33703          1 

WARNING: Restarted 4 bootstrap run(s) with no treated or control groups.
2022

e(H)[7,5]
             Estimate          SE       LB CI       UB CI   Switchers
      ATT  -.97780857   .60911909   -2.171682   .21606485           1
 Effect_1  -1.1402566   .76483664  -2.6393364   .35882319           1
 Effect_2  -.81536052   .53775888  -1.8693679   .23864688           1
Placebo_1   .01807622   .06315881  -.10571505   .14186748           1
Placebo_2  -.03247873   .14648913  -.31959742   .25463995           1
Placebo_3  -.05414077   .08313472  -.21708482   .10880327           1
Placebo_4   .13065236   .10529471  -.07572527   .33702999           1
(20,789 missing values generated)
(4 real changes made)
(1 observation created)
(1 real change made)
(1 real change made, 1 to missing)
(1 real change made, 1 to missing)
(1 real change made, 1 to missing)
(file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_irs_16_22_n2_rate_irs_0_sample_urban95_excl2020_eventstudy.jpg not found)
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_irs_16_22_n2_rate_irs_0_sample_urban95_excl2020_eventstudy.jpg written in JPEG format
(1 observation deleted)
Placebo replications (100). This may take some time.
----+--- 1 ---+--- 2 ---+--- 3 ---+--- 4 ---+--- 5
..................................................     50
..................................................     100


Synthetic Difference-in-Differences Estimator

-----------------------------------------------------------------------------
 n2_rate_irs |     ATT     Std. Err.     t      P>|t|    [95% Conf. Interval]
-------------+---------------------------------------------------------------
     Treated |  -0.97781    0.73082    -1.34    0.181    -2.41018     0.45457
-----------------------------------------------------------------------------
95% CIs and p-values are based on large-sample approximations.
Refer to Arkhangelsky et al., (2021) for theoretical derivations.
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_irs_16_22_n2_rate_irs_1_sample_urban95_excl2020_trends2021.pdf saved as PDF format

added scalar:
              e(count) =  135

added scalar:
               e(mean) =  -.73591077
Synthetic Difference-in-differences

Boostrap replications (100), placebo mode.
|0% ----------------------------------------- 100%|
|.................................................|


             |  Estimate         SE      LB CI      UB CI  Switchers 
-------------+------------------------------------------------------
         ATT | -.9778086   .6349671  -2.222344   .2667269          1 
    Effect_1 | -1.140257   .8344737  -2.775825   .4953118          1 
    Effect_2 | -.8153605   .6206075  -2.031751   .4010303          1 
   Placebo_1 |  .0180762   .0575789  -.0947785   .1309309          1 
   Placebo_2 | -.0324787   .1026918  -.2337547   .1687972          1 
   Placebo_3 | -.0541408   .0842051  -.2191827   .1109012          1 
   Placebo_4 |  .1306524   .1129335  -.0906973    .352002          1 
2022

e(H)[7,5]
             Estimate          SE       LB CI       UB CI   Switchers
      ATT  -.97780857   .63496708  -2.2223441   .26672692           1
 Effect_1  -1.1402566   .83447369   -2.775825   .49531181           1
 Effect_2  -.81536052   .62060754  -2.0317513   .40103026           1
Placebo_1   .01807622   .05757892  -.09477846    .1309309           1
Placebo_2  -.03247873    .1026918  -.23375467    .1687972           1
Placebo_3  -.05414077   .08420509  -.21918274   .11090119           1
Placebo_4   .13065236   .11293348  -.09069726   .35200199           1
(20,789 missing values generated)
(4 real changes made)
(1 observation created)
(1 real change made)
(1 real change made, 1 to missing)
(1 real change made, 1 to missing)
(1 real change made, 1 to missing)
(file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_irs_16_22_n2_rate_irs_1_sample_urban95_excl2020_eventstudy.jpg not found)
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_irs_16_22_n2_rate_irs_1_sample_urban95_excl2020_eventstudy.jpg written in JPEG format
(1 observation deleted)
Placebo replications (100). This may take some time.
----+--- 1 ---+--- 2 ---+--- 3 ---+--- 4 ---+--- 5
..................................................     50
..................................................     100


Synthetic Difference-in-Differences Estimator

-----------------------------------------------------------------------------
agi_rate_irs |     ATT     Std. Err.     t      P>|t|    [95% Conf. Interval]
-------------+---------------------------------------------------------------
     Treated |  -3.46392    1.44611    -2.40    0.017    -6.29824    -0.62961
-----------------------------------------------------------------------------
95% CIs and p-values are based on large-sample approximations.
Refer to Arkhangelsky et al., (2021) for theoretical derivations.
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_irs_16_22_agi_rate_irs_0_sample_urban95_excl2020_trends2021.pdf saved as PDF format

added scalar:
              e(count) =  135

added scalar:
               e(mean) =  -.29483641
Synthetic Difference-in-differences

Boostrap replications (100), placebo mode.
|0% ----------------------------------------- 100%|
|.................................................|


             |  Estimate         SE      LB CI      UB CI  Switchers 
-------------+------------------------------------------------------
         ATT | -3.463921   1.283182  -5.978957  -.9488849          1 
    Effect_1 | -3.823519   1.940542  -7.626981  -.0200572          1 
    Effect_2 | -3.104323   .9635548   -4.99289  -1.215755          1 
   Placebo_1 |  .0415558   .1683651  -.2884398   .3715513          1 
   Placebo_2 | -.1326947   .1480683  -.4229086   .1575192          1 
   Placebo_3 |  .0036231   .1078431  -.2077495   .2149957          1 
   Placebo_4 |   .305636   .2004753  -.0872956   .6985677          1 
2022

e(H)[7,5]
             Estimate          SE       LB CI       UB CI   Switchers
      ATT  -3.4639208   1.2831816  -5.9789568   -.9488849           1
 Effect_1  -3.8235189   1.9405417  -7.6269806  -.02005722           1
 Effect_2  -3.1043228    .9635548  -4.9928902  -1.2157554           1
Placebo_1   .04155575   .16836508  -.28843981   .37155131           1
Placebo_2  -.13269473   .14806831  -.42290863   .15751916           1
Placebo_3   .00362309   .10784315  -.20774948   .21499566           1
Placebo_4   .30563602   .20047533  -.08729563   .69856767           1
(20,789 missing values generated)
(4 real changes made)
(1 observation created)
(1 real change made)
(1 real change made, 1 to missing)
(1 real change made, 1 to missing)
(1 real change made, 1 to missing)
(file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_irs_16_22_agi_rate_irs_0_sample_urban95_excl2020_eventstudy.jpg not found)
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_irs_16_22_agi_rate_irs_0_sample_urban95_excl2020_eventstudy.jpg written in JPEG format
(1 observation deleted)
Placebo replications (100). This may take some time.
----+--- 1 ---+--- 2 ---+--- 3 ---+--- 4 ---+--- 5
..................................................     50
..................................................     100


Synthetic Difference-in-Differences Estimator

-----------------------------------------------------------------------------
agi_rate_irs |     ATT     Std. Err.     t      P>|t|    [95% Conf. Interval]
-------------+---------------------------------------------------------------
     Treated |  -3.46392    1.26998    -2.73    0.006    -5.95304    -0.97481
-----------------------------------------------------------------------------
95% CIs and p-values are based on large-sample approximations.
Refer to Arkhangelsky et al., (2021) for theoretical derivations.
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_irs_16_22_agi_rate_irs_1_sample_urban95_excl2020_trends2021.pdf saved as PDF format

added scalar:
              e(count) =  135

added scalar:
               e(mean) =  -.29483641
Synthetic Difference-in-differences

Boostrap replications (100), placebo mode.
|0% ----------------------------------------- 100%|
|.................................................|


             |  Estimate         SE      LB CI      UB CI  Switchers 
-------------+------------------------------------------------------
         ATT | -3.463921   .9876764  -5.399767  -1.528075          1 
    Effect_1 | -3.823519   1.205528  -6.186354  -1.460684          1 
    Effect_2 | -3.104323   1.053197  -5.168589  -1.040056          1 
   Placebo_1 |  .0415558   .2260987  -.4015976   .4847092          1 
   Placebo_2 | -.1326947   .1126395  -.3534681   .0880787          1 
   Placebo_3 |  .0036231   .0870929  -.1670791   .1743253          1 
   Placebo_4 |   .305636   .2104932  -.1069306   .7182026          1 
2022

e(H)[7,5]
             Estimate          SE       LB CI       UB CI   Switchers
      ATT  -3.4639208   .98767637  -5.3997665  -1.5280751           1
 Effect_1  -3.8235189   1.2055281  -6.1863539  -1.4606839           1
 Effect_2  -3.1043228   1.0531972  -5.1685894  -1.0400562           1
Placebo_1   .04155575   .22609867  -.40159765   .48470915           1
Placebo_2  -.13269473   .11263949  -.35346814   .08807867           1
Placebo_3   .00362309   .08709295  -.16707909   .17432527           1
Placebo_4   .30563602   .21049316  -.10693057   .71820261           1
(20,789 missing values generated)
(4 real changes made)
(1 observation created)
(1 real change made)
(1 real change made, 1 to missing)
(1 real change made, 1 to missing)
(1 real change made, 1 to missing)
(file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_irs_16_22_agi_rate_irs_1_sample_urban95_excl2020_eventstudy.jpg not found)
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_irs_16_22_agi_rate_irs_1_sample_urban95_excl2020_eventstudy.jpg written in JPEG format
(1 observation deleted)
(file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/tab_sdid_irs_16_22_sample_urban95_excl2020.tex not found)
(output written to C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/tab_sdid_irs_16_22_sample_urban95_excl2020.tex)
Placebo replications (100). This may take some time.
----+--- 1 ---+--- 2 ---+--- 3 ---+--- 4 ---+--- 5
..................................................     50
..................................................     100


Synthetic Difference-in-Differences Estimator

-----------------------------------------------------------------------------
 n1_rate_irs |     ATT     Std. Err.     t      P>|t|    [95% Conf. Interval]
-------------+---------------------------------------------------------------
     Treated |  -1.02753    0.50329    -2.04    0.041    -2.01396    -0.04110
-----------------------------------------------------------------------------
95% CIs and p-values are based on large-sample approximations.
Refer to Arkhangelsky et al., (2021) for theoretical derivations.
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_irs_16_22_n1_rate_irs_0_sample_urban95_trends2021.pdf saved as PDF format

added scalar:
              e(count) =  135

added scalar:
               e(mean) =  .1434552
Synthetic Difference-in-differences

Boostrap replications (100), placebo mode.
|0% ----------------------------------------- 100%|
|.................................................|


             |  Estimate         SE      LB CI      UB CI  Switchers 
-------------+------------------------------------------------------
         ATT | -1.027528   .4677924  -1.944401   -.110655          1 
    Effect_1 | -1.099209   .4403473   -1.96229  -.2361283          1 
    Effect_2 | -.9558469   .5577032  -2.048945   .1372513          1 
   Placebo_1 | -.0317664   .0693637  -.1677193   .1041866          1 
   Placebo_2 | -.0030152   .1366978   -.270943   .2649126          1 
   Placebo_3 |  -.105787   .1434232  -.3868965   .1753225          1 
   Placebo_4 | -.0616236   .1352266  -.3266677   .2034205          1 
   Placebo_5 |  .1869085   .1294227  -.0667599   .4405769          1 
2022

e(H)[8,5]
             Estimate          SE       LB CI       UB CI   Switchers
      ATT   -1.027528   .46779237  -1.9444011  -.11065497           1
 Effect_1  -1.0992091   .44034734  -1.9622899  -.23612831           1
 Effect_2  -.95584693    .5577032  -2.0489452   .13725134           1
Placebo_1  -.03176636   .06936374  -.16771928   .10418657           1
Placebo_2   -.0030152   .13669783  -.27094295   .26491256           1
Placebo_3  -.10578697   .14342322  -.38689648   .17532253           1
Placebo_4  -.06162357   .13522659  -.32666769   .20342054           1
Placebo_5   .18690851   .12942265  -.06675989   .44057691           1
(20,788 missing values generated)
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_irs_16_22_n1_rate_irs_0_sample_urban95_eventstudy.jpg written in JPEG format
Placebo replications (100). This may take some time.
----+--- 1 ---+--- 2 ---+--- 3 ---+--- 4 ---+--- 5
..................................................     50
..................................................     100


Synthetic Difference-in-Differences Estimator

-----------------------------------------------------------------------------
 n1_rate_irs |     ATT     Std. Err.     t      P>|t|    [95% Conf. Interval]
-------------+---------------------------------------------------------------
     Treated |  -1.02753    0.45713    -2.25    0.025    -1.92349    -0.13157
-----------------------------------------------------------------------------
95% CIs and p-values are based on large-sample approximations.
Refer to Arkhangelsky et al., (2021) for theoretical derivations.
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_irs_16_22_n1_rate_irs_1_sample_urban95_trends2021.pdf saved as PDF format

added scalar:
              e(count) =  135

added scalar:
               e(mean) =  .1434552
Synthetic Difference-in-differences

Boostrap replications (100), placebo mode.
|0% ----------------------------------------- 100%|
|.................................................|


             |  Estimate         SE      LB CI      UB CI  Switchers 
-------------+------------------------------------------------------
         ATT | -1.027528   .4441013  -1.897967  -.1570895          1 
    Effect_1 | -1.099209   .4821006  -2.044126   -.154292          1 
    Effect_2 | -.9558469    .514712  -1.964682   .0529886          1 
   Placebo_1 | -.0317664   .0724693  -.1738061   .1102734          1 
   Placebo_2 | -.0030152   .1746357  -.3453011   .3392707          1 
   Placebo_3 |  -.105787   .1649073  -.4290053   .2174314          1 
   Placebo_4 | -.0616236   .1611137  -.3774064   .2541592          1 
   Placebo_5 |  .1869085   .1594133  -.1255415   .4993586          1 
2022

e(H)[8,5]
             Estimate          SE       LB CI       UB CI   Switchers
      ATT   -1.027528   .44410127  -1.8979665  -.15708952           1
 Effect_1  -1.0992091   .48210056  -2.0441262  -.15429199           1
 Effect_2  -.95584693   .51471198  -1.9646824   .05298856           1
Placebo_1  -.03176636   .07246927  -.17380613   .11027342           1
Placebo_2   -.0030152   .17463568  -.34530113   .33927074           1
Placebo_3  -.10578697   .16490732  -.42900533   .21743138           1
Placebo_4  -.06162357   .16111368  -.37740638   .25415924           1
Placebo_5   .18690851   .15941329  -.12554153   .49935855           1
(20,788 missing values generated)
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_irs_16_22_n1_rate_irs_1_sample_urban95_eventstudy.jpg written in JPEG format
Placebo replications (100). This may take some time.
----+--- 1 ---+--- 2 ---+--- 3 ---+--- 4 ---+--- 5
..................................................     50
..................................................     100


Synthetic Difference-in-Differences Estimator

-----------------------------------------------------------------------------
 n2_rate_irs |     ATT     Std. Err.     t      P>|t|    [95% Conf. Interval]
-------------+---------------------------------------------------------------
     Treated |  -0.91126    0.55129    -1.65    0.098    -1.99176     0.16924
-----------------------------------------------------------------------------
95% CIs and p-values are based on large-sample approximations.
Refer to Arkhangelsky et al., (2021) for theoretical derivations.
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_irs_16_22_n2_rate_irs_0_sample_urban95_trends2021.pdf saved as PDF format

added scalar:
              e(count) =  135

added scalar:
               e(mean) =  -.73591077
Synthetic Difference-in-differences

Boostrap replications (100), placebo mode.
|0% ----------------------------------------- 100%|
|.................................................|


             |  Estimate         SE      LB CI      UB CI  Switchers 
-------------+------------------------------------------------------
         ATT | -.9112626   .4128248  -1.720399   -.102126          1 
    Effect_1 | -1.022893   .4179819  -1.842138  -.2036487          1 
    Effect_2 | -.7996321    .481741  -1.743845   .1445803          1 
   Placebo_1 |  -.027774   .0415956  -.1093014   .0537534          1 
   Placebo_2 |  .0058348   .1577018  -.3032607   .3149302          1 
   Placebo_3 | -.0575165    .136693  -.3254347   .2104018          1 
   Placebo_4 | -.0787714   .1269859  -.3276637   .1701209          1 
   Placebo_5 |  .1249803   .1673727  -.2030702   .4530308          1 
2022

e(H)[8,5]
             Estimate          SE       LB CI       UB CI   Switchers
      ATT  -.91126262   .41282479  -1.7203992  -.10212603           1
 Effect_1  -1.0228931   .41798187  -1.8421376  -.20364866           1
 Effect_2  -.79963212   .48174102  -1.7438445   .14458028           1
Placebo_1    -.027774   .04159563  -.10930143   .05375344           1
Placebo_2   .00583476   .15770175  -.30326068   .31493019           1
Placebo_3  -.05751647   .13669299  -.32543474    .2104018           1
Placebo_4  -.07877142   .12698587  -.32766373   .17012089           1
Placebo_5   .12498028    .1673727  -.20307021   .45303078           1
(20,788 missing values generated)
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_irs_16_22_n2_rate_irs_0_sample_urban95_eventstudy.jpg written in JPEG format
Placebo replications (100). This may take some time.
----+--- 1 ---+--- 2 ---+--- 3 ---+--- 4 ---+--- 5
..................................................     50
..................................................     100


Synthetic Difference-in-Differences Estimator

-----------------------------------------------------------------------------
 n2_rate_irs |     ATT     Std. Err.     t      P>|t|    [95% Conf. Interval]
-------------+---------------------------------------------------------------
     Treated |  -0.91126    0.50564    -1.80    0.072    -1.90229     0.07977
-----------------------------------------------------------------------------
95% CIs and p-values are based on large-sample approximations.
Refer to Arkhangelsky et al., (2021) for theoretical derivations.
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_irs_16_22_n2_rate_irs_1_sample_urban95_trends2021.pdf saved as PDF format

added scalar:
              e(count) =  135

added scalar:
               e(mean) =  -.73591077
Synthetic Difference-in-differences

Boostrap replications (100), placebo mode.
|0% ----------------------------------------- 100%|
|.................................................|


             |  Estimate         SE      LB CI      UB CI  Switchers 
-------------+------------------------------------------------------
         ATT | -.9112626   .4602956  -1.813442  -.0090832          1 
    Effect_1 | -1.022893   .4668187  -1.937858  -.1079285          1 
    Effect_2 | -.7996321   .5042649  -1.787991   .1887271          1 
   Placebo_1 |  -.027774   .1364482  -.2952125   .2396645          1 
   Placebo_2 |  .0058348   .2327561  -.4503672   .4620367          1 
   Placebo_3 | -.0575165   .1565095  -.3642751   .2492422          1 
   Placebo_4 | -.0787714   .2185309   -.507092   .3495492          1 
   Placebo_5 |  .1249803   .4816003  -.8189563   1.068917          1 
2022

e(H)[8,5]
             Estimate          SE       LB CI       UB CI   Switchers
      ATT  -.91126262    .4602956   -1.813442  -.00908324           1
 Effect_1  -1.0228931   .46681871  -1.9378578  -.10792846           1
 Effect_2  -.79963212   .50426493  -1.7879914   .18872714           1
Placebo_1    -.027774    .1364482  -.29521247   .23966447           1
Placebo_2   .00583476   .23275609  -.45036717   .46203668           1
Placebo_3  -.05751647   .15650953  -.36427515    .2492422           1
Placebo_4  -.07877142    .2185309  -.50709199   .34954916           1
Placebo_5   .12498028    .4816003  -.81895631   1.0689169           1
(20,788 missing values generated)
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_irs_16_22_n2_rate_irs_1_sample_urban95_eventstudy.jpg written in JPEG format
Placebo replications (100). This may take some time.
----+--- 1 ---+--- 2 ---+--- 3 ---+--- 4 ---+--- 5
..................................................     50
..................................................     100


Synthetic Difference-in-Differences Estimator

-----------------------------------------------------------------------------
agi_rate_irs |     ATT     Std. Err.     t      P>|t|    [95% Conf. Interval]
-------------+---------------------------------------------------------------
     Treated |  -2.88396    0.85173    -3.39    0.001    -4.55332    -1.21460
-----------------------------------------------------------------------------
95% CIs and p-values are based on large-sample approximations.
Refer to Arkhangelsky et al., (2021) for theoretical derivations.
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_irs_16_22_agi_rate_irs_0_sample_urban95_trends2021.pdf saved as PDF format

added scalar:
              e(count) =  135

added scalar:
               e(mean) =  -.29483641
Synthetic Difference-in-differences

Boostrap replications (100), placebo mode.
|0% ----------------------------------------- 100%|
|.................................................|


             |  Estimate         SE      LB CI      UB CI  Switchers 
-------------+------------------------------------------------------
         ATT | -2.883959   .8906591  -4.629651  -1.138267          1 
    Effect_1 | -2.801384   1.082312  -4.922716  -.6800523          1 
    Effect_2 | -2.966534   1.013089  -4.952189  -.9808798          1 
   Placebo_1 | -.1274314   .0972124  -.3179677   .0631049          1 
   Placebo_2 | -.0937712   .1790912  -.4447899   .2572475          1 
   Placebo_3 | -.2804366   .2106289  -.6932692    .132396          1 
   Placebo_4 | -.0886882   .2711866  -.6202139   .4428375          1 
   Placebo_5 |  .2747592   .2017509  -.1206726    .670191          1 
2022

e(H)[8,5]
             Estimate          SE       LB CI       UB CI   Switchers
      ATT  -2.8839591   .89065915   -4.629651  -1.1382672           1
 Effect_1  -2.8013839    1.082312  -4.9227155  -.68005228           1
 Effect_2  -2.9665343    1.013089  -4.9521888  -.98087981           1
Placebo_1   -.1274314   .09721239   -.3179677   .06310489           1
Placebo_2  -.09377119   .17909119  -.44478991   .25724753           1
Placebo_3  -.28043657   .21062888  -.69326917   .13239603           1
Placebo_4  -.08868821    .2711866  -.62021395   .44283753           1
Placebo_5   .27475921   .20175091  -.12067257   .67019099           1
(20,788 missing values generated)
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_irs_16_22_agi_rate_irs_0_sample_urban95_eventstudy.jpg written in JPEG format
Placebo replications (100). This may take some time.
----+--- 1 ---+--- 2 ---+--- 3 ---+--- 4 ---+--- 5
..................................................     50
..................................................     100


Synthetic Difference-in-Differences Estimator

-----------------------------------------------------------------------------
agi_rate_irs |     ATT     Std. Err.     t      P>|t|    [95% Conf. Interval]
-------------+---------------------------------------------------------------
     Treated |  -2.88396    0.99465    -2.90    0.004    -4.83344    -0.93447
-----------------------------------------------------------------------------
95% CIs and p-values are based on large-sample approximations.
Refer to Arkhangelsky et al., (2021) for theoretical derivations.
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_irs_16_22_agi_rate_irs_1_sample_urban95_trends2021.pdf saved as PDF format

added scalar:
              e(count) =  135

added scalar:
               e(mean) =  -.29483641
Synthetic Difference-in-differences

Boostrap replications (100), placebo mode.
|0% ----------------------------------------- 100%|
|.................................................|


             |  Estimate         SE      LB CI      UB CI  Switchers 
-------------+------------------------------------------------------
         ATT | -2.883959   .7930232  -4.438285  -1.329634          1 
    Effect_1 | -2.801384   .9555734  -4.674308    -.92846          1 
    Effect_2 | -2.966534   .9681768  -4.864161  -1.068908          1 
   Placebo_1 | -.1274314   .1369112  -.3957773   .1409145          1 
   Placebo_2 | -.0937712   .2831453   -.648736   .4611936          1 
   Placebo_3 | -.2804366   .2720258  -.8136072   .2527341          1 
   Placebo_4 | -.0886882   .3611072  -.7964583   .6190819          1 
   Placebo_5 |  .2747592   .2968604  -.3070871   .8566055          1 
2022

e(H)[8,5]
             Estimate          SE       LB CI       UB CI   Switchers
      ATT  -2.8839591    .7930232  -4.4382846  -1.3296336           1
 Effect_1  -2.8013839   .95557343  -4.6743078  -.92845998           1
 Effect_2  -2.9665343   .96817684  -4.8641609  -1.0689077           1
Placebo_1   -.1274314   .13691115  -.39577726   .14091445           1
Placebo_2  -.09377119   .28314531    -.648736   .46119363           1
Placebo_3  -.28043657   .27202583   -.8136072   .25273406           1
Placebo_4  -.08868821    .3611072  -.79645832   .61908191           1
Placebo_5   .27475921   .29686035  -.30708709   .85660551           1
(20,788 missing values generated)
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_irs_16_22_agi_rate_irs_1_sample_urban95_eventstudy.jpg written in JPEG format
(output written to C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/tab_sdid_irs_16_22_sample_urban95.tex)
(44 real changes made)
Placebo replications (100). This may take some time.
----+--- 1 ---+--- 2 ---+--- 3 ---+--- 4 ---+--- 5
..................................................     50
..................................................     100


Synthetic Difference-in-Differences Estimator

-----------------------------------------------------------------------------
 n1_rate_irs |     ATT     Std. Err.     t      P>|t|    [95% Conf. Interval]
-------------+---------------------------------------------------------------
     Treated |  -1.15207    0.63088    -1.83    0.068    -2.38858     0.08444
-----------------------------------------------------------------------------
95% CIs and p-values are based on large-sample approximations.
Refer to Arkhangelsky et al., (2021) for theoretical derivations.
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_irs_16_22_n1_rate_irs_0_sample_urban95_covid_excl2020_trends2021.pdf saved as PDF format

added scalar:
              e(count) =  44

added scalar:
               e(mean) =  .1434552
Synthetic Difference-in-differences

Boostrap replications (100), placebo mode.
|0% ----------------------------------------- 100%|
|.................................................|


             |  Estimate         SE      LB CI      UB CI  Switchers 
-------------+------------------------------------------------------
         ATT | -1.152069   .7490935  -2.620292    .316154          1 
    Effect_1 | -1.388216    .848107  -3.050506   .2740735          1 
    Effect_2 |  -.915922   .7393252  -2.364999   .5331553          1 
   Placebo_1 |   .072134   .1782486  -.2772332   .4215012          1 
   Placebo_2 |  -.066573   .1846952  -.4285756   .2954297          1 
   Placebo_3 | -.0361287   .2692581  -.5638746   .4916171          1 
   Placebo_4 |  .3171449   .2337438  -.1409929   .7752827          1 
2022

e(H)[7,5]
             Estimate          SE       LB CI       UB CI   Switchers
      ATT  -1.1520692   .74909347  -2.6202924   .31615405           1
 Effect_1  -1.3882163   .84810704  -3.0505061   .27407348           1
 Effect_2    -.915922   .73932516  -2.3649993   .53315531           1
Placebo_1   .07213397   .17824858  -.27723324   .42150118           1
Placebo_2  -.06657296   .18469522  -.42857558   .29542967           1
Placebo_3  -.03612874   .26925807  -.56387456   .49161708           1
Placebo_4   .31714491   .23374378  -.14099289   .77528272           1
(20,789 missing values generated)
(4 real changes made)
(1 observation created)
(1 real change made)
(1 real change made, 1 to missing)
(1 real change made, 1 to missing)
(1 real change made, 1 to missing)
(file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_irs_16_22_n1_rate_irs_0_sample_urban95_covid_excl2020_eventstudy.jpg not found)
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_irs_16_22_n1_rate_irs_0_sample_urban95_covid_excl2020_eventstudy.jpg written in JPEG format
(1 observation deleted)
Placebo replications (100). This may take some time.
----+--- 1 ---+--- 2 ---+--- 3 ---+--- 4 ---+--- 5
..................................................     50
..................................................     100


Synthetic Difference-in-Differences Estimator

-----------------------------------------------------------------------------
 n1_rate_irs |     ATT     Std. Err.     t      P>|t|    [95% Conf. Interval]
-------------+---------------------------------------------------------------
     Treated |  -1.15207    0.69122    -1.67    0.096    -2.50683     0.20269
-----------------------------------------------------------------------------
95% CIs and p-values are based on large-sample approximations.
Refer to Arkhangelsky et al., (2021) for theoretical derivations.
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_irs_16_22_n1_rate_irs_1_sample_urban95_covid_excl2020_trends2021.pdf saved as PDF format

added scalar:
              e(count) =  44

added scalar:
               e(mean) =  .1434552
Synthetic Difference-in-differences

Boostrap replications (100), placebo mode.
|0% ----------------------------------------- 100%|
|.................................................|


             |  Estimate         SE      LB CI      UB CI  Switchers 
-------------+------------------------------------------------------
         ATT | -1.152069    .723542  -2.570212   .2660732          1 
    Effect_1 | -1.388216   .8226555  -3.000621   .2241885          1 
    Effect_2 |  -.915922    .708171  -2.303937   .4720932          1 
   Placebo_1 |   .072134   .1827982  -.2861504   .4304184          1 
   Placebo_2 |  -.066573   .1446929   -.350171   .2170251          1 
   Placebo_3 | -.0361287    .274303  -.5737625    .501505          1 
   Placebo_4 |  .3171449    .220221  -.1144883   .7487781          1 
2022

e(H)[7,5]
             Estimate          SE       LB CI       UB CI   Switchers
      ATT  -1.1520692   .72354203  -2.5702115   .26607323           1
 Effect_1  -1.3882163   .82265551  -3.0006211   .22418848           1
 Effect_2    -.915922   .70817104  -2.3039372   .47209324           1
Placebo_1   .07213397   .18279816  -.28615042   .43041837           1
Placebo_2  -.06657296   .14469287  -.35017098   .21702507           1
Placebo_3  -.03612874   .27430295  -.57376253   .50150505           1
Placebo_4   .31714491   .22022101  -.11448827    .7487781           1
(20,789 missing values generated)
(4 real changes made)
(1 observation created)
(1 real change made)
(1 real change made, 1 to missing)
(1 real change made, 1 to missing)
(1 real change made, 1 to missing)
(file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_irs_16_22_n1_rate_irs_1_sample_urban95_covid_excl2020_eventstudy.jpg not found)
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_irs_16_22_n1_rate_irs_1_sample_urban95_covid_excl2020_eventstudy.jpg written in JPEG format
(1 observation deleted)
Placebo replications (100). This may take some time.
----+--- 1 ---+--- 2 ---+--- 3 ---+--- 4 ---+--- 5
..................................................     50
..................................................     100


Synthetic Difference-in-Differences Estimator

-----------------------------------------------------------------------------
 n2_rate_irs |     ATT     Std. Err.     t      P>|t|    [95% Conf. Interval]
-------------+---------------------------------------------------------------
     Treated |  -1.08342    0.84169    -1.29    0.198    -2.73311     0.56628
-----------------------------------------------------------------------------
95% CIs and p-values are based on large-sample approximations.
Refer to Arkhangelsky et al., (2021) for theoretical derivations.
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_irs_16_22_n2_rate_irs_0_sample_urban95_covid_excl2020_trends2021.pdf saved as PDF format

added scalar:
              e(count) =  44

added scalar:
               e(mean) =  -.73591077
Synthetic Difference-in-differences

Boostrap replications (100), placebo mode.
|0% ----------------------------------------- 100%|
|.................................................|


             |  Estimate         SE      LB CI      UB CI  Switchers 
-------------+------------------------------------------------------
         ATT | -1.083415   .6686748  -2.394018   .2271878          1 
    Effect_1 | -1.319143   .7696524  -2.827661   .1893761          1 
    Effect_2 | -.8476872   .6364976  -2.095222   .3998481          1 
   Placebo_1 |  .0353787   .1552149  -.2688424   .3395999          1 
   Placebo_2 | -.0440559   .1834225  -.4035641   .3154523          1 
   Placebo_3 | -.1014051   .3225967  -.7336947   .5308845          1 
   Placebo_4 |  .2140688   .2527272  -.2812764   .7094141          1 
2022

e(H)[7,5]
             Estimate          SE       LB CI       UB CI   Switchers
      ATT  -1.0834149   .66867485  -2.3940176   .22718778           1
 Effect_1  -1.3191426    .7696524  -2.8276613   .18937606           1
 Effect_2  -.84768722   .63649759  -2.0952225   .39984806           1
Placebo_1   .03537873   .15521489  -.26884244   .33959991           1
Placebo_2  -.04405594   .18342255  -.40356414   .31545226           1
Placebo_3   -.1014051   .32259673  -.73369468   .53088449           1
Placebo_4   .21406882   .25272717  -.28127643   .70941406           1
(20,789 missing values generated)
(4 real changes made)
(1 observation created)
(1 real change made)
(1 real change made, 1 to missing)
(1 real change made, 1 to missing)
(1 real change made, 1 to missing)
(file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_irs_16_22_n2_rate_irs_0_sample_urban95_covid_excl2020_eventstudy.jpg not found)
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_irs_16_22_n2_rate_irs_0_sample_urban95_covid_excl2020_eventstudy.jpg written in JPEG format
(1 observation deleted)
Placebo replications (100). This may take some time.
----+--- 1 ---+--- 2 ---+--- 3 ---+--- 4 ---+--- 5
..................................................     50
..................................................     100


Synthetic Difference-in-Differences Estimator

-----------------------------------------------------------------------------
 n2_rate_irs |     ATT     Std. Err.     t      P>|t|    [95% Conf. Interval]
-------------+---------------------------------------------------------------
     Treated |  -1.08342    0.78592    -1.38    0.168    -2.62379     0.45696
-----------------------------------------------------------------------------
95% CIs and p-values are based on large-sample approximations.
Refer to Arkhangelsky et al., (2021) for theoretical derivations.
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_irs_16_22_n2_rate_irs_1_sample_urban95_covid_excl2020_trends2021.pdf saved as PDF format

added scalar:
              e(count) =  44

added scalar:
               e(mean) =  -.73591077
Synthetic Difference-in-differences

Boostrap replications (100), placebo mode.
|0% ----------------------------------------- 100%|
|.................................................|


             |  Estimate         SE      LB CI      UB CI  Switchers 
-------------+------------------------------------------------------
         ATT | -1.083415   .7178079  -2.490318   .3234885          1 
    Effect_1 | -1.319143     .83528  -2.956291   .3180061          1 
    Effect_2 | -.8476872   .6683456  -2.157645   .4622702          1 
   Placebo_1 |  .0353787   .1342193  -.2276911   .2984486          1 
   Placebo_2 | -.0440559   .1900955  -.4166432   .3285313          1 
   Placebo_3 | -.1014051   .3109816  -.7109291   .5081189          1 
   Placebo_4 |  .2140688   .2596777  -.2948994    .723037          1 
2022

e(H)[7,5]
             Estimate          SE       LB CI       UB CI   Switchers
      ATT  -1.0834149   .71780788  -2.4903184   .32348852           1
 Effect_1  -1.3191426   .83527996  -2.9562914   .31800608           1
 Effect_2  -.84768722    .6683456  -2.1576446   .46227017           1
Placebo_1   .03537873   .13421932  -.22769114   .29844861           1
Placebo_2  -.04405594   .19009553  -.41664317   .32853129           1
Placebo_3   -.1014051   .31098164  -.71092911   .50811892           1
Placebo_4   .21406882   .25967766   -.2948994   .72303704           1
(20,789 missing values generated)
(4 real changes made)
(1 observation created)
(1 real change made)
(1 real change made, 1 to missing)
(1 real change made, 1 to missing)
(1 real change made, 1 to missing)
(file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_irs_16_22_n2_rate_irs_1_sample_urban95_covid_excl2020_eventstudy.jpg not found)
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_irs_16_22_n2_rate_irs_1_sample_urban95_covid_excl2020_eventstudy.jpg written in JPEG format
(1 observation deleted)
Placebo replications (100). This may take some time.
----+--- 1 ---+--- 2 ---+--- 3 ---+--- 4 ---+--- 5
..................................................     50
..................................................     100


Synthetic Difference-in-Differences Estimator

-----------------------------------------------------------------------------
agi_rate_irs |     ATT     Std. Err.     t      P>|t|    [95% Conf. Interval]
-------------+---------------------------------------------------------------
     Treated |  -3.33745    1.08994    -3.06    0.002    -5.47369    -1.20122
-----------------------------------------------------------------------------
95% CIs and p-values are based on large-sample approximations.
Refer to Arkhangelsky et al., (2021) for theoretical derivations.
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_irs_16_22_agi_rate_irs_0_sample_urban95_covid_excl2020_trends2021.pdf saved as PDF format

added scalar:
              e(count) =  44

added scalar:
               e(mean) =  -.29483641
Synthetic Difference-in-differences

Boostrap replications (100), placebo mode.
|0% ----------------------------------------- 100%|
|.................................................|


             |  Estimate         SE      LB CI      UB CI  Switchers 
-------------+------------------------------------------------------
         ATT | -3.337454   1.043234  -5.382193  -1.292715          1 
    Effect_1 | -3.229969   1.151046  -5.486019  -.9739187          1 
    Effect_2 | -3.444939   1.306422  -6.005526  -.8843525          1 
   Placebo_1 | -.1283298   .2353181  -.5895532   .3328936          1 
   Placebo_2 | -.3400605    .223032  -.7772031   .0970822          1 
   Placebo_3 | -.1713418   .1794577  -.5230789   .1803954          1 
   Placebo_4 |  .3927211   .2159292  -.0305001   .8159424          1 
2022

e(H)[7,5]
             Estimate          SE       LB CI       UB CI   Switchers
      ATT  -3.3374541   1.0432343  -5.3821934  -1.2927148           1
 Effect_1  -3.2299689    1.151046  -5.4860192  -.97391866           1
 Effect_2  -3.4449393   1.3064219  -6.0055262  -.88435247           1
Placebo_1  -.12832982   .23531806  -.58955321   .33289357           1
Placebo_2  -.34006046   .22303197  -.77720311    .0970822           1
Placebo_3  -.17134179   .17945773  -.52307893   .18039536           1
Placebo_4   .39272114   .21592922  -.03050014   .81594242           1
(20,789 missing values generated)
(4 real changes made)
(1 observation created)
(1 real change made)
(1 real change made, 1 to missing)
(1 real change made, 1 to missing)
(1 real change made, 1 to missing)
(file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_irs_16_22_agi_rate_irs_0_sample_urban95_covid_excl2020_eventstudy.jpg not found)
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_irs_16_22_agi_rate_irs_0_sample_urban95_covid_excl2020_eventstudy.jpg written in JPEG format
(1 observation deleted)
Placebo replications (100). This may take some time.
----+--- 1 ---+--- 2 ---+--- 3 ---+--- 4 ---+--- 5
..................................................     50
..................................................     100


Synthetic Difference-in-Differences Estimator

-----------------------------------------------------------------------------
agi_rate_irs |     ATT     Std. Err.     t      P>|t|    [95% Conf. Interval]
-------------+---------------------------------------------------------------
     Treated |  -3.33745    1.21358    -2.75    0.006    -5.71602    -0.95889
-----------------------------------------------------------------------------
95% CIs and p-values are based on large-sample approximations.
Refer to Arkhangelsky et al., (2021) for theoretical derivations.
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_irs_16_22_agi_rate_irs_1_sample_urban95_covid_excl2020_trends2021.pdf saved as PDF format

added scalar:
              e(count) =  44

added scalar:
               e(mean) =  -.29483641
Synthetic Difference-in-differences

Boostrap replications (100), placebo mode.
|0% ----------------------------------------- 100%|
|.................................................|


             |  Estimate         SE      LB CI      UB CI  Switchers 
-------------+------------------------------------------------------
         ATT | -3.337454   1.139965  -5.571786  -1.103122          1 
    Effect_1 | -3.229969   1.233992  -5.648593  -.8113451          1 
    Effect_2 | -3.444939   1.314127  -6.020628  -.8692511          1 
   Placebo_1 | -.1283298    .260937  -.6397664   .3831068          1 
   Placebo_2 | -.3400605   .2369734  -.8045283   .1244074          1 
   Placebo_3 | -.1713418   .2940623  -.7477038   .4050202          1 
   Placebo_4 |  .3927211   .3393236  -.2723531   1.057795          1 
2022

e(H)[7,5]
             Estimate          SE       LB CI       UB CI   Switchers
      ATT  -3.3374541   1.1399655  -5.5717865  -1.1031218           1
 Effect_1  -3.2299689   1.2339917  -5.6485927  -.81134514           1
 Effect_2  -3.4449393   1.3141267  -6.0206276  -.86925106           1
Placebo_1  -.12832982   .26093705  -.63976644    .3831068           1
Placebo_2  -.34006046    .2369734  -.80452832   .12440741           1
Placebo_3  -.17134179   .29406225  -.74770381   .40502023           1
Placebo_4   .39272114   .33932357  -.27235306   1.0577953           1
(20,789 missing values generated)
(4 real changes made)
(1 observation created)
(1 real change made)
(1 real change made, 1 to missing)
(1 real change made, 1 to missing)
(1 real change made, 1 to missing)
(file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_irs_16_22_agi_rate_irs_1_sample_urban95_covid_excl2020_eventstudy.jpg not found)
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_irs_16_22_agi_rate_irs_1_sample_urban95_covid_excl2020_eventstudy.jpg written in JPEG format
(1 observation deleted)
(file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/tab_sdid_irs_16_22_sample_urban95_covid_excl2020.tex not found)
(output written to C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/tab_sdid_irs_16_22_sample_urban95_covid_excl2020.tex)
Placebo replications (100). This may take some time.
----+--- 1 ---+--- 2 ---+--- 3 ---+--- 4 ---+--- 5
..................................................     50
..................................................     100


Synthetic Difference-in-Differences Estimator

-----------------------------------------------------------------------------
 n1_rate_irs |     ATT     Std. Err.     t      P>|t|    [95% Conf. Interval]
-------------+---------------------------------------------------------------
     Treated |  -0.98741    0.62505    -1.58    0.114    -2.21249     0.23767
-----------------------------------------------------------------------------
95% CIs and p-values are based on large-sample approximations.
Refer to Arkhangelsky et al., (2021) for theoretical derivations.
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_irs_16_22_n1_rate_irs_0_sample_urban95_covid_trends2021.pdf saved as PDF format

added scalar:
              e(count) =  44

added scalar:
               e(mean) =  .1434552
Synthetic Difference-in-differences

Boostrap replications (100), placebo mode.
|0% ----------------------------------------- 100%|
|.................................................|


             |  Estimate         SE      LB CI      UB CI  Switchers 
-------------+------------------------------------------------------
         ATT | -.9874128   .5264422  -2.019239   .0444139          1 
    Effect_1 |  -1.16156   .5309204  -2.202164  -.1209561          1 
    Effect_2 | -.8132654   .6189419  -2.026392   .3998608          1 
   Placebo_1 | -.0899214   .1370615   -.358562   .1787192          1 
   Placebo_2 |  .1124346   .2265525  -.3316083   .5564775          1 
   Placebo_3 | -.0403851   .2156777  -.4631133   .3823432          1 
   Placebo_4 | -.0208514   .2754365  -.5607069   .5190041          1 
   Placebo_5 |  .3129561     .24387  -.1650292   .7909414          1 
2022

e(H)[8,5]
             Estimate          SE       LB CI       UB CI   Switchers
      ATT  -.98741278   .52644218  -2.0192395   .04441391           1
 Effect_1  -1.1615601   .53092042  -2.2021642  -.12095611           1
 Effect_2  -.81326542   .61894195  -2.0263916   .39986079           1
Placebo_1  -.08992137   .13706153  -.35856197   .17871923           1
Placebo_2   .11243461   .22655251  -.33160832   .55647753           1
Placebo_3  -.04038507   .21567768  -.46311332   .38234318           1
Placebo_4  -.02085142   .27543649  -.56070695   .51900411           1
Placebo_5   .31295611   .24387003  -.16502916   .79094137           1
(20,788 missing values generated)
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_irs_16_22_n1_rate_irs_0_sample_urban95_covid_eventstudy.jpg written in JPEG format
Placebo replications (100). This may take some time.
----+--- 1 ---+--- 2 ---+--- 3 ---+--- 4 ---+--- 5
..................................................     50
..................................................     100


Synthetic Difference-in-Differences Estimator

-----------------------------------------------------------------------------
 n1_rate_irs |     ATT     Std. Err.     t      P>|t|    [95% Conf. Interval]
-------------+---------------------------------------------------------------
     Treated |  -0.98741    0.50779    -1.94    0.052    -1.98266     0.00783
-----------------------------------------------------------------------------
95% CIs and p-values are based on large-sample approximations.
Refer to Arkhangelsky et al., (2021) for theoretical derivations.
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_irs_16_22_n1_rate_irs_1_sample_urban95_covid_trends2021.pdf saved as PDF format

added scalar:
              e(count) =  44

added scalar:
               e(mean) =  .1434552
Synthetic Difference-in-differences

Boostrap replications (100), placebo mode.
|0% ----------------------------------------- 100%|
|.................................................|


             |  Estimate         SE      LB CI      UB CI  Switchers 
-------------+------------------------------------------------------
         ATT | -.9874128   .5527775  -2.070857   .0960311          1 
    Effect_1 |  -1.16156   .6091192  -2.355434   .0323136          1 
    Effect_2 | -.8132654   .5710132  -1.932451   .3059205          1 
   Placebo_1 | -.0899214   .1598391   -.403206   .2233632          1 
   Placebo_2 |  .1124346   .2214704  -.3216474   .5465166          1 
   Placebo_3 | -.0403851   .2547921  -.5397776   .4590075          1 
   Placebo_4 | -.0208514   .5079397  -1.016413   .9747104          1 
   Placebo_5 |  .3129561   .3239086  -.3219048    .947817          1 
2022

e(H)[8,5]
             Estimate          SE       LB CI       UB CI   Switchers
      ATT  -.98741278   .55277747  -2.0708566   .09603106           1
 Effect_1  -1.1615601   .60911923  -2.3554338   .03231356           1
 Effect_2  -.81326542   .57101321  -1.9324513   .30592048           1
Placebo_1  -.08992137   .15983908  -.40320597   .22336323           1
Placebo_2   .11243461   .22147042  -.32164742   .54651664           1
Placebo_3  -.04038507    .2547921  -.53977759   .45900746           1
Placebo_4  -.02085142    .5079397  -1.0164132   .97471039           1
Placebo_5   .31295611   .32390861  -.32190476   .94781698           1
(20,788 missing values generated)
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_irs_16_22_n1_rate_irs_1_sample_urban95_covid_eventstudy.jpg written in JPEG format
Placebo replications (100). This may take some time.
----+--- 1 ---+--- 2 ---+--- 3 ---+--- 4 ---+--- 5
..................................................     50
..................................................     100


Synthetic Difference-in-Differences Estimator

-----------------------------------------------------------------------------
 n2_rate_irs |     ATT     Std. Err.     t      P>|t|    [95% Conf. Interval]
-------------+---------------------------------------------------------------
     Treated |  -0.89182    0.62515    -1.43    0.154    -2.11710     0.33346
-----------------------------------------------------------------------------
95% CIs and p-values are based on large-sample approximations.
Refer to Arkhangelsky et al., (2021) for theoretical derivations.
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_irs_16_22_n2_rate_irs_0_sample_urban95_covid_trends2021.pdf saved as PDF format

added scalar:
              e(count) =  44

added scalar:
               e(mean) =  -.73591077
Synthetic Difference-in-differences

Boostrap replications (100), placebo mode.
|0% ----------------------------------------- 100%|
|.................................................|


             |  Estimate         SE      LB CI      UB CI  Switchers 
-------------+------------------------------------------------------
         ATT | -.8918209   .5330864   -1.93667   .1530285          1 
    Effect_1 | -1.076001   .5921039  -2.236524    .084523          1 
    Effect_2 | -.7076411   .5754013  -1.835428   .4201456          1 
   Placebo_1 | -.0735112   .1019888  -.2734094   .1263869          1 
   Placebo_2 |  .1176405   .2636341  -.3990823   .6343633          1 
   Placebo_3 |  .0285917   .2714608  -.5034714   .5606548          1 
   Placebo_4 | -.0479237   .3049413  -.6456087   .5497613          1 
   Placebo_5 |  .2557015   .3057856  -.3436383   .8550414          1 
2022

e(H)[8,5]
             Estimate          SE       LB CI       UB CI   Switchers
      ATT  -.89182086   .53308639  -1.9366702   .15302847           1
 Effect_1  -1.0760007   .59210391  -2.2365243   .08452301           1
 Effect_2  -.70764105   .57540133  -1.8354277   .42014556           1
Placebo_1  -.07351125   .10198885  -.27340939   .12638689           1
Placebo_2   .11764048    .2636341  -.39908234   .63436331           1
Placebo_3   .02859172   .27146076  -.50347136    .5606548           1
Placebo_4  -.04792371   .30494132   -.6456087   .54976128           1
Placebo_5   .25570152   .30578564  -.34363834   .85504138           1
(20,788 missing values generated)
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_irs_16_22_n2_rate_irs_0_sample_urban95_covid_eventstudy.jpg written in JPEG format
Placebo replications (100). This may take some time.
----+--- 1 ---+--- 2 ---+--- 3 ---+--- 4 ---+--- 5
..................................................     50
..................................................     100


Synthetic Difference-in-Differences Estimator

-----------------------------------------------------------------------------
 n2_rate_irs |     ATT     Std. Err.     t      P>|t|    [95% Conf. Interval]
-------------+---------------------------------------------------------------
     Treated |  -0.89182    0.52251    -1.71    0.088    -1.91593     0.13229
-----------------------------------------------------------------------------
95% CIs and p-values are based on large-sample approximations.
Refer to Arkhangelsky et al., (2021) for theoretical derivations.
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_irs_16_22_n2_rate_irs_1_sample_urban95_covid_trends2021.pdf saved as PDF format

added scalar:
              e(count) =  44

added scalar:
               e(mean) =  -.73591077
Synthetic Difference-in-differences

Boostrap replications (100), placebo mode.
|0% ----------------------------------------- 100%|
|.................................................|


             |  Estimate         SE      LB CI      UB CI  Switchers 
-------------+------------------------------------------------------
         ATT | -.8918209   .4614242  -1.796212   .0125706          1 
    Effect_1 | -1.076001   .5287683  -2.112387  -.0396148          1 
    Effect_2 | -.7076411   .4904099  -1.668844   .2535623          1 
   Placebo_1 | -.0735112   .1153277  -.2995535    .152531          1 
   Placebo_2 |  .1176405    .221366  -.3162368   .5515178          1 
   Placebo_3 |  .0285917    .266503  -.4937542   .5509376          1 
   Placebo_4 | -.0479237    .311193   -.657862   .5620146          1 
   Placebo_5 |  .2557015   .2679159  -.2694137   .7808168          1 
2022

e(H)[8,5]
             Estimate          SE       LB CI       UB CI   Switchers
      ATT  -.89182086   .46142422  -1.7962123   .01257062           1
 Effect_1  -1.0760007   .52876829  -2.1123865  -.03961483           1
 Effect_2  -.70764105   .49040985  -1.6688444   .25356226           1
Placebo_1  -.07351125   .11532766  -.29955346   .15253096           1
Placebo_2   .11764048   .22136597  -.31623682   .55151778           1
Placebo_3   .02859172   .26650302  -.49375421   .55093765           1
Placebo_4  -.04792371   .31119302  -.65786203    .5620146           1
Placebo_5   .25570152   .26791594  -.26941373   .78081676           1
(20,788 missing values generated)
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_irs_16_22_n2_rate_irs_1_sample_urban95_covid_eventstudy.jpg written in JPEG format
Placebo replications (100). This may take some time.
----+--- 1 ---+--- 2 ---+--- 3 ---+--- 4 ---+--- 5
..................................................     50
..................................................     100


Synthetic Difference-in-Differences Estimator

-----------------------------------------------------------------------------
agi_rate_irs |     ATT     Std. Err.     t      P>|t|    [95% Conf. Interval]
-------------+---------------------------------------------------------------
     Treated |  -3.04970    1.02925    -2.96    0.003    -5.06700    -1.03241
-----------------------------------------------------------------------------
95% CIs and p-values are based on large-sample approximations.
Refer to Arkhangelsky et al., (2021) for theoretical derivations.
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_irs_16_22_agi_rate_irs_0_sample_urban95_covid_trends2021.pdf saved as PDF format

added scalar:
              e(count) =  44

added scalar:
               e(mean) =  -.29483641
Synthetic Difference-in-differences

Boostrap replications (100), placebo mode.
|0% ----------------------------------------- 100%|
|.................................................|


             |  Estimate         SE      LB CI      UB CI  Switchers 
-------------+------------------------------------------------------
         ATT | -3.049704    .849008   -4.71376  -1.385648          1 
    Effect_1 | -2.905935    .832781  -4.538186  -1.273684          1 
    Effect_2 | -3.193473   1.044436  -5.240567  -1.146378          1 
   Placebo_1 | -.4506049   .2414658  -.9238779   .0226682          1 
   Placebo_2 | -.0370208   .3267412  -.6774335    .603392          1 
   Placebo_3 | -.3073011   .2379341  -.7736519   .1590498          1 
   Placebo_4 | -.0926853   .2911411  -.6633219   .4779514          1 
   Placebo_5 |  .5088172   .3050119  -.0890061    1.10664          1 
2022

e(H)[8,5]
             Estimate          SE       LB CI       UB CI   Switchers
      ATT   -3.049704   .84900804  -4.7137598  -1.3856483           1
 Effect_1  -2.9059352   .83278101   -4.538186  -1.2736844           1
 Effect_2  -3.1934729    1.044436  -5.2405675  -1.1463783           1
Placebo_1  -.45060486   .24146582  -.92387787   .02266816           1
Placebo_2  -.03702078    .3267412  -.67743353   .60339197           1
Placebo_3  -.30730107    .2379341  -.77365191   .15904977           1
Placebo_4  -.09268527   .29114114  -.66332189   .47795136           1
Placebo_5   .50881715   .30501189  -.08900615   1.1066404           1
(20,788 missing values generated)
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_irs_16_22_agi_rate_irs_0_sample_urban95_covid_eventstudy.jpg written in JPEG format
Placebo replications (100). This may take some time.
----+--- 1 ---+--- 2 ---+--- 3 ---+--- 4 ---+--- 5
..................................................     50
..................................................     100


Synthetic Difference-in-Differences Estimator

-----------------------------------------------------------------------------
agi_rate_irs |     ATT     Std. Err.     t      P>|t|    [95% Conf. Interval]
-------------+---------------------------------------------------------------
     Treated |  -3.04970    1.10766    -2.75    0.006    -5.22068    -0.87873
-----------------------------------------------------------------------------
95% CIs and p-values are based on large-sample approximations.
Refer to Arkhangelsky et al., (2021) for theoretical derivations.
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_irs_16_22_agi_rate_irs_1_sample_urban95_covid_trends2021.pdf saved as PDF format

added scalar:
              e(count) =  44

added scalar:
               e(mean) =  -.29483641
Synthetic Difference-in-differences

Boostrap replications (100), placebo mode.
|0% ----------------------------------------- 100%|
|.................................................|


             |  Estimate         SE      LB CI      UB CI  Switchers 
-------------+------------------------------------------------------
         ATT | -3.049704   .9423282  -4.896667  -1.202741          1 
    Effect_1 | -2.905935   1.122438  -5.105913  -.7059569          1 
    Effect_2 | -3.193473   1.044985  -5.241643  -1.145303          1 
   Placebo_1 | -.4506049   .4794399  -1.390307   .4890974          1 
   Placebo_2 | -.0370208   .5090336  -1.034727   .9606851          1 
   Placebo_3 | -.3073011   .3547531  -1.002617   .3880151          1 
   Placebo_4 | -.0926853   .3416342  -.7622882   .5769177          1 
   Placebo_5 |  .5088172   .2894493  -.0585034   1.076138          1 
2022

e(H)[8,5]
             Estimate          SE       LB CI       UB CI   Switchers
      ATT   -3.049704   .94232816  -4.8966672  -1.2027408           1
 Effect_1  -2.9059352   1.1224379  -5.1059135  -.70595691           1
 Effect_2  -3.1934729   1.0449847  -5.2416429  -1.1453029           1
Placebo_1  -.45060486   .47943991  -1.3903071   .48909737           1
Placebo_2  -.03702078   .50903363  -1.0347267   .96068514           1
Placebo_3  -.30730107   .35475314  -1.0026172   .38801508           1
Placebo_4  -.09268527   .34163416  -.76228821   .57691768           1
Placebo_5   .50881715   .28944927  -.05850341   1.0761377           1
(20,788 missing values generated)
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_irs_16_22_agi_rate_irs_1_sample_urban95_covid_eventstudy.jpg written in JPEG format
(output written to C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/tab_sdid_irs_16_22_sample_urban95_covid.tex)
(337 real changes made)
Placebo replications (100). This may take some time.
----+--- 1 ---+--- 2 ---+--- 3 ---+--- 4 ---+--- 5
..................................................     50
..................................................     100


Synthetic Difference-in-Differences Estimator

-----------------------------------------------------------------------------
n1_rate_acs1 |     ATT     Std. Err.     t      P>|t|    [95% Conf. Interval]
-------------+---------------------------------------------------------------
     Treated |  -2.04710    1.76750    -1.16    0.247    -5.51134     1.41714
-----------------------------------------------------------------------------
95% CIs and p-values are based on large-sample approximations.
Refer to Arkhangelsky et al., (2021) for theoretical derivations.
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_acs_16_22_all_n1_rate_acs1_0_sample_all_excl2020_trends2021.pdf saved as PDF format

added scalar:
              e(count) =  337

added scalar:
               e(mean) =  .79308678
Synthetic Difference-in-differences

Boostrap replications (100), placebo mode.
|0% ----------------------------------------- 100%|
|.................................................|


             |  Estimate         SE      LB CI      UB CI  Switchers 
-------------+------------------------------------------------------
         ATT | -2.047103   1.532291  -5.050393    .956187          1 
    Effect_1 | -.8893524   1.752537  -4.324325    2.54562          1 
    Effect_2 | -3.204854   2.189809   -7.49688   1.087173          1 
   Placebo_1 |  .0215098   .2616733  -.4913698   .5343893          1 
   Placebo_2 | -.0211109   .4959673  -.9932068    .950985          1 
   Placebo_3 |  .0151212   .3928118  -.7547899   .7850322          1 
   Placebo_4 | -.0231361   .2505932  -.5142987   .4680264          1 
2022

e(H)[7,5]
             Estimate          SE       LB CI       UB CI   Switchers
      ATT   -2.047103   1.5322908   -5.050393   .95618702           1
 Effect_1  -.88935235    1.752537  -4.3243248   2.5456201           1
 Effect_2  -3.2048536   2.1898093  -7.4968797   1.0871725           1
Placebo_1   .02150975   .26167326  -.49136984   .53438935           1
Placebo_2  -.02111087    .4959673  -.99320679   .95098504           1
Placebo_3   .01512117   .39281177  -.75478989   .78503223           1
Placebo_4  -.02313614   .25059315  -.51429871   .46802644           1
(20,789 missing values generated)
(4 real changes made)
(1 observation created)
(1 real change made)
(1 real change made, 1 to missing)
(1 real change made, 1 to missing)
(1 real change made, 1 to missing)
(file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_acs_16_22_all_n1_rate_acs1_0_sample_all_excl2020_eventstudy.jpg not found)
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_acs_16_22_all_n1_rate_acs1_0_sample_all_excl2020_eventstudy.jpg written in JPEG format
(1 observation deleted)
Placebo replications (100). This may take some time.
----+--- 1 ---+--- 2 ---+--- 3 ---+--- 4 ---+--- 5
..................................................     50
..................................................     100


Synthetic Difference-in-Differences Estimator

-----------------------------------------------------------------------------
n1_rate_acs1 |     ATT     Std. Err.     t      P>|t|    [95% Conf. Interval]
-------------+---------------------------------------------------------------
     Treated |  -2.04710    1.67252    -1.22    0.221    -5.32518     1.23097
-----------------------------------------------------------------------------
95% CIs and p-values are based on large-sample approximations.
Refer to Arkhangelsky et al., (2021) for theoretical derivations.
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_acs_16_22_all_n1_rate_acs1_1_sample_all_excl2020_trends2021.pdf saved as PDF format

added scalar:
              e(count) =  337

added scalar:
               e(mean) =  .79308678
Synthetic Difference-in-differences

Boostrap replications (100), placebo mode.
|0% ----------------------------------------- 100%|
|.................................................|


             |  Estimate         SE      LB CI      UB CI  Switchers 
-------------+------------------------------------------------------
         ATT | -2.047103   1.643651   -5.26866   1.174454          1 
    Effect_1 | -.8893524   1.566671  -3.960028   2.181323          1 
    Effect_2 | -3.204854   2.228909  -7.573515   1.163807          1 
   Placebo_1 |  .0215098   .1768926  -.3251998   .3682193          1 
   Placebo_2 | -.0211109   .1715788  -.3574054   .3151836          1 
   Placebo_3 |  .0151212   .2541111  -.4829366   .5131789          1 
   Placebo_4 | -.0231361   .2063534  -.4275888   .3813165          1 
2022

e(H)[7,5]
             Estimate          SE       LB CI       UB CI   Switchers
      ATT   -2.047103   1.6436515  -5.2686599    1.174454           1
 Effect_1  -.88935235    1.566671  -3.9600275   2.1813228           1
 Effect_2  -3.2048536   2.2289087  -7.5735146   1.1638074           1
Placebo_1   .02150975   .17689263   -.3251998   .36821931           1
Placebo_2  -.02111087   .17157883  -.35740539   .31518364           1
Placebo_3   .01512117    .2541111  -.48293658   .51317892           1
Placebo_4  -.02313614   .20635339  -.42758878   .38131651           1
(20,789 missing values generated)
(4 real changes made)
(1 observation created)
(1 real change made)
(1 real change made, 1 to missing)
(1 real change made, 1 to missing)
(1 real change made, 1 to missing)
(file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_acs_16_22_all_n1_rate_acs1_1_sample_all_excl2020_eventstudy.jpg not found)
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_acs_16_22_all_n1_rate_acs1_1_sample_all_excl2020_eventstudy.jpg written in JPEG format
(1 observation deleted)
Placebo replications (100). This may take some time.
----+--- 1 ---+--- 2 ---+--- 3 ---+--- 4 ---+--- 5
..................................................     50
..................................................     100


Synthetic Difference-in-Differences Estimator

-----------------------------------------------------------------------------
n2_rate_acs1 |     ATT     Std. Err.     t      P>|t|    [95% Conf. Interval]
-------------+---------------------------------------------------------------
     Treated |  -2.58118    1.41630    -1.82    0.068    -5.35707     0.19471
-----------------------------------------------------------------------------
95% CIs and p-values are based on large-sample approximations.
Refer to Arkhangelsky et al., (2021) for theoretical derivations.
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_acs_16_22_all_n2_rate_acs1_0_sample_all_excl2020_trends2021.pdf saved as PDF format

added scalar:
              e(count) =  337

added scalar:
               e(mean) =  .38108398
Synthetic Difference-in-differences

Boostrap replications (100), placebo mode.
|0% ----------------------------------------- 100%|
|.................................................|


             |  Estimate         SE      LB CI      UB CI  Switchers 
-------------+------------------------------------------------------
         ATT | -2.581182   1.562082  -5.642861   .4804982          1 
    Effect_1 | -1.591432   1.762716  -5.046356   1.863491          1 
    Effect_2 | -3.570931   2.086047  -7.659584    .517722          1 
   Placebo_1 |   .018267   .2204596  -.4138339   .4503679          1 
   Placebo_2 | -.0095009   .2397759  -.4794616   .4604598          1 
   Placebo_3 |  .0208232    .240025  -.4496257   .4912721          1 
   Placebo_4 | -.0354477   .1748299  -.3781144   .3072189          1 
2022

e(H)[7,5]
             Estimate          SE       LB CI       UB CI   Switchers
      ATT  -2.5811816   1.5620815  -5.6428614   .48049824           1
 Effect_1  -1.5914323   1.7627162  -5.0463562   1.8634915           1
 Effect_2  -3.5709308   2.0860473  -7.6595836   .51772195           1
Placebo_1   .01826702   .22045964  -.41383388   .45036793           1
Placebo_2  -.00950087   .23977586  -.47946156   .46045981           1
Placebo_3   .02082324   .24002495  -.44962567   .49127214           1
Placebo_4  -.03544774   .17482994  -.37811442   .30721894           1
(20,789 missing values generated)
(4 real changes made)
(1 observation created)
(1 real change made)
(1 real change made, 1 to missing)
(1 real change made, 1 to missing)
(1 real change made, 1 to missing)
(file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_acs_16_22_all_n2_rate_acs1_0_sample_all_excl2020_eventstudy.jpg not found)
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_acs_16_22_all_n2_rate_acs1_0_sample_all_excl2020_eventstudy.jpg written in JPEG format
(1 observation deleted)
Placebo replications (100). This may take some time.
----+--- 1 ---+--- 2 ---+--- 3 ---+--- 4 ---+--- 5
..................................................     50
..................................................     100


Synthetic Difference-in-Differences Estimator

-----------------------------------------------------------------------------
n2_rate_acs1 |     ATT     Std. Err.     t      P>|t|    [95% Conf. Interval]
-------------+---------------------------------------------------------------
     Treated |  -2.58118    1.34144    -1.92    0.054    -5.21035     0.04799
-----------------------------------------------------------------------------
95% CIs and p-values are based on large-sample approximations.
Refer to Arkhangelsky et al., (2021) for theoretical derivations.
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_acs_16_22_all_n2_rate_acs1_1_sample_all_excl2020_trends2021.pdf saved as PDF format

added scalar:
              e(count) =  337

added scalar:
               e(mean) =  .38108398
Synthetic Difference-in-differences

Boostrap replications (100), placebo mode.
|0% ----------------------------------------- 100%|
|.................................................|


             |  Estimate         SE      LB CI      UB CI  Switchers 
-------------+------------------------------------------------------
         ATT | -2.581182   1.327861  -5.183789   .0214257          1 
    Effect_1 | -1.591432   1.609101   -4.74527   1.562405          1 
    Effect_2 | -3.570931   1.631249  -6.768179  -.3736827          1 
   Placebo_1 |   .018267   .1682991  -.3115993   .3481333          1 
   Placebo_2 | -.0095009   .2518354  -.5030983   .4840966          1 
   Placebo_3 |  .0208232   .2502899   -.469745   .5113914          1 
   Placebo_4 | -.0354477   .2053537   -.437941   .3670456          1 
2022

e(H)[7,5]
             Estimate          SE       LB CI       UB CI   Switchers
      ATT  -2.5811816   1.3278608  -5.1837888   .02142565           1
 Effect_1  -1.5914323   1.6091009  -4.7452701   1.5624054           1
 Effect_2  -3.5709308    1.631249  -6.7681789  -.37368273           1
Placebo_1   .01826702   .16829913  -.31159927   .34813332           1
Placebo_2  -.00950087   .25183543  -.50309832   .48409657           1
Placebo_3   .02082324   .25028989  -.46974495   .51139142           1
Placebo_4  -.03544774   .20535373  -.43794105   .36704557           1
(20,789 missing values generated)
(4 real changes made)
(1 observation created)
(1 real change made)
(1 real change made, 1 to missing)
(1 real change made, 1 to missing)
(1 real change made, 1 to missing)
(file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_acs_16_22_all_n2_rate_acs1_1_sample_all_excl2020_eventstudy.jpg not found)
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_acs_16_22_all_n2_rate_acs1_1_sample_all_excl2020_eventstudy.jpg written in JPEG format
(1 observation deleted)
Placebo replications (100). This may take some time.
----+--- 1 ---+--- 2 ---+--- 3 ---+--- 4 ---+--- 5
..................................................     50
..................................................     100


Synthetic Difference-in-Differences Estimator

-----------------------------------------------------------------------------
agi_rate_a~1 |     ATT     Std. Err.     t      P>|t|    [95% Conf. Interval]
-------------+---------------------------------------------------------------
     Treated |  -3.42651    1.94046    -1.77    0.077    -7.22974     0.37672
-----------------------------------------------------------------------------
95% CIs and p-values are based on large-sample approximations.
Refer to Arkhangelsky et al., (2021) for theoretical derivations.
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_acs_16_22_all_agi_rate_acs1_0_sample_all_excl2020_trends2021.pdf saved as PDF format

added scalar:
              e(count) =  337

added scalar:
               e(mean) =  .58802893
Synthetic Difference-in-differences

Boostrap replications (100), placebo mode.
|0% ----------------------------------------- 100%|
|.................................................|


             |  Estimate         SE      LB CI      UB CI  Switchers 
-------------+------------------------------------------------------
         ATT | -3.426512   1.757917  -6.872029   .0190043          1 
    Effect_1 |  -1.27207   2.045722  -5.281684   2.737545          1 
    Effect_2 | -5.580955   2.257529  -10.00571  -1.156199          1 
   Placebo_1 |  .0321197   .2204866   -.400034   .4642734          1 
   Placebo_2 | -.0567533   .2180999  -.4842292   .3707226          1 
   Placebo_3 | -.0102879    .251593  -.5034102   .4828344          1 
   Placebo_4 |  .0125609    .227609  -.4335526   .4586745          1 
2022

e(H)[7,5]
             Estimate          SE       LB CI       UB CI   Switchers
      ATT  -3.4265122   1.7579166  -6.8720288   .01900434           1
 Effect_1  -1.2720696   2.0457215  -5.2816838   2.7375446           1
 Effect_2  -5.5809549   2.2575287  -10.005711  -1.1561985           1
Placebo_1   .03211971   .22048657  -.40003396   .46427338           1
Placebo_2  -.05675327   .21809994  -.48422916   .37072261           1
Placebo_3  -.01028788     .251593  -.50341016   .48283439           1
Placebo_4   .01256092   .22760896  -.43355263   .45867447           1
(20,789 missing values generated)
(4 real changes made)
(1 observation created)
(1 real change made)
(1 real change made, 1 to missing)
(1 real change made, 1 to missing)
(1 real change made, 1 to missing)
(file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_acs_16_22_all_agi_rate_acs1_0_sample_all_excl2020_eventstudy.jpg not found)
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_acs_16_22_all_agi_rate_acs1_0_sample_all_excl2020_eventstudy.jpg written in JPEG format
(1 observation deleted)
Placebo replications (100). This may take some time.
----+--- 1 ---+--- 2 ---+--- 3 ---+--- 4 ---+--- 5
..................................................     50
..................................................     100


Synthetic Difference-in-Differences Estimator

-----------------------------------------------------------------------------
agi_rate_a~1 |     ATT     Std. Err.     t      P>|t|    [95% Conf. Interval]
-------------+---------------------------------------------------------------
     Treated |  -3.42651    1.73534    -1.97    0.048    -6.82771    -0.02531
-----------------------------------------------------------------------------
95% CIs and p-values are based on large-sample approximations.
Refer to Arkhangelsky et al., (2021) for theoretical derivations.
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_acs_16_22_all_agi_rate_acs1_1_sample_all_excl2020_trends2021.pdf saved as PDF format

added scalar:
              e(count) =  337

added scalar:
               e(mean) =  .58802893
Synthetic Difference-in-differences

Boostrap replications (100), placebo mode.
|0% ----------------------------------------- 100%|
|.................................................|


             |  Estimate         SE      LB CI      UB CI  Switchers 
-------------+------------------------------------------------------
         ATT | -3.426512   2.301255  -7.936971   1.083947          1 
    Effect_1 |  -1.27207   2.154774  -5.495427   2.951288          1 
    Effect_2 | -5.580955   3.123391   -11.7028   .5408913          1 
   Placebo_1 |  .0321197   .2302095  -.4190909   .4833303          1 
   Placebo_2 | -.0567533   .2588439  -.5640873   .4505808          1 
   Placebo_3 | -.0102879   .2880911  -.5749465   .5543707          1 
   Placebo_4 |  .0125609    .302471  -.5802821    .605404          1 
2022

e(H)[7,5]
             Estimate          SE       LB CI       UB CI   Switchers
      ATT  -3.4265122   2.3012546  -7.9369713   1.0839468           1
 Effect_1  -1.2720696   2.1547743  -5.4954272    2.951288           1
 Effect_2  -5.5809549   3.1233909  -11.702801   .54089129           1
Placebo_1   .03211971   .23020951  -.41909093   .48333035           1
Placebo_2  -.05675327   .25884389   -.5640873   .45058076           1
Placebo_3  -.01028788   .28809112  -.57494649   .55437072           1
Placebo_4   .01256092   .30247095  -.58028215   .60540399           1
(20,789 missing values generated)
(4 real changes made)
(1 observation created)
(1 real change made)
(1 real change made, 1 to missing)
(1 real change made, 1 to missing)
(1 real change made, 1 to missing)
(file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_acs_16_22_all_agi_rate_acs1_1_sample_all_excl2020_eventstudy.jpg not found)
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_acs_16_22_all_agi_rate_acs1_1_sample_all_excl2020_eventstudy.jpg written in JPEG format
(1 observation deleted)
(file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/tab_sdid_acs_16_22_all_sample_all_excl2020.tex not found)
(output written to C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/tab_sdid_acs_16_22_all_sample_all_excl2020.tex)
Placebo replications (100). This may take some time.
----+--- 1 ---+--- 2 ---+--- 3 ---+--- 4 ---+--- 5
..................................................     50
..................................................     100


Synthetic Difference-in-Differences Estimator

-----------------------------------------------------------------------------
n1_rate_acs1 |     ATT     Std. Err.     t      P>|t|    [95% Conf. Interval]
-------------+---------------------------------------------------------------
     Treated |  -2.14374    1.52769    -1.40    0.161    -5.13796     0.85048
-----------------------------------------------------------------------------
95% CIs and p-values are based on large-sample approximations.
Refer to Arkhangelsky et al., (2021) for theoretical derivations.
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_acs_16_22_all_n1_rate_acs1_0_sample_all_trends2021.pdf saved as PDF format

added scalar:
              e(count) =  337

added scalar:
               e(mean) =  .79308678
Synthetic Difference-in-differences

Boostrap replications (100), placebo mode.
|0% ----------------------------------------- 100%|
|.................................................|


             |  Estimate         SE      LB CI      UB CI  Switchers 
-------------+------------------------------------------------------
         ATT |  -2.14374   1.512507  -5.108255   .8207741          1 
    Effect_1 | -1.028886   1.629244  -4.222205   2.164433          1 
    Effect_2 | -3.258595   2.095303  -7.365388    .848199          1 
   Placebo_1 |  .0118138     .24512  -.4686214   .4922491          1 
   Placebo_2 |  .0252639   .2467227  -.4583127   .5088404          1 
   Placebo_3 | -.0328532   .3956209  -.8082703   .7425638          1 
   Placebo_4 |  .0168124   .3556064  -.6801761    .713801          1 
   Placebo_5 | -.0385979   .2829402  -.5931608    .515965          1 
2022

e(H)[8,5]
             Estimate          SE       LB CI       UB CI   Switchers
      ATT  -2.1437403   1.5125074  -5.1082547   .82077414           1
 Effect_1  -1.0288859   1.6292443  -4.2222047   2.1644329           1
 Effect_2  -3.2585947   2.0953029  -7.3653883   .84819898           1
Placebo_1   .01181382   .24512002  -.46862142   .49224906           1
Placebo_2   .02526385   .24672271  -.45831266   .50884036           1
Placebo_3  -.03285324   .39562093  -.80827025   .74256378           1
Placebo_4   .01681244   .35560639  -.68017608   .71380097           1
Placebo_5  -.03859791   .28294023  -.59316077   .51596495           1
(20,788 missing values generated)
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_acs_16_22_all_n1_rate_acs1_0_sample_all_eventstudy.jpg written in JPEG format
Placebo replications (100). This may take some time.
----+--- 1 ---+--- 2 ---+--- 3 ---+--- 4 ---+--- 5
..................................................     50
..................................................     100


Synthetic Difference-in-Differences Estimator

-----------------------------------------------------------------------------
n1_rate_acs1 |     ATT     Std. Err.     t      P>|t|    [95% Conf. Interval]
-------------+---------------------------------------------------------------
     Treated |  -2.14374    1.39237    -1.54    0.124    -4.87274     0.58526
-----------------------------------------------------------------------------
95% CIs and p-values are based on large-sample approximations.
Refer to Arkhangelsky et al., (2021) for theoretical derivations.
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_acs_16_22_all_n1_rate_acs1_1_sample_all_trends2021.pdf saved as PDF format

added scalar:
              e(count) =  337

added scalar:
               e(mean) =  .79308678
Synthetic Difference-in-differences

Boostrap replications (100), placebo mode.
|0% ----------------------------------------- 100%|
|.................................................|


             |  Estimate         SE      LB CI      UB CI  Switchers 
-------------+------------------------------------------------------
         ATT |  -2.14374   1.519584  -5.122126   .8346452          1 
    Effect_1 | -1.028886   1.611327  -4.187088   2.129316          1 
    Effect_2 | -3.258595   2.427142  -8.015793   1.498604          1 
   Placebo_1 |  .0118138    .361235  -.6962068   .7198345          1 
   Placebo_2 |  .0252639   .2682415  -.5004896   .5510173          1 
   Placebo_3 | -.0328532    .293285  -.6076918   .5419854          1 
   Placebo_4 |  .0168124   .5460307  -1.053408   1.087033          1 
   Placebo_5 | -.0385979   .5831672  -1.181606    1.10441          1 
2022

e(H)[8,5]
             Estimate          SE       LB CI       UB CI   Switchers
      ATT  -2.1437403   1.5195844  -5.1221257   .83464519           1
 Effect_1  -1.0288859   1.6113275  -4.1870878    2.129316           1
 Effect_2  -3.2585947    2.427142  -8.0157929   1.4986036           1
Placebo_1   .01181382   .36123504  -.69620685   .71983449           1
Placebo_2   .02526385   .26824154  -.50048957   .55101727           1
Placebo_3  -.03285324   .29328499  -.60769183   .54198535           1
Placebo_4   .01681244   .54603069  -1.0534077   1.0870326           1
Placebo_5  -.03859791   .58316722  -1.1816057   1.1044098           1
(20,788 missing values generated)
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_acs_16_22_all_n1_rate_acs1_1_sample_all_eventstudy.jpg written in JPEG format
Placebo replications (100). This may take some time.
----+--- 1 ---+--- 2 ---+--- 3 ---+--- 4 ---+--- 5
..................................................     50
..................................................     100


Synthetic Difference-in-Differences Estimator

-----------------------------------------------------------------------------
n2_rate_acs1 |     ATT     Std. Err.     t      P>|t|    [95% Conf. Interval]
-------------+---------------------------------------------------------------
     Treated |  -2.46482    1.28917    -1.91    0.056    -4.99155     0.06191
-----------------------------------------------------------------------------
95% CIs and p-values are based on large-sample approximations.
Refer to Arkhangelsky et al., (2021) for theoretical derivations.
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_acs_16_22_all_n2_rate_acs1_0_sample_all_trends2021.pdf saved as PDF format

added scalar:
              e(count) =  337

added scalar:
               e(mean) =  .38108398
Synthetic Difference-in-differences

Boostrap replications (100), placebo mode.
|0% ----------------------------------------- 100%|
|.................................................|


             |  Estimate         SE      LB CI      UB CI  Switchers 
-------------+------------------------------------------------------
         ATT | -2.464821   1.476233  -5.358238   .4285957          1 
    Effect_1 | -1.422994   1.492537  -4.348367   1.502379          1 
    Effect_2 | -3.506648   2.126069  -7.673744    .660447          1 
   Placebo_1 |  -.034227   .3049121  -.6318547   .5634008          1 
   Placebo_2 |  .0275954   .3935576  -.7437775   .7989682          1 
   Placebo_3 | -.0063632   .3209728  -.6354699   .6227434          1 
   Placebo_4 |  .0341136   .3216608  -.5963416   .6645689          1 
   Placebo_5 | -.0429435   .3574312  -.7435087   .6576216          1 
2022

e(H)[8,5]
             Estimate          SE       LB CI       UB CI   Switchers
      ATT  -2.4648212   1.4762331  -5.3582382   .42859569           1
 Effect_1  -1.4229941   1.4925374  -4.3483674   1.5023792           1
 Effect_2  -3.5066484   2.1260691  -7.6737439   .66044705           1
Placebo_1  -.03422697   .30491211   -.6318547   .56340077           1
Placebo_2   .02759539   .39355758  -.74377747   .79896824           1
Placebo_3  -.00636322   .32097278  -.63546987   .62274343           1
Placebo_4   .03411364   .32166084  -.59634161   .66456889           1
Placebo_5  -.04294351    .3574312  -.74350866   .65762164           1
(20,788 missing values generated)
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_acs_16_22_all_n2_rate_acs1_0_sample_all_eventstudy.jpg written in JPEG format
Placebo replications (100). This may take some time.
----+--- 1 ---+--- 2 ---+--- 3 ---+--- 4 ---+--- 5
..................................................     50
..................................................     100


Synthetic Difference-in-Differences Estimator

-----------------------------------------------------------------------------
n2_rate_acs1 |     ATT     Std. Err.     t      P>|t|    [95% Conf. Interval]
-------------+---------------------------------------------------------------
     Treated |  -2.46482    1.58403    -1.56    0.120    -5.56946     0.63982
-----------------------------------------------------------------------------
95% CIs and p-values are based on large-sample approximations.
Refer to Arkhangelsky et al., (2021) for theoretical derivations.
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_acs_16_22_all_n2_rate_acs1_1_sample_all_trends2021.pdf saved as PDF format

added scalar:
              e(count) =  337

added scalar:
               e(mean) =  .38108398
Synthetic Difference-in-differences

Boostrap replications (100), placebo mode.
|0% ----------------------------------------- 100%|
|.................................................|


             |  Estimate         SE      LB CI      UB CI  Switchers 
-------------+------------------------------------------------------
         ATT | -2.464821   1.279536  -4.972712   .0430698          1 
    Effect_1 | -1.422994   1.596295  -4.551732   1.705744          1 
    Effect_2 | -3.506648   1.839908  -7.112869    .099572          1 
   Placebo_1 |  -.034227   .3985832    -.81545    .746996          1 
   Placebo_2 |  .0275954   .3246881  -.6087933    .663984          1 
   Placebo_3 | -.0063632   .4070775  -.8042351   .7915087          1 
   Placebo_4 |  .0341136   .3770355  -.7048759   .7731032          1 
   Placebo_5 | -.0429435   .3968013   -.820674    .734787          1 
2022

e(H)[8,5]
             Estimate          SE       LB CI       UB CI   Switchers
      ATT  -2.4648212   1.2795363  -4.9727123   .04306981           1
 Effect_1  -1.4229941    1.596295  -4.5517322   1.7057441           1
 Effect_2  -3.5066484   1.8399084  -7.1128688   .09957198           1
Placebo_1  -.03422697   .39858316  -.81544996   .74699602           1
Placebo_2   .02759539   .32468809  -.60879326   .66398403           1
Placebo_3  -.00636322   .40707751  -.80423513   .79150869           1
Placebo_4   .03411364   .37703548  -.70487591   .77310319           1
Placebo_5  -.04294351   .39680127  -.82067401   .73478699           1
(20,788 missing values generated)
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_acs_16_22_all_n2_rate_acs1_1_sample_all_eventstudy.jpg written in JPEG format
Placebo replications (100). This may take some time.
----+--- 1 ---+--- 2 ---+--- 3 ---+--- 4 ---+--- 5
..................................................     50
..................................................     100


Synthetic Difference-in-Differences Estimator

-----------------------------------------------------------------------------
agi_rate_a~1 |     ATT     Std. Err.     t      P>|t|    [95% Conf. Interval]
-------------+---------------------------------------------------------------
     Treated |  -3.32999    1.92014    -1.73    0.083    -7.09339     0.43340
-----------------------------------------------------------------------------
95% CIs and p-values are based on large-sample approximations.
Refer to Arkhangelsky et al., (2021) for theoretical derivations.
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_acs_16_22_all_agi_rate_acs1_0_sample_all_trends2021.pdf saved as PDF format

added scalar:
              e(count) =  337

added scalar:
               e(mean) =  .58802893
Synthetic Difference-in-differences

Boostrap replications (100), placebo mode.
|0% ----------------------------------------- 100%|
|.................................................|


             |  Estimate         SE      LB CI      UB CI  Switchers 
-------------+------------------------------------------------------
         ATT | -3.329993   1.585198   -6.43698   -.223006          1 
    Effect_1 | -1.150229   1.878819  -4.832714   2.532257          1 
    Effect_2 | -5.509758    2.13671  -9.697708  -1.321807          1 
   Placebo_1 | -.0193757   .3089806  -.6249777   .5862262          1 
   Placebo_2 |   .046652   .4121315  -.7611258   .8544299          1 
   Placebo_3 | -.0688789   .5402284  -1.127726   .9899686          1 
   Placebo_4 | -.0090575   .4854977   -.960633   .9425181          1 
   Placebo_5 |  .0239832   .4273167  -.8135575   .8615238          1 
2022

e(H)[8,5]
             Estimate          SE       LB CI       UB CI   Switchers
      ATT  -3.3299931   1.5851975  -6.4369803  -.22300597           1
 Effect_1  -1.1502287   1.8788191  -4.8327141   2.5322567           1
 Effect_2  -5.5097576   2.1367096  -9.6977085  -1.3218067           1
Placebo_1  -.01937575   .30898057  -.62497766   .58622617           1
Placebo_2   .04665204   .41213154  -.76112579   .85442986           1
Placebo_3  -.06887892   .54022835  -1.1277265   .98996865           1
Placebo_4  -.00905749   .48549773  -.96063304   .94251806           1
Placebo_5   .02398318   .42731666  -.81355748   .86152383           1
(20,788 missing values generated)
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_acs_16_22_all_agi_rate_acs1_0_sample_all_eventstudy.jpg written in JPEG format
Placebo replications (100). This may take some time.
----+--- 1 ---+--- 2 ---+--- 3 ---+--- 4 ---+--- 5
..................................................     50
..................................................     100


Synthetic Difference-in-Differences Estimator

-----------------------------------------------------------------------------
agi_rate_a~1 |     ATT     Std. Err.     t      P>|t|    [95% Conf. Interval]
-------------+---------------------------------------------------------------
     Treated |  -3.32999    1.58988    -2.09    0.036    -6.44610    -0.21389
-----------------------------------------------------------------------------
95% CIs and p-values are based on large-sample approximations.
Refer to Arkhangelsky et al., (2021) for theoretical derivations.
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_acs_16_22_all_agi_rate_acs1_1_sample_all_trends2021.pdf saved as PDF format

added scalar:
              e(count) =  337

added scalar:
               e(mean) =  .58802893
Synthetic Difference-in-differences

Boostrap replications (100), placebo mode.
|0% ----------------------------------------- 100%|
|.................................................|


             |  Estimate         SE      LB CI      UB CI  Switchers 
-------------+------------------------------------------------------
         ATT | -3.329993   1.494576  -6.259363  -.4006234          1 
    Effect_1 | -1.150229   1.758606  -4.597096   2.296639          1 
    Effect_2 | -5.509758   1.977811  -9.386268  -1.633247          1 
   Placebo_1 | -.0193757   .3157018  -.6381513   .5993999          1 
   Placebo_2 |   .046652   .4193748  -.7753226   .8686267          1 
   Placebo_3 | -.0688789   .4995862  -1.048068   .9103099          1 
   Placebo_4 | -.0090575   .5239969  -1.036092   1.017977          1 
   Placebo_5 |  .0239832    .324529  -.6120936     .66006          1 
2022

e(H)[8,5]
             Estimate          SE       LB CI       UB CI   Switchers
      ATT  -3.3299931   1.4945764  -6.2593629   -.4006234           1
 Effect_1  -1.1502287   1.7586059  -4.5970963   2.2966389           1
 Effect_2  -5.5097576   1.9778115   -9.386268  -1.6332471           1
Placebo_1  -.01937575   .31570184  -.63815135   .59939986           1
Placebo_2   .04665204    .4193748  -.77532258   .86862665           1
Placebo_3  -.06887892   .49958616  -1.0480678   .91030994           1
Placebo_4  -.00905749   .52399694  -1.0360915   1.0179765           1
Placebo_5   .02398318   .32452897   -.6120936   .66005996           1
(20,788 missing values generated)
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_acs_16_22_all_agi_rate_acs1_1_sample_all_eventstudy.jpg written in JPEG format
(output written to C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/tab_sdid_acs_16_22_all_sample_all.tex)
(107 real changes made)
Placebo replications (100). This may take some time.
----+--- 1 ---+--- 2 ---+--- 3 ---+--- 4 ---+--- 5
..................................................     50
..................................................     100


Synthetic Difference-in-Differences Estimator

-----------------------------------------------------------------------------
n1_rate_acs1 |     ATT     Std. Err.     t      P>|t|    [95% Conf. Interval]
-------------+---------------------------------------------------------------
     Treated |  -1.71483    0.88389    -1.94    0.052    -3.44722     0.01757
-----------------------------------------------------------------------------
95% CIs and p-values are based on large-sample approximations.
Refer to Arkhangelsky et al., (2021) for theoretical derivations.
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_acs_16_22_all_n1_rate_acs1_0_sample_urban95_excl2020_trends2021.pdf saved as PDF format

added scalar:
              e(count) =  107

added scalar:
               e(mean) =  .79308678
Synthetic Difference-in-differences

Boostrap replications (100), placebo mode.
|0% ----------------------------------------- 100%|
|.................................................|


             |  Estimate         SE      LB CI      UB CI  Switchers 
-------------+------------------------------------------------------
         ATT | -1.714825    1.03586  -3.745111   .3154605          1 
    Effect_1 | -.5707964   1.307102  -3.132716   1.991123          1 
    Effect_2 | -2.858854   1.358059   -5.52065  -.1970586          1 
   Placebo_1 |  .1739481   .2103847  -.2384059   .5863022          1 
   Placebo_2 | -.0852467   .1767125  -.4316032   .2611098          1 
   Placebo_3 |  .1235075   .2727626  -.4111072   .6581222          1 
   Placebo_4 |  -.107782   .2228892  -.5446449   .3290809          1 
2022

e(H)[7,5]
             Estimate          SE       LB CI       UB CI   Switchers
      ATT  -1.7148253   1.0358601   -3.745111   .31546049           1
 Effect_1  -.57079635   1.3071017  -3.1327156   1.9911229           1
 Effect_2  -2.8588542    1.358059  -5.5206498  -.19705864           1
Placebo_1   .17394814   .21038471  -.23840589   .58630216           1
Placebo_2   -.0852467   .17671252  -.43160323   .26110984           1
Placebo_3   .12350748    .2727626  -.41110722   .65812217           1
Placebo_4  -.10778197   .22288922  -.54464485   .32908091           1
(20,789 missing values generated)
(4 real changes made)
(1 observation created)
(1 real change made)
(1 real change made, 1 to missing)
(1 real change made, 1 to missing)
(1 real change made, 1 to missing)
(file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_acs_16_22_all_n1_rate_acs1_0_sample_urban95_excl2020_eventstudy.jpg not found)
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_acs_16_22_all_n1_rate_acs1_0_sample_urban95_excl2020_eventstudy.jpg written in JPEG format
(1 observation deleted)
Placebo replications (100). This may take some time.
----+--- 1 ---+--- 2 ---+--- 3 ---+--- 4 ---+--- 5
..................................................     50
..................................................     100


Synthetic Difference-in-Differences Estimator

-----------------------------------------------------------------------------
n1_rate_acs1 |     ATT     Std. Err.     t      P>|t|    [95% Conf. Interval]
-------------+---------------------------------------------------------------
     Treated |  -1.71483    1.15836    -1.48    0.139    -3.98518     0.55553
-----------------------------------------------------------------------------
95% CIs and p-values are based on large-sample approximations.
Refer to Arkhangelsky et al., (2021) for theoretical derivations.
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_acs_16_22_all_n1_rate_acs1_1_sample_urban95_excl2020_trends2021.pdf saved as PDF format

added scalar:
              e(count) =  107

added scalar:
               e(mean) =  .79308678
Synthetic Difference-in-differences

Boostrap replications (100), placebo mode.
|0% ----------------------------------------- 100%|
|.................................................|


             |  Estimate         SE      LB CI      UB CI  Switchers 
-------------+------------------------------------------------------
         ATT | -1.714825   1.080285  -3.832185   .4025342          1 
    Effect_1 | -.5707964   1.083755  -2.694956   1.553363          1 
    Effect_2 | -2.858854   1.469413  -5.738905   .0211962          1 
   Placebo_1 |  .1739481     .49738  -.8009168   1.148813          1 
   Placebo_2 | -.0852467   .3264093   -.725009   .5545156          1 
   Placebo_3 |  .1235075   .3722077  -.6060195   .8530345          1 
   Placebo_4 |  -.107782   .2020697  -.5038386   .2882747          1 
2022

e(H)[7,5]
             Estimate          SE       LB CI       UB CI   Switchers
      ATT  -1.7148253   1.0802855  -3.8321848   .40253422           1
 Effect_1  -.57079635   1.0837548  -2.6949558   1.5533631           1
 Effect_2  -2.8588542   1.4694135  -5.7389046   .02119617           1
Placebo_1   .17394814   .49738005  -.80091675    1.148813           1
Placebo_2   -.0852467   .32640934    -.725009   .55451561           1
Placebo_3   .12350748   .37220767  -.60601955    .8530345           1
Placebo_4  -.10778197   .20206972  -.50383863   .28827468           1
(20,789 missing values generated)
(4 real changes made)
(1 observation created)
(1 real change made)
(1 real change made, 1 to missing)
(1 real change made, 1 to missing)
(1 real change made, 1 to missing)
(file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_acs_16_22_all_n1_rate_acs1_1_sample_urban95_excl2020_eventstudy.jpg not found)
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_acs_16_22_all_n1_rate_acs1_1_sample_urban95_excl2020_eventstudy.jpg written in JPEG format
(1 observation deleted)
Placebo replications (100). This may take some time.
----+--- 1 ---+--- 2 ---+--- 3 ---+--- 4 ---+--- 5
..................................................     50
..................................................     100


Synthetic Difference-in-Differences Estimator

-----------------------------------------------------------------------------
n2_rate_acs1 |     ATT     Std. Err.     t      P>|t|    [95% Conf. Interval]
-------------+---------------------------------------------------------------
     Treated |  -2.36229    1.32900    -1.78    0.075    -4.96708     0.24249
-----------------------------------------------------------------------------
95% CIs and p-values are based on large-sample approximations.
Refer to Arkhangelsky et al., (2021) for theoretical derivations.
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_acs_16_22_all_n2_rate_acs1_0_sample_urban95_excl2020_trends2021.pdf saved as PDF format

added scalar:
              e(count) =  107

added scalar:
               e(mean) =  .38108398
Synthetic Difference-in-differences

Boostrap replications (100), placebo mode.
|0% ----------------------------------------- 100%|
|.................................................|


             |  Estimate         SE      LB CI      UB CI  Switchers 
-------------+------------------------------------------------------
         ATT | -2.362293   1.090491  -4.499655  -.2249306          1 
    Effect_1 |  -1.46333   1.236564  -3.886997   .9603356          1 
    Effect_2 | -3.261255   1.424915  -6.054089  -.4684214          1 
   Placebo_1 |   .070539   .2837119  -.4855363   .6266143          1 
   Placebo_2 | -.0250403   .2111268  -.4388488   .3887683          1 
   Placebo_3 |  .1179099   .2708193   -.412896   .6487159          1 
   Placebo_4 | -.1688284   .2431247  -.6453529   .3076961          1 
2022

e(H)[7,5]
             Estimate          SE       LB CI       UB CI   Switchers
      ATT  -2.3622927   1.0904909  -4.4996548  -.22493064           1
 Effect_1  -1.4633305   1.2365643  -3.8869965   .96033559           1
 Effect_2   -3.261255   1.4249151  -6.0540886  -.46842141           1
Placebo_1   .07053903   .28371188  -.48553627   .62661432           1
Placebo_2  -.02504026    .2111268  -.43884879   .38876826           1
Placebo_3   .11790993   .27081935  -.41289599   .64871585           1
Placebo_4   -.1688284   .24312474  -.64535288   .30769609           1
(20,789 missing values generated)
(4 real changes made)
(1 observation created)
(1 real change made)
(1 real change made, 1 to missing)
(1 real change made, 1 to missing)
(1 real change made, 1 to missing)
(file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_acs_16_22_all_n2_rate_acs1_0_sample_urban95_excl2020_eventstudy.jpg not found)
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_acs_16_22_all_n2_rate_acs1_0_sample_urban95_excl2020_eventstudy.jpg written in JPEG format
(1 observation deleted)
Placebo replications (100). This may take some time.
----+--- 1 ---+--- 2 ---+--- 3 ---+--- 4 ---+--- 5
..................................................     50
..................................................     100


Synthetic Difference-in-Differences Estimator

-----------------------------------------------------------------------------
n2_rate_acs1 |     ATT     Std. Err.     t      P>|t|    [95% Conf. Interval]
-------------+---------------------------------------------------------------
     Treated |  -2.36229    0.81634    -2.89    0.004    -3.96229    -0.76229
-----------------------------------------------------------------------------
95% CIs and p-values are based on large-sample approximations.
Refer to Arkhangelsky et al., (2021) for theoretical derivations.
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_acs_16_22_all_n2_rate_acs1_1_sample_urban95_excl2020_trends2021.pdf saved as PDF format

added scalar:
              e(count) =  107

added scalar:
               e(mean) =  .38108398
Synthetic Difference-in-differences

Boostrap replications (100), placebo mode.
|0% ----------------------------------------- 100%|
|.................................................|


             |  Estimate         SE      LB CI      UB CI  Switchers 
-------------+------------------------------------------------------
         ATT | -2.362293   1.065111  -4.449911  -.2746749          1 
    Effect_1 |  -1.46333   1.278479   -3.96915   1.042489          1 
    Effect_2 | -3.261255   1.321017  -5.850448  -.6720617          1 
   Placebo_1 |   .070539   .2561542  -.4315231   .5726012          1 
   Placebo_2 | -.0250403   .1832186  -.3841488   .3340683          1 
   Placebo_3 |  .1179099   .2412443  -.3549289   .5907488          1 
   Placebo_4 | -.1688284   .2456048  -.6502138    .312557          1 
2022

e(H)[7,5]
             Estimate          SE       LB CI       UB CI   Switchers
      ATT  -2.3622927   1.0651112  -4.4499106  -.27467486           1
 Effect_1  -1.4633305   1.2784791  -3.9691495   1.0424886           1
 Effect_2   -3.261255    1.321017  -5.8504483  -.67206168           1
Placebo_1   .07053903   .25615417  -.43152314   .57260119           1
Placebo_2  -.02504026   .18321863  -.38414878   .33406826           1
Placebo_3   .11790993   .24124432  -.35492893    .5907488           1
Placebo_4   -.1688284   .24560478  -.65021376   .31255697           1
(20,789 missing values generated)
(4 real changes made)
(1 observation created)
(1 real change made)
(1 real change made, 1 to missing)
(1 real change made, 1 to missing)
(1 real change made, 1 to missing)
(file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_acs_16_22_all_n2_rate_acs1_1_sample_urban95_excl2020_eventstudy.jpg not found)
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_acs_16_22_all_n2_rate_acs1_1_sample_urban95_excl2020_eventstudy.jpg written in JPEG format
(1 observation deleted)
Placebo replications (100). This may take some time.
----+--- 1 ---+--- 2 ---+--- 3 ---+--- 4 ---+--- 5
..................................................     50
..................................................     100


Synthetic Difference-in-Differences Estimator

-----------------------------------------------------------------------------
agi_rate_a~1 |     ATT     Std. Err.     t      P>|t|    [95% Conf. Interval]
-------------+---------------------------------------------------------------
     Treated |  -3.07666    1.44470    -2.13    0.033    -5.90822    -0.24510
-----------------------------------------------------------------------------
95% CIs and p-values are based on large-sample approximations.
Refer to Arkhangelsky et al., (2021) for theoretical derivations.
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_acs_16_22_all_agi_rate_acs1_0_sample_urban95_excl2020_trends2021.pdf saved as PDF format

added scalar:
              e(count) =  107

added scalar:
               e(mean) =  .58802893
Synthetic Difference-in-differences

Boostrap replications (100), placebo mode.
|0% ----------------------------------------- 100%|
|.................................................|


             |  Estimate         SE      LB CI      UB CI  Switchers 
-------------+------------------------------------------------------
         ATT | -3.076663     1.1528  -5.336151  -.8171743          1 
    Effect_1 | -.8798369    1.61226  -4.039866   2.280192          1 
    Effect_2 | -5.273488   1.500506   -8.21448  -2.332497          1 
   Placebo_1 |  .1232841   .2870881  -.4394086   .6859769          1 
   Placebo_2 | -.1531704   .4084397  -.9537122   .6473714          1 
   Placebo_3 |  .0092427   .4647737  -.9017137   .9201991          1 
   Placebo_4 | -.0086732   .3903814  -.7738209   .7564744          1 
2022

e(H)[7,5]
             Estimate          SE       LB CI       UB CI   Switchers
      ATT  -3.0766626   1.1528002   -5.336151  -.81717427           1
 Effect_1  -.87983689   1.6122596  -4.0398658    2.280192           1
 Effect_2  -5.2734883   1.5005059  -8.2144798  -2.3324968           1
Placebo_1   .12328415   .28708812  -.43940856   .68597685           1
Placebo_2  -.15317041   .40843971  -.95371224   .64737143           1
Placebo_3   .00924272   .46477366  -.90171366   .92019909           1
Placebo_4  -.00867322   .39038144  -.77382085    .7564744           1
(20,789 missing values generated)
(4 real changes made)
(1 observation created)
(1 real change made)
(1 real change made, 1 to missing)
(1 real change made, 1 to missing)
(1 real change made, 1 to missing)
(file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_acs_16_22_all_agi_rate_acs1_0_sample_urban95_excl2020_eventstudy.jpg not found)
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_acs_16_22_all_agi_rate_acs1_0_sample_urban95_excl2020_eventstudy.jpg written in JPEG format
(1 observation deleted)
Placebo replications (100). This may take some time.
----+--- 1 ---+--- 2 ---+--- 3 ---+--- 4 ---+--- 5
..................................................     50
..................................................     100


Synthetic Difference-in-Differences Estimator

-----------------------------------------------------------------------------
agi_rate_a~1 |     ATT     Std. Err.     t      P>|t|    [95% Conf. Interval]
-------------+---------------------------------------------------------------
     Treated |  -3.07666    1.30558    -2.36    0.018    -5.63554    -0.51778
-----------------------------------------------------------------------------
95% CIs and p-values are based on large-sample approximations.
Refer to Arkhangelsky et al., (2021) for theoretical derivations.
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_acs_16_22_all_agi_rate_acs1_1_sample_urban95_excl2020_trends2021.pdf saved as PDF format

added scalar:
              e(count) =  107

added scalar:
               e(mean) =  .58802893
Synthetic Difference-in-differences

Boostrap replications (100), placebo mode.
|0% ----------------------------------------- 100%|
|.................................................|


             |  Estimate         SE      LB CI      UB CI  Switchers 
-------------+------------------------------------------------------
         ATT | -3.076663   1.238388  -5.503903  -.6494219          1 
    Effect_1 | -.8798369   1.615326  -4.045876   2.286202          1 
    Effect_2 | -5.273488   1.395338  -8.008351  -2.538625          1 
   Placebo_1 |  .1232841   .2644537  -.3950452   .6416135          1 
   Placebo_2 | -.1531704    .296989  -.7352688    .428928          1 
   Placebo_3 |  .0092427   .4344136   -.842208   .8606934          1 
   Placebo_4 | -.0086732   .3553457  -.7051507   .6878043          1 
2022

e(H)[7,5]
             Estimate          SE       LB CI       UB CI   Switchers
      ATT  -3.0766626   1.2383881  -5.5039033  -.64942193           1
 Effect_1  -.87983689   1.6153261  -4.0458761   2.2862023           1
 Effect_2  -5.2734883   1.3953383  -8.0083513  -2.5386254           1
Placebo_1   .12328415   .26445374  -.39504519   .64161348           1
Placebo_2  -.15317041   .29698896  -.73526878   .42892796           1
Placebo_3   .00924272   .43441361  -.84220796   .86069339           1
Placebo_4  -.00867322   .35534565   -.7051507   .68780425           1
(20,789 missing values generated)
(4 real changes made)
(1 observation created)
(1 real change made)
(1 real change made, 1 to missing)
(1 real change made, 1 to missing)
(1 real change made, 1 to missing)
(file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_acs_16_22_all_agi_rate_acs1_1_sample_urban95_excl2020_eventstudy.jpg not found)
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_acs_16_22_all_agi_rate_acs1_1_sample_urban95_excl2020_eventstudy.jpg written in JPEG format
(1 observation deleted)
(file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/tab_sdid_acs_16_22_all_sample_urban95_excl2020.tex not found)
(output written to C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/tab_sdid_acs_16_22_all_sample_urban95_excl2020.tex)
Placebo replications (100). This may take some time.
----+--- 1 ---+--- 2 ---+--- 3 ---+--- 4 ---+--- 5
..................................................     50
..................................................     100


Synthetic Difference-in-Differences Estimator

-----------------------------------------------------------------------------
n1_rate_acs1 |     ATT     Std. Err.     t      P>|t|    [95% Conf. Interval]
-------------+---------------------------------------------------------------
     Treated |  -1.75586    1.08712    -1.62    0.106    -3.88659     0.37486
-----------------------------------------------------------------------------
95% CIs and p-values are based on large-sample approximations.
Refer to Arkhangelsky et al., (2021) for theoretical derivations.
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_acs_16_22_all_n1_rate_acs1_0_sample_urban95_trends2021.pdf saved as PDF format

added scalar:
              e(count) =  107

added scalar:
               e(mean) =  .79308678
Synthetic Difference-in-differences

Boostrap replications (100), placebo mode.
|0% ----------------------------------------- 100%|
|.................................................|


             |  Estimate         SE      LB CI      UB CI  Switchers 
-------------+------------------------------------------------------
         ATT | -1.755864   1.082275  -3.877122   .3653951          1 
    Effect_1 | -.6099704   1.256739  -3.073179   1.853238          1 
    Effect_2 | -2.901757    1.42734  -5.699343  -.1041698          1 
   Placebo_1 |  .0355965    .392214   -.733143    .804336          1 
   Placebo_2 |  .2170577   .3002776  -.3714864   .8056017          1 
   Placebo_3 |   -.11497   .3272589  -.7563974   .5264574          1 
   Placebo_4 |  .1517381    .334167  -.5032293   .8067055          1 
   Placebo_5 | -.1482319   .3571019  -.8481515   .5516877          1 
2022

e(H)[8,5]
             Estimate          SE       LB CI       UB CI   Switchers
      ATT  -1.7558635   1.0822748  -3.8771221   .36539506           1
 Effect_1  -.60997043   1.2567391   -3.073179   1.8532382           1
 Effect_2  -2.9017566   1.4273402  -5.6993433  -.10416982           1
Placebo_1   .03559652   .39221402  -.73314295     .804336           1
Placebo_2   .21705766   .30027758  -.37148639   .80560172           1
Placebo_3  -.11496997   .32725889  -.75639739   .52645745           1
Placebo_4   .15173807   .33416704  -.50322933   .80670548           1
Placebo_5  -.14823189   .35710186  -.84815153   .55168775           1
(20,788 missing values generated)
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_acs_16_22_all_n1_rate_acs1_0_sample_urban95_eventstudy.jpg written in JPEG format
Placebo replications (100). This may take some time.
----+--- 1 ---+--- 2 ---+--- 3 ---+--- 4 ---+--- 5
..................................................     50
..................................................     100


Synthetic Difference-in-Differences Estimator

-----------------------------------------------------------------------------
n1_rate_acs1 |     ATT     Std. Err.     t      P>|t|    [95% Conf. Interval]
-------------+---------------------------------------------------------------
     Treated |  -1.75586    1.20137    -1.46    0.144    -4.11051     0.59878
-----------------------------------------------------------------------------
95% CIs and p-values are based on large-sample approximations.
Refer to Arkhangelsky et al., (2021) for theoretical derivations.
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_acs_16_22_all_n1_rate_acs1_1_sample_urban95_trends2021.pdf saved as PDF format

added scalar:
              e(count) =  107

added scalar:
               e(mean) =  .79308678
Synthetic Difference-in-differences

Boostrap replications (100), placebo mode.
|0% ----------------------------------------- 100%|
|.................................................|


             |  Estimate         SE      LB CI      UB CI  Switchers 
-------------+------------------------------------------------------
         ATT | -1.755864   1.008509  -3.732541   .2208142          1 
    Effect_1 | -.6099704   1.162119  -2.887724   1.667783          1 
    Effect_2 | -2.901757   1.343441  -5.534901  -.2686124          1 
   Placebo_1 |  .0355965   .2899974  -.5327983   .6039914          1 
   Placebo_2 |  .2170577   .4527171  -.6702679   1.104383          1 
   Placebo_3 |   -.11497   .3603782  -.8213112   .5913713          1 
   Placebo_4 |  .1517381   .3389319  -.5125685   .8160447          1 
   Placebo_5 | -.1482319   .3140705    -.76381   .4673462          1 
2022

e(H)[8,5]
             Estimate          SE       LB CI       UB CI   Switchers
      ATT  -1.7558635    1.008509  -3.7325412   .22081418           1
 Effect_1  -.60997043   1.1621191  -2.8877238    1.667783           1
 Effect_2  -2.9017566   1.3434409  -5.5349008  -.26861239           1
Placebo_1   .03559652   .28999736   -.5327983   .60399135           1
Placebo_2   .21705766   .45271711  -.67026786   1.1043832           1
Placebo_3  -.11496997   .36037818  -.82131121   .59137126           1
Placebo_4   .15173807   .33893193  -.51256851   .81604466           1
Placebo_5  -.14823189   .31407046  -.76380999   .46734621           1
(20,788 missing values generated)
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_acs_16_22_all_n1_rate_acs1_1_sample_urban95_eventstudy.jpg written in JPEG format
Placebo replications (100). This may take some time.
----+--- 1 ---+--- 2 ---+--- 3 ---+--- 4 ---+--- 5
..................................................     50
..................................................     100


Synthetic Difference-in-Differences Estimator

-----------------------------------------------------------------------------
n2_rate_acs1 |     ATT     Std. Err.     t      P>|t|    [95% Conf. Interval]
-------------+---------------------------------------------------------------
     Treated |  -2.02660    1.04869    -1.93    0.053    -4.08199     0.02879
-----------------------------------------------------------------------------
95% CIs and p-values are based on large-sample approximations.
Refer to Arkhangelsky et al., (2021) for theoretical derivations.
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_acs_16_22_all_n2_rate_acs1_0_sample_urban95_trends2021.pdf saved as PDF format

added scalar:
              e(count) =  107

added scalar:
               e(mean) =  .38108398
Synthetic Difference-in-differences

Boostrap replications (100), placebo mode.
|0% ----------------------------------------- 100%|
|.................................................|


             |  Estimate         SE      LB CI      UB CI  Switchers 
-------------+------------------------------------------------------
         ATT | -2.026597   .9981578  -3.982987  -.0702081          1 
    Effect_1 | -.9594242   .9572152  -2.835566   .9167176          1 
    Effect_2 |  -3.09377    1.43265  -5.901764  -.2857764          1 
   Placebo_1 | -.1667674   .3188624  -.7917378    .458203          1 
   Placebo_2 |  .1606786   .3474143  -.5202534   .8416106          1 
   Placebo_3 |  .0203475   .2897949  -.5476505   .5883454          1 
   Placebo_4 |  .2414328    .282594  -.3124515    .795317          1 
   Placebo_5 | -.2214798   .3410899  -.8900161   .4470564          1 
2022

e(H)[8,5]
             Estimate          SE       LB CI       UB CI   Switchers
      ATT  -2.0265973   .99815778  -3.9829866  -.07020808           1
 Effect_1  -.95942422   .95721522  -2.8355661   .91671761           1
 Effect_2  -3.0937704     1.43265  -5.9017644  -.28577639           1
Placebo_1  -.16676739   .31886243  -.79173776   .45820298           1
Placebo_2   .16067857   .34741428  -.52025342   .84161057           1
Placebo_3   .02034748   .28979488  -.54765048   .58834544           1
Placebo_4   .24143276     .282594  -.31245148     .795317           1
Placebo_5  -.22147984   .34108991  -.89001606   .44705638           1
(20,788 missing values generated)
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_acs_16_22_all_n2_rate_acs1_0_sample_urban95_eventstudy.jpg written in JPEG format
Placebo replications (100). This may take some time.
----+--- 1 ---+--- 2 ---+--- 3 ---+--- 4 ---+--- 5
..................................................     50
..................................................     100


Synthetic Difference-in-Differences Estimator

-----------------------------------------------------------------------------
n2_rate_acs1 |     ATT     Std. Err.     t      P>|t|    [95% Conf. Interval]
-------------+---------------------------------------------------------------
     Treated |  -2.02660    1.08224    -1.87    0.061    -4.14775     0.09456
-----------------------------------------------------------------------------
95% CIs and p-values are based on large-sample approximations.
Refer to Arkhangelsky et al., (2021) for theoretical derivations.
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_acs_16_22_all_n2_rate_acs1_1_sample_urban95_trends2021.pdf saved as PDF format

added scalar:
              e(count) =  107

added scalar:
               e(mean) =  .38108398
Synthetic Difference-in-differences

Boostrap replications (100), placebo mode.
|0% ----------------------------------------- 100%|
|.................................................|


             |  Estimate         SE      LB CI      UB CI  Switchers 
-------------+------------------------------------------------------
         ATT | -2.026597   1.120012   -4.22182   .1686256          1 
    Effect_1 | -.9594242   1.284164  -3.476385   1.557537          1 
    Effect_2 |  -3.09377   1.367904  -5.774863  -.4126778          1 
   Placebo_1 | -.1667674   .3710024  -.8939321   .5603973          1 
   Placebo_2 |  .1606786   .5323181  -.8826648   1.204022          1 
   Placebo_3 |  .0203475   .3846917  -.7336482   .7743431          1 
   Placebo_4 |  .2414328   .3042297  -.3548575   .8377231          1 
   Placebo_5 | -.2214798   .3472202  -.9020314   .4590717          1 
2022

e(H)[8,5]
             Estimate          SE       LB CI       UB CI   Switchers
      ATT  -2.0265973   1.1200117  -4.2218203   .16862563           1
 Effect_1  -.95942422   1.2841637   -3.476385   1.5575366           1
 Effect_2  -3.0937704   1.3679044  -5.7748631  -.41267777           1
Placebo_1  -.16676739   .37100241  -.89393212   .56039733           1
Placebo_2   .16067857   .53231806  -.88266483    1.204022           1
Placebo_3   .02034748   .38469166  -.73364818   .77434313           1
Placebo_4   .24143276   .30422975  -.35485754   .83772306           1
Placebo_5  -.22147984   .34722019  -.90203141   .45907172           1
(20,788 missing values generated)
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_acs_16_22_all_n2_rate_acs1_1_sample_urban95_eventstudy.jpg written in JPEG format
Placebo replications (100). This may take some time.
----+--- 1 ---+--- 2 ---+--- 3 ---+--- 4 ---+--- 5
..................................................     50
..................................................     100


Synthetic Difference-in-Differences Estimator

-----------------------------------------------------------------------------
agi_rate_a~1 |     ATT     Std. Err.     t      P>|t|    [95% Conf. Interval]
-------------+---------------------------------------------------------------
     Treated |  -2.81048    1.20344    -2.34    0.020    -5.16918    -0.45178
-----------------------------------------------------------------------------
95% CIs and p-values are based on large-sample approximations.
Refer to Arkhangelsky et al., (2021) for theoretical derivations.
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_acs_16_22_all_agi_rate_acs1_0_sample_urban95_trends2021.pdf saved as PDF format

added scalar:
              e(count) =  107

added scalar:
               e(mean) =  .58802893
Synthetic Difference-in-differences

Boostrap replications (100), placebo mode.
|0% ----------------------------------------- 100%|
|.................................................|


             |  Estimate         SE      LB CI      UB CI  Switchers 
-------------+------------------------------------------------------
         ATT | -2.810483   1.219642  -5.200981  -.4199849          1 
    Effect_1 | -.5644742   1.693719  -3.884164   2.755216          1 
    Effect_2 | -5.056491   1.528539  -8.052428  -2.060555          1 
   Placebo_1 | -.0350415   .4195277  -.8573157   .7872327          1 
   Placebo_2 |  .2203211   .4549162  -.6713147   1.111957          1 
   Placebo_3 | -.1546203   .4230946  -.9838857   .6746452          1 
   Placebo_4 |  .0602919   .8066105  -1.520665   1.641248          1 
   Placebo_5 |  .0386735   .4229279  -.7902652   .8676123          1 
2022

e(H)[8,5]
             Estimate          SE       LB CI       UB CI   Switchers
      ATT  -2.8104828   1.2196418  -5.2009808  -.41998487           1
 Effect_1   -.5644742   1.6937194  -3.8841643   2.7552159           1
 Effect_2  -5.0564915    1.528539   -8.052428   -2.060555           1
Placebo_1   -.0350415   .41952766  -.85731571   .78723271           1
Placebo_2   .22032109   .45491621  -.67131468   1.1119569           1
Placebo_3  -.15462026   .42309461  -.98388569   .67464517           1
Placebo_4   .06029186   .80661046  -1.5206647   1.6412484           1
Placebo_5   .03867354   .42292792  -.79026518   .86761225           1
(20,788 missing values generated)
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_acs_16_22_all_agi_rate_acs1_0_sample_urban95_eventstudy.jpg written in JPEG format
Placebo replications (100). This may take some time.
----+--- 1 ---+--- 2 ---+--- 3 ---+--- 4 ---+--- 5
..................................................     50
..................................................     100


Synthetic Difference-in-Differences Estimator

-----------------------------------------------------------------------------
agi_rate_a~1 |     ATT     Std. Err.     t      P>|t|    [95% Conf. Interval]
-------------+---------------------------------------------------------------
     Treated |  -2.81048    1.23641    -2.27    0.023    -5.23381    -0.38716
-----------------------------------------------------------------------------
95% CIs and p-values are based on large-sample approximations.
Refer to Arkhangelsky et al., (2021) for theoretical derivations.
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_acs_16_22_all_agi_rate_acs1_1_sample_urban95_trends2021.pdf saved as PDF format

added scalar:
              e(count) =  107

added scalar:
               e(mean) =  .58802893
Synthetic Difference-in-differences

Boostrap replications (100), placebo mode.
|0% ----------------------------------------- 100%|
|.................................................|


             |  Estimate         SE      LB CI      UB CI  Switchers 
-------------+------------------------------------------------------
         ATT | -2.810483   1.057691  -4.883557  -.7374091          1 
    Effect_1 | -.5644742   1.557771  -3.617705   2.488757          1 
    Effect_2 | -5.056491    1.38288  -7.766935  -2.346048          1 
   Placebo_1 | -.0350415   .7238028  -1.453695   1.383612          1 
   Placebo_2 |  .2203211   .3663274  -.4976806   .9383228          1 
   Placebo_3 | -.1546203    .574815  -1.281258   .9720171          1 
   Placebo_4 |  .0602919    .938282  -1.778741   1.899325          1 
   Placebo_5 |  .0386735   .4007093  -.7467167   .8240638          1 
2022

e(H)[8,5]
             Estimate          SE       LB CI       UB CI   Switchers
      ATT  -2.8104828   1.0576907  -4.8835566  -.73740914           1
 Effect_1   -.5644742    1.557771  -3.6177054    2.488757           1
 Effect_2  -5.0564915   1.3828795  -7.7669354  -2.3460476           1
Placebo_1   -.0350415   .72380275  -1.4536949   1.3836119           1
Placebo_2   .22032109    .3663274  -.49768062    .9383228           1
Placebo_3  -.15462026   .57481499  -1.2812576   .97201712           1
Placebo_4   .06029186   .93828203  -1.7787409   1.8993246           1
Placebo_5   .03867354   .40070932  -.74671672    .8240638           1
(20,788 missing values generated)
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_acs_16_22_all_agi_rate_acs1_1_sample_urban95_eventstudy.jpg written in JPEG format
(output written to C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/tab_sdid_acs_16_22_all_sample_urban95.tex)
(30 real changes made)
Placebo replications (100). This may take some time.
----+--- 1 ---+--- 2 ---+--- 3 ---+--- 4 ---+--- 5
..................................................     50
..................................................     100


Synthetic Difference-in-Differences Estimator

-----------------------------------------------------------------------------
n1_rate_acs1 |     ATT     Std. Err.     t      P>|t|    [95% Conf. Interval]
-------------+---------------------------------------------------------------
     Treated |  -2.38904    2.02393    -1.18    0.238    -6.35588     1.57779
-----------------------------------------------------------------------------
95% CIs and p-values are based on large-sample approximations.
Refer to Arkhangelsky et al., (2021) for theoretical derivations.
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_acs_16_22_all_n1_rate_acs1_0_sample_urban95_covid_excl2020_trends2021.pdf saved as PDF format

added scalar:
              e(count) =  30

added scalar:
               e(mean) =  .79308678
Synthetic Difference-in-differences

Boostrap replications (100), placebo mode.
|0% ----------------------------------------- 100%|
|.................................................|


             |  Estimate         SE      LB CI      UB CI  Switchers 
-------------+------------------------------------------------------
         ATT | -2.389042   1.831114  -5.978026   1.199942          1 
    Effect_1 | -.9924952   2.040817  -4.992497   3.007507          1 
    Effect_2 | -3.785589   2.505302   -8.69598   1.124803          1 
   Placebo_1 |  .3116726   .6341189  -.9312004   1.554546          1 
   Placebo_2 | -.5624802   .7710529  -2.073744   .9487834          1 
   Placebo_3 |  .4765808   .4210223  -.3486228   1.301784          1 
   Placebo_4 | -.6328554   .6593434  -1.925169   .6594577          1 
2022

e(H)[7,5]
             Estimate          SE       LB CI       UB CI   Switchers
      ATT  -2.3890419   1.8311144  -5.9780262   1.1999423           1
 Effect_1  -.99249517   2.0408174  -4.9924972   3.0075069           1
 Effect_2  -3.7855887   2.5053019  -8.6959804    1.124803           1
Placebo_1   .31167258   .63411889  -.93120044   1.5545456           1
Placebo_2  -.56248021   .77105288  -2.0737439   .94878344           1
Placebo_3    .4765808   .42102225  -.34862282   1.3017844           1
Placebo_4  -.63285545   .65934342  -1.9251686   .65945766           1
(20,789 missing values generated)
(4 real changes made)
(1 observation created)
(1 real change made)
(1 real change made, 1 to missing)
(1 real change made, 1 to missing)
(1 real change made, 1 to missing)
(file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_acs_16_22_all_n1_rate_acs1_0_sample_urban95_covid_excl2020_eventstudy.jpg not found)
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_acs_16_22_all_n1_rate_acs1_0_sample_urban95_covid_excl2020_eventstudy.jpg written in JPEG format
(1 observation deleted)
Placebo replications (100). This may take some time.
----+--- 1 ---+--- 2 ---+--- 3 ---+--- 4 ---+--- 5
..................................................     50
..................................................     100


Synthetic Difference-in-Differences Estimator

-----------------------------------------------------------------------------
n1_rate_acs1 |     ATT     Std. Err.     t      P>|t|    [95% Conf. Interval]
-------------+---------------------------------------------------------------
     Treated |  -2.38904    2.02404    -1.18    0.238    -6.35609     1.57800
-----------------------------------------------------------------------------
95% CIs and p-values are based on large-sample approximations.
Refer to Arkhangelsky et al., (2021) for theoretical derivations.
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_acs_16_22_all_n1_rate_acs1_1_sample_urban95_covid_excl2020_trends2021.pdf saved as PDF format

added scalar:
              e(count) =  30

added scalar:
               e(mean) =  .79308678
Synthetic Difference-in-differences

Boostrap replications (100), placebo mode.
|0% ----------------------------------------- 100%|
|.................................................|


             |  Estimate         SE      LB CI      UB CI  Switchers 
-------------+------------------------------------------------------
         ATT | -2.389042   1.859542  -6.033744    1.25566          1 
    Effect_1 | -.9924952   2.120568  -5.148809   3.163819          1 
    Effect_2 | -3.785589   2.625254  -8.931087    1.35991          1 
   Placebo_1 |  .3116726   .6851855  -1.031291   1.654636          1 
   Placebo_2 | -.5624802   .9788516  -2.481029   1.356069          1 
   Placebo_3 |  .4765808   .5450473   -.591712   1.544874          1 
   Placebo_4 | -.6328554   .8299589  -2.259575   .9938639          1 
2022

e(H)[7,5]
             Estimate          SE       LB CI       UB CI   Switchers
      ATT  -2.3890419   1.8595416  -6.0337435   1.2556597           1
 Effect_1  -.99249517   2.1205683   -5.148809   3.1638187           1
 Effect_2  -3.7855887   2.6252545  -8.9310875   1.3599101           1
Placebo_1   .31167258   .68518545  -1.0312909   1.6546361           1
Placebo_2  -.56248021   .97885157  -2.4810293   1.3560689           1
Placebo_3    .4765808   .54504734  -.59171198   1.5448736           1
Placebo_4  -.63285545   .82995886  -2.2595748   .99386392           1
(20,789 missing values generated)
(4 real changes made)
(1 observation created)
(1 real change made)
(1 real change made, 1 to missing)
(1 real change made, 1 to missing)
(1 real change made, 1 to missing)
(file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_acs_16_22_all_n1_rate_acs1_1_sample_urban95_covid_excl2020_eventstudy.jpg not found)
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_acs_16_22_all_n1_rate_acs1_1_sample_urban95_covid_excl2020_eventstudy.jpg written in JPEG format
(1 observation deleted)
Placebo replications (100). This may take some time.
----+--- 1 ---+--- 2 ---+--- 3 ---+--- 4 ---+--- 5
..................................................     50
..................................................     100


Synthetic Difference-in-Differences Estimator

-----------------------------------------------------------------------------
n2_rate_acs1 |     ATT     Std. Err.     t      P>|t|    [95% Conf. Interval]
-------------+---------------------------------------------------------------
     Treated |  -2.66399    2.06842    -1.29    0.198    -6.71803     1.39005
-----------------------------------------------------------------------------
95% CIs and p-values are based on large-sample approximations.
Refer to Arkhangelsky et al., (2021) for theoretical derivations.
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_acs_16_22_all_n2_rate_acs1_0_sample_urban95_covid_excl2020_trends2021.pdf saved as PDF format

added scalar:
              e(count) =  30

added scalar:
               e(mean) =  .38108398
Synthetic Difference-in-differences

Boostrap replications (100), placebo mode.
|0% ----------------------------------------- 100%|
|.................................................|


             |  Estimate         SE      LB CI      UB CI  Switchers 
-------------+------------------------------------------------------
         ATT |  -2.66399   1.609544  -5.818696   .4907167          1 
    Effect_1 | -1.783013   1.799635  -5.310299   1.744272          1 
    Effect_2 | -3.544967   2.049813    -7.5626   .4726671          1 
   Placebo_1 |  .0862605   .7568932   -1.39725   1.569771          1 
   Placebo_2 | -.3329671   .7622022  -1.826883   1.160949          1 
   Placebo_3 |  .4438897   .3931464  -.3266773   1.214457          1 
   Placebo_4 | -.6003528   .8164741  -2.200642   .9999365          1 
2022

e(H)[7,5]
             Estimate          SE       LB CI       UB CI   Switchers
      ATT  -2.6639899   1.6095442  -5.8186964    .4907167           1
 Effect_1  -1.7830132   1.7996354  -5.3102986   1.7442721           1
 Effect_2  -3.5449665    2.049813  -7.5626001   .47266705           1
Placebo_1   .08626054   .75689316  -1.3972501   1.5697711           1
Placebo_2  -.33296709    .7622022  -1.8268834   1.1609492           1
Placebo_3   .44388967   .39314642  -.32667732   1.2144567           1
Placebo_4  -.60035281   .81647413  -2.2006421   .99993647           1
(20,789 missing values generated)
(4 real changes made)
(1 observation created)
(1 real change made)
(1 real change made, 1 to missing)
(1 real change made, 1 to missing)
(1 real change made, 1 to missing)
(file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_acs_16_22_all_n2_rate_acs1_0_sample_urban95_covid_excl2020_eventstudy.jpg not found)
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_acs_16_22_all_n2_rate_acs1_0_sample_urban95_covid_excl2020_eventstudy.jpg written in JPEG format
(1 observation deleted)
Placebo replications (100). This may take some time.
----+--- 1 ---+--- 2 ---+--- 3 ---+--- 4 ---+--- 5
..................................................     50
..................................................     100


Synthetic Difference-in-Differences Estimator

-----------------------------------------------------------------------------
n2_rate_acs1 |     ATT     Std. Err.     t      P>|t|    [95% Conf. Interval]
-------------+---------------------------------------------------------------
     Treated |  -2.66399    1.93592    -1.38    0.169    -6.45832     1.13034
-----------------------------------------------------------------------------
95% CIs and p-values are based on large-sample approximations.
Refer to Arkhangelsky et al., (2021) for theoretical derivations.
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_acs_16_22_all_n2_rate_acs1_1_sample_urban95_covid_excl2020_trends2021.pdf saved as PDF format

added scalar:
              e(count) =  30

added scalar:
               e(mean) =  .38108398
Synthetic Difference-in-differences

Boostrap replications (100), placebo mode.
|0% ----------------------------------------- 100%|
|.................................................|


             |  Estimate         SE      LB CI      UB CI  Switchers 
-------------+------------------------------------------------------
         ATT |  -2.66399   1.890211  -6.368804   1.040825          1 
    Effect_1 | -1.783013   1.970401  -5.644999   2.078973          1 
    Effect_2 | -3.544967   2.378104  -8.206051   1.116118          1 
   Placebo_1 |  .0862605   .7991797  -1.480132   1.652653          1 
   Placebo_2 | -.3329671   .6501266  -1.607215    .941281          1 
   Placebo_3 |  .4438897    .576619  -.6862835   1.574063          1 
   Placebo_4 | -.6003528   .9863531  -2.533605   1.332899          1 
2022

e(H)[7,5]
             Estimate          SE       LB CI       UB CI   Switchers
      ATT  -2.6639899   1.8902115  -6.3688044   1.0408246           1
 Effect_1  -1.7830132   1.9704011  -5.6449995    2.078973           1
 Effect_2  -3.5449665   2.3781041  -8.2060505   1.1161175           1
Placebo_1   .08626054   .79917972  -1.4801317   1.6526528           1
Placebo_2  -.33296709   .65012657  -1.6072152   .94128098           1
Placebo_3   .44388967   .57661896   -.6862835   1.5740628           1
Placebo_4  -.60035281   .98635313  -2.5336049   1.3328993           1
(20,789 missing values generated)
(4 real changes made)
(1 observation created)
(1 real change made)
(1 real change made, 1 to missing)
(1 real change made, 1 to missing)
(1 real change made, 1 to missing)
(file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_acs_16_22_all_n2_rate_acs1_1_sample_urban95_covid_excl2020_eventstudy.jpg not found)
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_acs_16_22_all_n2_rate_acs1_1_sample_urban95_covid_excl2020_eventstudy.jpg written in JPEG format
(1 observation deleted)
Placebo replications (100). This may take some time.
----+--- 1 ---+--- 2 ---+--- 3 ---+--- 4 ---+--- 5
..................................................     50
..................................................     100


Synthetic Difference-in-Differences Estimator

-----------------------------------------------------------------------------
agi_rate_a~1 |     ATT     Std. Err.     t      P>|t|    [95% Conf. Interval]
-------------+---------------------------------------------------------------
     Treated |  -3.35665    1.79388    -1.87    0.061    -6.87259     0.15928
-----------------------------------------------------------------------------
95% CIs and p-values are based on large-sample approximations.
Refer to Arkhangelsky et al., (2021) for theoretical derivations.
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_acs_16_22_all_agi_rate_acs1_0_sample_urban95_covid_excl2020_trends2021.pdf saved as PDF format

added scalar:
              e(count) =  30

added scalar:
               e(mean) =  .58802893
Synthetic Difference-in-differences

Boostrap replications (100), placebo mode.
|0% ----------------------------------------- 100%|
|.................................................|


             |  Estimate         SE      LB CI      UB CI  Switchers 
-------------+------------------------------------------------------
         ATT | -3.356653   1.894362  -7.069602   .3562965          1 
    Effect_1 |  -1.31236   2.123498  -5.474416   2.849695          1 
    Effect_2 | -5.400945    2.50763   -10.3159  -.4859903          1 
   Placebo_1 |  .1647449   .4629954  -.7427261   1.072216          1 
   Placebo_2 | -.4476013   .7130399  -1.845159   .9499568          1 
   Placebo_3 |  .1137888   .6832965  -1.225472    1.45305          1 
   Placebo_4 | -.1573345   .8158878  -1.756475   1.441806          1 
2022

e(H)[7,5]
             Estimate          SE       LB CI       UB CI   Switchers
      ATT  -3.3566528   1.8943619  -7.0696021   .35629649           1
 Effect_1  -1.3123602   2.1234978  -5.4744158   2.8496955           1
 Effect_2  -5.4009454   2.5076302  -10.315901  -.48599028           1
Placebo_1   .16474486   .46299537  -.74272606   1.0722158           1
Placebo_2  -.44760132   .71303985  -1.8451594    .9499568           1
Placebo_3   .11378877   .68329652  -1.2254724   1.4530499           1
Placebo_4  -.15733445    .8158878  -1.7564745   1.4418056           1
(20,789 missing values generated)
(4 real changes made)
(1 observation created)
(1 real change made)
(1 real change made, 1 to missing)
(1 real change made, 1 to missing)
(1 real change made, 1 to missing)
(file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_acs_16_22_all_agi_rate_acs1_0_sample_urban95_covid_excl2020_eventstudy.jpg not found)
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_acs_16_22_all_agi_rate_acs1_0_sample_urban95_covid_excl2020_eventstudy.jpg written in JPEG format
(1 observation deleted)
Placebo replications (100). This may take some time.
----+--- 1 ---+--- 2 ---+--- 3 ---+--- 4 ---+--- 5
..................................................     50
..................................................     100


Synthetic Difference-in-Differences Estimator

-----------------------------------------------------------------------------
agi_rate_a~1 |     ATT     Std. Err.     t      P>|t|    [95% Conf. Interval]
-------------+---------------------------------------------------------------
     Treated |  -3.35665    1.93774    -1.73    0.083    -7.15455     0.44124
-----------------------------------------------------------------------------
95% CIs and p-values are based on large-sample approximations.
Refer to Arkhangelsky et al., (2021) for theoretical derivations.
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_acs_16_22_all_agi_rate_acs1_1_sample_urban95_covid_excl2020_trends2021.pdf saved as PDF format

added scalar:
              e(count) =  30

added scalar:
               e(mean) =  .58802893
Synthetic Difference-in-differences

Boostrap replications (100), placebo mode.
|0% ----------------------------------------- 100%|
|.................................................|


             |  Estimate         SE      LB CI      UB CI  Switchers 
-------------+------------------------------------------------------
         ATT | -3.356653   2.052493  -7.379539   .6662334          1 
    Effect_1 |  -1.31236   2.342718  -5.904087   3.279366          1 
    Effect_2 | -5.400945   2.562151  -10.42276   -.379129          1 
   Placebo_1 |  .1647449   .5433758  -.9002718   1.229762          1 
   Placebo_2 | -.4476013   .7708999  -1.958565   1.063362          1 
   Placebo_3 |  .1137888   .8079024    -1.4697   1.697277          1 
   Placebo_4 | -.1573345   .8583277  -1.839657   1.524988          1 
2022

e(H)[7,5]
             Estimate          SE       LB CI       UB CI   Switchers
      ATT  -3.3566528   2.0524929   -7.379539   .66623335           1
 Effect_1  -1.3123602   2.3427176  -5.9040867   3.2793663           1
 Effect_2  -5.4009454   2.5621512  -10.422762  -.37912902           1
Placebo_1   .16474486   .54337584  -.90027179   1.2297615           1
Placebo_2  -.44760132   .77089986   -1.958565   1.0633624           1
Placebo_3   .11378877    .8079024  -1.4696999   1.6972775           1
Placebo_4  -.15733445   .85832766  -1.8396567   1.5249878           1
(20,789 missing values generated)
(4 real changes made)
(1 observation created)
(1 real change made)
(1 real change made, 1 to missing)
(1 real change made, 1 to missing)
(1 real change made, 1 to missing)
(file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_acs_16_22_all_agi_rate_acs1_1_sample_urban95_covid_excl2020_eventstudy.jpg not found)
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_acs_16_22_all_agi_rate_acs1_1_sample_urban95_covid_excl2020_eventstudy.jpg written in JPEG format
(1 observation deleted)
(file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/tab_sdid_acs_16_22_all_sample_urban95_covid_excl2020.tex not found)
(output written to C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/tab_sdid_acs_16_22_all_sample_urban95_covid_excl2020.tex)
Placebo replications (100). This may take some time.
----+--- 1 ---+--- 2 ---+--- 3 ---+--- 4 ---+--- 5
..................................................     50
..................................................     100


Synthetic Difference-in-Differences Estimator

-----------------------------------------------------------------------------
n1_rate_acs1 |     ATT     Std. Err.     t      P>|t|    [95% Conf. Interval]
-------------+---------------------------------------------------------------
     Treated |  -2.36586    2.05157    -1.15    0.249    -6.38686     1.65515
-----------------------------------------------------------------------------
95% CIs and p-values are based on large-sample approximations.
Refer to Arkhangelsky et al., (2021) for theoretical derivations.
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_acs_16_22_all_n1_rate_acs1_0_sample_urban95_covid_trends2021.pdf saved as PDF format

added scalar:
              e(count) =  30

added scalar:
               e(mean) =  .79308678
Synthetic Difference-in-differences

Boostrap replications (100), placebo mode.
|0% ----------------------------------------- 100%|
|.................................................|


             |  Estimate         SE      LB CI      UB CI  Switchers 
-------------+------------------------------------------------------
         ATT | -2.365858   1.773213  -5.841355    1.10964          1 
    Effect_1 | -1.023752   1.851434  -4.652562   2.605058          1 
    Effect_2 | -3.707963   2.558087  -8.721814   1.305888          1 
   Placebo_1 | -.0419062   .9747582  -1.952432    1.86862          1 
   Placebo_2 |  .3483181   .8970842  -1.409967   2.106603          1 
   Placebo_3 | -.6071515   .8901548  -2.351855   1.137552          1 
   Placebo_4 |  .5130832   .6643801  -.7891018   1.815268          1 
   Placebo_5 | -.7219035   .9923496  -2.666909   1.223102          1 
2022

e(H)[8,5]
             Estimate          SE       LB CI       UB CI   Switchers
      ATT  -2.3658576   1.7732131  -5.8413552     1.10964           1
 Effect_1  -1.0237522   1.8514336   -4.652562   2.6050576           1
 Effect_2   -3.707963   2.5580874  -8.7218143   1.3058883           1
Placebo_1  -.04190617   .97475821  -1.9524323   1.8686199           1
Placebo_2   .34831809   .89708416  -1.4099669   2.1066031           1
Placebo_3   -.6071515   .89015484   -2.351855    1.137552           1
Placebo_4   .51308324    .6643801  -.78910175   1.8152682           1
Placebo_5  -.72190347   .99234958  -2.6669087   1.2231017           1
(20,788 missing values generated)
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_acs_16_22_all_n1_rate_acs1_0_sample_urban95_covid_eventstudy.jpg written in JPEG format
Placebo replications (100). This may take some time.
----+--- 1 ---+--- 2 ---+--- 3 ---+--- 4 ---+--- 5
..................................................     50
..................................................     100


Synthetic Difference-in-Differences Estimator

-----------------------------------------------------------------------------
n1_rate_acs1 |     ATT     Std. Err.     t      P>|t|    [95% Conf. Interval]
-------------+---------------------------------------------------------------
     Treated |  -2.36586    2.14309    -1.10    0.270    -6.56624     1.83452
-----------------------------------------------------------------------------
95% CIs and p-values are based on large-sample approximations.
Refer to Arkhangelsky et al., (2021) for theoretical derivations.
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_acs_16_22_all_n1_rate_acs1_1_sample_urban95_covid_trends2021.pdf saved as PDF format

added scalar:
              e(count) =  30

added scalar:
               e(mean) =  .79308678
Synthetic Difference-in-differences

Boostrap replications (100), placebo mode.
|0% ----------------------------------------- 100%|
|.................................................|


             |  Estimate         SE      LB CI      UB CI  Switchers 
-------------+------------------------------------------------------
         ATT | -2.365858   1.488894   -5.28409   .5523752          1 
    Effect_1 | -1.023752   1.658922   -4.27524   2.227736          1 
    Effect_2 | -3.707963   2.435831  -8.482192   1.066266          1 
   Placebo_1 | -.0419062   .9218556  -1.848743   1.764931          1 
   Placebo_2 |  .3483181   .9021927   -1.41998   2.116616          1 
   Placebo_3 | -.6071515   .7799335  -2.135821   .9215181          1 
   Placebo_4 |  .5130832   .6691948  -.7985386   1.824705          1 
   Placebo_5 | -.7219035   .9036717    -2.4931   1.049293          1 
2022

e(H)[8,5]
             Estimate          SE       LB CI       UB CI   Switchers
      ATT  -2.3658576   1.4888943  -5.2840905   .55237523           1
 Effect_1  -1.0237522   1.6589223    -4.27524   2.2277356           1
 Effect_2   -3.707963   2.4358312  -8.4821921   1.0662661           1
Placebo_1  -.04190617   .92185559  -1.8487431   1.7649308           1
Placebo_2   .34831809   .90219265  -1.4199795   2.1166157           1
Placebo_3   -.6071515   .77993345  -2.1358211   .92151806           1
Placebo_4   .51308324   .66919479  -.79853855    1.824705           1
Placebo_5  -.72190347   .90367167  -2.4930999    1.049293           1
(20,788 missing values generated)
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_acs_16_22_all_n1_rate_acs1_1_sample_urban95_covid_eventstudy.jpg written in JPEG format
Placebo replications (100). This may take some time.
----+--- 1 ---+--- 2 ---+--- 3 ---+--- 4 ---+--- 5
..................................................     50
..................................................     100


Synthetic Difference-in-Differences Estimator

-----------------------------------------------------------------------------
n2_rate_acs1 |     ATT     Std. Err.     t      P>|t|    [95% Conf. Interval]
-------------+---------------------------------------------------------------
     Treated |  -2.46775    1.97202    -1.25    0.211    -6.33283     1.39734
-----------------------------------------------------------------------------
95% CIs and p-values are based on large-sample approximations.
Refer to Arkhangelsky et al., (2021) for theoretical derivations.
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_acs_16_22_all_n2_rate_acs1_0_sample_urban95_covid_trends2021.pdf saved as PDF format

added scalar:
              e(count) =  30

added scalar:
               e(mean) =  .38108398
Synthetic Difference-in-differences

Boostrap replications (100), placebo mode.
|0% ----------------------------------------- 100%|
|.................................................|


             |  Estimate         SE      LB CI      UB CI  Switchers 
-------------+------------------------------------------------------
         ATT | -2.467747   1.444623  -5.299207   .3637139          1 
    Effect_1 | -1.406048   1.803736  -4.941372   2.129275          1 
    Effect_2 | -3.529445   2.003269  -7.455853    .396963          1 
   Placebo_1 | -.3824306   1.024038  -2.389545   1.624683          1 
   Placebo_2 |  .2775517   1.001022  -1.684451   2.239554          1 
   Placebo_3 | -.2544727   .8108592  -1.843757   1.334811          1 
   Placebo_4 |  .6733502   .6779816  -.6554937   2.002194          1 
   Placebo_5 | -.5431842   .9726153   -2.44951   1.363142          1 
2022

e(H)[8,5]
             Estimate          SE       LB CI       UB CI   Switchers
      ATT  -2.4677467   1.4446227  -5.2992072   .36371388           1
 Effect_1  -1.4060485   1.8037364  -4.9413718   2.1292748           1
 Effect_2  -3.5294449   2.0032693  -7.4558527   .39696296           1
Placebo_1  -.38243064   1.0240378  -2.3895447   1.6246835           1
Placebo_2   .27755166   1.0010216  -1.6844507    2.239554           1
Placebo_3  -.25447271   .81085917  -1.8437567   1.3348113           1
Placebo_4    .6733502   .67798156  -.65549367   2.0021941           1
Placebo_5  -.54318417   .97261528  -2.4495101   1.3631418           1
(20,788 missing values generated)
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_acs_16_22_all_n2_rate_acs1_0_sample_urban95_covid_eventstudy.jpg written in JPEG format
Placebo replications (100). This may take some time.
----+--- 1 ---+--- 2 ---+--- 3 ---+--- 4 ---+--- 5
..................................................     50
..................................................     100


Synthetic Difference-in-Differences Estimator

-----------------------------------------------------------------------------
n2_rate_acs1 |     ATT     Std. Err.     t      P>|t|    [95% Conf. Interval]
-------------+---------------------------------------------------------------
     Treated |  -2.46775    1.97449    -1.25    0.211    -6.33769     1.40219
-----------------------------------------------------------------------------
95% CIs and p-values are based on large-sample approximations.
Refer to Arkhangelsky et al., (2021) for theoretical derivations.
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_acs_16_22_all_n2_rate_acs1_1_sample_urban95_covid_trends2021.pdf saved as PDF format

added scalar:
              e(count) =  30

added scalar:
               e(mean) =  .38108398
Synthetic Difference-in-differences

Boostrap replications (100), placebo mode.
|0% ----------------------------------------- 100%|
|.................................................|


             |  Estimate         SE      LB CI      UB CI  Switchers 
-------------+------------------------------------------------------
         ATT | -2.467747   1.467219  -5.343497   .4080033          1 
    Effect_1 | -1.406048    1.77118  -4.877561   2.065464          1 
    Effect_2 | -3.529445   1.889018  -7.231919   .1730295          1 
   Placebo_1 | -.3824306   .8649854  -2.077802   1.312941          1 
   Placebo_2 |  .2775517   .8951234   -1.47689   2.031994          1 
   Placebo_3 | -.2544727   .7175669  -1.660904   1.151958          1 
   Placebo_4 |  .6733502   .6687232  -.6373472   1.984048          1 
   Placebo_5 | -.5431842   .9668724  -2.438254   1.351886          1 
2022

e(H)[8,5]
             Estimate          SE       LB CI       UB CI   Switchers
      ATT  -2.4677467   1.4672194  -5.3434967   .40800335           1
 Effect_1  -1.4060485   1.7711801  -4.8775614   2.0654645           1
 Effect_2  -3.5294449   1.8890175  -7.2319192   .17302949           1
Placebo_1  -.38243064   .86498538   -2.077802   1.3129407           1
Placebo_2   .27755166   .89512343  -1.4768903   2.0319936           1
Placebo_3  -.25447271   .71756692  -1.6609039   1.1519585           1
Placebo_4    .6733502   .66872317  -.63734721   1.9840476           1
Placebo_5  -.54318417   .96687243  -2.4382541   1.3518858           1
(20,788 missing values generated)
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_acs_16_22_all_n2_rate_acs1_1_sample_urban95_covid_eventstudy.jpg written in JPEG format
Placebo replications (100). This may take some time.
----+--- 1 ---+--- 2 ---+--- 3 ---+--- 4 ---+--- 5
..................................................     50
..................................................     100


Synthetic Difference-in-Differences Estimator

-----------------------------------------------------------------------------
agi_rate_a~1 |     ATT     Std. Err.     t      P>|t|    [95% Conf. Interval]
-------------+---------------------------------------------------------------
     Treated |  -2.90810    1.61717    -1.80    0.072    -6.07770     0.26150
-----------------------------------------------------------------------------
95% CIs and p-values are based on large-sample approximations.
Refer to Arkhangelsky et al., (2021) for theoretical derivations.
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_acs_16_22_all_agi_rate_acs1_0_sample_urban95_covid_trends2021.pdf saved as PDF format

added scalar:
              e(count) =  30

added scalar:
               e(mean) =  .58802893
Synthetic Difference-in-differences

Boostrap replications (100), placebo mode.
|0% ----------------------------------------- 100%|
|.................................................|


             |  Estimate         SE      LB CI      UB CI  Switchers 
-------------+------------------------------------------------------
         ATT | -2.908101   1.511169  -5.869991   .0537899          1 
    Effect_1 | -.9011508   1.801043  -4.431196   2.628894          1 
    Effect_2 |  -4.91505   2.188921  -9.205336  -.6247647          1 
   Placebo_1 | -.0792016   .7675342  -1.583569   1.425165          1 
   Placebo_2 |  .4641026   .9748267  -1.446558   2.374763          1 
   Placebo_3 | -.3600025   .7126217  -1.756741   1.036736          1 
   Placebo_4 |  .3943955   .9493516  -1.466334   2.255125          1 
   Placebo_5 |  .0547333   1.039336  -1.982366   2.091833          1 
2022

e(H)[8,5]
             Estimate          SE       LB CI       UB CI   Switchers
      ATT  -2.9081007   1.5111687  -5.8699912   .05378991           1
 Effect_1  -.90115084   1.8010432  -4.4311956   2.6288939           1
 Effect_2  -4.9150505   2.1889213  -9.2053363  -.62476466           1
Placebo_1  -.07920159   .76753421  -1.5835686   1.4251655           1
Placebo_2   .46410258   .97482674  -1.4465578    2.374763           1
Placebo_3  -.36000253   .71262166   -1.756741   1.0367359           1
Placebo_4   .39439549   .94935158  -1.4663336   2.2551246           1
Placebo_5    .0547333   1.0393364   -1.982366   2.0918326           1
(20,788 missing values generated)
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_acs_16_22_all_agi_rate_acs1_0_sample_urban95_covid_eventstudy.jpg written in JPEG format
Placebo replications (100). This may take some time.
----+--- 1 ---+--- 2 ---+--- 3 ---+--- 4 ---+--- 5
..................................................     50
..................................................     100


Synthetic Difference-in-Differences Estimator

-----------------------------------------------------------------------------
agi_rate_a~1 |     ATT     Std. Err.     t      P>|t|    [95% Conf. Interval]
-------------+---------------------------------------------------------------
     Treated |  -2.90810    1.88366    -1.54    0.123    -6.60000     0.78380
-----------------------------------------------------------------------------
95% CIs and p-values are based on large-sample approximations.
Refer to Arkhangelsky et al., (2021) for theoretical derivations.
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_acs_16_22_all_agi_rate_acs1_1_sample_urban95_covid_trends2021.pdf saved as PDF format

added scalar:
              e(count) =  30

added scalar:
               e(mean) =  .58802893
Synthetic Difference-in-differences

Boostrap replications (100), placebo mode.
|0% ----------------------------------------- 100%|
|.................................................|


             |  Estimate         SE      LB CI      UB CI  Switchers 
-------------+------------------------------------------------------
         ATT | -2.908101   1.493408  -5.835181   .0189793          1 
    Effect_1 | -.9011508   1.780985  -4.391882    2.58958          1 
    Effect_2 |  -4.91505   2.157607   -9.14396   -.686141          1 
   Placebo_1 | -.0792016   1.366029  -2.756619   2.598216          1 
   Placebo_2 |  .4641026   .8410653  -1.184385   2.112591          1 
   Placebo_3 | -.3600025   1.089401  -2.495228   1.775223          1 
   Placebo_4 |  .3943955    1.14742  -1.854548   2.643339          1 
   Placebo_5 |  .0547333   1.045998  -1.995423   2.104889          1 
2022

e(H)[8,5]
             Estimate          SE       LB CI       UB CI   Switchers
      ATT  -2.9081007   1.4934081  -5.8351806   .01897928           1
 Effect_1  -.90115084   1.7809853   -4.391882   2.5895803           1
 Effect_2  -4.9150505   2.1576069  -9.1439599  -.68614102           1
Placebo_1  -.07920159   1.3660292  -2.7566187   2.5982155           1
Placebo_2   .46410258   .84106531  -1.1843854   2.1125906           1
Placebo_3  -.36000253   1.0894005  -2.4952276   1.7752225           1
Placebo_4   .39439549   1.1474203  -1.8545483   2.6433393           1
Placebo_5    .0547333    1.045998  -1.9954227   2.1048893           1
(20,788 missing values generated)
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_acs_16_22_all_agi_rate_acs1_1_sample_urban95_covid_eventstudy.jpg written in JPEG format
(output written to C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/tab_sdid_acs_16_22_all_sample_urban95_covid.tex)
(337 real changes made)
Placebo replications (100). This may take some time.
----+--- 1 ---+--- 2 ---+--- 3 ---+--- 4 ---+--- 5
..................................................     50
..................................................     100


Synthetic Difference-in-Differences Estimator

-----------------------------------------------------------------------------
n1_rate_acs2 |     ATT     Std. Err.     t      P>|t|    [95% Conf. Interval]
-------------+---------------------------------------------------------------
     Treated |  -3.53918    3.07432    -1.15    0.250    -9.56473     2.48638
-----------------------------------------------------------------------------
95% CIs and p-values are based on large-sample approximations.
Refer to Arkhangelsky et al., (2021) for theoretical derivations.
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_acs_16_22_col_n1_rate_acs2_0_sample_all_excl2020_trends2021.pdf saved as PDF format

added scalar:
              e(count) =  337

added scalar:
               e(mean) =  1.732717
Synthetic Difference-in-differences

Boostrap replications (100), placebo mode.
|0% ----------------------------------------- 100%|
|.................................................|


             |  Estimate         SE      LB CI      UB CI  Switchers 
-------------+------------------------------------------------------
         ATT | -3.539178   2.879719  -9.183428   2.105072          1 
    Effect_1 | -2.424901   3.500691  -9.286255   4.436453          1 
    Effect_2 | -4.653455   3.607673  -11.72449   2.417585          1 
   Placebo_1 |  .0475439   .4639076   -.861715   .9568028          1 
   Placebo_2 | -.0016887   .5944321  -1.166776   1.163398          1 
   Placebo_3 | -.0468095   .6123186  -1.246954   1.153335          1 
   Placebo_4 | -.0084803   .5981764  -1.180906   1.163946          1 

WARNING: Restarted 7 bootstrap run(s) with no treated or control groups.
2022

e(H)[7,5]
             Estimate          SE       LB CI       UB CI   Switchers
      ATT  -3.5391778   2.8797192  -9.1834275   2.1050719           1
 Effect_1  -2.4249009   3.5006907  -9.2862547   4.4364528           1
 Effect_2  -4.6534547   3.6076735  -11.724495   2.4175852           1
Placebo_1    .0475439   .46390762  -.86171504   .95680283           1
Placebo_2  -.00168868   .59443211  -1.1667756   1.1633983           1
Placebo_3  -.04680949   .61231858  -1.2469539   1.1533349           1
Placebo_4   -.0084803   .59817643  -1.1809061   1.1639455           1
(20,789 missing values generated)
(4 real changes made)
(1 observation created)
(1 real change made)
(1 real change made, 1 to missing)
(1 real change made, 1 to missing)
(1 real change made, 1 to missing)
(file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_acs_16_22_col_n1_rate_acs2_0_sample_all_excl2020_eventstudy.jpg not found)
file C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/fig_acs_16_22_col_n1_rate_acs2_0_sample_all_excl2020_eventstudy.jpg written in JPEG format
(1 observation deleted)
Placebo replications (100). This may take some time.
----+--- 1 ---+--- 2 ---+--- 3 ---+--- 4 ---+--- 5
.........................--Break--
r(1);

end of do-file

--Break--
r(1);

. clear

. do "C:\Users\ji252\AppData\Local\Temp\STD4490_00000d.tmp"

. 
. ** Load BEA Data 
. import delimited "${data}demographic/CAINC1/CAINC1__ALL_AREAS_1969_2023.csv",   ///
>         clear 
(encoding automatically selected: ISO-8859-1)
(63 vars, 9,604 obs)

. 
. ** Drop unnecc variables 
. drop region tablename industryclassification unit geoname 

. 
. ** Drop empty cells 
. drop if missing(linecode)
(4 observations deleted)

. 
. ** Update names 
. rename geofips fips 

. replace fips = subinstr(fips, `"""', "", .)
(9,600 real changes made)

. destring fips, replace 
fips: all characters numeric; replaced as long

. 
. ** Keep population and per-capita income, dropping personal income (total)
. tab description linecode

                      |             LineCode
          Description |         1          2          3 |     Total
----------------------+---------------------------------+----------
Per capita personal.. |         0          0      3,200 |     3,200 
Personal income (th.. |     3,200          0          0 |     3,200 
Population (persons.. |         0      3,200          0 |     3,200 
----------------------+---------------------------------+----------
                Total |     3,200      3,200      3,200 |     9,600 

. drop if linecode == 1   
(3,200 observations deleted)

. drop description

.         
. ** Get V* to be in terms of years 
. ** V9 == 1969 
. forvalues i = 9/63 {
  2.         
.         local j = 1960 + `i'
  3.         rename v`i' value`j'
  4.         
. } // END I LOOP 

. 
. ** Reshape 
. reshape long value, i(fips linecode) j(year)
(j = 1969 1970 1971 1972 1973 1974 1975 1976 1977 1978 1979 1980 1981 1982 1983 1984 1985 1986 1987 1988 1989 1990 1991 1992 1993 1994 1995 1996 1997 1998 1999 2000 2001 2002 2003 2004 2005 2006 20
> 07 2008 2009 2010 2011 2012 2013 2014 2015 2016 2017 2018 2019 2020 2021 2022 2023)

Data                               Wide   ->   Long
-----------------------------------------------------------------------------
Number of observations            6,400   ->   352,000     
Number of variables                  57   ->   4           
j variable (55 values)                    ->   year
xij variables:
      value1969 value1970 ... value2023   ->   value
-----------------------------------------------------------------------------

. reshape wide value, i(fips year ) j(linecode)
(j = 2 3)

Data                               Long   ->   Wide
-----------------------------------------------------------------------------
Number of observations          352,000   ->   176,000     
Number of variables                   4   ->   4           
j variable (2 values)          linecode   ->   (dropped)
xij variables:
                                  value   ->   value2 value3
-----------------------------------------------------------------------------

. 
. ** Keep years 
. keep if inrange(year, 2015, ${end_year_acs})
(147,200 observations deleted)

. 
. ** Rename values 
. rename value2 population 

. rename value3 per_capita_income

. 
. ** Drop if missing values 
. drop if population == "(NA)"
(239 observations deleted)

. 
. ** Keep only counties with all observations 
. bysort fips: gen ct = _N 

. tab ct

         ct |      Freq.     Percent        Cum.
------------+-----------------------------------
          4 |          8        0.03        0.03
          5 |          5        0.02        0.05
          9 |     28,548       99.95      100.00
------------+-----------------------------------
      Total |     28,561      100.00

. keep if ct == 9
(13 observations deleted)

. drop ct

. 
. ** Destring 
. destring population, replace 
population: all characters numeric; replaced as long

. destring per_capita_income, replace 
per_capita_income: all characters numeric; replaced as long

. 
end of do-file

. expand 2 if year == 2023
(3,172 observations created)

. clear

. do "C:\Users\ji252\AppData\Local\Temp\STD4490_00000e.tmp"

. 
. ** Load BEA Data 
. import delimited "${data}demographic/CAINC1/CAINC1__ALL_AREAS_1969_2023.csv",   ///
>         clear 
(encoding automatically selected: ISO-8859-1)
(63 vars, 9,604 obs)

. 
. ** Drop unnecc variables 
. drop region tablename industryclassification unit geoname 

. 
. ** Drop empty cells 
. drop if missing(linecode)
(4 observations deleted)

. 
. ** Update names 
. rename geofips fips 

. replace fips = subinstr(fips, `"""', "", .)
(9,600 real changes made)

. destring fips, replace 
fips: all characters numeric; replaced as long

. 
. ** Keep population and per-capita income, dropping personal income (total)
. tab description linecode

                      |             LineCode
          Description |         1          2          3 |     Total
----------------------+---------------------------------+----------
Per capita personal.. |         0          0      3,200 |     3,200 
Personal income (th.. |     3,200          0          0 |     3,200 
Population (persons.. |         0      3,200          0 |     3,200 
----------------------+---------------------------------+----------
                Total |     3,200      3,200      3,200 |     9,600 

. drop if linecode == 1   
(3,200 observations deleted)

. drop description

.         
. ** Get V* to be in terms of years 
. ** V9 == 1969 
. forvalues i = 9/63 {
  2.         
.         local j = 1960 + `i'
  3.         rename v`i' value`j'
  4.         
. } // END I LOOP 

. 
. ** Reshape 
. reshape long value, i(fips linecode) j(year)
(j = 1969 1970 1971 1972 1973 1974 1975 1976 1977 1978 1979 1980 1981 1982 1983 1984 1985 1986 1987 1988 1989 1990 1991 1992 1993 1994 1995 1996 1997 1998 1999 2000 2001 2002 2003 2004 2005 2006 20
> 07 2008 2009 2010 2011 2012 2013 2014 2015 2016 2017 2018 2019 2020 2021 2022 2023)

Data                               Wide   ->   Long
-----------------------------------------------------------------------------
Number of observations            6,400   ->   352,000     
Number of variables                  57   ->   4           
j variable (55 values)                    ->   year
xij variables:
      value1969 value1970 ... value2023   ->   value
-----------------------------------------------------------------------------

. reshape wide value, i(fips year ) j(linecode)
(j = 2 3)

Data                               Long   ->   Wide
-----------------------------------------------------------------------------
Number of observations          352,000   ->   176,000     
Number of variables                   4   ->   4           
j variable (2 values)          linecode   ->   (dropped)
xij variables:
                                  value   ->   value2 value3
-----------------------------------------------------------------------------

. 
. ** Keep years 
. keep if inrange(year, 2015, ${end_year_acs})
(147,200 observations deleted)

. 
. ** Rename values 
. rename value2 population 

. rename value3 per_capita_income

. 
. ** Drop if missing values 
. drop if population == "(NA)"
(239 observations deleted)

. 
. ** Keep only counties with all observations 
. bysort fips: gen ct = _N 

. tab ct

         ct |      Freq.     Percent        Cum.
------------+-----------------------------------
          4 |          8        0.03        0.03
          5 |          5        0.02        0.05
          9 |     28,548       99.95      100.00
------------+-----------------------------------
      Total |     28,561      100.00

. keep if ct == 9
(13 observations deleted)

. drop ct

. 
. ** Destring 
. destring population, replace 
population: all characters numeric; replaced as long

. destring per_capita_income, replace 
per_capita_income: all characters numeric; replaced as long

. 
. ** Extrapolate through 2024 
. expand 2 if year == 2023, gen(tag)
(3,172 observations created)

. replace year = 2024 if tag == 1 
(3,172 real changes made)

. replace population = . if tag == 1 
(3,172 real changes made, 3,172 to missing)

. replace per_capita_income = . if tag == 1 
(3,172 real changes made, 3,172 to missing)

. 
. 
. ** Get list of all counties 
. qui levelsof fips, local(fips)

. 
. ** Loop over variables
. foreach v of varlist population per_capita_income {
  2.         
.         ** Loop over all FIPS 
.     foreach c of local fips {
  3.                 
.                 quietly{
  4.                         
.                         regress `v' year if fips == `c' & tag != 1 
  5.                         predict `v'_hat
  6.                         replace `v' = `v'_hat if fips == `c' & year == 2024
  7.                         drop `v'_hat
  8.                         
.                 } // END QUIET
  9.     } // END FIPS LOOP 
 10. } // END VAR LOOP 

. 
. 
end of do-file

. tab tag

  Expanded observation |
                  type |      Freq.     Percent        Cum.
-----------------------+-----------------------------------
  Original observation |     28,548       90.00       90.00
Duplicated observation |      3,172       10.00      100.00
-----------------------+-----------------------------------
                 Total |     31,720      100.00

. sort year

. sort fips year

. do "C:\Users\ji252\AppData\Local\Temp\STD4490_00000f.tmp"

. 
. ** INSTALLATION 
. * net install github, from("https://haghish.github.io/github/")
. * github install haghish/rcall, stable
. * ssc install ftools
. * ssc install reghdfe
. * ssc install fre 
. * ssc install coefplot
. * ssc install sdid 
. * ssc install estout 
. * ssc install sdid_event
. * ssc install geodist
. 
. ** Preliminaries 
. capture log close 
