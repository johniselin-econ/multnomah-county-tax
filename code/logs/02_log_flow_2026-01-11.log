--------------------------------------------------------------------
      name:  log_02
       log:  C:/Users/ji252/Documents/GitHub/multnomah-county-tax/co
> de/logs/02_log_flow_2026-01-11.log
  log type:  text
 opened on:  11 Jan 2026, 18:06:31

. 
. ** Parameters
. local reps = 100

. 
. ** Load IRS Data
. use "${data}working/irs_county_flow.dta", clear

. 
. ** Sample restrictions
. drop if inlist(state_fips_o, 2, 15)     // Alaska and Hawaii
(3,109 observations deleted)

. drop if inlist(state_fips_d, 2, 15)     // Alaska and Hawaii
(2,293 observations deleted)

. 
. ** Clean up variables
. drop fips

. 
. ** Merge with time-varying controls
. 
. ** Keep if in donor pool in both origin and destination
. foreach x in "o" "d" {
  2. 
.         ** Merge with relevent variables
.         gen fips = fips_`x'
  3.         merge m:1 year fips using "${data}working/bls_unemploym
> ent",    ///
>                 keep(match) gen(merge_bls_`x')
  4.         merge m:1 year fips using "${data}working/bea_economics
> ",               ///
>                 keep(match) gen(merge_bea_`x')
  5. 
.         ** Rename
.         rename unemp unemp_`x'
  6.         rename population pop_`x'
  7.         rename per_capita_income per_capita_income_`x'
  8.         drop fips
  9. 
. } // END ORIGIN-DESTINATION LOOP
(variable fips was float, now double to accommodate using data's
       values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                           353,742  (merge_bls_o==3)
    -----------------------------------------

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                           348,116  (merge_bea_o==3)
    -----------------------------------------
(variable fips was float, now double to accommodate using data's
       values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                           345,941  (merge_bls_d==3)
    -----------------------------------------

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                           342,102  (merge_bea_d==3)
    -----------------------------------------

. 
. 
. ** Mover indicators
. gen mover = fips_o != fips_d

. 
. ** Generate flow id
. egen flow_id = group(fips_d fips_o)

. 
. ** Multnomah indicators
. gen out_multnomah = (state_fips_o == 41 & county_fips_o == 51)

. gen in_multnomah = (state_fips_d == 41 & county_fips_d == 51)

. 
. ** Post-indicators
. gen post = year > 2020

. 
. ** Interactions
. gen in_multnomah_post = in_multnomah * post

. gen out_multnomah_post = out_multnomah * post

. 
. ** Create interactions manually (base year = 2020)
. forvalues y = 2016/2022 {
  2.         gen x_out_`y' = out_multnomah * (year == `y')
  3.         gen x_in_`y' = in_multnomah * (year == `y')
  4. }

. 
. ** Drop base year (2020)
. drop x_out_2020 x_in_2020  

. 
. ******************************************************************
> **************
. ** REGRESSION 1: Multnomah X Post (DiD)
. ******************************************************************
> **************
. 
. ** Data cleaning 
. replace agi = 0 if agi < 0 
(86 real changes made)

. 
. ** Loop over outcome variables
. foreach outcome in n1 n2 agi {
  2. 
.         ** Set outcome label for graphs
.         if "`outcome'" == "n1" local outcome_label "Number of Retu
> rns"
  3.         if "`outcome'" == "n2" local outcome_label "Number of E
> xemptions"
  4.         if "`outcome'" == "agi" local outcome_label "Adjusted G
> ross Income"
  5. 
.         ** Regression 1a: With covariates
.         ppmlhdfe `outcome' i.out_multnomah_post i.in_multnomah_pos
> t     ///
>                 unemp_* pop_* per_capita_income_*                 
>                                       ///
>                 if mover == 1,                                    
>                                                       ///
>                 absorb(year flow_id) vce(cluster flow_id)
  6.         estimates store `outcome'_with_covars
  7. 
.         ** Regression 1b: Without covariates
.         ppmlhdfe `outcome' i.out_multnomah_post i.in_multnomah_pos
> t     ///
>                 if mover == 1,                                    
>                                                       ///
>                 absorb(year flow_id) vce(cluster flow_id)
  8.         estimates store `outcome'_no_covars
  9.         
.         ** Plot both regressions
.         coefplot        (`outcome'_with_covars, label("With Covari
> ates")        ///
>                                         mc(navy) ciopts(lc(navy)))
>                                               ///
>                                 (`outcome'_no_covars, label("Witho
> ut Covariates")       ///
>                                         mc(maroon) ciopts(lc(maroo
> n))),                                 ///
>                 keep(1.out_multnomah_post 1.in_multnomah_post)    
>                       ///
>                 ciopts(recast(rcap))                              
>                                               ///
>                 yline(0, lc(gs10) lp(dash))                       
>                                       ///
>                 xline(0, lc(gs10) lp(dash))                       
>                                       ///
>                 coeflabels(     1.out_multnomah_post = "Out-migrat
> ion"                  ///
>                                         1.in_multnomah_post = "In-
> migration")                   ///
>                 ytitle("Coefficient")                             
>                                               ///
>                 xtitle("")                                        
>                                                               ///
>                 legend(pos(6) rows(1))                            
>                                               ///
>                 title("Migration Flows: Multnomah County x Post") 
>                       ///
>                 subtitle("`outcome_label'")                       
>                                               ///
>                 graphregion(color(white))
 10. 
.         graph export "${results}fig_multnomah_post_`outcome'.png",
>  replace
 11. 
. 
. } // END OUTCOME LOOP
(dropped 10447 observations that are either singletons or separated 
> by a fixed effect)
Iteration 1:   deviance = 2.8754e+06  eps = .         iters = 4    t
> ol = 1.0e-04                                                      
>               min(eta) =  -2.82  P   
Iteration 2:   deviance = 6.3174e+05  eps = 3.55e+00  iters = 3    t
> ol = 1.0e-04                                                      
>               min(eta) =  -3.25      
Iteration 3:   deviance = 5.8911e+05  eps = 7.24e-02  iters = 3    t
> ol = 1.0e-04                                                      
>               min(eta) =  -3.39      
Iteration 4:   deviance = 5.8906e+05  eps = 8.34e-05  iters = 2    t
> ol = 1.0e-04                                                      
>               min(eta) =  -3.40      
Iteration 5:   deviance = 5.8906e+05  eps = 5.95e-10  iters = 2    t
> ol = 1.0e-05                                                      
>               min(eta) =  -3.40      
Iteration 6:   deviance = 5.8906e+05  eps = 1.93e-16  iters = 1    t
> ol = 1.0e-06                                                      
>               min(eta) =  -3.40   S  
Iteration 7:   deviance = 5.8906e+05  eps = 1.93e-16  iters = 1    t
> ol = 1.0e-09                                                      
>               min(eta) =  -3.40   S O
--------------------------------------------------------------------
> ----------------------------------------
(legend: p: exact partial-out   s: exact solver   h: step-halving   
> o: epsilon below tolerance)
Converged in 7 iterations and 16 HDFE sub-iterations (tol = 1.0e-08)

HDFE PPML regression                              No. of obs      = 
>    331,655
Absorbing 2 HDFE groups                           Residual df     = 
>     57,484
Statistics robust to heteroskedasticity           Wald chi2(8)    = 
>    1117.95
Deviance             =  589060.4702               Prob > chi2     = 
>     0.0000
Log pseudolikelihood = -1266915.146               Pseudo R2       = 
>     0.9778

Number of clusters (flow_id)=     57,485
                           (Std. err. adjusted for 57,485 clusters i
> n flow_id)
--------------------------------------------------------------------
> ----------
             |               Robust
          n1 | Coefficient  std. err.      z    P>|z|     [95% conf.
>  interval]
-------------+------------------------------------------------------
> ----------
1.out_mult~t |   .0112807    .022745     0.50   0.620    -.0332988  
>   .0558601
1.in_multn~t |  -.0763629   .0162191    -4.71   0.000    -.1081518  
>   -.044574
     unemp_o |   .0234736   .0009508    24.69   0.000     .0216101  
>    .025337
     unemp_d |  -.0210478    .000978   -21.52   0.000    -.0229646  
>  -.0191309
       pop_o |   6.38e-08   3.11e-08     2.05   0.040     2.80e-09  
>   1.25e-07
       pop_d |   3.63e-07   3.24e-08    11.20   0.000     3.00e-07  
>   4.27e-07
per_capita~o |   2.13e-06   3.64e-07     5.86   0.000     1.42e-06  
>   2.84e-06
per_capita~d |  -1.56e-06   2.83e-07    -5.51   0.000    -2.12e-06  
>  -1.01e-06
       _cons |   5.640978   .0535479   105.34   0.000     5.536026  
>    5.74593
--------------------------------------------------------------------
> ----------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
        year |         7           1           6     |
     flow_id |     57485       57485           0    *|
-----------------------------------------------------+
* = FE nested within cluster; treated as redundant for DoF computati
> on
(dropped 10447 observations that are either singletons or separated 
> by a fixed effect)
Iteration 1:   deviance = 2.9001e+06  eps = .         iters = 4    t
> ol = 1.0e-04                                                      
>               min(eta) =  -2.75  P   
Iteration 2:   deviance = 6.5484e+05  eps = 3.43e+00  iters = 3    t
> ol = 1.0e-04                                                      
>               min(eta) =  -3.22      
Iteration 3:   deviance = 6.1220e+05  eps = 6.97e-02  iters = 3    t
> ol = 1.0e-04                                                      
>               min(eta) =  -3.36      
Iteration 4:   deviance = 6.1215e+05  eps = 8.01e-05  iters = 2    t
> ol = 1.0e-04                                                      
>               min(eta) =  -3.37      
Iteration 5:   deviance = 6.1215e+05  eps = 5.70e-10  iters = 2    t
> ol = 1.0e-05                                                      
>               min(eta) =  -3.37      
Iteration 6:   deviance = 6.1215e+05  eps = 0.00e+00  iters = 1    t
> ol = 1.0e-06                                                      
>               min(eta) =  -3.37   S  
Iteration 7:   deviance = 6.1215e+05  eps = 0.00e+00  iters = 1    t
> ol = 1.0e-09                                                      
>               min(eta) =  -3.37   S O
--------------------------------------------------------------------
> ----------------------------------------
(legend: p: exact partial-out   s: exact solver   h: step-halving   
> o: epsilon below tolerance)
Converged in 7 iterations and 16 HDFE sub-iterations (tol = 1.0e-08)

HDFE PPML regression                              No. of obs      = 
>    331,655
Absorbing 2 HDFE groups                           Residual df     = 
>     57,484
Statistics robust to heteroskedasticity           Wald chi2(2)    = 
>      32.03
Deviance             =  612152.2382               Prob > chi2     = 
>     0.0000
Log pseudolikelihood =  -1278461.03               Pseudo R2       = 
>     0.9776

Number of clusters (flow_id)=     57,485
                           (Std. err. adjusted for 57,485 clusters i
> n flow_id)
--------------------------------------------------------------------
> ----------
             |               Robust
          n1 | Coefficient  std. err.      z    P>|z|     [95% conf.
>  interval]
-------------+------------------------------------------------------
> ----------
1.out_mult~t |   .0182474   .0234116     0.78   0.436    -.0276384  
>   .0641333
1.in_multn~t |  -.0863437   .0154255    -5.60   0.000    -.1165772  
>  -.0561103
       _cons |   6.165859   .0000373  1.7e+05   0.000     6.165786  
>   6.165932
--------------------------------------------------------------------
> ----------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
        year |         7           1           6     |
     flow_id |     57485       57485           0    *|
-----------------------------------------------------+
* = FE nested within cluster; treated as redundant for DoF computati
> on
file
    C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/f
    > ig_multnomah_post_n1.png saved as PNG format
(dropped 10447 observations that are either singletons or separated 
> by a fixed effect)
Iteration 1:   deviance = 5.4787e+06  eps = .         iters = 4    t
> ol = 1.0e-04                                                      
>               min(eta) =  -2.91  P   
Iteration 2:   deviance = 1.4132e+06  eps = 2.88e+00  iters = 3    t
> ol = 1.0e-04                                                      
>               min(eta) =  -3.54      
Iteration 3:   deviance = 1.3306e+06  eps = 6.20e-02  iters = 3    t
> ol = 1.0e-04                                                      
>               min(eta) =  -3.81      
Iteration 4:   deviance = 1.3305e+06  eps = 1.14e-04  iters = 2    t
> ol = 1.0e-04                                                      
>               min(eta) =  -3.85      
Iteration 5:   deviance = 1.3305e+06  eps = 4.79e-09  iters = 1    t
> ol = 1.0e-04                                                      
>               min(eta) =  -3.85      
Iteration 6:   deviance = 1.3305e+06  eps = 1.65e-14  iters = 1    t
> ol = 1.0e-05                                                      
>               min(eta) =  -3.85   S  
Iteration 7:   deviance = 1.3305e+06  eps = 0.00e+00  iters = 2    t
> ol = 1.0e-09                                                      
>               min(eta) =  -3.85   S O
--------------------------------------------------------------------
> ----------------------------------------
(legend: p: exact partial-out   s: exact solver   h: step-halving   
> o: epsilon below tolerance)
Converged in 7 iterations and 16 HDFE sub-iterations (tol = 1.0e-08)

HDFE PPML regression                              No. of obs      = 
>    331,655
Absorbing 2 HDFE groups                           Residual df     = 
>     57,484
Statistics robust to heteroskedasticity           Wald chi2(8)    = 
>    1091.86
Deviance             =   1330486.72               Prob > chi2     = 
>     0.0000
Log pseudolikelihood = -1733747.739               Pseudo R2       = 
>     0.9830

Number of clusters (flow_id)=     57,485
                           (Std. err. adjusted for 57,485 clusters i
> n flow_id)
--------------------------------------------------------------------
> ----------
             |               Robust
          n2 | Coefficient  std. err.      z    P>|z|     [95% conf.
>  interval]
-------------+------------------------------------------------------
> ----------
1.out_mult~t |    .015437    .020791     0.74   0.458    -.0253127  
>   .0561866
1.in_multn~t |  -.0740198   .0154241    -4.80   0.000    -.1042505  
>  -.0437892
     unemp_o |   .0221146   .0009958    22.21   0.000     .0201629  
>   .0240664
     unemp_d |  -.0230597   .0010507   -21.95   0.000    -.0251189  
>  -.0210004
       pop_o |   5.15e-08   3.16e-08     1.63   0.103    -1.04e-08  
>   1.13e-07
       pop_d |   3.62e-07   3.00e-08    12.05   0.000     3.03e-07  
>   4.20e-07
per_capita~o |   2.54e-06   3.76e-07     6.76   0.000     1.80e-06  
>   3.28e-06
per_capita~d |  -2.02e-06   3.03e-07    -6.64   0.000    -2.61e-06  
>  -1.42e-06
       _cons |   6.280974    .053925   116.48   0.000     6.175282  
>   6.386665
--------------------------------------------------------------------
> ----------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
        year |         7           1           6     |
     flow_id |     57485       57485           0    *|
-----------------------------------------------------+
* = FE nested within cluster; treated as redundant for DoF computati
> on
(dropped 10447 observations that are either singletons or separated 
> by a fixed effect)
Iteration 1:   deviance = 5.5233e+06  eps = .         iters = 4    t
> ol = 1.0e-04                                                      
>               min(eta) =  -2.89  P   
Iteration 2:   deviance = 1.4553e+06  eps = 2.80e+00  iters = 3    t
> ol = 1.0e-04                                                      
>               min(eta) =  -3.50      
Iteration 3:   deviance = 1.3728e+06  eps = 6.01e-02  iters = 3    t
> ol = 1.0e-04                                                      
>               min(eta) =  -3.76      
Iteration 4:   deviance = 1.3726e+06  eps = 1.10e-04  iters = 2    t
> ol = 1.0e-04                                                      
>               min(eta) =  -3.80      
Iteration 5:   deviance = 1.3726e+06  eps = 4.60e-09  iters = 1    t
> ol = 1.0e-04                                                      
>               min(eta) =  -3.80      
Iteration 6:   deviance = 1.3726e+06  eps = 1.59e-14  iters = 1    t
> ol = 1.0e-05                                                      
>               min(eta) =  -3.80   S  
Iteration 7:   deviance = 1.3726e+06  eps = 0.00e+00  iters = 1    t
> ol = 1.0e-09                                                      
>               min(eta) =  -3.80   S O
--------------------------------------------------------------------
> ----------------------------------------
(legend: p: exact partial-out   s: exact solver   h: step-halving   
> o: epsilon below tolerance)
Converged in 7 iterations and 15 HDFE sub-iterations (tol = 1.0e-08)

HDFE PPML regression                              No. of obs      = 
>    331,655
Absorbing 2 HDFE groups                           Residual df     = 
>     57,484
Statistics robust to heteroskedasticity           Wald chi2(2)    = 
>      35.14
Deviance             =  1372638.294               Prob > chi2     = 
>     0.0000
Log pseudolikelihood = -1754823.525               Pseudo R2       = 
>     0.9828

Number of clusters (flow_id)=     57,485
                           (Std. err. adjusted for 57,485 clusters i
> n flow_id)
--------------------------------------------------------------------
> ----------
             |               Robust
          n2 | Coefficient  std. err.      z    P>|z|     [95% conf.
>  interval]
-------------+------------------------------------------------------
> ----------
1.out_mult~t |   .0218918   .0207797     1.05   0.292    -.0188356  
>   .0626192
1.in_multn~t |  -.0864384    .014852    -5.82   0.000    -.1155479  
>   -.057329
       _cons |   6.749585   .0000282  2.4e+05   0.000      6.74953  
>    6.74964
--------------------------------------------------------------------
> ----------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
        year |         7           1           6     |
     flow_id |     57485       57485           0    *|
-----------------------------------------------------+
* = FE nested within cluster; treated as redundant for DoF computati
> on
file
    C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/f
    > ig_multnomah_post_n2.png saved as PNG format
(dropped 10447 observations that are either singletons or separated 
> by a fixed effect)
Iteration 1:   deviance = 4.0054e+08  eps = .         iters = 4    t
> ol = 1.0e-04                                                      
>               min(eta) =  -3.59  P   
Iteration 2:   deviance = 1.6976e+08  eps = 1.36e+00  iters = 3    t
> ol = 1.0e-04                                                      
>               min(eta) =  -4.22      
Iteration 3:   deviance = 1.6099e+08  eps = 5.44e-02  iters = 3    t
> ol = 1.0e-04                                                      
>               min(eta) =  -5.14      
Iteration 4:   deviance = 1.6087e+08  eps = 7.90e-04  iters = 2    t
> ol = 1.0e-04                                                      
>               min(eta) =  -5.94      
Iteration 5:   deviance = 1.6086e+08  eps = 3.38e-06  iters = 2    t
> ol = 1.0e-04                                                      
>               min(eta) =  -6.50      
Iteration 6:   deviance = 1.6086e+08  eps = 5.80e-08  iters = 2    t
> ol = 1.0e-05                                                      
>               min(eta) =  -6.73   S  
Iteration 7:   deviance = 1.6086e+08  eps = 6.22e-10  iters = 2    t
> ol = 1.0e-07                                                      
>               min(eta) =  -6.76   S O
--------------------------------------------------------------------
> ----------------------------------------
(legend: p: exact partial-out   s: exact solver   h: step-halving   
> o: epsilon below tolerance)
Converged in 7 iterations and 18 HDFE sub-iterations (tol = 1.0e-08)

HDFE PPML regression                              No. of obs      = 
>    331,655
Absorbing 2 HDFE groups                           Residual df     = 
>     57,484
Statistics robust to heteroskedasticity           Wald chi2(8)    = 
>     369.69
Deviance             =  160864664.2               Prob > chi2     = 
>     0.0000
Log pseudolikelihood = -82077725.61               Pseudo R2       = 
>     0.9826

Number of clusters (flow_id)=     57,485
                           (Std. err. adjusted for 57,485 clusters i
> n flow_id)
--------------------------------------------------------------------
> ----------
             |               Robust
         agi | Coefficient  std. err.      z    P>|z|     [95% conf.
>  interval]
-------------+------------------------------------------------------
> ----------
1.out_mult~t |   .1613764   .0553811     2.91   0.004     .0528315  
>   .2699214
1.in_multn~t |  -.1838134   .0212845    -8.64   0.000    -.2255303  
>  -.1420964
     unemp_o |   .0423607   .0054837     7.72   0.000     .0316128  
>   .0531085
     unemp_d |  -.0442395   .0038193   -11.58   0.000    -.0517253  
>  -.0367538
       pop_o |  -2.80e-07   6.37e-08    -4.39   0.000    -4.05e-07  
>  -1.55e-07
       pop_d |   4.64e-07   7.73e-08     6.00   0.000     3.12e-07  
>   6.15e-07
per_capita~o |   8.22e-06   9.26e-07     8.88   0.000     6.41e-06  
>     .00001
per_capita~d |   1.41e-06   8.43e-07     1.67   0.095    -2.46e-07  
>   3.06e-06
       _cons |   9.822877   .1427415    68.82   0.000     9.543109  
>   10.10264
--------------------------------------------------------------------
> ----------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
        year |         7           1           6     |
     flow_id |     57485       57485           0    *|
-----------------------------------------------------+
* = FE nested within cluster; treated as redundant for DoF computati
> on
(dropped 10447 observations that are either singletons or separated 
> by a fixed effect)
Iteration 1:   deviance = 4.1413e+08  eps = .         iters = 4    t
> ol = 1.0e-04                                                      
>               min(eta) =  -3.29  P   
Iteration 2:   deviance = 1.7950e+08  eps = 1.31e+00  iters = 3    t
> ol = 1.0e-04                                                      
>               min(eta) =  -4.22      
Iteration 3:   deviance = 1.7046e+08  eps = 5.30e-02  iters = 3    t
> ol = 1.0e-04                                                      
>               min(eta) =  -5.14      
Iteration 4:   deviance = 1.7033e+08  eps = 7.55e-04  iters = 2    t
> ol = 1.0e-04                                                      
>               min(eta) =  -5.94      
Iteration 5:   deviance = 1.7033e+08  eps = 3.11e-06  iters = 2    t
> ol = 1.0e-04                                                      
>               min(eta) =  -6.50      
Iteration 6:   deviance = 1.7033e+08  eps = 5.48e-08  iters = 2    t
> ol = 1.0e-05                                                      
>               min(eta) =  -6.73   S  
Iteration 7:   deviance = 1.7033e+08  eps = 5.88e-10  iters = 2    t
> ol = 1.0e-07                                                      
>               min(eta) =  -6.76   S O
--------------------------------------------------------------------
> ----------------------------------------
(legend: p: exact partial-out   s: exact solver   h: step-halving   
> o: epsilon below tolerance)
Converged in 7 iterations and 18 HDFE sub-iterations (tol = 1.0e-08)

HDFE PPML regression                              No. of obs      = 
>    331,655
Absorbing 2 HDFE groups                           Residual df     = 
>     57,484
Statistics robust to heteroskedasticity           Wald chi2(2)    = 
>      83.73
Deviance             =  170331590.8               Prob > chi2     = 
>     0.0000
Log pseudolikelihood = -86811188.95               Pseudo R2       = 
>     0.9816

Number of clusters (flow_id)=     57,485
                           (Std. err. adjusted for 57,485 clusters i
> n flow_id)
--------------------------------------------------------------------
> ----------
             |               Robust
         agi | Coefficient  std. err.      z    P>|z|     [95% conf.
>  interval]
-------------+------------------------------------------------------
> ----------
1.out_mult~t |   .1691276   .0589561     2.87   0.004     .0535757  
>   .2846795
1.in_multn~t |  -.1838849     .02136    -8.61   0.000    -.2257498  
>    -.14202
       _cons |     10.648    .000114  9.3e+04   0.000     10.64778  
>   10.64822
--------------------------------------------------------------------
> ----------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
        year |         7           1           6     |
     flow_id |     57485       57485           0    *|
-----------------------------------------------------+
* = FE nested within cluster; treated as redundant for DoF computati
> on
file
    C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/f
    > ig_multnomah_post_agi.png saved as PNG format

. 
. ******************************************************************
> **************
. ** REGRESSION 2: Multnomah X Year (Event Study)
. ******************************************************************
> **************
. 
. ** Loop over outcome variables
. foreach outcome in n1 n2 agi {
  2. 
.         ** Set outcome label for graphs
.         if "`outcome'" == "n1" local outcome_label "Number of Retu
> rns"
  3.         if "`outcome'" == "n2" local outcome_label "Number of E
> xemptions"
  4.         if "`outcome'" == "agi" local outcome_label "Adjusted G
> ross Income"
  5. 
.         ** Regression 2a: With covariates
.         ppmlhdfe `outcome' x_out_* x_in_*                         
>                                       ///
>                 unemp_* pop_* per_capita_income_*                 
>                                       ///
>                 if mover == 1,                                    
>                                                       ///
>                 absorb(year flow_id) vce(cluster flow_id)
  6.         estimates store `outcome'_es_with_covars
  7. 
.         ** Regression 2b: Without covariates
.         ppmlhdfe `outcome' x_out_* x_in_*                         
>                                       ///
>                 if mover == 1,                                    
>                                                       ///
>                 absorb(year flow_id) vce(cluster flow_id)
  8.         estimates store `outcome'_es_no_covars
  9. 
.         ** Extract coefficients into a dataset and plot
.         preserve
 10.                 clear
 11.                 set obs 7
 12.                 gen year = 2015 + _n
 13. 
.                 ** Out-migration coefficients (with covariates)
.                 gen out_coef_wc = .
 14.                 gen out_ci_lo_wc = .
 15.                 gen out_ci_hi_wc = .
 16. 
.                 ** In-migration coefficients (with covariates)
.                 gen in_coef_wc = .
 17.                 gen in_ci_lo_wc = .
 18.                 gen in_ci_hi_wc = .
 19. 
.                 ** Out-migration coefficients (without covariates)
.                 gen out_coef_nc = .
 20.                 gen out_ci_lo_nc = .
 21.                 gen out_ci_hi_nc = .
 22. 
.                 ** In-migration coefficients (without covariates)
.                 gen in_coef_nc = .
 23.                 gen in_ci_lo_nc = .
 24.                 gen in_ci_hi_nc = .
 25. 
.                 ** Fill in coefficients (2020 = base year = 0)
.                 foreach y in 2016 2017 2018 2019 2021 2022 {
 26. 
.                         ** With covariates
.                         estimates restore `outcome'_es_with_covars
 27.                         replace out_coef_wc = _b[x_out_`y'] if 
> year == `y'
 28.                         replace out_ci_lo_wc = _b[x_out_`y'] - 
> 1.96 * _se[x_out_`y'] if year == `y'
 29.                         replace out_ci_hi_wc = _b[x_out_`y'] + 
> 1.96 * _se[x_out_`y'] if year == `y'
 30. 
.                         replace in_coef_wc = _b[x_in_`y'] if year 
> == `y'
 31.                         replace in_ci_lo_wc = _b[x_in_`y'] - 1.
> 96 * _se[x_in_`y'] if year == `y'
 32.                         replace in_ci_hi_wc = _b[x_in_`y'] + 1.
> 96 * _se[x_in_`y'] if year == `y'
 33. 
.                         ** Without covariates
.                         estimates restore `outcome'_es_no_covars
 34.                         replace out_coef_nc = _b[x_out_`y'] if 
> year == `y'
 35.                         replace out_ci_lo_nc = _b[x_out_`y'] - 
> 1.96 * _se[x_out_`y'] if year == `y'
 36.                         replace out_ci_hi_nc = _b[x_out_`y'] + 
> 1.96 * _se[x_out_`y'] if year == `y'
 37. 
.                         replace in_coef_nc = _b[x_in_`y'] if year 
> == `y'
 38.                         replace in_ci_lo_nc = _b[x_in_`y'] - 1.
> 96 * _se[x_in_`y'] if year == `y'
 39.                         replace in_ci_hi_nc = _b[x_in_`y'] + 1.
> 96 * _se[x_in_`y'] if year == `y'
 40.                 }
 41. 
.                 ** Base year (2020) = 0
.                 foreach v in out_coef_wc out_ci_lo_wc out_ci_hi_wc
>                       ///
>                                          in_coef_wc in_ci_lo_wc in
> _ci_hi_wc                     ///
>                                          out_coef_nc out_ci_lo_nc 
> out_ci_hi_nc                  ///
>                                          in_coef_nc in_ci_lo_nc in
> _ci_hi_nc {
 42.                         replace `v' = 0 if year == 2020
 43.                 }
 44. 
.                 ** Offset years slightly for visibility
.                 gen year_out = year - 0.1
 45.                 gen year_in = year + 0.1
 46. 
.                 ** Plot 1: Out-migration (with and without covaria
> tes)
.                 twoway  (rcap out_ci_lo_wc out_ci_hi_wc year_out, 
> lc(navy))                     ///
>                                 (connected out_coef_wc year_out, m
> c(navy) lc(navy) ms(O))               ///
>                                 (rcap out_ci_lo_nc out_ci_hi_nc ye
> ar_in, lc(maroon))                    ///
>                                 (connected out_coef_nc year_in, mc
> (maroon) lc(maroon) ms(T)),   ///
>                         yline(0, lc(gs10) lp(dash))               
>                                                               ///
>                         xline(2020.5, lc(black) lp(solid))        
>                                                               ///
>                         xlabel(2016(1)2022)                       
>                                                                   
>     ///
>                         ytitle("Coefficient (relative to 2020)")  
>                                                       ///
>                         xtitle("Year")                            
>                                                                   
>             ///
>                         legend(order(2 "With Covariates" 4 "Withou
> t Covariates")                        ///
>                                 pos(6) rows(1))                   
>                                                                   
>             ///
>                         title("Out-Migration from Multnomah County
> ")                                            ///
>                         subtitle("`outcome_label'")               
>                                                                   
>     ///
>                         graphregion(color(white))
 47. 
.                 graph export "${results}fig_multnomah_out_`outcome
> '.png", replace
 48. 
.                 ** Plot 2: In-migration (with and without covariat
> es)
.                 twoway  (rcap in_ci_lo_wc in_ci_hi_wc year_out, lc
> (navy))                               ///
>                                 (connected in_coef_wc year_out, mc
> (navy) lc(navy) ms(O))                ///
>                                 (rcap in_ci_lo_nc in_ci_hi_nc year
> _in, lc(maroon))                              ///
>                                 (connected in_coef_nc year_in, mc(
> maroon) lc(maroon) ms(T)),    ///
>                         yline(0, lc(gs10) lp(dash))               
>                                                               ///
>                         xline(2020.5, lc(black) lp(solid))        
>                                                               ///
>                         xlabel(2016(1)2022)                       
>                                                                   
>     ///
>                         ytitle("Coefficient (relative to 2020)")  
>                                                       ///
>                         xtitle("Year")                            
>                                                                   
>             ///
>                         legend(order(2 "With Covariates" 4 "Withou
> t Covariates")                        ///
>                                 pos(6) rows(1))                   
>                                                                   
>             ///
>                         title("In-Migration to Multnomah County") 
>                                                       ///
>                         subtitle("`outcome_label'")               
>                                                                   
>     ///
>                         graphregion(color(white))
 49. 
.                 graph export "${results}fig_multnomah_in_`outcome'
> .png", replace
 50. 
.                 ** Plot 3: Both flows (with covariates only, as in
>  original)
.                 twoway  (rcap out_ci_lo_wc out_ci_hi_wc year_out, 
> lc(navy))                             ///
>                                 (connected out_coef_wc year_out, m
> c(navy) lc(navy) ms(O))               ///
>                                 (rcap in_ci_lo_wc in_ci_hi_wc year
> _in, lc(maroon))                              ///
>                                 (connected in_coef_wc year_in, mc(
> maroon) lc(maroon) ms(T)),    ///
>                         yline(0, lc(gs10) lp(dash))               
>                                                               ///
>                         xline(2020.5, lc(black) lp(solid))        
>                                                               ///
>                         xlabel(2016(1)2022)                       
>                                                                   
>     ///
>                         ytitle("Coefficient (relative to 2020)")  
>                                                       ///
>                         xtitle("Year")                            
>                                                                   
>             ///
>                         legend(order(2 "Out-migration" 4 "In-migra
> tion")                                        ///
>                                 pos(6) rows(1))                   
>                                                                   
>             ///
>                         title("Migration Flows: Multnomah County")
>                                                       ///
>                         subtitle("`outcome_label'")               
>                                                                   
>     ///
>                         graphregion(color(white))
 51. 
.                 graph export "${results}fig_multnomah_both_`outcom
> e'.png", replace
 52. 
.         restore
 53. 
. } // END OUTCOME LOOP
(dropped 10447 observations that are either singletons or separated 
> by a fixed effect)
Iteration 1:   deviance = 2.8750e+06  eps = .         iters = 4    t
> ol = 1.0e-04                                                      
>               min(eta) =  -2.82  P   
Iteration 2:   deviance = 6.3143e+05  eps = 3.55e+00  iters = 3    t
> ol = 1.0e-04                                                      
>               min(eta) =  -3.25      
Iteration 3:   deviance = 5.8880e+05  eps = 7.24e-02  iters = 3    t
> ol = 1.0e-04                                                      
>               min(eta) =  -3.39      
Iteration 4:   deviance = 5.8875e+05  eps = 8.34e-05  iters = 2    t
> ol = 1.0e-04                                                      
>               min(eta) =  -3.40      
Iteration 5:   deviance = 5.8875e+05  eps = 5.95e-10  iters = 2    t
> ol = 1.0e-05                                                      
>               min(eta) =  -3.40      
Iteration 6:   deviance = 5.8875e+05  eps = 1.93e-16  iters = 1    t
> ol = 1.0e-06                                                      
>               min(eta) =  -3.40   S  
Iteration 7:   deviance = 5.8875e+05  eps = 1.93e-16  iters = 1    t
> ol = 1.0e-09                                                      
>               min(eta) =  -3.40   S O
--------------------------------------------------------------------
> ----------------------------------------
(legend: p: exact partial-out   s: exact solver   h: step-halving   
> o: epsilon below tolerance)
Converged in 7 iterations and 16 HDFE sub-iterations (tol = 1.0e-08)

HDFE PPML regression                              No. of obs      = 
>    331,655
Absorbing 2 HDFE groups                           Residual df     = 
>     57,484
Statistics robust to heteroskedasticity           Wald chi2(18)   = 
>    1369.29
Deviance             =  588750.1864               Prob > chi2     = 
>     0.0000
Log pseudolikelihood = -1266760.004               Pseudo R2       = 
>     0.9778

Number of clusters (flow_id)=     57,485
                           (Std. err. adjusted for 57,485 clusters i
> n flow_id)
--------------------------------------------------------------------
> ----------
             |               Robust
          n1 | Coefficient  std. err.      z    P>|z|     [95% conf.
>  interval]
-------------+------------------------------------------------------
> ----------
  x_out_2016 |   .0077922   .0263958     0.30   0.768    -.0439427  
>   .0595271
  x_out_2017 |    .078197   .0134486     5.81   0.000     .0518383  
>   .1045556
  x_out_2018 |   .0010925   .0126651     0.09   0.931    -.0237307  
>   .0259157
  x_out_2019 |  -.0124979   .0145334    -0.86   0.390    -.0409829  
>    .015987
  x_out_2021 |   .0528212   .0139452     3.79   0.000     .0254891  
>   .0801534
  x_out_2022 |   .0054972   .0268138     0.21   0.838    -.0470568  
>   .0580512
   x_in_2016 |   .0867557   .0192393     4.51   0.000     .0490474  
>   .1244641
   x_in_2017 |   .0339171   .0187846     1.81   0.071       -.0029  
>   .0707342
   x_in_2018 |   .0101895   .0126008     0.81   0.419    -.0145077  
>   .0348866
   x_in_2019 |   .0288109   .0121896     2.36   0.018     .0049198  
>   .0527021
   x_in_2021 |  -.0504132   .0153158    -3.29   0.001    -.0804316  
>  -.0203949
   x_in_2022 |  -.0390371   .0274721    -1.42   0.155    -.0928814  
>   .0148073
     unemp_o |   .0234832   .0009523    24.66   0.000     .0216166  
>   .0253497
     unemp_d |  -.0209885   .0009798   -21.42   0.000    -.0229089  
>  -.0190681
       pop_o |   6.38e-08   3.11e-08     2.05   0.040     2.82e-09  
>   1.25e-07
       pop_d |   3.63e-07   3.24e-08    11.21   0.000     3.00e-07  
>   4.27e-07
per_capita~o |   2.14e-06   3.64e-07     5.87   0.000     1.42e-06  
>   2.85e-06
per_capita~d |  -1.55e-06   2.83e-07    -5.48   0.000    -2.11e-06  
>  -9.99e-07
       _cons |   5.639644   .0535688   105.28   0.000     5.534651  
>   5.744637
--------------------------------------------------------------------
> ----------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
        year |         7           1           6     |
     flow_id |     57485       57485           0    *|
-----------------------------------------------------+
* = FE nested within cluster; treated as redundant for DoF computati
> on
(dropped 10447 observations that are either singletons or separated 
> by a fixed effect)
Iteration 1:   deviance = 2.8997e+06  eps = .         iters = 4    t
> ol = 1.0e-04                                                      
>               min(eta) =  -2.76  P   
Iteration 2:   deviance = 6.5448e+05  eps = 3.43e+00  iters = 3    t
> ol = 1.0e-04                                                      
>               min(eta) =  -3.22      
Iteration 3:   deviance = 6.1184e+05  eps = 6.97e-02  iters = 3    t
> ol = 1.0e-04                                                      
>               min(eta) =  -3.36      
Iteration 4:   deviance = 6.1179e+05  eps = 8.02e-05  iters = 2    t
> ol = 1.0e-04                                                      
>               min(eta) =  -3.37      
Iteration 5:   deviance = 6.1179e+05  eps = 5.70e-10  iters = 2    t
> ol = 1.0e-05                                                      
>               min(eta) =  -3.37      
Iteration 6:   deviance = 6.1179e+05  eps = 0.00e+00  iters = 1    t
> ol = 1.0e-06                                                      
>               min(eta) =  -3.37   S  
Iteration 7:   deviance = 6.1179e+05  eps = 0.00e+00  iters = 1    t
> ol = 1.0e-09                                                      
>               min(eta) =  -3.37   S O
--------------------------------------------------------------------
> ----------------------------------------
(legend: p: exact partial-out   s: exact solver   h: step-halving   
> o: epsilon below tolerance)
Converged in 7 iterations and 16 HDFE sub-iterations (tol = 1.0e-08)

HDFE PPML regression                              No. of obs      = 
>    331,655
Absorbing 2 HDFE groups                           Residual df     = 
>     57,484
Statistics robust to heteroskedasticity           Wald chi2(12)   = 
>     292.60
Deviance             =   611790.574               Prob > chi2     = 
>     0.0000
Log pseudolikelihood = -1278280.198               Pseudo R2       = 
>     0.9776

Number of clusters (flow_id)=     57,485
                           (Std. err. adjusted for 57,485 clusters i
> n flow_id)
--------------------------------------------------------------------
> ----------
             |               Robust
          n1 | Coefficient  std. err.      z    P>|z|     [95% conf.
>  interval]
-------------+------------------------------------------------------
> ----------
  x_out_2016 |  -.0207227   .0251516    -0.82   0.410    -.0700189  
>   .0285734
  x_out_2017 |   .0514417   .0139207     3.70   0.000     .0241575  
>   .0787258
  x_out_2018 |   -.021128   .0145344    -1.45   0.146    -.0496149  
>   .0073588
  x_out_2019 |  -.0355977   .0163706    -2.17   0.030    -.0676835  
>  -.0035119
  x_out_2021 |   .0427475   .0150927     2.83   0.005     .0131664  
>   .0723286
  x_out_2022 |  -.0103509   .0297355    -0.35   0.728    -.0686313  
>   .0479295
   x_in_2016 |   .1133658   .0169213     6.70   0.000     .0802007  
>    .146531
   x_in_2017 |   .0587878   .0183291     3.21   0.001     .0228634  
>   .0947122
   x_in_2018 |   .0297679   .0136095     2.19   0.029     .0030937  
>   .0564421
   x_in_2019 |   .0488322   .0129534     3.77   0.000      .023444  
>   .0742204
   x_in_2021 |  -.0419343   .0139285    -3.01   0.003    -.0692337  
>  -.0146349
   x_in_2022 |  -.0308355   .0237204    -1.30   0.194    -.0773267  
>   .0156557
       _cons |   6.165648    .000064  9.6e+04   0.000     6.165522  
>   6.165773
--------------------------------------------------------------------
> ----------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
        year |         7           1           6     |
     flow_id |     57485       57485           0    *|
-----------------------------------------------------+
* = FE nested within cluster; treated as redundant for DoF computati
> on
Number of observations (_N) was 0, now 7.
(7 missing values generated)
(7 missing values generated)
(7 missing values generated)
(7 missing values generated)
(7 missing values generated)
(7 missing values generated)
(7 missing values generated)
(7 missing values generated)
(7 missing values generated)
(7 missing values generated)
(7 missing values generated)
(7 missing values generated)
(results n1_es_with_covars are active now)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(results n1_es_no_covars are active now)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(results n1_es_with_covars are active now)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(results n1_es_no_covars are active now)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(results n1_es_with_covars are active now)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(results n1_es_no_covars are active now)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(results n1_es_with_covars are active now)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(results n1_es_no_covars are active now)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(results n1_es_with_covars are active now)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(results n1_es_no_covars are active now)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(results n1_es_with_covars are active now)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(results n1_es_no_covars are active now)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
file
    C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/f
    > ig_multnomah_out_n1.png saved as PNG format
file
    C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/f
    > ig_multnomah_in_n1.png saved as PNG format
(file
    C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/f
    > ig_multnomah_both_n1.png not found)
file
    C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/f
    > ig_multnomah_both_n1.png saved as PNG format
(dropped 10447 observations that are either singletons or separated 
> by a fixed effect)
Iteration 1:   deviance = 5.4779e+06  eps = .         iters = 4    t
> ol = 1.0e-04                                                      
>               min(eta) =  -2.91  P   
Iteration 2:   deviance = 1.4125e+06  eps = 2.88e+00  iters = 3    t
> ol = 1.0e-04                                                      
>               min(eta) =  -3.54      
Iteration 3:   deviance = 1.3300e+06  eps = 6.20e-02  iters = 3    t
> ol = 1.0e-04                                                      
>               min(eta) =  -3.81      
Iteration 4:   deviance = 1.3298e+06  eps = 1.14e-04  iters = 2    t
> ol = 1.0e-04                                                      
>               min(eta) =  -3.85      
Iteration 5:   deviance = 1.3298e+06  eps = 4.79e-09  iters = 1    t
> ol = 1.0e-04                                                      
>               min(eta) =  -3.85      
Iteration 6:   deviance = 1.3298e+06  eps = 1.64e-14  iters = 1    t
> ol = 1.0e-05                                                      
>               min(eta) =  -3.85   S  
Iteration 7:   deviance = 1.3298e+06  eps = 0.00e+00  iters = 2    t
> ol = 1.0e-09                                                      
>               min(eta) =  -3.85   S O
--------------------------------------------------------------------
> ----------------------------------------
(legend: p: exact partial-out   s: exact solver   h: step-halving   
> o: epsilon below tolerance)
Converged in 7 iterations and 16 HDFE sub-iterations (tol = 1.0e-08)

HDFE PPML regression                              No. of obs      = 
>    331,655
Absorbing 2 HDFE groups                           Residual df     = 
>     57,484
Statistics robust to heteroskedasticity           Wald chi2(18)   = 
>    1380.66
Deviance             =  1329800.732               Prob > chi2     = 
>     0.0000
Log pseudolikelihood = -1733404.744               Pseudo R2       = 
>     0.9830

Number of clusters (flow_id)=     57,485
                           (Std. err. adjusted for 57,485 clusters i
> n flow_id)
--------------------------------------------------------------------
> ----------
             |               Robust
          n2 | Coefficient  std. err.      z    P>|z|     [95% conf.
>  interval]
-------------+------------------------------------------------------
> ----------
  x_out_2016 |   .0411434   .0274745     1.50   0.134    -.0127056  
>   .0949924
  x_out_2017 |   .0971678   .0161089     6.03   0.000     .0655949  
>   .1287408
  x_out_2018 |   .0054287   .0136316     0.40   0.690    -.0212887  
>   .0321462
  x_out_2019 |  -.0150577   .0178773    -0.84   0.400    -.0500966  
>   .0199811
  x_out_2021 |   .0711657   .0125455     5.67   0.000     .0465769  
>   .0957545
  x_out_2022 |   .0177255   .0236654     0.75   0.454    -.0286578  
>   .0641089
   x_in_2016 |   .1040875   .0203277     5.12   0.000      .064246  
>   .1439291
   x_in_2017 |   .0401574   .0159455     2.52   0.012     .0089047  
>     .07141
   x_in_2018 |    .025335   .0133579     1.90   0.058     -.000846  
>    .051516
   x_in_2019 |   .0410372   .0114538     3.58   0.000     .0185883  
>   .0634862
   x_in_2021 |  -.0404705   .0162094    -2.50   0.013    -.0722403  
>  -.0087006
   x_in_2022 |  -.0238473   .0266927    -0.89   0.372     -.076164  
>   .0284693
     unemp_o |   .0221362    .000997    22.20   0.000      .020182  
>   .0240904
     unemp_d |  -.0230047   .0010524   -21.86   0.000    -.0250674  
>   -.020942
       pop_o |   5.15e-08   3.16e-08     1.63   0.103    -1.04e-08  
>   1.13e-07
       pop_d |   3.62e-07   3.00e-08    12.05   0.000     3.03e-07  
>   4.20e-07
per_capita~o |   2.55e-06   3.77e-07     6.77   0.000     1.81e-06  
>   3.29e-06
per_capita~d |  -2.00e-06   3.04e-07    -6.60   0.000    -2.60e-06  
>  -1.41e-06
       _cons |   6.279335    .053955   116.38   0.000     6.173585  
>   6.385084
--------------------------------------------------------------------
> ----------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
        year |         7           1           6     |
     flow_id |     57485       57485           0    *|
-----------------------------------------------------+
* = FE nested within cluster; treated as redundant for DoF computati
> on
(dropped 10447 observations that are either singletons or separated 
> by a fixed effect)
Iteration 1:   deviance = 5.5224e+06  eps = .         iters = 4    t
> ol = 1.0e-04                                                      
>               min(eta) =  -2.89  P   
Iteration 2:   deviance = 1.4545e+06  eps = 2.80e+00  iters = 3    t
> ol = 1.0e-04                                                      
>               min(eta) =  -3.50      
Iteration 3:   deviance = 1.3720e+06  eps = 6.01e-02  iters = 3    t
> ol = 1.0e-04                                                      
>               min(eta) =  -3.76      
Iteration 4:   deviance = 1.3719e+06  eps = 1.11e-04  iters = 2    t
> ol = 1.0e-04                                                      
>               min(eta) =  -3.80      
Iteration 5:   deviance = 1.3719e+06  eps = 4.60e-09  iters = 1    t
> ol = 1.0e-04                                                      
>               min(eta) =  -3.80      
Iteration 6:   deviance = 1.3719e+06  eps = 1.59e-14  iters = 1    t
> ol = 1.0e-05                                                      
>               min(eta) =  -3.80   S  
Iteration 7:   deviance = 1.3719e+06  eps = 1.50e-16  iters = 2    t
> ol = 1.0e-09                                                      
>               min(eta) =  -3.80   S O
--------------------------------------------------------------------
> ----------------------------------------
(legend: p: exact partial-out   s: exact solver   h: step-halving   
> o: epsilon below tolerance)
Converged in 7 iterations and 16 HDFE sub-iterations (tol = 1.0e-08)

HDFE PPML regression                              No. of obs      = 
>    331,655
Absorbing 2 HDFE groups                           Residual df     = 
>     57,484
Statistics robust to heteroskedasticity           Wald chi2(12)   = 
>     310.12
Deviance             =  1371865.239               Prob > chi2     = 
>     0.0000
Log pseudolikelihood = -1754436.998               Pseudo R2       = 
>     0.9828

Number of clusters (flow_id)=     57,485
                           (Std. err. adjusted for 57,485 clusters i
> n flow_id)
--------------------------------------------------------------------
> ----------
             |               Robust
          n2 | Coefficient  std. err.      z    P>|z|     [95% conf.
>  interval]
-------------+------------------------------------------------------
> ----------
  x_out_2016 |   .0124671   .0247094     0.50   0.614    -.0359624  
>   .0608965
  x_out_2017 |   .0712384   .0145931     4.88   0.000     .0426364  
>   .0998404
  x_out_2018 |  -.0174078   .0139605    -1.25   0.212    -.0447699  
>   .0099543
  x_out_2019 |  -.0386172   .0183871    -2.10   0.036    -.0746552  
>  -.0025792
  x_out_2021 |   .0610758    .013507     4.52   0.000     .0346025  
>    .087549
  x_out_2022 |   .0006962   .0267529     0.03   0.979    -.0517385  
>    .053131
   x_in_2016 |   .1350954   .0178189     7.58   0.000     .1001709  
>   .1700199
   x_in_2017 |   .0694252   .0153947     4.51   0.000     .0392521  
>   .0995983
   x_in_2018 |    .048123    .015017     3.20   0.001     .0186902  
>   .0775557
   x_in_2019 |   .0642632   .0130424     4.93   0.000     .0387007  
>   .0898258
   x_in_2021 |  -.0315087   .0150406    -2.09   0.036    -.0609878  
>  -.0020296
   x_in_2022 |  -.0147227    .023039    -0.64   0.523    -.0598784  
>   .0304329
       _cons |   6.749325   .0000521  1.3e+05   0.000     6.749223  
>   6.749427
--------------------------------------------------------------------
> ----------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
        year |         7           1           6     |
     flow_id |     57485       57485           0    *|
-----------------------------------------------------+
* = FE nested within cluster; treated as redundant for DoF computati
> on
Number of observations (_N) was 0, now 7.
(7 missing values generated)
(7 missing values generated)
(7 missing values generated)
(7 missing values generated)
(7 missing values generated)
(7 missing values generated)
(7 missing values generated)
(7 missing values generated)
(7 missing values generated)
(7 missing values generated)
(7 missing values generated)
(7 missing values generated)
(results n2_es_with_covars are active now)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(results n2_es_no_covars are active now)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(results n2_es_with_covars are active now)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(results n2_es_no_covars are active now)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(results n2_es_with_covars are active now)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(results n2_es_no_covars are active now)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(results n2_es_with_covars are active now)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(results n2_es_no_covars are active now)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(results n2_es_with_covars are active now)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(results n2_es_no_covars are active now)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(results n2_es_with_covars are active now)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(results n2_es_no_covars are active now)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
file
    C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/f
    > ig_multnomah_out_n2.png saved as PNG format
file
    C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/f
    > ig_multnomah_in_n2.png saved as PNG format
(file
    C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/f
    > ig_multnomah_both_n2.png not found)
file
    C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/f
    > ig_multnomah_both_n2.png saved as PNG format
(dropped 10447 observations that are either singletons or separated 
> by a fixed effect)
Iteration 1:   deviance = 4.0051e+08  eps = .         iters = 4    t
> ol = 1.0e-04                                                      
>               min(eta) =  -3.59  P   
Iteration 2:   deviance = 1.6973e+08  eps = 1.36e+00  iters = 3    t
> ol = 1.0e-04                                                      
>               min(eta) =  -4.22      
Iteration 3:   deviance = 1.6097e+08  eps = 5.44e-02  iters = 3    t
> ol = 1.0e-04                                                      
>               min(eta) =  -5.14      
Iteration 4:   deviance = 1.6084e+08  eps = 7.90e-04  iters = 2    t
> ol = 1.0e-04                                                      
>               min(eta) =  -5.94      
Iteration 5:   deviance = 1.6084e+08  eps = 3.38e-06  iters = 2    t
> ol = 1.0e-04                                                      
>               min(eta) =  -6.50      
Iteration 6:   deviance = 1.6084e+08  eps = 5.80e-08  iters = 2    t
> ol = 1.0e-05                                                      
>               min(eta) =  -6.73   S  
Iteration 7:   deviance = 1.6084e+08  eps = 6.22e-10  iters = 2    t
> ol = 1.0e-07                                                      
>               min(eta) =  -6.76   S O
--------------------------------------------------------------------
> ----------------------------------------
(legend: p: exact partial-out   s: exact solver   h: step-halving   
> o: epsilon below tolerance)
Converged in 7 iterations and 18 HDFE sub-iterations (tol = 1.0e-08)

HDFE PPML regression                              No. of obs      = 
>    331,655
Absorbing 2 HDFE groups                           Residual df     = 
>     57,484
Statistics robust to heteroskedasticity           Wald chi2(18)   = 
>     555.94
Deviance             =  160838134.5               Prob > chi2     = 
>     0.0000
Log pseudolikelihood = -82064460.77               Pseudo R2       = 
>     0.9826

Number of clusters (flow_id)=     57,485
                           (Std. err. adjusted for 57,485 clusters i
> n flow_id)
--------------------------------------------------------------------
> ----------
             |               Robust
         agi | Coefficient  std. err.      z    P>|z|     [95% conf.
>  interval]
-------------+------------------------------------------------------
> ----------
  x_out_2016 |  -.0793981   .0751445    -1.06   0.291    -.2266786  
>   .0678825
  x_out_2017 |   .0432722   .0553985     0.78   0.435     -.065307  
>   .1518513
  x_out_2018 |  -.0030317   .0695915    -0.04   0.965    -.1394286  
>   .1333652
  x_out_2019 |   .0206898   .0479097     0.43   0.666    -.0732114  
>    .114591
  x_out_2021 |   .1602645   .0253912     6.31   0.000     .1104987  
>   .2100304
  x_out_2022 |   .1649861     .05136     3.21   0.001     .0643222  
>   .2656499
   x_in_2016 |    .115614   .0266841     4.33   0.000     .0633142  
>   .1679138
   x_in_2017 |    .054514   .0317076     1.72   0.086    -.0076318  
>   .1166597
   x_in_2018 |   .0203735   .0341646     0.60   0.551    -.0465879  
>    .087335
   x_in_2019 |   .0596929    .028621     2.09   0.037     .0035968  
>   .1157891
   x_in_2021 |  -.1288232   .0318561    -4.04   0.000      -.19126  
>  -.0663863
   x_in_2022 |   -.141886   .0382333    -3.71   0.000     -.216822  
>  -.0669501
     unemp_o |   .0423254   .0054902     7.71   0.000     .0315647  
>   .0530861
     unemp_d |   -.044156   .0038263   -11.54   0.000    -.0516555  
>  -.0366565
       pop_o |  -2.80e-07   6.37e-08    -4.39   0.000    -4.05e-07  
>  -1.55e-07
       pop_d |   4.64e-07   7.73e-08     6.00   0.000     3.12e-07  
>   6.15e-07
per_capita~o |   8.23e-06   9.26e-07     8.89   0.000     6.41e-06  
>     .00001
per_capita~d |   1.41e-06   8.43e-07     1.67   0.095    -2.46e-07  
>   3.06e-06
       _cons |   9.822058    .142746    68.81   0.000     9.542281  
>   10.10183
--------------------------------------------------------------------
> ----------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
        year |         7           1           6     |
     flow_id |     57485       57485           0    *|
-----------------------------------------------------+
* = FE nested within cluster; treated as redundant for DoF computati
> on
(dropped 10447 observations that are either singletons or separated 
> by a fixed effect)
Iteration 1:   deviance = 4.1408e+08  eps = .         iters = 4    t
> ol = 1.0e-04                                                      
>               min(eta) =  -3.33  P   
Iteration 2:   deviance = 1.7946e+08  eps = 1.31e+00  iters = 3    t
> ol = 1.0e-04                                                      
>               min(eta) =  -4.22      
Iteration 3:   deviance = 1.7042e+08  eps = 5.30e-02  iters = 3    t
> ol = 1.0e-04                                                      
>               min(eta) =  -5.14      
Iteration 4:   deviance = 1.7029e+08  eps = 7.55e-04  iters = 2    t
> ol = 1.0e-04                                                      
>               min(eta) =  -5.94      
Iteration 5:   deviance = 1.7029e+08  eps = 3.11e-06  iters = 2    t
> ol = 1.0e-04                                                      
>               min(eta) =  -6.50      
Iteration 6:   deviance = 1.7029e+08  eps = 5.48e-08  iters = 2    t
> ol = 1.0e-05                                                      
>               min(eta) =  -6.73   S  
Iteration 7:   deviance = 1.7029e+08  eps = 5.88e-10  iters = 2    t
> ol = 1.0e-07                                                      
>               min(eta) =  -6.76   S O
--------------------------------------------------------------------
> ----------------------------------------
(legend: p: exact partial-out   s: exact solver   h: step-halving   
> o: epsilon below tolerance)
Converged in 7 iterations and 18 HDFE sub-iterations (tol = 1.0e-08)

HDFE PPML regression                              No. of obs      = 
>    331,655
Absorbing 2 HDFE groups                           Residual df     = 
>     57,484
Statistics robust to heteroskedasticity           Wald chi2(12)   = 
>     225.66
Deviance             =  170292619.8               Prob > chi2     = 
>     0.0000
Log pseudolikelihood = -86791703.41               Pseudo R2       = 
>     0.9816

Number of clusters (flow_id)=     57,485
                           (Std. err. adjusted for 57,485 clusters i
> n flow_id)
--------------------------------------------------------------------
> ----------
             |               Robust
         agi | Coefficient  std. err.      z    P>|z|     [95% conf.
>  interval]
-------------+------------------------------------------------------
> ----------
  x_out_2016 |  -.1365848   .0719544    -1.90   0.058    -.2776129  
>   .0044433
  x_out_2017 |  -.0100139   .0529181    -0.19   0.850    -.1137315  
>   .0937037
  x_out_2018 |  -.0457715   .0657346    -0.70   0.486    -.1746091  
>    .083066
  x_out_2019 |  -.0224142   .0481263    -0.47   0.641      -.11674  
>   .0719117
  x_out_2021 |   .1329048   .0280093     4.75   0.000     .0780075  
>   .1878021
  x_out_2022 |   .1326738   .0570336     2.33   0.020     .0208899  
>   .2444577
   x_in_2016 |    .145421   .0276229     5.26   0.000      .091281  
>   .1995609
   x_in_2017 |   .0854908   .0351823     2.43   0.015     .0165347  
>   .1544469
   x_in_2018 |   .0447531   .0380788     1.18   0.240    -.0298801  
>   .1193862
   x_in_2019 |   .0868904   .0320241     2.71   0.007     .0241242  
>   .1496565
   x_in_2021 |  -.1045955   .0305042    -3.43   0.001    -.1643825  
>  -.0448085
   x_in_2022 |   -.121919   .0337755    -3.61   0.000    -.1881178  
>  -.0557201
       _cons |   10.64789    .000167  6.4e+04   0.000     10.64756  
>   10.64822
--------------------------------------------------------------------
> ----------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
        year |         7           1           6     |
     flow_id |     57485       57485           0    *|
-----------------------------------------------------+
* = FE nested within cluster; treated as redundant for DoF computati
> on
Number of observations (_N) was 0, now 7.
(7 missing values generated)
(7 missing values generated)
(7 missing values generated)
(7 missing values generated)
(7 missing values generated)
(7 missing values generated)
(7 missing values generated)
(7 missing values generated)
(7 missing values generated)
(7 missing values generated)
(7 missing values generated)
(7 missing values generated)
(results agi_es_with_covars are active now)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(results agi_es_no_covars are active now)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(results agi_es_with_covars are active now)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(results agi_es_no_covars are active now)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(results agi_es_with_covars are active now)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(results agi_es_no_covars are active now)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(results agi_es_with_covars are active now)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(results agi_es_no_covars are active now)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(results agi_es_with_covars are active now)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(results agi_es_no_covars are active now)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(results agi_es_with_covars are active now)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(results agi_es_no_covars are active now)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
file
    C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/f
    > ig_multnomah_out_agi.png saved as PNG format
file
    C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/f
    > ig_multnomah_in_agi.png saved as PNG format
(file
    C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/f
    > ig_multnomah_both_agi.png not found)
file
    C:/Users/ji252/Documents/GitHub/multnomah-county-tax/results/f
    > ig_multnomah_both_agi.png saved as PNG format

. 
. 
. ** Close log
. clear

. log close log_02
      name:  log_02
       log:  C:/Users/ji252/Documents/GitHub/multnomah-county-tax/co
> de/logs/02_log_flow_2026-01-11.log
  log type:  text
 closed on:  11 Jan 2026, 18:08:27
--------------------------------------------------------------------
